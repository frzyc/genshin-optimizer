import{r as u,br as E,bs as U,bt as K,bu as F,bv as k,j as D,bw as H,bx as P,by as V,bz as I,bA as j,c as st,bB as nt,t as ot,v as it,w as lt,g as ct,a as me,a6 as fe,x as ve,bC as Re,bD as ue,bE as O,aK as xe,e as b,f as w,N as q,d as e,bF as X,bd as Y,aT as A,aB as _,be as Z,bm as we,bG as Te,W,bH as ke,bI as Me,ak as he,S as z,J as dt,K as pt,bJ as Ce,bK as ze,aE as ut,L as ht,am as He,an as je,bL as bt,bM as Ee,G as C,h as ee,ao as Ue,T as N,bN as yt,bO as gt,b0 as Ke,E as ne,bP as mt,bQ as se,aJ as Fe,X as de,b as Ve,ah as qe,bR as ft,U as vt,F as B,bS as Ge,bT as xt,bU as Je,bV as wt,bW as Tt,bX as Ct,bY as St,bZ as ae,b_ as Rt,b$ as kt,c0 as Mt,c1 as be,c2 as Qe,c3 as Xe,c4 as Ye,c5 as oe,c6 as ge,b6 as $t,c7 as Lt,c8 as $e,c9 as Dt,ca as Ot,cb as Nt,O as Bt,cc as It,M as Wt,cd as At,ce as re,cf as _t,Y as Pt,V as zt}from"./index-C1aBjdKa.js";import{P as Ht}from"./People-D_qqpC_9.js";const Ze=u.createContext();function jt(t){return E("MuiTable",t)}U("MuiTable",["root","stickyHeader"]);const Et=["className","component","padding","size","stickyHeader"],Ut=t=>{const{classes:a,stickyHeader:o}=t;return V({root:["root",o&&"stickyHeader"]},jt,a)},Kt=H("table",{name:"MuiTable",slot:"Root",overridesResolver:(t,a)=>{const{ownerState:o}=t;return[a.root,o.stickyHeader&&a.stickyHeader]}})(({theme:t,ownerState:a})=>k({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":k({},t.typography.body2,{padding:t.spacing(2),color:(t.vars||t).palette.text.secondary,textAlign:"left",captionSide:"bottom"})},a.stickyHeader&&{borderCollapse:"separate"})),Le="table",ie=u.forwardRef(function(a,o){const n=K({props:a,name:"MuiTable"}),{className:p,component:l=Le,padding:h="normal",size:r="medium",stickyHeader:c=!1}=n,y=F(n,Et),g=k({},n,{component:l,padding:h,size:r,stickyHeader:c}),f=Ut(g),R=u.useMemo(()=>({padding:h,size:r,stickyHeader:c}),[h,r,c]);return D.jsx(Ze.Provider,{value:R,children:D.jsx(Kt,k({as:l,role:l===Le?null:"table",ref:o,className:P(f.root,p),ownerState:g},y))})}),pe=u.createContext();function Ft(t){return E("MuiTableBody",t)}U("MuiTableBody",["root"]);const Vt=["className","component"],qt=t=>{const{classes:a}=t;return V({root:["root"]},Ft,a)},Gt=H("tbody",{name:"MuiTableBody",slot:"Root",overridesResolver:(t,a)=>a.root})({display:"table-row-group"}),Jt={variant:"body"},De="tbody",le=u.forwardRef(function(a,o){const n=K({props:a,name:"MuiTableBody"}),{className:p,component:l=De}=n,h=F(n,Vt),r=k({},n,{component:l}),c=qt(r);return D.jsx(pe.Provider,{value:Jt,children:D.jsx(Gt,k({className:P(c.root,p),as:l,ref:o,role:l===De?null:"rowgroup",ownerState:r},h))})});function Qt(t){return E("MuiTableCell",t)}const Xt=U("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),Yt=["align","className","component","padding","scope","size","sortDirection","variant"],Zt=t=>{const{classes:a,variant:o,align:n,padding:p,size:l,stickyHeader:h}=t,r={root:["root",o,h&&"stickyHeader",n!=="inherit"&&`align${I(n)}`,p!=="normal"&&`padding${I(p)}`,`size${I(l)}`]};return V(r,Qt,a)},ea=H("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(t,a)=>{const{ownerState:o}=t;return[a.root,a[o.variant],a[`size${I(o.size)}`],o.padding!=="normal"&&a[`padding${I(o.padding)}`],o.align!=="inherit"&&a[`align${I(o.align)}`],o.stickyHeader&&a.stickyHeader]}})(({theme:t,ownerState:a})=>k({},t.typography.body2,{display:"table-cell",verticalAlign:"inherit",borderBottom:t.vars?`1px solid ${t.vars.palette.TableCell.border}`:`1px solid
    ${t.palette.mode==="light"?j.lighten(j.alpha(t.palette.divider,1),.88):j.darken(j.alpha(t.palette.divider,1),.68)}`,textAlign:"left",padding:16},a.variant==="head"&&{color:(t.vars||t).palette.text.primary,lineHeight:t.typography.pxToRem(24),fontWeight:t.typography.fontWeightMedium},a.variant==="body"&&{color:(t.vars||t).palette.text.primary},a.variant==="footer"&&{color:(t.vars||t).palette.text.secondary,lineHeight:t.typography.pxToRem(21),fontSize:t.typography.pxToRem(12)},a.size==="small"&&{padding:"6px 16px",[`&.${Xt.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}},a.padding==="checkbox"&&{width:48,padding:"0 0 0 4px"},a.padding==="none"&&{padding:0},a.align==="left"&&{textAlign:"left"},a.align==="center"&&{textAlign:"center"},a.align==="right"&&{textAlign:"right",flexDirection:"row-reverse"},a.align==="justify"&&{textAlign:"justify"},a.stickyHeader&&{position:"sticky",top:0,zIndex:2,backgroundColor:(t.vars||t).palette.background.default})),v=u.forwardRef(function(a,o){const n=K({props:a,name:"MuiTableCell"}),{align:p="inherit",className:l,component:h,padding:r,scope:c,size:y,sortDirection:g,variant:f}=n,R=F(n,Yt),T=u.useContext(Ze),x=u.useContext(pe),d=x&&x.variant==="head";let S;h?S=h:S=d?"th":"td";let i=c;S==="td"?i=void 0:!i&&d&&(i="col");const s=f||x&&x.variant,m=k({},n,{align:p,component:S,padding:r||(T&&T.padding?T.padding:"normal"),size:y||(T&&T.size?T.size:"medium"),sortDirection:g,stickyHeader:s==="head"&&T&&T.stickyHeader,variant:s}),M=Zt(m);let L=null;return g&&(L=g==="asc"?"ascending":"descending"),D.jsx(ea,k({as:S,ref:o,className:P(M.root,l),"aria-sort":L,scope:i,ownerState:m},R))});function ta(t){return E("MuiTableHead",t)}U("MuiTableHead",["root"]);const aa=["className","component"],ra=t=>{const{classes:a}=t;return V({root:["root"]},ta,a)},sa=H("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(t,a)=>a.root})({display:"table-header-group"}),na={variant:"head"},Oe="thead",ce=u.forwardRef(function(a,o){const n=K({props:a,name:"MuiTableHead"}),{className:p,component:l=Oe}=n,h=F(n,aa),r=k({},n,{component:l}),c=ra(r);return D.jsx(pe.Provider,{value:na,children:D.jsx(sa,k({as:l,className:P(c.root,p),ref:o,role:l===Oe?null:"rowgroup",ownerState:r},h))})});function oa(t){return E("MuiTableRow",t)}const Ne=U("MuiTableRow",["root","selected","hover","head","footer"]),ia=["className","component","hover","selected"],la=t=>{const{classes:a,selected:o,hover:n,head:p,footer:l}=t;return V({root:["root",o&&"selected",n&&"hover",p&&"head",l&&"footer"]},oa,a)},ca=H("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(t,a)=>{const{ownerState:o}=t;return[a.root,o.head&&a.head,o.footer&&a.footer]}})(({theme:t})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${Ne.hover}:hover`]:{backgroundColor:(t.vars||t).palette.action.hover},[`&.${Ne.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:j.alpha(t.palette.primary.main,t.palette.action.selectedOpacity),"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:j.alpha(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity)}}})),Be="tr",$=u.forwardRef(function(a,o){const n=K({props:a,name:"MuiTableRow"}),{className:p,component:l=Be,hover:h=!1,selected:r=!1}=n,c=F(n,ia),y=u.useContext(pe),g=k({},n,{component:l,hover:h,selected:r,head:y&&y.variant==="head",footer:y&&y.variant==="footer"}),f=la(g);return D.jsx(ca,k({as:l,ref:o,className:P(f.root,p),role:l===Be?null:"row",ownerState:g},c))}),da=st(D.jsx("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownward");function pa(t){return E("MuiTableSortLabel",t)}const ye=U("MuiTableSortLabel",["root","active","icon","iconDirectionDesc","iconDirectionAsc"]),ua=["active","children","className","direction","hideSortIcon","IconComponent"],ha=t=>{const{classes:a,direction:o,active:n}=t,p={root:["root",n&&"active"],icon:["icon",`iconDirection${I(o)}`]};return V(p,pa,a)},ba=H(nt,{name:"MuiTableSortLabel",slot:"Root",overridesResolver:(t,a)=>{const{ownerState:o}=t;return[a.root,o.active&&a.active]}})(({theme:t})=>({cursor:"pointer",display:"inline-flex",justifyContent:"flex-start",flexDirection:"inherit",alignItems:"center","&:focus":{color:(t.vars||t).palette.text.secondary},"&:hover":{color:(t.vars||t).palette.text.secondary,[`& .${ye.icon}`]:{opacity:.5}},[`&.${ye.active}`]:{color:(t.vars||t).palette.text.primary,[`& .${ye.icon}`]:{opacity:1,color:(t.vars||t).palette.text.secondary}}})),ya=H("span",{name:"MuiTableSortLabel",slot:"Icon",overridesResolver:(t,a)=>{const{ownerState:o}=t;return[a.icon,a[`iconDirection${I(o.direction)}`]]}})(({theme:t,ownerState:a})=>k({fontSize:18,marginRight:4,marginLeft:4,opacity:0,transition:t.transitions.create(["opacity","transform"],{duration:t.transitions.duration.shorter}),userSelect:"none"},a.direction==="desc"&&{transform:"rotate(0deg)"},a.direction==="asc"&&{transform:"rotate(180deg)"})),et=u.forwardRef(function(a,o){const n=K({props:a,name:"MuiTableSortLabel"}),{active:p=!1,children:l,className:h,direction:r="asc",hideSortIcon:c=!1,IconComponent:y=da}=n,g=F(n,ua),f=k({},n,{active:p,direction:r,hideSortIcon:c,IconComponent:y}),R=ha(f);return D.jsxs(ba,k({className:P(R.root,h),component:"span",disableRipple:!0,ownerState:f,ref:o},g,{children:[l,c&&!p?null:D.jsx(ya,{as:y,className:P(R.icon),ownerState:f})]}))});var G={},Ie;function ga(){if(Ie)return G;Ie=1;var t=ot();Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var a=t(it()),o=lt(),n=(0,a.default)((0,o.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"Search");return G.default=n,G}var ma=ga();const Se=ct(ma),We=[5,4,3];function fa(){const t=me(),a=fe(t.displayArchive),[o,n]=u.useState(""),p=u.useDeferredValue(o),l=Z([...We]),{t:h}=ve(Re.map(d=>`artifact_${d}_gen`)),{artifact:r}=a,c=u.useCallback(d=>t.displayArchive.set({artifact:{...r,...d}}),[t,r]),y=u.useMemo(()=>Re.filter(d=>{const{rarities:S}=ue(d);if(!r.rarity.includes(Math.max(...S)))return!1;const i=O.t(`artifactNames_gen:${d}`).toLocaleLowerCase(),s=h("setEffects.4",{ns:`artifact_${d}_gen`}).toLocaleLowerCase(),m=h("setEffects.2",{ns:`artifact_${d}_gen`}).toLocaleLowerCase();return!(p&&!i.includes(p.toLocaleLowerCase())&&!m.includes(p.toLocaleLowerCase())&&!s.includes(p.toLocaleLowerCase()))}),[r,p,h]),g=u.useMemo(()=>y.filter(d=>!d.startsWith("Prayers")),[y]),f=u.useMemo(()=>y.filter(d=>d.startsWith("Prayers")),[y]),{numShow:R,setTriggerElement:T}=xe(10,g.length),x=u.useMemo(()=>g.slice(0,R),[g,R]);return b(w,{children:[b(q,{sx:{display:"flex",gap:2},children:[e(X,{value:r.rarity,children:We.map(d=>e(Y,{value:d,onClick:()=>c({rarity:l(r.rarity,d)}),children:e(A,{color:`rarity${d}`,children:e(_,{sx:{verticalAlign:"text-top"}})})},d))}),e(we,{fullWidth:!0,variant:"outlined",value:o,onChange:d=>n(d.target.value),InputProps:{startAdornment:e(Te,{position:"start",children:e(Se,{})})}})]}),b(ie,{children:[e(ce,{children:b($,{children:[e(v,{children:"Set"}),e(v,{children:"Rarity"}),e(v,{children:"2-piece Bonus"}),e(v,{children:"4-piece Bonus"})]})}),b(le,{children:[x.map(d=>{const{rarities:S}=ue(d);return e(u.Suspense,{fallback:e($,{children:e(v,{colSpan:4,children:e(z,{sx:{borderRadius:1},variant:"rectangular",width:"100%",height:50})})}),children:b($,{children:[e(v,{children:b(w,{sx:{display:"flex",alignItems:"center"},children:[e(W,{size:4,src:ke(d)}),e(Me,{setKey:d})]})}),e(v,{children:e(w,{display:"flex",children:S.sort().reverse().map(i=>e(A,{color:`rarity${i}`,children:e(_,{})},i))})}),e(v,{children:e(he,{ns:`artifact_${d}_gen`,key18:"setEffects.2"})}),e(v,{children:e(he,{ns:`artifact_${d}_gen`,key18:"setEffects.4"})})]},d)})}),g.length!==x.length&&e($,{children:e(v,{colSpan:4,children:e(z,{ref:d=>{d&&T(d)},sx:{borderRadius:1},variant:"rectangular",width:"100%",height:50})})})]})]}),f.length!==0&&b(ie,{sx:{mt:2},children:[e(ce,{children:b($,{children:[e(v,{children:"Set"}),e(v,{children:"Rarity"}),e(v,{children:"1-piece Bonus"})]})}),e(le,{children:f.map(d=>{const{rarities:S}=ue(d);return b($,{children:[e(v,{children:b(w,{sx:{display:"flex",alignItems:"center"},children:[e(W,{size:4,src:ke(d)}),e(Me,{setKey:d})]})}),e(v,{children:e(w,{display:"flex",children:S.sort().reverse().map(i=>e(A,{color:`rarity${i}`,children:e(_,{})},i))})}),e(v,{width:"90%",children:e(he,{ns:`artifact_${d}_gen`,key18:"setEffects.1"})})]},d)})})]})]})}const J={xs:12,sm:6,md:4};function va({show:t,character:a,onClose:o}){const{t:n}=ve("sheet_gen"),p=dt(),l=pt(p.breakpoints.up("lg")),{key:h,constellation:r,ascension:c}=a,{gender:y}=Ce(),g=ze(h,y),f=[["auto",n("talents.auto")],["skill",n("talents.skill")],["burst",n("talents.burst")]],R=[["passive1",n("unlockPassive1"),1],["passive2",n("unlockPassive2"),4],["passive3",n("unlockPassive3"),0]],T=u.useMemo(()=>ut(1,gt).map(x=>e(Q,{characterKey:h,talentKey:`constellation${x}`,subtitle:n("constellationLvl",{level:x})})),[n,h]);return e(Ue,{open:t,onClose:o,containerProps:{maxWidth:"xl"},children:b(ee,{children:[e(ht,{title:b(w,{children:[e(bt,{characterKey:h,sideMargin:!0}),e(w,{sx:{pl:1},component:"span",children:e(Ee,{characterKey:h,gender:y})})]}),action:e(He,{onClick:o,children:e(je,{})})}),e(q,{children:b(C,{container:!0,spacing:1,children:[l&&e(C,{item:!0,xs:12,md:12,lg:3,sx:{display:"flex",flexDirection:"column",gap:1},children:T.map((x,d)=>e(w,{sx:{opacity:r>=d+1?1:.5},children:x},d))}),b(C,{item:!0,xs:12,md:12,lg:9,container:!0,spacing:1,children:[f.map(([x,d])=>e(C,{item:!0,...J,children:e(Q,{characterKey:h,talentKey:x,subtitle:d})},x)),!!g.getTalentOfKey("sprint")&&e(C,{item:!0,...J,children:e(Q,{characterKey:h,talentKey:"sprint",subtitle:n("talents.altSprint")})}),!!g.getTalentOfKey("passive")&&e(C,{item:!0,...J,children:e(Q,{characterKey:h,talentKey:"passive",subtitle:"Passive"})}),R.map(([x,d,S])=>{const i=c>=S;return g.getTalentOfKey(x)?e(C,{item:!0,style:{opacity:i?1:.5},...J,children:e(Q,{characterKey:h,talentKey:x,subtitle:d})},x):null})]}),!l&&e(C,{item:!0,xs:12,md:12,lg:3,container:!0,spacing:1,children:T.map((x,d)=>e(C,{item:!0,sx:{opacity:r>=d+1?1:.5},...J,children:x},d))})]})})]})})}function Q({characterKey:t,talentKey:a,subtitle:o}){const{gender:n}=Ce(),l=ze(t,n).getTalentOfKey(a);return e(ee,{bgt:"light",sx:{height:"100%"},children:b(q,{children:[b(C,{container:!0,sx:{flexWrap:"nowrap"},children:[e(C,{item:!0,children:e(w,{component:"img",src:l==null?void 0:l.img,sx:{width:60,height:"auto"}})}),b(C,{item:!0,flexGrow:1,sx:{pl:1},children:[e(N,{variant:"h6",children:l==null?void 0:l.name}),e(N,{variant:"subtitle1",children:o})]})]}),l!=null&&l.sections?e(yt,{sections:l.sections,hideDesc:!0}):null]})})}const Ae=[5,4];function xa(){const{silly:t}=u.useContext(Ke),a=me(),o=fe(a.displayArchive),n=Z([...Ae]),p=Z([...ne]),[l,h]=u.useState(""),r=u.useDeferredValue(l),{character:c}=o,y=u.useCallback(i=>a.displayArchive.set({character:{...c,...i}}),[a,c]),g=u.useMemo(()=>mt.filter(i=>{const{rarity:s,weaponType:m}=se(i);if(!c.rarity.includes(s)||!c.weaponType.includes(m))return!1;const M=O.t(`charNames_gen:${i}`),L=t&&O.exists(`sillyWisher_charNames:${i}`)?O.t(`sillyWisher_charNames:${i}`):"";return!(r&&!M.toLocaleLowerCase().includes(r.toLocaleLowerCase())&&!L.toLocaleLowerCase().includes(r.toLocaleLowerCase()))}),[c,r,t]),{numShow:f,setTriggerElement:R}=xe(10,g.length),T=i=>{const s=c.sortOrderBy===i&&c.sortOrder==="asc";y({sortOrder:s?"desc":"asc",sortOrderBy:i})},x=u.useMemo(()=>Fe([c.sortOrderBy],c.sortOrder==="asc",{name:i=>t&&O.exists(`sillyWisher_charNames:${i}`)?O.t(`sillyWisher_charNames:${i}`):O.t(`charNames_gen:${i}`),rarity:i=>se(i).rarity,element:i=>Ve(i),type:i=>se(i).weaponType}),[c.sortOrder,c.sortOrderBy,t]),d=u.useMemo(()=>g.sort(x).slice(0,f),[g,f,x]),S=[{key:"name",label:"Name",width:40},{key:"rarity",label:"Rarity",width:20},{key:"element",label:"Element",width:20},{key:"type",label:"Type",width:20}];return b(w,{children:[b(q,{sx:{display:"flex",gap:2},children:[e(X,{value:c.rarity,children:Ae.map(i=>e(Y,{value:i,onClick:()=>y({rarity:n(c.rarity,i)}),children:e(A,{color:`rarity${i}`,children:e(_,{sx:{verticalAlign:"text-top"}})})},i))}),e(X,{value:c.weaponType,children:ne.map(i=>{var s;return e(Y,{value:i,onClick:()=>y({weaponType:p(c.weaponType,i)}),children:e(W,{src:(s=de.weaponTypes)==null?void 0:s[i],size:2})},i)})}),e(we,{fullWidth:!0,variant:"outlined",value:l,onChange:i=>h(i.target.value),InputProps:{startAdornment:e(Te,{position:"start",children:e(Se,{})})}})]}),b(ie,{children:[e(ce,{children:e($,{children:S.map(({key:i,label:s,width:m})=>e(v,{sortDirection:c.sortOrderBy===i?c.sortOrder:!1,width:`${m}%`,children:e(et,{active:c.sortOrderBy===i,direction:c.sortOrderBy===i?c.sortOrder:"asc",onClick:()=>T(i),children:s})}))})}),b(le,{children:[d.map(i=>e(wa,{characterKey:i},i)),d.length!==g.length&&e($,{children:e(v,{colSpan:5,children:e(z,{ref:i=>{i&&R(i)},sx:{borderRadius:1},variant:"rectangular",width:"100%",height:50})})})]})]})]})}const wa=u.memo(function({characterKey:a}){var f;const{silly:o}=u.useContext(Ke),{gender:n}=Ce(),[p,l,h]=qe(),{rarity:r,weaponType:c}=se(a),y=Ve(a),g=u.useMemo(()=>({key:a,level:90,ascension:6,constellation:6,talent:{auto:10,skill:10,burst:10}}),[a]);return b(u.Suspense,{fallback:e($,{children:e(v,{colSpan:4,children:e(z,{sx:{borderRadius:1},variant:"rectangular",width:"100%",height:50})})}),children:[e(va,{show:p,character:g,onClose:h}),b($,{hover:!0,onClick:l,sx:{cursor:"pointer"},children:[e(v,{children:b(w,{sx:{display:"flex",alignItems:"center"},children:[e(W,{size:4,src:ft(a,n,o)}),e(Ee,{characterKey:a,gender:n})]})}),e(v,{children:e(w,{display:"flex",children:e(A,{color:`rarity${r}`,children:e(_,{})})})}),e(v,{children:e(vt,{ele:y,iconProps:{color:y}})}),e(v,{children:e(W,{src:(f=de.weaponTypes)==null?void 0:f[c],size:3,sideMargin:!0})})]})]})});function Ta({show:t,weaponUIData:a,weapon:o,onClose:n}){const{key:p,level:l=0,refinement:h=1,ascension:r=0}=o,c=p&&B(p),y=p?Ge(p,r>=2):"";return e(Ue,{open:t,onClose:n,containerProps:{maxWidth:"md"},children:e(ee,{children:e(q,{children:c&&a&&b(C,{container:!0,spacing:1.5,children:[e(C,{item:!0,xs:12,sm:3,children:b(C,{container:!0,spacing:1.5,children:[e(C,{item:!0,xs:6,sm:12,children:e(w,{sx:{position:"relative",display:"flex"},children:e(w,{component:"img",src:y,className:`grad-${c.rarity}star`,sx:{maxWidth:256,width:"100%",height:"auto",borderRadius:1}})})}),e(C,{item:!0,xs:6,sm:12,children:e(N,{children:e("small",{children:p&&e(xt,{weaponKey:p})})})})]})}),b(C,{item:!0,xs:12,sm:9,sx:{display:"flex",flexDirection:"column",gap:1},children:[b(w,{display:"flex",gap:1,flexWrap:"wrap",children:[e(N,{variant:"h5",children:e(Je,{weaponKey:p})}),n&&e(He,{onClick:n,sx:{marginLeft:"auto"},children:e(je,{})})]}),b(N,{children:["Lv. ",wt(l,r)," R",h]}),e(Tt,{stars:c.rarity}),e(N,{variant:"subtitle1",children:e("strong",{children:p&&e(Ct,{weaponKey:p})})}),e(N,{gutterBottom:!0,children:p&&e(St,{weaponKey:p,refineIndex:(a.get(ae.weapon.refinement).value??1)-1})}),e(w,{display:"flex",flexDirection:"column",gap:1,children:e(ee,{bgt:"light",children:e(Rt,{bgt:"light",children:[ae.weapon.main,ae.weapon.sub,ae.weapon.sub2].map(g=>{const f=a.get(g);return f.isEmpty||!f.value?null:e(kt,{calcRes:f,component:Mt},JSON.stringify(f.info))})})})})]})]})})})})}const _e=[5,4,3,2,1];function Ca(){const t=me(),a=fe(t.displayArchive),o=Z([..._e]),n=Z([...ne]),[p,l]=u.useState(""),h=u.useDeferredValue(p),{weapon:r}=a,c=u.useCallback(s=>t.displayArchive.set({weapon:{...r,...s}}),[t,r]),y=u.useMemo(()=>be.filter(s=>{const{rarity:m,subStat:M,weaponType:L}=B(s);if(!r.rarity.includes(m)||r.subStat.length&&(!M||!r.subStat.includes(M.type))||!r.weaponType.includes(L))return!1;const te=O.t(`weaponNames_gen:${s}`);return!(h&&!te.toLocaleLowerCase().includes(h.toLocaleLowerCase()))}),[r,h]),g=s=>{const m=r.sortOrderBy===s&&r.sortOrder==="asc";c({sortOrder:m?"desc":"asc",sortOrderBy:s})},f=u.useMemo(()=>{const s=new Map;return be.forEach(m=>{const{rarity:M}=B(m),L={id:"invalid",ascension:M>2?6:4,level:M>2?90:70,refinement:1},te=Qe([Xe(m).data,Ye(L)]),at=te.get(oe.weapon.main),rt=te.get(oe.weapon.sub);s.set(m,{main:ge(at).valueString,sub:ge(rt).valueString})}),s},[]),R=u.useMemo(()=>Fe(r.sortOrderBy==="sub"?["subType",r.sortOrderBy]:[r.sortOrderBy],r.sortOrder==="asc",{name:s=>O.t(`weaponNames_gen:${s}`),type:s=>B(s).weaponType,rarity:s=>B(s).rarity,main:s=>{var m;return((m=f.get(s))==null?void 0:m.main)??""},sub:s=>{var m;return((m=f.get(s))==null?void 0:m.sub)??""},subType:s=>{var m;return((m=B(s).subStat)==null?void 0:m.type)??""}}),[r.sortOrder,r.sortOrderBy,f]),{numShow:T,setTriggerElement:x}=xe(10,y.length),d=u.useMemo(()=>y.sort(R).slice(0,T),[y,R,T]),S=u.useMemo(()=>$t($e,s=>be.forEach(m=>{const{subStat:M}=B(m);if(!M||!M.type)return;const{type:L}=M;s[L].total++,y.includes(m)&&s[L].current++})),[y]),i=[{key:"name",label:"Name",width:30},{key:"type",label:"Type",width:10},{key:"rarity",label:"Rarity",width:10},{key:"main",label:"Main",width:20},{key:"sub",label:"Secondary",width:30}];return b(w,{children:[b(q,{sx:{display:"flex",gap:2},children:[e(X,{value:r.rarity,children:_e.map(s=>e(Y,{value:s,onClick:()=>c({rarity:o(r.rarity,s)}),children:e(A,{color:`rarity${s}`,children:e(_,{sx:{verticalAlign:"text-top"}})})},s))}),e(X,{value:r.weaponType,children:ne.map(s=>{var m;return e(Y,{value:s,onClick:()=>c({weaponType:n(r.weaponType,s)}),children:e(W,{src:(m=de.weaponTypes)==null?void 0:m[s],size:2})},s)})}),e(Lt,{fullWidth:!0,substatKeys:r.subStat,setSubstatKeys:s=>{c({subStat:s})},totals:S,allSubstatKeys:[...$e]}),e(we,{fullWidth:!0,variant:"outlined",value:p,onChange:s=>l(s.target.value),InputProps:{startAdornment:e(Te,{position:"start",children:e(Se,{})})}})]}),b(ie,{children:[e(ce,{children:e($,{children:i.map(({key:s,label:m,width:M})=>e(v,{sortDirection:r.sortOrderBy===s?r.sortOrder:!1,width:`${M}%`,children:e(et,{active:r.sortOrderBy===s,direction:r.sortOrderBy===s?r.sortOrder:"asc",onClick:()=>g(s),children:m})}))})}),b(le,{children:[d.map(s=>e(Sa,{weaponKey:s},s)),y.length!==d.length&&e($,{children:e(v,{colSpan:5,children:e(z,{ref:s=>{s&&x(s)},sx:{borderRadius:1},variant:"rectangular",width:"100%",height:50})})})]})]})]})}const Sa=u.memo(function({weaponKey:a}){var f;const[o,n,p]=qe(),{rarity:l,weaponType:h}=B(a),r=u.useMemo(()=>({id:"invalid",ascension:l>2?6:4,key:a,level:l>2?90:70,refinement:1,location:"",lock:!1}),[l,a]),c=u.useMemo(()=>Qe([Xe(a).data,Ye(r)]),[a,r]),y=c.get(oe.weapon.main),g=c.get(oe.weapon.sub);return b(u.Suspense,{fallback:e($,{children:e(v,{colSpan:5,children:e(z,{sx:{borderRadius:1},variant:"rectangular",width:"100%",height:50})})}),children:[e(Ta,{show:o,weaponUIData:c,weapon:r,onClose:p}),b($,{hover:!0,onClick:n,sx:{cursor:"pointer"},children:[e(v,{children:b(w,{sx:{display:"flex",alignItems:"center"},children:[e(W,{size:4,src:Ge(a,!0)}),e(Je,{weaponKey:a})]})}),e(v,{children:e(W,{src:(f=de.weaponTypes)==null?void 0:f[h],size:3,sideMargin:!0})}),e(v,{children:e(w,{display:"flex",children:e(A,{color:`rarity${l}`,children:e(_,{})})})}),e(v,{children:e(Pe,{node:y})}),e(v,{children:e(Pe,{node:g})})]})]})});function Pe({node:t}){const{name:a,icon:o}=Dt(t.info);return Number.isNaN(t.value)?null:b(w,{sx:{display:"flex"},children:[b(N,{flexGrow:1,children:[o," ",a]}),e(N,{children:ge(t).valueString})]})}const Ra={i18Key:"tabs.artifacts",icon:e(Pt,{}),value:"artifacts",to:"/artifacts"},ka={i18Key:"tabs.weapons",icon:e(zt,{}),value:"weapons",to:"/weapons"},Ma={i18Key:"tabs.characters",icon:e(Ht,{}),value:"characters",to:"/characters"},tt=[Ra,ka,Ma],$a=tt.map(({value:t})=>t);function Oa(){const{t}=ve("ui"),{params:{tab:a}}=Ot({path:"/archive/:tab",end:!1})??{params:{}},o=u.useMemo(()=>$a.find(p=>p===a)??"artifacts",[a]);return b(ee,{children:[e(It,{variant:"fullWidth",value:o,sx:{"& .MuiTab-root:hover":{transition:"background-color 0.25s ease",backgroundColor:"rgba(255,255,255,0.1)"},"& .Mui-selected":{color:"white !important"},"& .MuiTabs-indicator":{height:"4px"}},children:tt.map(({i18Key:n,icon:p,value:l,to:h})=>e(Nt,{icon:p,iconPosition:"start",value:l,label:t(n),component:Bt,to:`/archive${h}`},l))}),e(Wt,{}),e(u.Suspense,{fallback:e(z,{variant:"rectangular",width:"100%",height:1e3}),children:b(At,{children:[e(re,{path:"artifacts",element:e(fa,{})}),e(re,{path:"weapons",element:e(Ca,{})}),e(re,{path:"characters",element:e(xa,{})}),e(re,{path:"*",element:e(_t,{to:"artifacts",replace:!0})})]})})]})}export{Oa as default};
