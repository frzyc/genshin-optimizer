import{r as p,x as E,d as e,e as n,ae as se,az as Fe,a as W,y as F,bU as ce,f as h,G as o,h as w,cr as Ne,cs as Pe,c7 as qe,ct as ze,W as be,cu as Ke,bM as $e,at as he,Z as Ge,cv as ue,cw as Ve,cx as re,L as _,an as le,ao as J,M as B,N as k,T as A,cy as He,c4 as R,cq as q,I as z,o as Y,cz as ve,aa as Ue,cA as Qe,ak as M,au as ie,ap as oe,ai as Te,cB as Je,cC as Ye,P as Xe,cD as pe,cE as Ze,cF as et,aA as tt,aQ as X,cG as at,cH as nt,bR as we,cl as rt,t as Ie,v as Se,w as Me,g as De,s as $,bN as de,bO as st,b4 as ke,cn as ct,cI as lt,cJ as me,cK as it,cL as ot,D as Ee,c1 as ge,z as dt,H as ht,cM as ut,cN as fe,bQ as pt,S as K,i as mt,l as gt,cO as ft,ce as xt,cP as yt,a6 as Ct,aH as bt,ac as vt,ax as Tt,cQ as wt,aL as It,aM as St,ba as ne,aN as Mt,cR as Dt,be as kt,cS as Et,cT as jt,bq as Wt,aP as Bt,cU as At,cV as Lt,cW as Ot,cX as je,F as Rt,E as _t,b as Ft,A as Nt,cY as Pt}from"./index-BCodl3Qb.js";import{u as qt,B as We,a as Be,L as zt,b as Kt,T as $t,c as Gt,C as Vt,d as Ht,e as Ut,E as Qt,f as xe}from"./LoadoutInfoAlert-Dp26_1EH.js";import{T as Ae}from"./TeamCard-CEvIxZ2C.js";import{u as Jt}from"./useTeamChar-J6x79295.js";import{O as Yt,L as Xt}from"./TeamDelModal-CR-0Tb3o.js";function Zt(){const t=p.useRef(!0),r=t.current;return r&&(t.current=!1),r}function ea(){const{t}=E("page_character");return e(Fe,{severity:"warning",children:n(se,{t,i18nKey:"noLoadout",children:["Looks like you haven't added any loadout/Teams with this character yet. You need to create a loadout+team with this character to"," ",e("strong",{children:"create builds"}),", ",e("strong",{children:"theorycraft"}),", or"," ",e("strong",{children:"optimize"}),"."]})})}function ta(){const t=W(),r=F();return p.useCallback(a=>{t.chars.get(a)||t.chars.getWithInitWeapon(a),r(`/characters/${a}`)},[r,t])}function aa({buildId:t,characterKey:r}){const{name:s,description:a,weaponId:c,artifactIds:u}=qt(t),d=ce(r).weaponType;return e(We,{name:s,description:a,hideFooter:!0,children:e(h,{sx:{display:"flex",flexDirection:"column",gap:1,alignItems:"stretch"},children:n(o,{container:!0,spacing:1,columns:{xs:2,sm:2,md:2,lg:3,xl:3},children:[e(o,{item:!0,xs:1,children:e(w,{sx:{height:"100%",maxHeight:"8em"},children:e(Ne,{weaponId:c,weaponTypeKey:d})})}),Object.entries(u).map(([m,y])=>e(o,{item:!0,xs:1,children:e(w,{sx:{height:"100%",maxHeight:"8em"},children:e(Pe,{artifactId:y,slotKey:m})})},y||m))]})})})}function na({buildTcId:t}){const r=Be(t),{name:s,description:a}=r;return e(We,{name:s,description:a,hideFooter:!0,children:e(ra,{buildTcId:t})})}function ra({buildTcId:t}){const{weapon:r,artifact:{slots:s,substats:{stats:a},sets:c}}=Be(t),u=qe(r.key),d=Object.entries(a),m=d.slice(0,5),y=d.slice(5);return e(h,{children:n(o,{container:!0,spacing:1,columns:{xs:2,sm:2,md:2,lg:2,xl:2},children:[e(o,{item:!0,xs:1,children:n(h,{sx:{display:"flex",flexDirection:"column",gap:1},children:[e(ze,{weapon:r,weaponSheet:u}),!!Object.keys(c).length&&e(w,{sx:{flexGrow:1},children:e(h,{sx:{p:1,display:"flex",flexDirection:"column",gap:1},children:Object.entries(c).map(([l,i])=>n(h,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(be,{size:2,src:Ke(l,"flower")}),e("span",{children:e($e,{setKey:l})}),n(he,{children:["x",i]})]},l))})})]})}),e(o,{item:!0,xs:1,children:e(w,{sx:{flexGrow:1,height:"100%",p:1,display:"flex",flexDirection:"column",gap:1,justifyContent:"space-between"},children:Object.entries(s).map(([l,{level:i,statKey:f}])=>n(h,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(Ge,{slotKey:l}),n(he,{children:["+",i]}),e(ue,{statKey:f})]},l))})}),[m,y].map((l,i)=>e(o,{item:!0,xs:1,children:e(w,{sx:{flexGrow:1,height:"100%"},children:e(h,{sx:{p:1,height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between",gap:1},children:l.map(([f,C])=>n(h,{sx:{display:"flex",alignItems:"center",gap:1,justifyContent:"space-between"},children:[e(ue,{statKey:f}),n("span",{children:[Ve(C,re(f)),re(f)]})]},f))})})},i))]})})}function sa({show:t,onHide:r,teamCharId:s,onDelete:a,teamIds:c,conditionalCount:u}){const{t:d}=E("loadout"),m=W(),{name:y,description:l,buildIds:i,buildTcIds:f,customMultiTargets:C,bonusStats:T}=m.teamChars.get(s),I=p.useCallback(()=>{r(),a()},[a,r]);return e(oe,{open:t,onClose:r,containerProps:{maxWidth:"md"},children:n(w,{children:[e(_,{title:e("span",{children:n(se,{t:d,i18nKey:"loadoutDelModal.title",name:y,children:["Delete Loadout: ",e("strong",{children:{name:y}}),"?"]})}),action:e(le,{onClick:r,children:e(J,{})})}),e(B,{}),n(k,{children:[l&&e(w,{bgt:"dark",sx:{mb:2},children:e(k,{children:l})}),e(A,{children:d("loadoutDelModal.desc")}),n(He,{sx:{listStyleType:"disc",pl:4},children:[!!i.length&&e(R,{sx:{display:"list-item"},children:n(h,{sx:{display:"flex",alignItems:"center",gap:1},children:[d("loadoutDelModal.builds"),i.length," ",e(q,{title:e(h,{children:i.map(x=>{var v;return n(A,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(Y,{}),e("span",{children:(v=m.builds.get(x))==null?void 0:v.name})]},x)})}),children:e(z,{})})]})}),!!f.length&&e(R,{sx:{display:"list-item"},children:n(h,{sx:{display:"flex",alignItems:"center",gap:1},children:[d("loadoutDelModal.tcBuilds"),f.length," ",e(q,{title:e(h,{children:f.map(x=>{var v;return n(A,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(Y,{}),e("span",{children:(v=m.buildTcs.get(x))==null?void 0:v.name})]},x)})}),children:e(z,{})})]})}),!!C.length&&e(R,{sx:{display:"list-item"},children:n(h,{sx:{display:"flex",alignItems:"center",gap:1},children:[d("loadoutDelModal.mTargets"),C.length," ",e(q,{title:e(h,{children:C.map((x,v)=>n(A,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(ve,{}),e("span",{children:x.name})]},v))}),children:e(z,{})})]})}),!!Object.keys(T).length&&n(R,{sx:{display:"list-item"},children:[d("loadoutDelModal.bonus"),Object.keys(T).length]}),!!u&&n(R,{sx:{display:"list-item"},children:[d("loadoutDelModal.condi"),u]}),e(R,{sx:{display:"list-item"},children:d("loadoutDelModal.optConfig")}),!!c.length&&e(R,{sx:{display:"list-item"},children:n(h,{sx:{display:"flex",alignItems:"center",gap:1},children:[n("span",{children:[d("loadoutDelModal.affected"),c.length]}),e(q,{title:e(h,{children:c.map(x=>{var v;return n(A,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(Ue,{}),e("span",{children:(v=m.teams.get(x))==null?void 0:v.name})]},x)})}),children:e(z,{})})]})})]})]}),n(Qe,{sx:{float:"right"},children:[e(M,{startIcon:e(J,{}),color:"secondary",onClick:r,children:d("loadoutDelModal.cancel")}),e(M,{startIcon:e(ie,{}),color:"error",onClick:I,children:d("loadoutDelModal.delete")})]})]})})}function ca({show:t,onHide:r,teamCharId:s,teamIds:a}){const{t:c}=E("loadout"),[u,d,m]=Te(),y=F(),l=W(),{key:i,name:f,description:C,buildIds:T,buildTcIds:I,customMultiTargets:x,bonusStats:v,optConfigId:S,conditional:G}=Jt(s),{optimizationTarget:V}=Je(S),Z=()=>{r(),l.teamChars.remove(s)},ee=()=>{l.teamChars.duplicate(s)&&r()},te=b=>{const j=l.teams.new();l.teams.set(j,U=>{U.loadoutData[0]={teamCharId:b}}),y(`/teams/${j}`)},H=p.useMemo(()=>{let b=0;return Ye(G,[],j=>typeof j!="object",()=>b++),b},[G]);return e(oe,{open:t,onClose:r,containerProps:{maxWidth:"lg"},children:n(w,{children:[e(_,{title:n(h,{display:"flex",gap:1,alignItems:"center",children:[e(Xe,{}),e("strong",{children:f})]}),action:e(le,{onClick:r,children:e(J,{})})}),e(B,{}),n(k,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e(zt,{}),e(pe,{fullWidth:!0,label:c("loadoutEditor.label"),placeholder:c("loadoutEditor.placeholder"),value:f,onChange:b=>l.teamChars.set(s,{name:b})}),e(pe,{fullWidth:!0,label:c("loadoutEditor.desc"),value:C,onChange:b=>l.teamChars.set(s,{description:b}),multiline:!0,minRows:2}),e(h,{children:n(o,{container:!0,columns:{xs:1,md:2},spacing:2,children:[e(o,{item:!0,xs:1,children:e(M,{color:"info",onClick:()=>ee(),fullWidth:!0,startIcon:e(Ze,{}),children:c("loadoutEditor.dupBtn")})}),n(o,{item:!0,xs:1,children:[e(sa,{show:u,onHide:m,onDelete:Z,teamCharId:s,teamIds:a,conditionalCount:H}),e(M,{fullWidth:!0,startIcon:e(ie,{}),color:"error",onClick:d,children:c("loadoutEditor.delBtn")})]})]})}),e(h,{children:n(o,{container:!0,columns:{xs:1,md:2},spacing:2,children:[!!Object.keys(v).length&&e(o,{item:!0,xs:1,children:e(la,{bonusStats:v})}),!!V&&e(o,{item:!0,xs:1,children:n(w,{bgt:"light",children:[e(_,{title:n(h,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(et,{}),e("span",{children:c("loadoutEditor.optTarget")})]})}),e(B,{}),e(k,{children:e(tt,{divider:e(B,{orientation:"vertical",flexItem:!0}),spacing:1,children:e(Yt,{optimizationTarget:V,customMultiTargets:x})})})]})}),!!x.length&&e(o,{item:!0,xs:1,children:e(ia,{customMultiTargets:x})}),e(o,{item:!0,xs:1,children:e(w,{bgt:"light",children:e(k,{children:n(A,{variant:"h6",children:[c("loadoutEditor.conditionals"),e("strong",{children:H})]})})})})]})})]}),e(B,{}),e(_,{title:n(h,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e(Y,{}),e("span",{children:c("loadoutEditor.builds")})]})}),e(B,{}),n(k,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e(Kt,{}),e(h,{children:e(o,{container:!0,columns:{xs:1,md:2},spacing:2,children:T.map(b=>e(o,{item:!0,xs:1,children:e(aa,{buildId:b,characterKey:i})},b))})}),e($t,{}),e(h,{children:e(o,{container:!0,columns:{xs:1,md:2},spacing:2,children:I.map(b=>e(o,{item:!0,xs:1,children:e(na,{buildTcId:b})},b))})})]}),e(B,{}),e(_,{title:n(h,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e(Y,{}),e("span",{children:c("loadoutEditor.teams")})]})}),e(B,{}),n(k,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e(Gt,{}),n(o,{container:!0,columns:{xs:1,md:2},spacing:2,children:[a.map(b=>e(o,{item:!0,xs:1,children:e(Ae,{bgt:"light",teamId:b,onClick:j=>y(`/teams/${b}${j?`/${j}`:""}`)})},b)),e(o,{item:!0,xs:1,children:e(M,{fullWidth:!0,sx:{height:"100%",backgroundColor:"contentLight.main"},variant:"outlined",onClick:()=>te(s),color:"info",startIcon:e(X,{}),children:c("loadoutEditor.addNewTeam")})})]})]})]})})}function la({bonusStats:t}){const{t:r}=E("loadout");return n(w,{bgt:"light",children:[e(_,{title:n(h,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(at,{}),e("span",{children:r("loadoutEditor.bonusStats")})]}),titleTypographyProps:{variant:"h6"}}),e(we,{bgt:"light",sections:[{fields:Object.entries(t).map(([s,a])=>({text:nt.getStr(s)??s,value:a,unit:re(s)}))}]})]})}function ia({customMultiTargets:t}){const{t:r}=E("loadout");return n(w,{bgt:"light",children:[e(_,{title:n(h,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(ve,{}),e("span",{children:r("loadoutEditor.mltTargets")})]}),titleTypographyProps:{variant:"h6"}}),e(we,{bgt:"light",sections:[{fields:t.map(({name:s,description:a})=>({text:s,value:a?e(q,{title:a,children:e(z,{})}):void 0}))}]})]})}const oa={xs:1,md:2};function da({teamCharId:t,teamIds:r}){const{t:s}=E("page_character"),a=F(),c=W(),u=l=>{const i=c.teams.new();c.teams.set(i,f=>{f.loadoutData[0]={teamCharId:l}}),a(`/teams/${i}`)},[d,m,y]=Te();return n(rt,{children:[e(ca,{show:d,onHide:y,teamCharId:t,teamIds:r}),n(w,{bgt:"light",children:[e(M,{fullWidth:!0,onClick:m,sx:{p:0,display:"flex",borderBottomLeftRadius:0,borderBottomRightRadius:0},color:"neutral100",variant:"outlined",children:e(Xt,{teamCharId:t,showSetting:!0})}),e(k,{sx:{p:1},children:n(o,{container:!0,columns:oa,spacing:1,children:[r.map(l=>e(o,{item:!0,xs:1,children:e(Ae,{teamId:l,onClick:i=>a(`/teams/${l}${i?`/${i}`:""}`)})},l)),e(o,{item:!0,xs:1,children:e(M,{fullWidth:!0,sx:{height:"100%",backgroundColor:"contentNormal.main"},variant:"outlined",onClick:()=>u(t),color:"info",startIcon:e(X,{}),children:s("charContentModal.addTeam")})})]})})]},t)]})}var N={},ye;function ha(){if(ye)return N;ye=1;var t=Ie();Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var r=t(Se()),s=Me(),a=(0,r.default)((0,s.jsx)("path",{d:"M17.5 9.5C17.5 6.46 15.04 4 12 4S6.5 6.46 6.5 9.5c0 2.7 1.94 4.93 4.5 5.4V17H9v2h2v2h2v-2h2v-2h-2v-2.1c2.56-.47 4.5-2.7 4.5-5.4zm-9 0C8.5 7.57 10.07 6 12 6s3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5z"}),"Female");return N.default=a,N}var ua=ha();const pa=De(ua);var P={},Ce;function ma(){if(Ce)return P;Ce=1;var t=Ie();Object.defineProperty(P,"__esModule",{value:!0}),P.default=void 0;var r=t(Se()),s=Me(),a=(0,r.default)((0,s.jsx)("path",{d:"M9.5 11c1.93 0 3.5 1.57 3.5 3.5S11.43 18 9.5 18 6 16.43 6 14.5 7.57 11 9.5 11zm0-2C6.46 9 4 11.46 4 14.5S6.46 20 9.5 20s5.5-2.46 5.5-5.5c0-1.16-.36-2.23-.97-3.12L18 7.42V10h2V4h-6v2h2.58l-3.97 3.97C11.73 9.36 10.66 9 9.5 9z"}),"Male");return P.default=a,P}var ga=ma();const fa=De(ga);function xa(){const{t}=E("ui"),r=W(),{character:s}=p.useContext($),{key:a}=s,{gender:c}=de(),u=p.useCallback(()=>r.dbMeta.set({gender:c==="F"?"M":"F"}),[c,r]);return a.startsWith("Traveler")?n(M,{onClick:u,startIcon:c==="F"?e(pa,{}):e(fa,{}),children:[e("strong",{children:t(`gender.${c}`)})," "]}):null}function ya({onClose:t}){const{t:r}=E(["page_character","sillyWisher_charNames","charNames_gen"]),s=F(),a=W(),{character:c,character:{key:u}}=p.useContext($),{gender:d}=de(),m=st(u,d),{silly:y}=p.useContext(ke),l=p.useCallback(async()=>{const i=r(`${y?"sillyWisher_charNames":"charNames_gen"}:${ct(u,d)}`);window.confirm(r("removeCharacter",{value:i}))&&(a.chars.remove(u),s("/characters"))},[a,s,u,d,y,r]);return n(h,{display:"flex",flexDirection:"column",gap:1,children:[n(h,{display:"flex",gap:1,children:[e(xa,{}),e(M,{color:"error",onClick:()=>l(),startIcon:e(ie,{}),sx:{marginLeft:"auto"},children:r("delete")}),!!t&&e(le,{onClick:t,children:e(J,{})})]}),e(h,{children:n(o,{container:!0,spacing:1,sx:{justifyContent:"center"},children:[e(o,{item:!0,xs:8,sm:5,md:4,lg:3,children:n(w,{bgt:"light",sx:{height:"100%",display:"flex",flexDirection:"column",gap:1},children:[e(Vt,{}),e(h,{sx:{px:1},children:e(lt,{level:c.level,ascension:c.ascension,setBoth:i=>{me.includes(u)?me.forEach(f=>{a.chars.set(f,i)}):a.chars.set(u,i)}})}),e(it,{bgt:"light"}),e(A,{sx:{textAlign:"center",pb:-1},variant:"h6",children:e(ot,{characterKey:u,gender:d})}),e(h,{sx:{px:1},children:e(Ht,{setConstellation:i=>a.chars.set(u,{constellation:i})})})]})}),n(o,{item:!0,xs:12,sm:7,md:8,lg:9,sx:{display:"flex",flexDirection:"column",gap:1},children:[e(h,{children:e(o,{container:!0,columns:3,spacing:1,children:["auto","skill","burst"].map(i=>{var f;return e(o,{item:!0,xs:1,children:e(Ut,{talentKey:i,dropDownButtonProps:{startIcon:e(be,{src:(f=m.getTalentOfKey(i))==null?void 0:f.img,size:1.75,sideMargin:!0})},setTalent:C=>a.chars.set(u,T=>{T.talent[i]=C})},i)},i)})})}),e(Ca,{}),e(ba,{})]})]})})]})}function Ca(){const{character:{key:t,equippedArtifacts:r}}=p.useContext($),{data:s}=p.useContext(Ee),a=W(),c=ce(t).weaponType,u=s.get(ge.weapon.id).value,d=p.useMemo(()=>dt(ht,m=>s.get(ge.art[m].id).value),[s]);return e(h,{children:e(ut.Provider,{value:"equipped",children:e(Qt,{weaponTypeKey:c,weaponId:u,artifactIds:d,setWeapon:m=>{a.weapons.set(m,{location:fe(t)})},setArtifact:(m,y)=>{y?a.arts.set(y,{location:fe(t)}):a.arts.set(r[m],{location:""})}})})})}function ba(){const{t}=E("page_character"),r=F(),{character:{key:s}}=p.useContext($),a=W(),{gender:c}=de(),u=xe(a.teamChars),d=xe(a.teams),m=p.useMemo(()=>{const l={};return[...u].sort((C,T)=>{const[,I]=C,[,x]=T;return I.name.localeCompare(x.name)}).map(([C,T])=>{T.key===s&&(l[C]||(l[C]=[]))}),[...d].sort((C,T)=>{const[,I]=C,[,x]=T;return I.name.localeCompare(x.name)}).forEach(([C,T])=>{const I=T.loadoutData.find(x=>{var v;return x&&((v=a.teamChars.get(x==null?void 0:x.teamCharId))==null?void 0:v.key)===s});I&&l[I==null?void 0:I.teamCharId].push(C)}),l},[u,d,s,a.teamChars]),y=()=>{const l=a.teams.new(),i=a.teamChars.new(s);a.teams.set(l,f=>{f.loadoutData[0]={teamCharId:i}}),r(`/teams/${l}`)};return n(h,{sx:{display:"flex",flexDirection:"column",gap:1},children:[e(A,{variant:"h6",children:n(se,{t,i18nKey:"charContentModal.loadoutsWith",children:["Team Loadouts with"," ",e(pt,{characterKey:s,gender:c})]})}),!Object.values(m).length&&e(ea,{}),Object.entries(m).map(([l,i])=>e(da,{teamCharId:l,teamIds:i},l)),e(M,{fullWidth:!0,onClick:()=>y(),color:"info",startIcon:e(X,{}),variant:"outlined",sx:{backgroundColor:"contentLight.main"},children:t("charContentModal.addLoAndTeam")}),e(w,{bgt:"light"})]})}function va({characterKey:t,onClose:r}){return e(oe,{open:!!t,onClose:r,children:e(p.Suspense,{fallback:e(K,{variant:"rectangular",width:"100%",height:1e3}),children:t&&e(Ta,{characterKey:t,onClose:r},t)})})}function Ta({characterKey:t,onClose:r}){const s=mt(t),a=gt(t),{target:c}=(a==null?void 0:a[t])??{},u=p.useMemo(()=>{if(!(!a||!c))return{data:c,teamData:a,compareData:void 0}},[c,a]),d=p.useMemo(()=>s&&{character:s},[s]),[m,y]=p.useState(),[l,i]=p.useState(),f=p.useMemo(()=>({chartData:m,setChartData:y,graphBuilds:l,setGraphBuilds:i}),[m,l]);return p.useEffect(()=>{y(void 0),i(void 0)},[t]),e(w,{children:e(k,{sx:{display:"flex",flexDirection:"column",gap:1},children:e(p.Suspense,{fallback:e(K,{variant:"rectangular",width:"100%",height:1e3}),children:u&&d&&f?e($.Provider,{value:d,children:e(Ee.Provider,{value:u,children:e(ft.Provider,{value:f,children:e(ya,{onClose:r})})})}):e(K,{variant:"rectangular",width:"100%",height:1e3})})})})}const wa={xs:1,sm:2,md:3,lg:4,xl:4},Ia={xs:5,sm:8,md:9,lg:12,xl:12},Sa=Object.keys(je);function Wa(){const t=W(),r=F(),{params:{characterKey:s}}=xt({path:"/characters/:characterKey",end:!1})??{params:{}},a=p.useMemo(()=>s?yt(s)?(t.chars.get(s)||t.chars.getWithInitWeapon(s),s):(r("/characters"),null):null,[s,r,t]),{t:c}=E(["page_character","sillyWisher_charNames","charNames_gen"]),{silly:u}=p.useContext(ke),d=Ct(t.displayCharacter),[m,y]=p.useState(""),l=p.useDeferredValue(m),i=bt(),[f,C]=p.useState(!1);Zt()&&vt.send({hitType:"pageview",page:"/characters"});const T=Tt(t.charMeta),I=ta(),x=wt(t.chars),v=x.length,S=p.useMemo(()=>{const{element:g,weaponType:L,rarity:O,sortType:D,ascending:Q}=d;return T&&x.filter(It({element:g,weaponType:L,rarity:O,name:l},Lt(t,u))).sort(St(je[D]??[],Q,Ot(t,u),["new","favorite"]))},[d,T,x,l,t,u]),{weaponType:G,element:V,rarity:Z,sortType:ee,ascending:te}=d,H=p.useMemo(()=>ne(_t,g=>Object.entries(t.chars.data).forEach(([L,O])=>{const D=t.weapons.get(O.equippedWeapon);if(!D)return;const Q=Rt(D.key).weaponType;g[Q].total++,S.includes(L)&&g[Q].current++})),[t,S]),b=p.useMemo(()=>ne(Nt,g=>Object.entries(t.chars.data).forEach(([L,O])=>{const D=Ft(O.key);g[D].total++,S.includes(L)&&g[D].current++})),[t,S]),j=p.useMemo(()=>ne(Pt,g=>Object.entries(t.chars.data).forEach(([L,O])=>{const D=ce(O.key).rarity;g[D].total++,S.includes(L)&&g[D].current++})),[t,S]),{numShow:U,setTriggerElement:Le}=Mt(Ia[i],S.length),ae=p.useMemo(()=>S.slice(0,U),[S,U]),Oe=S.length!==v?`${S.length}/${v}`:`${v}`,Re={numShowing:ae.length,total:Oe,t:c,namespace:"page_character"},_e={sortKeys:[...Sa],value:ee,onChange:g=>t.displayCharacter.set({sortType:g}),ascending:te,onChangeAsc:g=>t.displayCharacter.set({ascending:g})};return n(h,{display:"flex",flexDirection:"column",gap:1,children:[a&&e(va,{characterKey:a,onClose:()=>r("/characters")}),e(p.Suspense,{fallback:!1,children:e(Dt,{newFirst:!0,show:f,onHide:()=>C(!1),onSelect:I})}),e(w,{children:n(k,{sx:{display:"flex",flexDirection:"column",gap:1},children:[n(o,{container:!0,spacing:1,children:[e(o,{item:!0,children:e(kt,{sx:{height:"100%"},onChange:g=>t.displayCharacter.set({weaponType:g}),value:G,totals:H,size:"small"})}),e(o,{item:!0,children:e(Et,{sx:{height:"100%"},onChange:g=>t.displayCharacter.set({element:g}),value:V,totals:b,size:"small"})}),e(o,{item:!0,children:e(jt,{sx:{height:"100%"},onChange:g=>t.displayCharacter.set({rarity:g}),value:Z,totals:j,size:"small"})}),e(o,{item:!0,flexGrow:1}),e(o,{item:!0,children:e(Wt,{autoFocus:!0,value:m,onChange:g=>y(g.target.value),label:c("characterName"),size:"small",sx:{height:"100%"},InputProps:{sx:{height:"100%"}}})})]}),e(h,{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",children:e(Bt,{showingTextProps:Re,sortByButtonProps:_e})})]})}),e(M,{fullWidth:!0,onClick:()=>C(!0),color:"info",startIcon:e(X,{}),children:c("addNew")}),e(p.Suspense,{fallback:e(K,{variant:"rectangular",sx:{width:"100%",height:"100%",minHeight:5e3}}),children:e(o,{container:!0,spacing:1,columns:wa,children:ae.map(g=>e(o,{item:!0,xs:1,children:e(At,{characterKey:g,onClick:()=>r(`${g}`),hideStats:!0})},g))})}),S.length!==ae.length&&e(K,{ref:g=>{g&&Le(g)},sx:{borderRadius:1},variant:"rectangular",width:"100%",height:100})]})}export{Wa as default};
