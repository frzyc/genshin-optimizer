import{r as y,D as w,a as v,dH as O,dr as P,c9 as E,e as a,d as e,f as p,an as j,T as m,ch as F,x as b,cx as K,P as N,I as S,B as k,ay as R,o as B,cv as U,cA as V,N as D,u as W,cU as _,L as q,ah as z,ai as G,M as H,at as J,ab as Q,fI as X,ae as A,ao as Y,h as L,aj as Z,l as $,aR as ee}from"./index-DpVaykI1.js";import{u as ae}from"./useTeamChar-C7YtNiEN.js";function te({optimizationTarget:t,customMultiTargets:f}){var r;const{data:i}=y.useContext(w),n=v(),c=y.useMemo(()=>O(i,t[0],n),[i,t,n]),{title:d,icon:h,action:s}=c??{},o=P(i.getDisplay(),t),{textSuffix:l,icon:g,name:x=t[0]==="custom"?(r=f[parseInt(t[1]??"")])==null?void 0:r.name:void 0}=(o&&E(o.info))??{};return a(F,{children:[a(p,{sx:{display:"flex",gap:1,alignItems:"center"},children:[h||g,e("span",{children:d}),!!s&&e(j,{color:"success",sx:{whiteSpace:"normal"},children:s})]}),e(m,{sx:{display:"flex",alignItems:"center"},children:a(j,{sx:{whiteSpace:"normal"},children:[e("strong",{children:x}),l&&a("span",{children:[" ",l]})]})})]})}function ne({teamCharId:t,showSetting:f=!1,children:i}){const{t:n}=b("loadout"),c=v(),{name:d,description:h,buildIds:s,buildTcIds:o,optConfigId:l,customMultiTargets:g}=c.teamChars.get(t),{optimizationTarget:x}=K(l);return a(D,{sx:{display:"flex",flexDirection:"column",gap:1,width:"100%"},children:[a(p,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e(N,{}),e(m,{variant:"h6",children:d}),!!h&&e(k,{title:e(m,{children:h}),children:e(S,{})}),f&&e(R,{sx:{ml:"auto"}})]}),a(p,{sx:{display:"flex",gap:1,justifyContent:"space-between"},children:[a(p,{sx:{display:"flex",justifyItems:"center",gap:1},children:[e(B,{}),a(m,{children:[n("loadoutHeader.builds"),e("strong",{children:s.length})]})]}),a(p,{sx:{display:"flex",justifyItems:"center",gap:1},children:[e(B,{}),a(m,{children:[n("loadoutHeader.tcBuilds"),e("strong",{children:o.length})]})]}),a(p,{sx:{display:"flex",justifyItems:"center",gap:1},children:[e(U,{}),a(m,{children:[n("loadoutHeader.mltTargets"),e("strong",{children:g.length})]})]})]}),x&&a(m,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e(V,{}),e(p,{children:n("loadoutHeader.optTarget")}),e(te,{customMultiTargets:g,optimizationTarget:x})]}),i]})}function oe({teamId:t,show:f,onHide:i,onDel:n}){const{t:c}=b("page_team"),d=v(),h=W(t),{name:s,description:o,loadoutData:l}=h,g=y.useMemo(()=>l.map(r=>{if(!r)return[];const{teamCharId:u}=r;return d.teams.values.filter(({loadoutData:I})=>I.find(C=>(C==null?void 0:C.teamCharId)===u))}),[d,l]),[x,T]=y.useState(()=>g.map((r,u)=>r.length===1?u:void 0).filter(_)),M=()=>{d.teams.remove(t),l.forEach((r,u)=>{!r||!x.includes(u)||d.teamChars.remove(r.teamCharId)}),n()};return e(Z,{open:f,onClose:i,children:a(L,{children:[e(q,{title:a(p,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e(p,{children:c("teamDelModal.teamName")}),e("strong",{children:s}),o&&e(k,{title:o,children:e(S,{})})]}),action:e(z,{onClick:i,children:e(G,{})})}),e(H,{}),a(D,{sx:{display:"flex",flexDirection:"column",gap:1},children:[e(J,{severity:"info",children:e(Q,{t:c,i18nKey:"teamDelModal.alert",children:"Removing the team will remove: resonance buffs, and enemy configs stored in the team. Loadouts that are only in this team are also selected by default for deletion."})}),l.map((r,u)=>r?e(se,{teamCharId:r.teamCharId,selected:x.includes(u),onClick:()=>T(I=>X(I,u)),inTeams:g[u]},u):null)]}),e(H,{}),e(D,{sx:{display:"flex",justifyContent:"flex-end"},children:e(A,{color:"error",startIcon:e(Y,{}),onClick:M,children:c("teamDelModal.delBtn")})})]})})}function se({teamCharId:t,selected:f,onClick:i,inTeams:n}){const{t:c}=b("page_team"),d=ae(t),{key:h}=d,s=$(h),{target:o}=(s==null?void 0:s[h])??{},l=y.useMemo(()=>{if(!(!s||!o))return{data:o,teamData:s,compareData:void 0}},[o,s]);if(l)return e(w.Provider,{value:l,children:e(L,{bgt:"light",sx:{border:f?"2px red solid":void 0},children:e(A,{fullWidth:!0,onClick:i,variant:"outlined",color:"neutral100",sx:{p:0},children:e(ne,{teamCharId:t,children:e(ee,{color:n.length===1?"success":"warning",children:e(m,{children:n.length===1?c("teamDelModal.onlyCrrTeam"):c("teamDelModal.usingMltTeams",{count:n.length})})})})})})})}export{ne as L,te as O,oe as T};
