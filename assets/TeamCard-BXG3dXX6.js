import{u as F,a as L,ah as O,d as e,e as n,f as a,aj as B,T as s,B as P,I as E,at as G,C as H,X as _,h as T,i as V,bJ as Z,r as x,b0 as q,bQ as J,k as Q,l as U,cZ as X,b as Y,D as K,c_ as ee,aT as te,U as ae,bR as ne,P as oe,o as ie,S as $,s as re,bS as se,c$ as le,bV as ce,x as de,d0 as he,Z as pe,d1 as xe,cq as v,ch as N}from"./index-C1aBjdKa.js";import{u as ue,c as S,h as k}from"./useTeamChar-PKF2UtGp.js";import{T as ge}from"./TeamDelModal-D5xh--O2.js";function Ie({teamId:t,onClick:l,bgt:c}){const i=F(t),{name:r,description:o,loadoutData:h}=i,u=L(),[g,p,I]=O();return e(T,{bgt:c,sx:{height:"100%",border:"1px rgba(200,200,200,0.4) solid"},children:n(a,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[n(a,{sx:{display:"flex",flexDirection:"row"},children:[e(B,{onClick:()=>l(),variant:"outlined",fullWidth:!0,color:"neutral300",sx:{borderTopRightRadius:0,borderBottomRightRadius:0,borderBottomLeftRadius:0},children:n(s,{sx:{display:"flex",gap:1,alignItems:"center"},variant:"h6",children:[e("span",{children:r}),o&&e(P,{title:e(s,{children:o}),children:e(E,{})})]})}),e(ge,{teamId:t,show:g,onHide:I,onDel:function(){}}),e(B,{variant:"outlined",size:"small",onClick:p,color:"error",sx:{borderTopLeftRadius:0,borderBottomRightRadius:0,borderBottomLeftRadius:0},children:e(G,{})})]}),e(a,{sx:{marginTop:"auto"},children:h.map((m,w)=>{var f;const b=m==null?void 0:m.teamCharId,d=b&&((f=u.teamChars.get(b))==null?void 0:f.key);return e(a,{className:"team-teammate",sx:{border:"1px rgba(200,200,200,0.3) solid","&:hover":{border:"1px rgba(200,200,200,0.8) solid"}},children:d?e(H,{onClick:()=>l(d),children:e(me,{characterKey:d,teamId:t,teamCharId:b})}):e(H,{onClick:()=>l(),sx:{height:120,position:"relative"},children:e(a,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:120,backgroundColor:"neutral600.main"},children:e(a,{component:"img",src:_.team[`team${w+1}`],sx:{width:"auto",my:"15px",height:90,opacity:.7,mx:"auto"}})})})},`${w}_${b}`)})})]})})}const y={banner:0,bannerFilter:1,characterIcon:2,darkDRop:3,other:4};function me({characterKey:t,teamId:l,teamCharId:c}){var W;const i=L(),r=V(t),{gender:o}=Z(),{silly:h}=x.useContext(q),u=J(t),{name:g}=ue(c),p=i.teams.getLoadoutDatum(l,c),I=i.teams.getActiveBuildName(p),m=x.useMemo(()=>i.teams.getLoadoutWeapon(p),[p,i]),w=(()=>{const{buildType:C,buildTcId:j}=p;return C==="tc"&&j?Q(i.buildTcs.get(j)):Object.values(i.teams.getLoadoutArtifacts(p)).filter(M=>M)})(),b=x.useMemo(()=>i.teams.getLoadoutArtifactData(p),[i,p]),d=U(t,void 0,w,m),f=(W=d==null?void 0:d[t])==null?void 0:W.target,D=x.useMemo(()=>r&&{character:r},[r]),R=x.useMemo(()=>f&&d&&{data:f,teamData:d},[f,d]),A=X(t,"banner",o),z=Y(t);return!D||!R?null:e(re.Provider,{value:D,children:e(K.Provider,{value:R,children:e(x.Suspense,{fallback:e($,{variant:"rectangular",width:"100%",height:300}),children:n(a,{className:A?void 0:`grad-${u.rarity}star`,sx:{display:"flex","&::before":{content:'""',display:"block",position:"absolute",left:0,top:0,width:"100%",height:"100%",opacity:.5,backgroundImage:`url(${A})`,backgroundPosition:"center",backgroundSize:"cover",zIndex:y.banner}},children:[e(a,{sx:C=>({position:"absolute",width:"100%",height:"100%",zIndex:y.bannerFilter,backdropFilter:"blur(3px)",background:`linear-gradient(to right, ${S(k(C.palette.neutral600.main),.8)}, ${S(k(C.palette.neutral600.main),.4)} 100% )`})}),e(a,{sx:C=>({position:"absolute",width:"100%",height:"100%",zIndex:y.darkDRop,background:`linear-gradient(to top, ${S(k(C.palette.neutral600.main),.9)}, rgba(0,0,0,0) 25% )`})}),n(a,{sx:{height:120,width:120,position:"absolute",zIndex:y.other},children:[r&&e(s,{sx:{position:"absolute",lineHeight:1,bottom:0,p:.5,textShadow:"0 0 5px black"},children:ee(r.level,r.ascension)}),r&&n(s,{sx:{position:"absolute",lineHeight:1,bottom:0,right:0,p:.5,textShadow:"0 0 5px black"},children:["C",r.constellation]}),t.startsWith("Traveler")&&e(s,{sx:{position:"absolute",lineHeight:1,top:0,left:0,p:.5,textShadow:"0 0 5px black"},children:e(te,{color:z,children:e(ae,{ele:z})})})]}),e(a,{component:"img",src:ne(t,o,h),sx:{height:120,width:120,zIndex:y.characterIcon}}),n(a,{sx:{pr:.5,pl:.5,py:.5,display:"flex",flexDirection:"column",flexGrow:1,width:"100%",minWidth:0,justifyContent:"space-between",zIndex:y.other},children:[n(s,{noWrap:!0,sx:{display:"flex",gap:1,alignItems:"center",textShadow:"0 0 5px black"},children:[e(oe,{}),e("span",{children:g})]}),n(s,{noWrap:!0,sx:{display:"flex",gap:1,alignItems:"center",textShadow:"0 0 5px black"},children:[e(ie,{}),e("span",{children:I})]}),n(a,{sx:{display:"flex",mb:.5,gap:1},children:[e(be,{weapon:m}),e(fe,{artifactData:b})]})]})]})})})})}function be({weapon:t}){return n(T,{bgt:"neutral600",sx:{height:"100%",display:"flex",flexDirection:"horizontal",boxShadow:"0 0 10px rgba(0,0,0,0.4)"},children:[e(a,{component:"img",src:se(t.key,t.ascension>=2),maxWidth:"100%",maxHeight:"50px",sx:{mt:"auto"}}),n(a,{sx:{pr:1,display:"flex",flexDirection:"column",justifyContent:"space-evenly",color:"neutral200.main"},children:[e(s,{sx:{},children:ce(t.level,t.ascension)}),le(t.key)&&n(s,{children:["R",t.refinement]})]})]})}function fe({artifactData:t}){const{setNum:l={},mains:c={}}=t,{t:i}=de("statKey_gen"),r=Object.entries(l).filter(([,o])=>o>1).map(([o,h])=>[o,h<4?2:4]);return n(T,{bgt:"neutral600",sx:{height:"100%",maxHeight:"50px",display:"flex",flexDirection:"horizontal",boxShadow:"0 0 10px rgba(0,0,0,0.4)",flexGrow:1},children:[e(a,{sx:{Width:"50px",minWidth:"50px",height:"50px",position:"relative"},children:r.length===2?e(Ce,{sets:r.map(([o])=>o)}):r.length===1?e(ye,{set:r[0][0],num:r[0][1]}):!1}),e(a,{sx:{display:"flex",flexGrow:1,position:"relative",justifyContent:"space-around",alignItems:"center"},children:Object.entries(c).filter(([,o])=>o).map(([o,h])=>{const u=e(pe,{slotKey:o,iconProps:{sx:{fontSize:"inherit"}}}),g=e(xe,{statKey:h,iconProps:{sx:{fontSize:"inherit"}}});return e(P,{title:e(a,{children:n(x.Suspense,{fallback:e($,{variant:"text"}),children:[n(s,{sx:{display:"flex",gap:1,alignItems:"center"},children:[u,e(he,{slotKey:o})]}),n(s,{sx:{display:"flex",gap:1,alignItems:"center"},children:[g,i(h)]})]})}),children:n(s,{sx:{lineHeight:0},children:[u,g]})},o+h)})})]})}function Ce({sets:t}){const l=t[0],c=t[1];return n(N,{children:[e(a,{component:"img",sx:{position:"absolute",top:0,left:0,Width:"50px",height:"50px",clipPath:"polygon(0 0, 0 100%, 100% 0)"},src:v(l,"flower")}),e(a,{component:"img",sx:{position:"absolute",top:0,left:0,Width:"50px",height:"50px",clipPath:"polygon(100% 100%, 0 100%, 100% 0)"},src:v(c,"flower")}),e(a,{className:"botright",sx:i=>({position:"absolute",bottom:0,right:0,width:"1.4em",padding:"0.2em",textAlign:"center",backgroundColor:S(k(i.palette.primary.main),.4),borderRadius:"100%"}),children:"2"}),e(a,{sx:i=>({position:"absolute",top:0,left:0,width:"1.4em",padding:"0.2em",textAlign:"center",backgroundColor:S(k(i.palette.primary.main),.4),borderRadius:"100%"}),children:"2"})]})}function ye({set:t,num:l}){return n(N,{children:[e(a,{sx:c=>({position:"absolute",bottom:0,right:0,width:"1.4em",padding:"0.2em",textAlign:"center",backgroundColor:S(k(c.palette.primary.main),.4),borderRadius:"100%"}),children:l}),e(a,{component:"img",src:v(t,"flower"),sx:{Width:"50px",height:"50px"}})]})}export{Ie as T};
