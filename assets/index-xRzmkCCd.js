import{r as u,bv as E,bw as U,bx as F,by as K,bz as k,j as D,bA as H,bB as P,bC as V,bD as I,bE as j,c as nt,bF as ot,t as it,v as lt,w as ct,g as dt,a as me,a6 as fe,x as ve,bG as Re,bH as ue,bI as N,aN as xe,e as y,f as w,N as q,d as e,bJ as Q,bh as Y,aX as A,aC as _,bi as Z,bq as we,bK as Te,W,bL as ke,bM as Me,al as he,S as z,J as pt,K as ut,bN as Ce,bO as He,aF as ht,L as yt,an as je,ao as Ee,bP as bt,bQ as Ue,G as C,h as ee,ap as Fe,ah as $e,T as O,bR as gt,bS as mt,b4 as Ke,E as ne,bT as ft,bU as se,aM as Ve,X as de,b as qe,ai as Ge,bV as vt,U as xt,F as B,bW as Je,bX as wt,bY as Xe,bZ as Tt,b_ as Ct,b$ as St,c0 as Rt,c1 as ae,c2 as kt,c3 as Mt,c4 as $t,c5 as ye,c6 as Qe,c7 as Ye,c8 as Ze,c9 as oe,ca as ge,ba as Lt,cb as Dt,cc as Le,cd as Nt,ce as Ot,cf as Bt,O as It,cg as Wt,M as At,ch as _t,ci as re,cj as Pt,Y as zt,V as Ht}from"./index-BuailQYj.js";import{P as jt}from"./People-BziFvAVf.js";const et=u.createContext();function Et(t){return E("MuiTable",t)}U("MuiTable",["root","stickyHeader"]);const Ut=["className","component","padding","size","stickyHeader"],Ft=t=>{const{classes:a,stickyHeader:o}=t;return V({root:["root",o&&"stickyHeader"]},Et,a)},Kt=H("table",{name:"MuiTable",slot:"Root",overridesResolver:(t,a)=>{const{ownerState:o}=t;return[a.root,o.stickyHeader&&a.stickyHeader]}})(({theme:t,ownerState:a})=>k({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":k({},t.typography.body2,{padding:t.spacing(2),color:(t.vars||t).palette.text.secondary,textAlign:"left",captionSide:"bottom"})},a.stickyHeader&&{borderCollapse:"separate"})),De="table",ie=u.forwardRef(function(a,o){const n=F({props:a,name:"MuiTable"}),{className:p,component:l=De,padding:h="normal",size:r="medium",stickyHeader:c=!1}=n,b=K(n,Ut),g=k({},n,{component:l,padding:h,size:r,stickyHeader:c}),f=Ft(g),R=u.useMemo(()=>({padding:h,size:r,stickyHeader:c}),[h,r,c]);return D.jsx(et.Provider,{value:R,children:D.jsx(Kt,k({as:l,role:l===De?null:"table",ref:o,className:P(f.root,p),ownerState:g},b))})}),pe=u.createContext();function Vt(t){return E("MuiTableBody",t)}U("MuiTableBody",["root"]);const qt=["className","component"],Gt=t=>{const{classes:a}=t;return V({root:["root"]},Vt,a)},Jt=H("tbody",{name:"MuiTableBody",slot:"Root",overridesResolver:(t,a)=>a.root})({display:"table-row-group"}),Xt={variant:"body"},Ne="tbody",le=u.forwardRef(function(a,o){const n=F({props:a,name:"MuiTableBody"}),{className:p,component:l=Ne}=n,h=K(n,qt),r=k({},n,{component:l}),c=Gt(r);return D.jsx(pe.Provider,{value:Xt,children:D.jsx(Jt,k({className:P(c.root,p),as:l,ref:o,role:l===Ne?null:"rowgroup",ownerState:r},h))})});function Qt(t){return E("MuiTableCell",t)}const Yt=U("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),Zt=["align","className","component","padding","scope","size","sortDirection","variant"],ea=t=>{const{classes:a,variant:o,align:n,padding:p,size:l,stickyHeader:h}=t,r={root:["root",o,h&&"stickyHeader",n!=="inherit"&&`align${I(n)}`,p!=="normal"&&`padding${I(p)}`,`size${I(l)}`]};return V(r,Qt,a)},ta=H("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(t,a)=>{const{ownerState:o}=t;return[a.root,a[o.variant],a[`size${I(o.size)}`],o.padding!=="normal"&&a[`padding${I(o.padding)}`],o.align!=="inherit"&&a[`align${I(o.align)}`],o.stickyHeader&&a.stickyHeader]}})(({theme:t,ownerState:a})=>k({},t.typography.body2,{display:"table-cell",verticalAlign:"inherit",borderBottom:t.vars?`1px solid ${t.vars.palette.TableCell.border}`:`1px solid
    ${t.palette.mode==="light"?j.lighten(j.alpha(t.palette.divider,1),.88):j.darken(j.alpha(t.palette.divider,1),.68)}`,textAlign:"left",padding:16},a.variant==="head"&&{color:(t.vars||t).palette.text.primary,lineHeight:t.typography.pxToRem(24),fontWeight:t.typography.fontWeightMedium},a.variant==="body"&&{color:(t.vars||t).palette.text.primary},a.variant==="footer"&&{color:(t.vars||t).palette.text.secondary,lineHeight:t.typography.pxToRem(21),fontSize:t.typography.pxToRem(12)},a.size==="small"&&{padding:"6px 16px",[`&.${Yt.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}},a.padding==="checkbox"&&{width:48,padding:"0 0 0 4px"},a.padding==="none"&&{padding:0},a.align==="left"&&{textAlign:"left"},a.align==="center"&&{textAlign:"center"},a.align==="right"&&{textAlign:"right",flexDirection:"row-reverse"},a.align==="justify"&&{textAlign:"justify"},a.stickyHeader&&{position:"sticky",top:0,zIndex:2,backgroundColor:(t.vars||t).palette.background.default})),v=u.forwardRef(function(a,o){const n=F({props:a,name:"MuiTableCell"}),{align:p="inherit",className:l,component:h,padding:r,scope:c,size:b,sortDirection:g,variant:f}=n,R=K(n,Zt),T=u.useContext(et),x=u.useContext(pe),d=x&&x.variant==="head";let S;h?S=h:S=d?"th":"td";let i=c;S==="td"?i=void 0:!i&&d&&(i="col");const s=f||x&&x.variant,m=k({},n,{align:p,component:S,padding:r||(T&&T.padding?T.padding:"normal"),size:b||(T&&T.size?T.size:"medium"),sortDirection:g,stickyHeader:s==="head"&&T&&T.stickyHeader,variant:s}),M=ea(m);let L=null;return g&&(L=g==="asc"?"ascending":"descending"),D.jsx(ta,k({as:S,ref:o,className:P(M.root,l),"aria-sort":L,scope:i,ownerState:m},R))});function aa(t){return E("MuiTableHead",t)}U("MuiTableHead",["root"]);const ra=["className","component"],sa=t=>{const{classes:a}=t;return V({root:["root"]},aa,a)},na=H("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(t,a)=>a.root})({display:"table-header-group"}),oa={variant:"head"},Oe="thead",ce=u.forwardRef(function(a,o){const n=F({props:a,name:"MuiTableHead"}),{className:p,component:l=Oe}=n,h=K(n,ra),r=k({},n,{component:l}),c=sa(r);return D.jsx(pe.Provider,{value:oa,children:D.jsx(na,k({as:l,className:P(c.root,p),ref:o,role:l===Oe?null:"rowgroup",ownerState:r},h))})});function ia(t){return E("MuiTableRow",t)}const Be=U("MuiTableRow",["root","selected","hover","head","footer"]),la=["className","component","hover","selected"],ca=t=>{const{classes:a,selected:o,hover:n,head:p,footer:l}=t;return V({root:["root",o&&"selected",n&&"hover",p&&"head",l&&"footer"]},ia,a)},da=H("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(t,a)=>{const{ownerState:o}=t;return[a.root,o.head&&a.head,o.footer&&a.footer]}})(({theme:t})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${Be.hover}:hover`]:{backgroundColor:(t.vars||t).palette.action.hover},[`&.${Be.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:j.alpha(t.palette.primary.main,t.palette.action.selectedOpacity),"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:j.alpha(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity)}}})),Ie="tr",$=u.forwardRef(function(a,o){const n=F({props:a,name:"MuiTableRow"}),{className:p,component:l=Ie,hover:h=!1,selected:r=!1}=n,c=K(n,la),b=u.useContext(pe),g=k({},n,{component:l,hover:h,selected:r,head:b&&b.variant==="head",footer:b&&b.variant==="footer"}),f=ca(g);return D.jsx(da,k({as:l,ref:o,className:P(f.root,p),role:l===Ie?null:"row",ownerState:g},c))}),pa=nt(D.jsx("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownward");function ua(t){return E("MuiTableSortLabel",t)}const be=U("MuiTableSortLabel",["root","active","icon","iconDirectionDesc","iconDirectionAsc"]),ha=["active","children","className","direction","hideSortIcon","IconComponent"],ya=t=>{const{classes:a,direction:o,active:n}=t,p={root:["root",n&&"active"],icon:["icon",`iconDirection${I(o)}`]};return V(p,ua,a)},ba=H(ot,{name:"MuiTableSortLabel",slot:"Root",overridesResolver:(t,a)=>{const{ownerState:o}=t;return[a.root,o.active&&a.active]}})(({theme:t})=>({cursor:"pointer",display:"inline-flex",justifyContent:"flex-start",flexDirection:"inherit",alignItems:"center","&:focus":{color:(t.vars||t).palette.text.secondary},"&:hover":{color:(t.vars||t).palette.text.secondary,[`& .${be.icon}`]:{opacity:.5}},[`&.${be.active}`]:{color:(t.vars||t).palette.text.primary,[`& .${be.icon}`]:{opacity:1,color:(t.vars||t).palette.text.secondary}}})),ga=H("span",{name:"MuiTableSortLabel",slot:"Icon",overridesResolver:(t,a)=>{const{ownerState:o}=t;return[a.icon,a[`iconDirection${I(o.direction)}`]]}})(({theme:t,ownerState:a})=>k({fontSize:18,marginRight:4,marginLeft:4,opacity:0,transition:t.transitions.create(["opacity","transform"],{duration:t.transitions.duration.shorter}),userSelect:"none"},a.direction==="desc"&&{transform:"rotate(0deg)"},a.direction==="asc"&&{transform:"rotate(180deg)"})),tt=u.forwardRef(function(a,o){const n=F({props:a,name:"MuiTableSortLabel"}),{active:p=!1,children:l,className:h,direction:r="asc",hideSortIcon:c=!1,IconComponent:b=pa}=n,g=K(n,ha),f=k({},n,{active:p,direction:r,hideSortIcon:c,IconComponent:b}),R=ya(f);return D.jsxs(ba,k({className:P(R.root,h),component:"span",disableRipple:!0,ownerState:f,ref:o},g,{children:[l,c&&!p?null:D.jsx(ga,{as:b,className:P(R.icon),ownerState:f})]}))});var G={},We;function ma(){if(We)return G;We=1;var t=it();Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var a=t(lt()),o=ct(),n=(0,a.default)((0,o.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"Search");return G.default=n,G}var fa=ma();const Se=dt(fa),Ae=[5,4,3];function va(){const t=me(),a=fe(t.displayArchive),[o,n]=u.useState(""),p=u.useDeferredValue(o),l=Z([...Ae]),{t:h}=ve(Re.map(d=>`artifact_${d}_gen`)),{artifact:r}=a,c=u.useCallback(d=>t.displayArchive.set({artifact:{...r,...d}}),[t,r]),b=u.useMemo(()=>Re.filter(d=>{const{rarities:S}=ue(d);if(!r.rarity.includes(Math.max(...S)))return!1;const i=N.t(`artifactNames_gen:${d}`).toLocaleLowerCase(),s=h("setEffects.4",{ns:`artifact_${d}_gen`}).toLocaleLowerCase(),m=h("setEffects.2",{ns:`artifact_${d}_gen`}).toLocaleLowerCase();return!(p&&!i.includes(p.toLocaleLowerCase())&&!m.includes(p.toLocaleLowerCase())&&!s.includes(p.toLocaleLowerCase()))}),[r,p,h]),g=u.useMemo(()=>b.filter(d=>!d.startsWith("Prayers")),[b]),f=u.useMemo(()=>b.filter(d=>d.startsWith("Prayers")),[b]),{numShow:R,setTriggerElement:T}=xe(10,g.length),x=u.useMemo(()=>g.slice(0,R),[g,R]);return y(w,{children:[y(q,{sx:{display:"flex",gap:2},children:[e(Q,{value:r.rarity,children:Ae.map(d=>e(Y,{value:d,onClick:()=>c({rarity:l(r.rarity,d)}),children:e(A,{color:`rarity${d}`,children:e(_,{sx:{verticalAlign:"text-top"}})})},d))}),e(we,{fullWidth:!0,variant:"outlined",value:o,onChange:d=>n(d.target.value),InputProps:{startAdornment:e(Te,{position:"start",children:e(Se,{})})}})]}),y(ie,{children:[e(ce,{children:y($,{children:[e(v,{children:"Set"}),e(v,{children:"Rarity"}),e(v,{children:"2-piece Bonus"}),e(v,{children:"4-piece Bonus"})]})}),y(le,{children:[x.map(d=>{const{rarities:S}=ue(d);return e(u.Suspense,{fallback:e($,{children:e(v,{colSpan:4,children:e(z,{sx:{borderRadius:1},variant:"rectangular",width:"100%",height:50})})}),children:y($,{children:[e(v,{children:y(w,{sx:{display:"flex",alignItems:"center"},children:[e(W,{size:4,src:ke(d)}),e(Me,{setKey:d})]})}),e(v,{children:e(w,{display:"flex",children:S.sort().reverse().map(i=>e(A,{color:`rarity${i}`,children:e(_,{})},i))})}),e(v,{children:e(he,{ns:`artifact_${d}_gen`,key18:"setEffects.2"})}),e(v,{children:e(he,{ns:`artifact_${d}_gen`,key18:"setEffects.4"})})]},d)})}),g.length!==x.length&&e($,{children:e(v,{colSpan:4,children:e(z,{ref:d=>{d&&T(d)},sx:{borderRadius:1},variant:"rectangular",width:"100%",height:50})})})]})]}),f.length!==0&&y(ie,{sx:{mt:2},children:[e(ce,{children:y($,{children:[e(v,{children:"Set"}),e(v,{children:"Rarity"}),e(v,{children:"1-piece Bonus"})]})}),e(le,{children:f.map(d=>{const{rarities:S}=ue(d);return y($,{children:[e(v,{children:y(w,{sx:{display:"flex",alignItems:"center"},children:[e(W,{size:4,src:ke(d)}),e(Me,{setKey:d})]})}),e(v,{children:e(w,{display:"flex",children:S.sort().reverse().map(i=>e(A,{color:`rarity${i}`,children:e(_,{})},i))})}),e(v,{width:"90%",children:e(he,{ns:`artifact_${d}_gen`,key18:"setEffects.1"})})]},d)})})]})]})}const J={xs:12,sm:6,md:4};function xa({show:t,character:a,onClose:o}){const{t:n}=ve("sheet_gen"),p=pt(),l=ut(p.breakpoints.up("lg")),{key:h,constellation:r,ascension:c}=a,{gender:b}=Ce(),g=He(h,b),f=[["auto",n("talents.auto")],["skill",n("talents.skill")],["burst",n("talents.burst")]],R=[["passive1",n("unlockPassive1"),1],["passive2",n("unlockPassive2"),4],["passive3",n("unlockPassive3"),0]],T=u.useMemo(()=>ht(1,mt).map(x=>e(X,{characterKey:h,talentKey:`constellation${x}`,subtitle:n("constellationLvl",{level:x})})),[n,h]);return e(Fe,{open:t,onClose:o,containerProps:{maxWidth:"xl"},children:y(ee,{children:[e(yt,{title:y(w,{children:[e(bt,{characterKey:h,sideMargin:!0}),e(w,{sx:{pl:1},component:"span",children:e(Ue,{characterKey:h,gender:b})})]}),action:e(je,{onClick:o,children:e(Ee,{})})}),e(q,{children:y(C,{container:!0,spacing:1,children:[l&&e(C,{item:!0,xs:12,md:12,lg:3,sx:{display:"flex",flexDirection:"column",gap:1},children:T.map((x,d)=>e(w,{sx:{opacity:r>=d+1?1:.5},children:x},d))}),y(C,{item:!0,xs:12,md:12,lg:9,container:!0,spacing:1,children:[f.map(([x,d])=>e(C,{item:!0,...J,children:e(X,{characterKey:h,talentKey:x,subtitle:d})},x)),!!g.getTalentOfKey("sprint")&&e(C,{item:!0,...J,children:e(X,{characterKey:h,talentKey:"sprint",subtitle:n("talents.altSprint")})}),!!g.getTalentOfKey("passive")&&e(C,{item:!0,...J,children:e(X,{characterKey:h,talentKey:"passive",subtitle:"Passive"})}),R.map(([x,d,S])=>{const i=c>=S;return g.getTalentOfKey(x)?e(C,{item:!0,style:{opacity:i?1:.5},...J,children:e(X,{characterKey:h,talentKey:x,subtitle:d})},x):null})]}),!l&&e(C,{item:!0,xs:12,md:12,lg:3,container:!0,spacing:1,children:T.map((x,d)=>e(C,{item:!0,sx:{opacity:r>=d+1?1:.5},...J,children:x},d))})]})})]})})}function X({characterKey:t,talentKey:a,subtitle:o}){const{gender:n}=Ce(),l=He(t,n).getTalentOfKey(a);return e(ee,{bgt:"light",sx:{height:"100%"},children:y(q,{children:[y(C,{container:!0,sx:{flexWrap:"nowrap"},children:[e(C,{item:!0,children:e(w,{component:$e?$e:"img",src:l==null?void 0:l.img,sx:{width:60,height:"auto"}})}),y(C,{item:!0,flexGrow:1,sx:{pl:1},children:[e(O,{variant:"h6",children:l==null?void 0:l.name}),e(O,{variant:"subtitle1",children:o})]})]}),l!=null&&l.sections?e(gt,{sections:l.sections,hideDesc:!0}):null]})})}const _e=[5,4];function wa(){const{silly:t}=u.useContext(Ke),a=me(),o=fe(a.displayArchive),n=Z([..._e]),p=Z([...ne]),[l,h]=u.useState(""),r=u.useDeferredValue(l),{character:c}=o,b=u.useCallback(i=>a.displayArchive.set({character:{...c,...i}}),[a,c]),g=u.useMemo(()=>ft.filter(i=>{const{rarity:s,weaponType:m}=se(i);if(!c.rarity.includes(s)||!c.weaponType.includes(m))return!1;const M=N.t(`charNames_gen:${i}`),L=t&&N.exists(`sillyWisher_charNames:${i}`)?N.t(`sillyWisher_charNames:${i}`):"";return!(r&&!M.toLocaleLowerCase().includes(r.toLocaleLowerCase())&&!L.toLocaleLowerCase().includes(r.toLocaleLowerCase()))}),[c,r,t]),{numShow:f,setTriggerElement:R}=xe(10,g.length),T=i=>{const s=c.sortOrderBy===i&&c.sortOrder==="asc";b({sortOrder:s?"desc":"asc",sortOrderBy:i})},x=u.useMemo(()=>Ve([c.sortOrderBy],c.sortOrder==="asc",{name:i=>t&&N.exists(`sillyWisher_charNames:${i}`)?N.t(`sillyWisher_charNames:${i}`):N.t(`charNames_gen:${i}`),rarity:i=>se(i).rarity,element:i=>qe(i),type:i=>se(i).weaponType}),[c.sortOrder,c.sortOrderBy,t]),d=u.useMemo(()=>g.sort(x).slice(0,f),[g,f,x]),S=[{key:"name",label:"Name",width:40},{key:"rarity",label:"Rarity",width:20},{key:"element",label:"Element",width:20},{key:"type",label:"Type",width:20}];return y(w,{children:[y(q,{sx:{display:"flex",gap:2},children:[e(Q,{value:c.rarity,children:_e.map(i=>e(Y,{value:i,onClick:()=>b({rarity:n(c.rarity,i)}),children:e(A,{color:`rarity${i}`,children:e(_,{sx:{verticalAlign:"text-top"}})})},i))}),e(Q,{value:c.weaponType,children:ne.map(i=>{var s;return e(Y,{value:i,onClick:()=>b({weaponType:p(c.weaponType,i)}),children:e(W,{src:(s=de.weaponTypes)==null?void 0:s[i],size:2})},i)})}),e(we,{fullWidth:!0,variant:"outlined",value:l,onChange:i=>h(i.target.value),InputProps:{startAdornment:e(Te,{position:"start",children:e(Se,{})})}})]}),y(ie,{children:[e(ce,{children:e($,{children:S.map(({key:i,label:s,width:m})=>e(v,{sortDirection:c.sortOrderBy===i?c.sortOrder:!1,width:`${m}%`,children:e(tt,{active:c.sortOrderBy===i,direction:c.sortOrderBy===i?c.sortOrder:"asc",onClick:()=>T(i),children:s})}))})}),y(le,{children:[d.map(i=>e(Ta,{characterKey:i},i)),d.length!==g.length&&e($,{children:e(v,{colSpan:5,children:e(z,{ref:i=>{i&&R(i)},sx:{borderRadius:1},variant:"rectangular",width:"100%",height:50})})})]})]})]})}const Ta=u.memo(function({characterKey:a}){var f;const{silly:o}=u.useContext(Ke),{gender:n}=Ce(),[p,l,h]=Ge(),{rarity:r,weaponType:c}=se(a),b=qe(a),g=u.useMemo(()=>({key:a,level:90,ascension:6,constellation:6,talent:{auto:10,skill:10,burst:10}}),[a]);return y(u.Suspense,{fallback:e($,{children:e(v,{colSpan:4,children:e(z,{sx:{borderRadius:1},variant:"rectangular",width:"100%",height:50})})}),children:[e(xa,{show:p,character:g,onClose:h}),y($,{hover:!0,onClick:l,sx:{cursor:"pointer"},children:[e(v,{children:y(w,{sx:{display:"flex",alignItems:"center"},children:[e(W,{size:4,src:vt(a,n,o)}),e(Ue,{characterKey:a,gender:n})]})}),e(v,{children:e(w,{display:"flex",children:e(A,{color:`rarity${r}`,children:e(_,{})})})}),e(v,{children:e(xt,{ele:b,iconProps:{color:b}})}),e(v,{children:e(W,{src:(f=de.weaponTypes)==null?void 0:f[c],size:3,sideMargin:!0})})]})]})});function Ca({show:t,weaponUIData:a,weapon:o,onClose:n}){const{key:p,level:l=0,refinement:h=1,ascension:r=0}=o,c=p&&B(p),b=p?Je(p,r>=2):"";return e(Fe,{open:t,onClose:n,containerProps:{maxWidth:"md"},children:e(ee,{children:e(q,{children:c&&a&&y(C,{container:!0,spacing:1.5,children:[e(C,{item:!0,xs:12,sm:3,children:y(C,{container:!0,spacing:1.5,children:[e(C,{item:!0,xs:6,sm:12,children:e(w,{sx:{position:"relative",display:"flex"},children:e(w,{component:"img",src:b,className:`grad-${c.rarity}star`,sx:{maxWidth:256,width:"100%",height:"auto",borderRadius:1}})})}),e(C,{item:!0,xs:6,sm:12,children:e(O,{children:e("small",{children:p&&e(wt,{weaponKey:p})})})})]})}),y(C,{item:!0,xs:12,sm:9,sx:{display:"flex",flexDirection:"column",gap:1},children:[y(w,{display:"flex",gap:1,flexWrap:"wrap",children:[e(O,{variant:"h5",children:e(Xe,{weaponKey:p})}),n&&e(je,{onClick:n,sx:{marginLeft:"auto"},children:e(Ee,{})})]}),y(O,{children:["Lv. ",Tt(l,r)," R",h]}),e(Ct,{stars:c.rarity}),e(O,{variant:"subtitle1",children:e("strong",{children:p&&e(St,{weaponKey:p})})}),e(O,{gutterBottom:!0,children:p&&e(Rt,{weaponKey:p,refineIndex:(a.get(ae.weapon.refinement).value??1)-1})}),e(w,{display:"flex",flexDirection:"column",gap:1,children:e(ee,{bgt:"light",children:e(kt,{bgt:"light",children:[ae.weapon.main,ae.weapon.sub,ae.weapon.sub2].map(g=>{const f=a.get(g);return f.isEmpty||!f.value?null:e(Mt,{calcRes:f,component:$t},JSON.stringify(f.info))})})})})]})]})})})})}const Pe=[5,4,3,2,1];function Sa(){const t=me(),a=fe(t.displayArchive),o=Z([...Pe]),n=Z([...ne]),[p,l]=u.useState(""),h=u.useDeferredValue(p),{weapon:r}=a,c=u.useCallback(s=>t.displayArchive.set({weapon:{...r,...s}}),[t,r]),b=u.useMemo(()=>ye.filter(s=>{const{rarity:m,subStat:M,weaponType:L}=B(s);if(!r.rarity.includes(m)||r.subStat.length&&(!M||!r.subStat.includes(M.type))||!r.weaponType.includes(L))return!1;const te=N.t(`weaponNames_gen:${s}`);return!(h&&!te.toLocaleLowerCase().includes(h.toLocaleLowerCase()))}),[r,h]),g=s=>{const m=r.sortOrderBy===s&&r.sortOrder==="asc";c({sortOrder:m?"desc":"asc",sortOrderBy:s})},f=u.useMemo(()=>{const s=new Map;return ye.forEach(m=>{const{rarity:M}=B(m),L={id:"invalid",ascension:M>2?6:4,level:M>2?90:70,refinement:1},te=Qe([Ye(m).data,Ze(L)]),rt=te.get(oe.weapon.main),st=te.get(oe.weapon.sub);s.set(m,{main:ge(rt).valueString,sub:ge(st).valueString})}),s},[]),R=u.useMemo(()=>Ve(r.sortOrderBy==="sub"?["subType",r.sortOrderBy]:[r.sortOrderBy],r.sortOrder==="asc",{name:s=>N.t(`weaponNames_gen:${s}`),type:s=>B(s).weaponType,rarity:s=>B(s).rarity,main:s=>{var m;return((m=f.get(s))==null?void 0:m.main)??""},sub:s=>{var m;return((m=f.get(s))==null?void 0:m.sub)??""},subType:s=>{var m;return((m=B(s).subStat)==null?void 0:m.type)??""}}),[r.sortOrder,r.sortOrderBy,f]),{numShow:T,setTriggerElement:x}=xe(10,b.length),d=u.useMemo(()=>b.sort(R).slice(0,T),[b,R,T]),S=u.useMemo(()=>Lt(Le,s=>ye.forEach(m=>{const{subStat:M}=B(m);if(!M||!M.type)return;const{type:L}=M;s[L].total++,b.includes(m)&&s[L].current++})),[b]),i=[{key:"name",label:"Name",width:30},{key:"type",label:"Type",width:10},{key:"rarity",label:"Rarity",width:10},{key:"main",label:"Main",width:20},{key:"sub",label:"Secondary",width:30}];return y(w,{children:[y(q,{sx:{display:"flex",gap:2},children:[e(Q,{value:r.rarity,children:Pe.map(s=>e(Y,{value:s,onClick:()=>c({rarity:o(r.rarity,s)}),children:e(A,{color:`rarity${s}`,children:e(_,{sx:{verticalAlign:"text-top"}})})},s))}),e(Q,{value:r.weaponType,children:ne.map(s=>{var m;return e(Y,{value:s,onClick:()=>c({weaponType:n(r.weaponType,s)}),children:e(W,{src:(m=de.weaponTypes)==null?void 0:m[s],size:2})},s)})}),e(Dt,{fullWidth:!0,substatKeys:r.subStat,setSubstatKeys:s=>{c({subStat:s})},totals:S,allSubstatKeys:[...Le]}),e(we,{fullWidth:!0,variant:"outlined",value:p,onChange:s=>l(s.target.value),InputProps:{startAdornment:e(Te,{position:"start",children:e(Se,{})})}})]}),y(ie,{children:[e(ce,{children:e($,{children:i.map(({key:s,label:m,width:M})=>e(v,{sortDirection:r.sortOrderBy===s?r.sortOrder:!1,width:`${M}%`,children:e(tt,{active:r.sortOrderBy===s,direction:r.sortOrderBy===s?r.sortOrder:"asc",onClick:()=>g(s),children:m})}))})}),y(le,{children:[d.map(s=>e(Ra,{weaponKey:s},s)),b.length!==d.length&&e($,{children:e(v,{colSpan:5,children:e(z,{ref:s=>{s&&x(s)},sx:{borderRadius:1},variant:"rectangular",width:"100%",height:50})})})]})]})]})}const Ra=u.memo(function({weaponKey:a}){var f;const[o,n,p]=Ge(),{rarity:l,weaponType:h}=B(a),r=u.useMemo(()=>({id:"invalid",ascension:l>2?6:4,key:a,level:l>2?90:70,refinement:1,location:"",lock:!1}),[l,a]),c=u.useMemo(()=>Qe([Ye(a).data,Ze(r)]),[a,r]),b=c.get(oe.weapon.main),g=c.get(oe.weapon.sub);return y(u.Suspense,{fallback:e($,{children:e(v,{colSpan:5,children:e(z,{sx:{borderRadius:1},variant:"rectangular",width:"100%",height:50})})}),children:[e(Ca,{show:o,weaponUIData:c,weapon:r,onClose:p}),y($,{hover:!0,onClick:n,sx:{cursor:"pointer"},children:[e(v,{children:y(w,{sx:{display:"flex",alignItems:"center"},children:[e(W,{size:4,src:Je(a,!0)}),e(Xe,{weaponKey:a})]})}),e(v,{children:e(W,{src:(f=de.weaponTypes)==null?void 0:f[h],size:3,sideMargin:!0})}),e(v,{children:e(w,{display:"flex",children:e(A,{color:`rarity${l}`,children:e(_,{})})})}),e(v,{children:e(ze,{node:b})}),e(v,{children:e(ze,{node:g})})]})]})});function ze({node:t}){const{name:a,icon:o}=Nt(t.info);return Number.isNaN(t.value)?null:y(w,{sx:{display:"flex"},children:[y(O,{flexGrow:1,children:[o," ",a]}),e(O,{children:ge(t).valueString})]})}const ka={i18Key:"tabs.artifacts",icon:e(zt,{}),value:"artifacts",to:"/artifacts"},Ma={i18Key:"tabs.weapons",icon:e(Ht,{}),value:"weapons",to:"/weapons"},$a={i18Key:"tabs.characters",icon:e(jt,{}),value:"characters",to:"/characters"},at=[ka,Ma,$a],La=at.map(({value:t})=>t);function Oa(){const{t}=ve("ui"),{params:{tab:a}}=Ot({path:"/archive/:tab",end:!1})??{params:{}},o=u.useMemo(()=>La.find(p=>p===a)??"artifacts",[a]);return y(ee,{children:[e(Wt,{variant:"fullWidth",value:o,sx:{"& .MuiTab-root:hover":{transition:"background-color 0.25s ease",backgroundColor:"rgba(255,255,255,0.1)"},"& .Mui-selected":{color:"white !important"},"& .MuiTabs-indicator":{height:"4px"}},children:at.map(({i18Key:n,icon:p,value:l,to:h})=>e(Bt,{icon:p,iconPosition:"start",value:l,label:t(n),component:It,to:`/archive${h}`},l))}),e(At,{}),e(u.Suspense,{fallback:e(z,{variant:"rectangular",width:"100%",height:1e3}),children:y(_t,{children:[e(re,{path:"artifacts",element:e(va,{})}),e(re,{path:"weapons",element:e(Sa,{})}),e(re,{path:"characters",element:e(wa,{})}),e(re,{path:"*",element:e(Pt,{to:"artifacts",replace:!0})})]})})]})}export{Oa as default};
