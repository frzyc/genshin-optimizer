import{u as O,a as N,ai as E,d as e,e as n,f as a,ak as H,T as s,B as P,I as G,au as U,C as L,X as V,ah as l,h as D,i as X,bN as Z,r as u,b4 as _,bU as q,k as J,l as Q,d1 as Y,b as K,D as ee,d2 as te,aX as ae,U as ne,bV as oe,P as ie,o as re,S as $,s as se,bW as le,d3 as ce,bZ as de,x as he,d4 as pe,Z as xe,d5 as ue,cu as T,cl as M}from"./index-CwQMn7h1.js";import{u as ge,c as I,h as S}from"./useTeamChar-Cc8fpqXm.js";import{T as me}from"./TeamDelModal-CsbqRocX.js";function ve({teamId:t,onClick:c,bgt:d}){const i=O(t),{name:r,description:o,loadoutData:p}=i,g=N(),[m,x,v]=E();return e(D,{bgt:d,sx:{height:"100%",border:"1px rgba(200,200,200,0.4) solid"},children:n(a,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[n(a,{sx:{display:"flex",flexDirection:"row"},children:[e(H,{onClick:()=>c(),variant:"outlined",fullWidth:!0,color:"neutral300",sx:{borderTopRightRadius:0,borderBottomRightRadius:0,borderBottomLeftRadius:0},children:n(s,{sx:{display:"flex",gap:1,alignItems:"center"},variant:"h6",children:[e("span",{children:r}),o&&e(P,{title:e(s,{children:o}),children:e(G,{})})]})}),e(me,{teamId:t,show:m,onHide:v,onDel:function(){}}),e(H,{variant:"outlined",size:"small",onClick:x,color:"error",sx:{borderTopLeftRadius:0,borderBottomRightRadius:0,borderBottomLeftRadius:0},children:e(U,{})})]}),e(a,{sx:{marginTop:"auto"},children:p.map((b,w)=>{var C;const f=b==null?void 0:b.teamCharId,h=f&&((C=g.teamChars.get(f))==null?void 0:C.key);return e(a,{className:"team-teammate",sx:{border:"1px rgba(200,200,200,0.3) solid","&:hover":{border:"1px rgba(200,200,200,0.8) solid"}},children:h?e(L,{onClick:()=>c(h),children:e(be,{characterKey:h,teamId:t,teamCharId:f})}):e(L,{onClick:()=>c(),sx:{height:120,position:"relative"},children:e(a,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:120,backgroundColor:"neutral600.main"},children:e(a,{component:l?l:"img",src:V.team[`team${w+1}`],sx:{width:"auto",my:"15px",height:90,opacity:.7,mx:"auto"}})})})},`${w}_${f}`)})})]})})}const k={banner:0,bannerFilter:1,characterIcon:2,darkDRop:3,other:4};function be({characterKey:t,teamId:c,teamCharId:d}){var B;const i=N(),r=X(t),{gender:o}=Z(),{silly:p}=u.useContext(_),g=q(t),{name:m}=ge(d),x=i.teams.getLoadoutDatum(c,d),v=i.teams.getActiveBuildName(x),b=u.useMemo(()=>i.teams.getLoadoutWeapon(x),[x,i]),w=(()=>{const{buildType:y,buildTcId:j}=x;return y==="tc"&&j?J(i.buildTcs.get(j)):Object.values(i.teams.getLoadoutArtifacts(x)).filter(F=>F)})(),f=u.useMemo(()=>i.teams.getLoadoutArtifactData(x),[i,x]),h=Q(t,void 0,w,b),C=(B=h==null?void 0:h[t])==null?void 0:B.target,A=u.useMemo(()=>r&&{character:r},[r]),R=u.useMemo(()=>C&&h&&{data:C,teamData:h},[C,h]),W=Y(t,"banner",o),z=K(t);return!A||!R?null:e(se.Provider,{value:A,children:e(ee.Provider,{value:R,children:e(u.Suspense,{fallback:e($,{variant:"rectangular",width:"100%",height:300}),children:n(a,{className:W?void 0:`grad-${g.rarity}star`,sx:{display:"flex","&::before":{content:'""',display:"block",position:"absolute",left:0,top:0,width:"100%",height:"100%",opacity:.5,backgroundImage:`url(${W})`,backgroundPosition:"center",backgroundSize:"cover",zIndex:k.banner}},children:[e(a,{sx:y=>({position:"absolute",width:"100%",height:"100%",zIndex:k.bannerFilter,backdropFilter:"blur(3px)",background:`linear-gradient(to right, ${I(S(y.palette.neutral600.main),.8)}, ${I(S(y.palette.neutral600.main),.4)} 100% )`})}),e(a,{sx:y=>({position:"absolute",width:"100%",height:"100%",zIndex:k.darkDRop,background:`linear-gradient(to top, ${I(S(y.palette.neutral600.main),.9)}, rgba(0,0,0,0) 25% )`})}),n(a,{sx:{height:120,width:120,position:"absolute",zIndex:k.other},children:[r&&e(s,{sx:{position:"absolute",lineHeight:1,bottom:0,p:.5,textShadow:"0 0 5px black"},children:te(r.level,r.ascension)}),r&&n(s,{sx:{position:"absolute",lineHeight:1,bottom:0,right:0,p:.5,textShadow:"0 0 5px black"},children:["C",r.constellation]}),t.startsWith("Traveler")&&e(s,{sx:{position:"absolute",lineHeight:1,top:0,left:0,p:.5,textShadow:"0 0 5px black"},children:e(ae,{color:z,children:e(ne,{ele:z})})})]}),e(a,{component:l?l:"img",src:oe(t,o,p),sx:{height:120,width:120,zIndex:k.characterIcon}}),n(a,{sx:{pr:.5,pl:.5,py:.5,display:"flex",flexDirection:"column",flexGrow:1,width:"100%",minWidth:0,justifyContent:"space-between",zIndex:k.other},children:[n(s,{noWrap:!0,sx:{display:"flex",gap:1,alignItems:"center",textShadow:"0 0 5px black"},children:[e(ie,{}),e("span",{children:m})]}),n(s,{noWrap:!0,sx:{display:"flex",gap:1,alignItems:"center",textShadow:"0 0 5px black"},children:[e(re,{}),e("span",{children:v})]}),n(a,{sx:{display:"flex",mb:.5,gap:1},children:[e(fe,{weapon:b}),e(Ce,{artifactData:f})]})]})]})})})})}function fe({weapon:t}){return n(D,{bgt:"neutral600",sx:{height:"100%",display:"flex",flexDirection:"horizontal",boxShadow:"0 0 10px rgba(0,0,0,0.4)"},children:[e(a,{component:l?l:"img",src:le(t.key,t.ascension>=2),maxWidth:"100%",maxHeight:"50px",sx:{mt:"auto"}}),n(a,{sx:{pr:1,display:"flex",flexDirection:"column",justifyContent:"space-evenly",color:"neutral200.main"},children:[e(s,{sx:{},children:de(t.level,t.ascension)}),ce(t.key)&&n(s,{children:["R",t.refinement]})]})]})}function Ce({artifactData:t}){const{setNum:c={},mains:d={}}=t,{t:i}=he("statKey_gen"),r=Object.entries(c).filter(([,o])=>o>1).map(([o,p])=>[o,p<4?2:4]);return n(D,{bgt:"neutral600",sx:{height:"100%",maxHeight:"50px",display:"flex",flexDirection:"horizontal",boxShadow:"0 0 10px rgba(0,0,0,0.4)",flexGrow:1},children:[e(a,{sx:{Width:"50px",minWidth:"50px",height:"50px",position:"relative"},children:r.length===2?e(ye,{sets:r.map(([o])=>o)}):r.length===1?e(ke,{set:r[0][0],num:r[0][1]}):!1}),e(a,{sx:{display:"flex",flexGrow:1,position:"relative",justifyContent:"space-around",alignItems:"center"},children:Object.entries(d).filter(([,o])=>o).map(([o,p])=>{const g=e(xe,{slotKey:o,iconProps:{sx:{fontSize:"inherit"}}}),m=e(ue,{statKey:p,iconProps:{sx:{fontSize:"inherit"}}});return e(P,{title:e(a,{children:n(u.Suspense,{fallback:e($,{variant:"text"}),children:[n(s,{sx:{display:"flex",gap:1,alignItems:"center"},children:[g,e(pe,{slotKey:o})]}),n(s,{sx:{display:"flex",gap:1,alignItems:"center"},children:[m,i(p)]})]})}),children:n(s,{sx:{lineHeight:0},children:[g,m]})},o+p)})})]})}function ye({sets:t}){const c=t[0],d=t[1];return n(M,{children:[e(a,{component:l?l:"img",sx:{position:"absolute",top:0,left:0,Width:"50px",height:"50px",clipPath:"polygon(0 0, 0 100%, 100% 0)"},src:T(c,"flower")}),e(a,{component:l?l:"img",sx:{position:"absolute",top:0,left:0,Width:"50px",height:"50px",clipPath:"polygon(100% 100%, 0 100%, 100% 0)"},src:T(d,"flower")}),e(a,{className:"botright",sx:i=>({position:"absolute",bottom:0,right:0,width:"1.4em",padding:"0.2em",textAlign:"center",backgroundColor:I(S(i.palette.primary.main),.4),borderRadius:"100%"}),children:"2"}),e(a,{sx:i=>({position:"absolute",top:0,left:0,width:"1.4em",padding:"0.2em",textAlign:"center",backgroundColor:I(S(i.palette.primary.main),.4),borderRadius:"100%"}),children:"2"})]})}function ke({set:t,num:c}){return n(M,{children:[e(a,{sx:d=>({position:"absolute",bottom:0,right:0,width:"1.4em",padding:"0.2em",textAlign:"center",backgroundColor:I(S(d.palette.primary.main),.4),borderRadius:"100%"}),children:c}),e(a,{component:l?l:"img",src:T(t,"flower"),sx:{Width:"50px",height:"50px"}})]})}export{ve as T};
