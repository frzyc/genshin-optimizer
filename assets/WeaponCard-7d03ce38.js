import{l as D,m as N,p as e,ae as W,n as s,q as $,K as r,aq as v,cr as T,u as F,b as K,e as p,U as O,aA as R,T as c,c4 as G,C as U,v as q,B as C,W as H,s as J}from"./index-94c37da5.js";import{a as P,d as Q,S as V,h as E,b as X,c as Y,L as Z}from"./StarDisplay-4aa86735.js";import{v as ee,x as ae,u as h,w as te,n as ne}from"./index-581f9494.js";import{u as se}from"./WeaponUtil-8a7b29e7.js";import{L as oe,a as re,b as ie,d as le}from"./LocationAutocomplete-5352bfab.js";import{I as ce,i as pe}from"./ColoredText-5a5b0be5.js";import{g as de}from"./index-3c5f49c3.js";import{C as ue}from"./CardActionArea-ea9fd492.js";const me=E([...W]);function Ce({value:a,totals:n,onChange:u,...m}){const g=D(),d=!N(g.breakpoints.up("sm"));return e(V,{exclusive:!0,value:a,...m,children:W.map(l=>e(P,{value:l,sx:{p:d?1:void 0,minWidth:d?0:"6em",display:"flex",gap:d?0:1},onClick:()=>u(me(a,l)),children:s(r,{display:"flex",children:[e("strong",{children:l}),e(Q,{}),e($,{label:n[l],size:"small"})]})},l))})}function We(){return{level:a=>a.level*(a.ascension+1),rarity:a=>v.weapon.data[a.key].rarity,name:a=>T.t(`weaponNames_gen:${a.key}`)}}function Te(){return{rarity:(a,n)=>n.includes(v.weapon.data[a.key].rarity),weaponType:(a,n)=>n.includes(v.weapon.data[a.key].weaponType),name:(a,n)=>T.t(`weaponNames_gen:${a.key}`).toLowerCase().includes(n.toLowerCase())}}const Le={name:["name"],level:["level","rarity","name"],rarity:["rarity","level","name"]};function Se({weaponId:a,onClick:n,onEdit:u,onDelete:m,canEquip:g=!1,extraButtons:d}){const{t:l}=F(["page_weapon","ui"]),y=K(),i=se(a),o=i!=null&&i.key?de(i.key):void 0,L=p.useCallback(t=>t.weaponTypeKey===(o==null?void 0:o.weaponType),[o]),S=p.useCallback(t=>e(ue,{onClick:()=>n==null?void 0:n(a),children:t}),[n,a]),A=p.useCallback(t=>e(r,{children:t}),[]),B=p.useCallback(t=>a&&y.weapons.set(a,{location:t}),[y,a]),f=p.useMemo(()=>o&&i&&ee([o.data,ae(i)]),[o,i]);if(!i||!o||!f)return null;const{level:I,ascension:k,refinement:_,id:x,location:b="",lock:w}=i,z=f.get(h.weapon.type).value,M=[h.weapon.main,h.weapon.sub,h.weapon.sub2].map(t=>f.get(t)),j=te(i.key,k>=2);return e(p.Suspense,{fallback:e(O,{variant:"rectangular",sx:{width:"100%",height:"100%",minHeight:300}}),children:s(J,{sx:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[s(X,{condition:!!n,wrapper:S,falseWrapper:A,children:[s(r,{className:`grad-${o.rarity}star`,sx:{position:"relative",pt:2,px:2},children:[!n&&e(R,{color:"primary",onClick:()=>y.weapons.set(x,{lock:!w}),sx:{position:"absolute",right:0,bottom:0,zIndex:2},children:w?e(oe,{}):e(re,{})}),s(r,{sx:{position:"relative",zIndex:1},children:[s(r,{component:"div",sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[e(ce,{size:2,src:pe.weaponTypes[z]}),e(c,{noWrap:!0,sx:{textAlign:"center",backgroundColor:"rgba(100,100,100,0.35)",borderRadius:"1em",px:1},children:e("strong",{children:o.name})})]}),s(c,{component:"span",variant:"h5",children:["Lv. ",I]}),s(c,{component:"span",variant:"h5",color:"text.secondary",children:["/",G[k]]}),s(c,{variant:"h6",children:["Refinement ",e("strong",{children:_})]}),e(Y,{stars:o.rarity,colored:!0})]}),e(r,{sx:{height:"100%",position:"absolute",right:0,top:0},children:e(r,{component:"img",src:j??"",width:"auto",height:"100%",sx:{float:"right"}})})]}),e(U,{children:M.map(t=>t.info.name?s(r,{sx:{display:"flex"},children:[s(c,{flexGrow:1,children:[t.info.icon," ",t.info.name]}),e(c,{children:ne(t)})]},JSON.stringify(t.info)):null)})]}),s(r,{sx:{p:1,display:"flex",gap:1,justifyContent:"space-between",alignItems:"center"},children:[e(r,{sx:{flexGrow:1},children:g?e(ie,{location:b,setLocation:B,filter:L,autoCompleteProps:{getOptionDisabled:t=>!t.key}}):e(Z,{location:b})}),s(r,{display:"flex",gap:1,alignItems:"stretch",height:"100%",sx:{"& .MuiButton-root":{minWidth:0,height:"100%"}},children:[!!u&&e(q,{title:e(c,{children:l`page_weapon:edit`}),placement:"top",arrow:!0,children:e(C,{color:"info",size:"small",onClick:()=>u(x),children:e(le,{})})}),!!m&&e(C,{color:"error",size:"small",onClick:()=>m(x),disabled:!!b||w,children:e(H,{})}),d]})]})]})})}export{Ce as W,Se as a,Te as b,We as c,Le as w};
