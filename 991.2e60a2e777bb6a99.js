"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[991],{24991:(e,t,n)=>{n.r(t),n.d(t,{default:()=>R});var a=n(82799),l=n(85439),r=n(36380),c=n(61391),i=n(60319),s=n(46342),o=n(93553),h=n(67550),Z=n(7671),d=n(41075),u=n(13780),p=n(5896),m=n(83249),g=n(79906),f=n(56961),y=n(62197),x=n(85801),C=n(2784),w=n(61877),b=n(21560),k=n(73557),v=n(7300),P=n(87985),S=n(76638),T=n(46026),$=n(59236),B=n(29117),I=n(36236),N=n(72888),X=n(15613),K=n(25870),W=n(97856),z=n(10002),j=n(36617),E=n(82716),L=n(36893),M=n(45069),V=n(1661),_=n(40775),D=n(41015),G=n(52903);let A,H=e=>e;const O=C.lazy((()=>n.e(592).then(n.bind(n,1296)))),F={xs:1,sm:2,md:3,lg:4,xl:4},U={xs:6,sm:8,md:12,lg:16,xl:16},q=Object.keys(M.V3);function R(){const{t:e}=(0,b.$G)(["page_character","sillyWisher_charNames","charNames_gen"]),{silly:t}=(0,C.useContext)(I.E),{database:n}=(0,C.useContext)(K.t),[R,J]=(0,C.useState)((()=>n.displayCharacter.get()));(0,C.useEffect)((()=>n.displayCharacter.follow(((e,t)=>J(t)))),[n,J]);const[Q,ee]=(0,C.useState)(""),te=(0,C.useDeferredValue)(Q),ne=(0,C.useRef)(null),ae=(0,C.useCallback)(((e,t)=>{var a;null==(a=ne.current)||a.scrollIntoView({behavior:"smooth"}),n.displayCharacter.set({pageIndex:t-1})}),[n,ne]),le=(0,E.Z)(),re=U[le],[ce,ie]=(0,C.useState)(!1),[se,oe]=(0,j.Z)();(0,C.useEffect)((()=>(w.ZP.send({hitType:"pageview",page:"/characters"}),n.chars.followAny(((e,t)=>("new"===t||"remove"===t)&&oe())))),[oe,n]),(0,C.useEffect)((()=>n.charMeta.followAny((e=>oe()))),[oe,n]);const{gender:he}=(0,z.Z)(),Ze=(0,C.useCallback)((async a=>{let l=(0,N.m)(a,he).name;"object"==typeof l&&(l=e(`${t?"sillyWisher_charNames":"charNames_gen"}:${(0,L.LP)(a,he)}`)),window.confirm(e("removeCharacter",{value:l}))&&n.chars.remove(a)}),[n.chars,he,t,e]),de=(0,W.Z)(),ue=(0,k.s0)(),pe=(0,C.useDeferredValue)(R),me=(0,C.useDeferredValue)(se),{charKeyList:ge,totalCharNum:fe}=(0,C.useMemo)((()=>{var e;const a=n.chars.keys.length,{element:l,weaponType:r,sortType:c,ascending:i}=pe,s=n.chars.keys.filter((0,V.C)({element:l,weaponType:r,name:te},(0,M.zU)(n,t))).sort((0,V.e)(null!=(e=M.V3[c])?e:[],i,(0,M._L)(n,t),["new","favorite"]));return me&&{charKeyList:s,totalCharNum:a}}),[n,pe,te,t,me]),{weaponType:ye,element:xe,sortType:Ce,ascending:we,pageIndex:be=0}=R,{charKeyListToShow:ke,numPages:ve,currentPageIndex:Pe}=(0,C.useMemo)((()=>{const e=Math.ceil(ge.length/re),t=(0,D.uZ)(be,0,e-1);return{charKeyListToShow:ge.slice(t*re,(t+1)*re),numPages:e,currentPageIndex:t}}),[ge,be,re]),Se=ge.length!==fe?`${ge.length}/${fe}`:`${fe}`,Te=(0,C.useMemo)((()=>(0,_.W)(a.yd,(e=>Object.entries(n.chars.data).forEach((([t,a])=>{const l=n.weapons.get(a.equippedWeapon);if(!l)return;const r=(0,X.ub)(l.key).weaponType;e[r].total++,ge.includes(t)&&e[r].current++}))))),[n,ge]),$e=(0,C.useMemo)((()=>(0,_.W)(a.UB,(e=>Object.entries(n.chars.data).forEach((([t,a])=>{const l=(0,N.m)(a.key,n.gender).elementKey;e[l].total++,ge.includes(t)&&e[l].current++}))))),[n,ge]);return(0,G.BX)(h.Z,{my:1,display:"flex",flexDirection:"column",gap:1,children:[(0,G.tZ)(C.Suspense,{fallback:!1,children:(0,G.tZ)(O,{newFirst:!0,show:ce,onHide:()=>ie(!1),onSelect:de})}),(0,G.tZ)(P.Z,{ref:ne,children:(0,G.BX)(Z.Z,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,G.BX)(d.ZP,{container:!0,spacing:1,children:[(0,G.tZ)(d.ZP,{item:!0,children:(0,G.tZ)(B.Z,{sx:{height:"100%"},onChange:e=>n.displayCharacter.set({weaponType:e}),value:ye,totals:Te,size:"small"})}),(0,G.tZ)(d.ZP,{item:!0,children:(0,G.tZ)($.Z,{sx:{height:"100%"},onChange:e=>n.displayCharacter.set({element:e}),value:xe,totals:$e,size:"small"})}),(0,G.tZ)(d.ZP,{item:!0,flexGrow:1}),(0,G.tZ)(d.ZP,{item:!0,children:(0,G.tZ)(u.Z,{autoFocus:!0,value:Q,onChange:e=>ee(e.target.value),label:e("characterName"),size:"small",sx:{height:"100%"},InputProps:{sx:{height:"100%"}}})})]}),(0,G.BX)(h.Z,{display:"flex",justifyContent:"space-between",alignItems:"flex-end",flexWrap:"wrap",children:[(0,G.tZ)(p.Z,{count:ve,page:Pe+1,onChange:ae}),(0,G.tZ)(Y,{numShowing:ke.length,total:Se,t:e}),(0,G.tZ)(T.Z,{sortKeys:q,value:Ce,onChange:e=>n.displayCharacter.set({sortType:e}),ascending:we,onChangeAsc:e=>n.displayCharacter.set({ascending:e})})]})]})}),(0,G.tZ)(m.Z,{fullWidth:!0,onClick:()=>ie(!0),color:"info",startIcon:(0,G.tZ)(o.Z,{}),children:e(A||(A=H`addNew`))}),(0,G.tZ)(C.Suspense,{fallback:(0,G.tZ)(g.Z,{variant:"rectangular",sx:{width:"100%",height:"100%",minHeight:5e3}}),children:(0,G.tZ)(d.ZP,{container:!0,spacing:1,columns:F,children:ke.map((t=>(0,G.tZ)(d.ZP,{item:!0,xs:1,children:(0,G.tZ)(S.Z,{characterKey:t,onClick:()=>ue(`${t}`),footer:(0,G.BX)(G.HY,{children:[(0,G.tZ)(f.Z,{}),(0,G.BX)(h.Z,{sx:{py:1,px:2,display:"flex",gap:1,justifyContent:"space-between"},children:[(0,G.tZ)(v.Z,{placement:"top",title:(0,G.tZ)(y.Z,{children:e("tabs.talent")}),children:(0,G.tZ)(x.Z,{onClick:()=>ue(`${t}/talent`),children:(0,G.tZ)(l.Z,{})})}),(0,G.tZ)(v.Z,{placement:"top",title:(0,G.tZ)(y.Z,{children:e("tabs.teambuffs")}),children:(0,G.tZ)(x.Z,{onClick:()=>ue(`${t}/teambuffs`),children:(0,G.tZ)(r.Z,{})})}),(0,G.tZ)(v.Z,{placement:"top",title:(0,G.tZ)(y.Z,{children:e("tabs.optimize")}),children:(0,G.tZ)(x.Z,{onClick:()=>ue(`${t}/optimize`),children:(0,G.tZ)(c.Z,{})})}),(0,G.tZ)(v.Z,{placement:"top",title:(0,G.tZ)(y.Z,{children:e("tabs.theorycraft")}),children:(0,G.tZ)(x.Z,{onClick:()=>ue(`${t}/theorycraft`),children:(0,G.tZ)(i.Z,{})})}),(0,G.tZ)(f.Z,{orientation:"vertical"}),(0,G.tZ)(v.Z,{placement:"top",title:(0,G.tZ)(y.Z,{children:e("delete")}),children:(0,G.tZ)(x.Z,{color:"error",onClick:()=>Ze(t),children:(0,G.tZ)(s.Z,{})})})]})]})})},t)))})}),ve>1&&(0,G.tZ)(P.Z,{children:(0,G.BX)(Z.Z,{sx:{display:"flex",gap:1},children:[(0,G.tZ)(m.Z,{onClick:()=>ie(!0),color:"info",sx:{minWidth:0},children:(0,G.tZ)(o.Z,{})}),(0,G.BX)(d.ZP,{container:!0,alignItems:"flex-end",sx:{flexGrow:1},children:[(0,G.tZ)(d.ZP,{item:!0,flexGrow:1,children:(0,G.tZ)(p.Z,{count:ve,page:Pe+1,onChange:ae})}),(0,G.tZ)(d.ZP,{item:!0,children:(0,G.tZ)(Y,{numShowing:ke.length,total:Se,t:e})})]})]})})]})}function Y({numShowing:e,total:t,t:n}){return(0,G.tZ)(y.Z,{color:"text.secondary",children:(0,G.BX)(b.cC,{t:n,i18nKey:"showingNum",count:e,value:t,children:["Showing ",(0,G.tZ)("b",{children:{count:e}})," out of"," ",{value:t}," Characters"]})})}}}]);