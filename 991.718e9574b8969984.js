"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[991],{24991:(e,t,n)=>{n.r(t),n.d(t,{default:()=>U});var a=n(82799),l=n(85439),r=n(36380),c=n(61391),s=n(60319),i=n(46342),o=n(93553),h=n(67550),Z=n(7671),d=n(41075),u=n(13780),p=n(5896),m=n(83249),f=n(79906),g=n(56961),y=n(62197),C=n(85801),x=n(2784),w=n(61877),k=n(21560),b=n(73557),v=n(7300),S=n(87985),P=n(76638),B=n(54655),T=n(46026),z=n(59236),I=n(29117),X=n(72888),$=n(15613),_=n(25870),j=n(97856),M=n(10002),W=n(36617),K=n(82716),N=n(36893),E=n(45069),L=n(1661),H=n(40775),V=n(41015),D=n(52903);let G,O=e=>e;const Y=x.lazy((()=>n.e(592).then(n.bind(n,1296)))),A={xs:1,sm:2,md:3,lg:4,xl:4},F={xs:6,sm:8,md:12,lg:16,xl:16},R=Object.keys(E.V3);function U(){const{t:e}=(0,k.$G)(["page_character","sillyWisher_charNames"]),{database:t}=(0,x.useContext)(_.t),[n,B]=(0,x.useState)((()=>t.displayCharacter.get()));(0,x.useEffect)((()=>t.displayCharacter.follow(((e,t)=>B(t)))),[t,B]);const[U,Q]=(0,x.useState)(""),ee=(0,x.useDeferredValue)(U),te=(0,x.useRef)(null),ne=(0,x.useCallback)(((e,n)=>{var a;null==(a=te.current)||a.scrollIntoView({behavior:"smooth"}),t.displayCharacter.set({pageIndex:n-1})}),[t,te]),ae=(0,K.Z)(),le=F[ae],[re,ce]=(0,x.useState)(!1),[se,ie]=(0,W.Z)();(0,x.useEffect)((()=>(w.ZP.send({hitType:"pageview",page:"/characters"}),t.chars.followAny(((e,t)=>("new"===t||"remove"===t)&&ie())))),[ie,t]),(0,x.useEffect)((()=>t.charMeta.followAny((e=>ie()))),[ie,t]);const{gender:oe}=(0,M.Z)(),he=(0,x.useCallback)((async n=>{let a=(0,X.m)(n,oe).name;"object"==typeof a&&(a=e(`sillyWisher_charNames:${(0,N.LP)(n,oe)}`)),window.confirm(e("removeCharacter",{value:a}))&&t.chars.remove(n)}),[t,oe,e]),Ze=(0,j.Z)(),de=(0,b.s0)(),ue=(0,x.useDeferredValue)(n),pe=(0,x.useDeferredValue)(se),{charKeyList:me,totalCharNum:fe}=(0,x.useMemo)((()=>{var e;const n=t.chars.keys.length,{element:a,weaponType:l,sortType:r,ascending:c}=ue,s=t.chars.keys.filter((0,L.C)({element:a,weaponType:l,name:ee},(0,E.zU)(t))).sort((0,L.e)(null!=(e=E.V3[r])?e:[],c,(0,E._L)(t),["new","favorite"]));return pe&&{charKeyList:s,totalCharNum:n}}),[pe,t,ue,ee]),{weaponType:ge,element:ye,sortType:Ce,ascending:xe,pageIndex:we=0}=n,{charKeyListToShow:ke,numPages:be,currentPageIndex:ve}=(0,x.useMemo)((()=>{const e=Math.ceil(me.length/le),t=(0,V.uZ)(we,0,e-1);return{charKeyListToShow:me.slice(t*le,(t+1)*le),numPages:e,currentPageIndex:t}}),[me,we,le]),Se=me.length!==fe?`${me.length}/${fe}`:`${fe}`,Pe=(0,x.useMemo)((()=>(0,H.W)(a.yd,(e=>Object.entries(t.chars.data).forEach((([n,a])=>{const l=t.weapons.get(a.equippedWeapon);if(!l)return;const r=(0,$.ub)(l.key).weaponType;e[r].total++,me.includes(n)&&e[r].current++}))))),[t,me]),Be=(0,x.useMemo)((()=>(0,H.W)(a.UB,(e=>Object.entries(t.chars.data).forEach((([n,a])=>{const l=(0,X.m)(a.key,t.gender).elementKey;e[l].total++,me.includes(n)&&e[l].current++}))))),[t,me]);return(0,D.BX)(h.Z,{my:1,display:"flex",flexDirection:"column",gap:1,children:[(0,D.tZ)(J,{}),(0,D.tZ)(x.Suspense,{fallback:!1,children:(0,D.tZ)(Y,{newFirst:!0,show:re,onHide:()=>ce(!1),onSelect:Ze})}),(0,D.tZ)(S.Z,{ref:te,children:(0,D.BX)(Z.Z,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,D.BX)(d.ZP,{container:!0,spacing:1,children:[(0,D.tZ)(d.ZP,{item:!0,children:(0,D.tZ)(I.Z,{sx:{height:"100%"},onChange:e=>t.displayCharacter.set({weaponType:e}),value:ge,totals:Pe,size:"small"})}),(0,D.tZ)(d.ZP,{item:!0,children:(0,D.tZ)(z.Z,{sx:{height:"100%"},onChange:e=>t.displayCharacter.set({element:e}),value:ye,totals:Be,size:"small"})}),(0,D.tZ)(d.ZP,{item:!0,flexGrow:1}),(0,D.tZ)(d.ZP,{item:!0,children:(0,D.tZ)(u.Z,{autoFocus:!0,value:U,onChange:e=>Q(e.target.value),label:e("characterName"),size:"small",sx:{height:"100%"},InputProps:{sx:{height:"100%"}}})})]}),(0,D.BX)(h.Z,{display:"flex",justifyContent:"space-between",alignItems:"flex-end",flexWrap:"wrap",children:[(0,D.tZ)(p.Z,{count:be,page:ve+1,onChange:ne}),(0,D.tZ)(q,{numShowing:ke.length,total:Se,t:e}),(0,D.tZ)(T.Z,{sortKeys:R,value:Ce,onChange:e=>t.displayCharacter.set({sortType:e}),ascending:xe,onChangeAsc:e=>t.displayCharacter.set({ascending:e})})]})]})}),(0,D.tZ)(m.Z,{fullWidth:!0,onClick:()=>ce(!0),color:"info",startIcon:(0,D.tZ)(o.Z,{}),children:e(G||(G=O`addNew`))}),(0,D.tZ)(x.Suspense,{fallback:(0,D.tZ)(f.Z,{variant:"rectangular",sx:{width:"100%",height:"100%",minHeight:5e3}}),children:(0,D.tZ)(d.ZP,{container:!0,spacing:1,columns:A,children:ke.map((t=>(0,D.tZ)(d.ZP,{item:!0,xs:1,children:(0,D.tZ)(P.Z,{characterKey:t,onClick:()=>de(`${t}`),footer:(0,D.BX)(D.HY,{children:[(0,D.tZ)(g.Z,{}),(0,D.BX)(h.Z,{sx:{py:1,px:2,display:"flex",gap:1,justifyContent:"space-between"},children:[(0,D.tZ)(v.Z,{placement:"top",title:(0,D.tZ)(y.Z,{children:e("tabs.talent")}),children:(0,D.tZ)(C.Z,{onClick:()=>de(`${t}/talent`),children:(0,D.tZ)(l.Z,{})})}),(0,D.tZ)(v.Z,{placement:"top",title:(0,D.tZ)(y.Z,{children:e("tabs.teambuffs")}),children:(0,D.tZ)(C.Z,{onClick:()=>de(`${t}/teambuffs`),children:(0,D.tZ)(r.Z,{})})}),(0,D.tZ)(v.Z,{placement:"top",title:(0,D.tZ)(y.Z,{children:e("tabs.optimize")}),children:(0,D.tZ)(C.Z,{onClick:()=>de(`${t}/optimize`),children:(0,D.tZ)(c.Z,{})})}),(0,D.tZ)(v.Z,{placement:"top",title:(0,D.tZ)(y.Z,{children:e("tabs.theorycraft")}),children:(0,D.tZ)(C.Z,{onClick:()=>de(`${t}/theorycraft`),children:(0,D.tZ)(s.Z,{})})}),(0,D.tZ)(g.Z,{orientation:"vertical"}),(0,D.tZ)(v.Z,{placement:"top",title:(0,D.tZ)(y.Z,{children:e("delete")}),children:(0,D.tZ)(C.Z,{color:"error",onClick:()=>he(t),children:(0,D.tZ)(i.Z,{})})})]})]})})},t)))})}),be>1&&(0,D.tZ)(S.Z,{children:(0,D.BX)(Z.Z,{sx:{display:"flex",gap:1},children:[(0,D.tZ)(m.Z,{onClick:()=>ce(!0),color:"info",sx:{minWidth:0},children:(0,D.tZ)(o.Z,{})}),(0,D.BX)(d.ZP,{container:!0,alignItems:"flex-end",sx:{flexGrow:1},children:[(0,D.tZ)(d.ZP,{item:!0,flexGrow:1,children:(0,D.tZ)(p.Z,{count:be,page:ve+1,onChange:ne})}),(0,D.tZ)(d.ZP,{item:!0,children:(0,D.tZ)(q,{numShowing:ke.length,total:Se,t:e})})]})]})})]})}function q({numShowing:e,total:t,t:n}){return(0,D.tZ)(y.Z,{color:"text.secondary",children:(0,D.BX)(k.cC,{t:n,i18nKey:"showingNum",count:e,value:t,children:["Showing ",(0,D.tZ)("b",{children:{count:e}})," out of"," ",{value:t}," Characters"]})})}function J(){const[e,t]=(0,x.useState)((()=>!!localStorage.getItem("clippy_add_character"))),n=()=>{localStorage.setItem("clippy_add_character","true"),setTimeout((()=>{t(!0)}),1e3)},[a,l]=(0,x.useState)(!1),{database:r}=(0,x.useContext)(_.t),[c]=(0,x.useState)((()=>{var e;const t=r.chars.values.map((({key:e})=>(0,X.m)(e).rarity)).filter((e=>5===e)).length,n=5===(null==(e=r.chars.get("Bennett"))?void 0:e.constellation),a=!r.chars.get("Somnia");return(0,V.F_)(["You should stop losing so many 50/50s.",...t>=20?["Thats a lot of 5 stars. Are you a whale?"]:[],...n?["Hey! You should C6 your Bennett."]:[],...a?['Hey! You should add ME to the Optimizer! Just search "Somnia", I\'m an electro catalyst!']:[]])}));return(0,x.useEffect)((()=>{if(Math.random()>.1)return;const e=setTimeout((()=>l(!0)),1e4);return()=>clearTimeout(e)})),e?(0,D.tZ)(B.Z,{show:a,children:e=>(0,D.BX)(h.Z,{children:[(0,D.tZ)(y.Z,{children:c}),(0,D.BX)(h.Z,{display:"flex",justifyContent:"space-around",children:[(0,D.tZ)(m.Z,{onClick:e,size:"small",color:"success",children:"I agree"}),(0,D.tZ)(m.Z,{onClick:e,size:"small",color:"error",children:"Shut up"})]})]})},"shade"):(0,D.tZ)(B.Z,{show:!e,children:e=>(0,D.BX)(h.Z,{children:[(0,D.tZ)(y.Z,{children:"Looks like you are trying to add characters to Genshin Optimizer."}),(0,D.tZ)(y.Z,{children:"Would you like help?"}),(0,D.BX)(h.Z,{display:"flex",justifyContent:"space-around",children:[(0,D.tZ)(m.Z,{onClick:()=>{e(),n()},size:"small",color:"success",href:"https://youtu.be/hiRjngMgHfQ",target:"_blank",children:"Yes"}),(0,D.tZ)(m.Z,{onClick:()=>{e(),n()},size:"small",color:"error",children:"No"})]})]})},"helpful")}}}]);