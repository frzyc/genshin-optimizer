"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[856],{22856:(t,e,i)=>{i.r(e),i.d(e,{default:()=>nt});var r=i(32510),n=i(92252),l=i(67550),c=i(107),a=i(23119),o=i(7671),s=i(41075),d=i(83249),Z=i(5896),u=i(79906),h=i(62197),f=i(2784),m=i(61877),y=i(21548),p=i(39857),b=i(12121),g=i(87985),x=i(9725),w=i(67732),P=i(56961),C=i(94657),k=i(41015),v=i(72055),A=i(98927),I=i(21845),B=i(52903);function X({pageKey:t,text:e="",modalTitle:i="",children:r}){const[n,l,c]=(0,C.Z)("true"!==localStorage.getItem(`infoShown_${t}`)),[a]=(0,f.useState)(Array.isArray(e)?(0,k.F_)(e):e),Z=(0,f.useCallback)((()=>{c(),localStorage.setItem(`infoShown_${t}`,"true")}),[c,t]);return(0,B.BX)(g.Z,{children:[(0,B.BX)(s.ZP,{container:!0,children:[(0,B.tZ)(s.ZP,{item:!0,flexGrow:1,children:(0,B.tZ)(h.Z,{variant:"caption",pl:1,children:a})}),(0,B.tZ)(s.ZP,{item:!0,xs:"auto",children:(0,B.tZ)(d.Z,{size:"small",color:"info",variant:"contained",onClick:l,startIcon:(0,B.tZ)(w.G,{icon:x.Fuz}),children:(0,B.tZ)(I.v,{ns:"ui",key18:"info"})})})]}),(0,B.tZ)(A.Z,{containerProps:{maxWidth:"xl"},open:n,onClose:Z,children:(0,B.BX)(g.Z,{children:[(0,B.tZ)(o.Z,{sx:{py:1},children:(0,B.BX)(s.ZP,{container:!0,children:[(0,B.tZ)(s.ZP,{item:!0,flexGrow:1,children:(0,B.tZ)(h.Z,{variant:"h6",children:i})}),(0,B.tZ)(s.ZP,{item:!0,children:(0,B.tZ)(v.Z,{onClick:Z})})]})}),(0,B.tZ)(P.Z,{}),(0,B.tZ)(o.Z,{children:(0,B.tZ)(f.Suspense,{fallback:(0,B.tZ)(u.Z,{variant:"rectangular",width:"100%",height:500}),children:r})}),(0,B.tZ)(P.Z,{}),(0,B.tZ)(o.Z,{sx:{py:1},children:(0,B.tZ)(v.Z,{large:!0,onClick:Z})})]})})]})}var S=i(46026),F=i(25870);function K(){const{database:t}=(0,f.useContext)(F.t),[e,i]=(0,f.useState)(t.displayArtifact.get());return(0,f.useEffect)((()=>t.displayArtifact.follow(((t,e)=>i(e)))),[t]),e}var G=i(36617),$=i(82716),E=i(69190),O=i(1661),D=i(85563),T=i(40535),U=i(54278),M=i(83673);const W=(0,f.lazy)((()=>Promise.all([i.e(652),i.e(157)]).then(i.bind(i,19157))));function q({numShowing:t,total:e,artifactIds:i}){const{t:n}=(0,y.$G)(["artifact","ui"]),{database:l}=(0,f.useContext)(F.t),{filterOption:c}=K(),a=(0,f.useCallback)((t=>l.displayArtifact.set({filterOption:Object.assign({},c,t)})),[l,c]);return(0,B.tZ)(f.Suspense,{fallback:(0,B.tZ)(u.Z,{variant:"rectangular",width:"100%",height:300}),children:(0,B.tZ)(g.Z,{children:(0,B.BX)(o.Z,{children:[(0,B.BX)(s.ZP,{container:!0,children:[(0,B.tZ)(s.ZP,{item:!0,children:(0,B.tZ)(h.Z,{variant:"h6",children:(0,B.tZ)(y.cC,{t:n,i18nKey:"artifactFilter",children:"Artifact Filter"})})}),(0,B.tZ)(s.ZP,{item:!0,flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center",children:t!==e&&(0,B.BX)(h.Z,{children:["Filtered ",(0,B.tZ)("strong",{children:t})," / ",e]})}),(0,B.tZ)(s.ZP,{item:!0,children:(0,B.tZ)(d.Z,{size:"small",color:"error",onClick:()=>l.displayArtifact.set({action:"reset"}),startIcon:(0,B.tZ)(r.Z,{}),children:(0,B.tZ)(y.cC,{t:n,i18nKey:"ui:reset"})})})]}),(0,B.tZ)(f.Suspense,{fallback:(0,B.tZ)(u.Z,{variant:"rectangular",width:"100%",height:200}),children:(0,B.tZ)(W,{filterOption:c,filterOptionDispatch:a,filteredIds:i})})]})})})}function z({artifactIds:t}){const{t:e}=(0,y.$G)(["artifact","ui"]),{database:i}=(0,f.useContext)(F.t),{numDelete:r,numUnequip:n,numExclude:l,numInclude:c,numUnlock:a,numLock:o}=(0,f.useMemo)((()=>{const e=t.map((t=>i.arts.get(t))),r=e.reduce(((t,e)=>t+(e.lock?0:1)),0),n=e.length-r,l=r,c=e.reduce(((t,e)=>t+(e.location?1:0)),0),a=e.reduce(((t,e)=>t+(e.exclude?1:0)),0);return{numDelete:l,numUnequip:c,numExclude:a,numInclude:e.length-a,numUnlock:r,numLock:n}}),[t,i]);return(0,B.BX)(s.ZP,{container:!0,spacing:1,alignItems:"center",children:[(0,B.tZ)(s.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,B.BX)(d.Z,{fullWidth:!0,color:"error",disabled:!n,onClick:()=>window.confirm(`Are you sure you want to unequip ${n} artifacts currently equipped on characters?`)&&t.map((t=>i.arts.set(t,{location:""}))),startIcon:(0,B.tZ)(w.G,{icon:x.wOQ}),children:[(0,B.tZ)(y.cC,{t:e,i18nKey:"button.unequipArtifacts",children:"Unequip Artifacts"}),(0,B.tZ)(M.Z,{sx:{ml:1},color:n?"success":"secondary",children:n})]})}),(0,B.tZ)(s.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,B.BX)(d.Z,{fullWidth:!0,color:"error",disabled:!r,onClick:()=>window.confirm(`Are you sure you want to delete ${r} artifacts?`)&&t.map((t=>{var e;return!(null!=(e=i.arts.get(t))&&e.lock)&&i.arts.remove(t)})),startIcon:(0,B.tZ)(w.G,{icon:x.$aW}),children:[(0,B.tZ)(y.cC,{t:e,i18nKey:"button.deleteArtifacts",children:"Delete Artifacts"}),(0,B.tZ)(M.Z,{sx:{ml:1},color:r?"success":"secondary",children:r})]})}),(0,B.tZ)(s.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,B.BX)(d.Z,{fullWidth:!0,color:"error",disabled:!c,onClick:()=>window.confirm(`Are you sure you want to exclude ${c} artifacts from build generations?`)&&t.map((t=>i.arts.set(t,{exclude:!0}))),startIcon:(0,B.tZ)(w.G,{icon:x.gPx}),children:[(0,B.tZ)(y.cC,{t:e,i18nKey:"button.excludeArtifacts",children:"Exclude Artifacts"}),(0,B.tZ)(M.Z,{sx:{ml:1},color:c?"success":"secondary",children:c})]})}),(0,B.tZ)(s.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,B.BX)(d.Z,{fullWidth:!0,color:"error",disabled:!l,onClick:()=>window.confirm(`Are you sure you want to include ${l} artifacts in build generations?`)&&t.map((t=>i.arts.set(t,{exclude:!1}))),startIcon:(0,B.tZ)(w.G,{icon:x.Stf}),children:[(0,B.tZ)(y.cC,{t:e,i18nKey:"button.includeArtifacts",children:"Include Artifacts"}),(0,B.tZ)(M.Z,{sx:{ml:1},color:l?"success":"secondary",children:l})]})}),(0,B.tZ)(s.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,B.BX)(d.Z,{fullWidth:!0,color:"error",disabled:!o,onClick:()=>window.confirm(`Are you sure you want to unlock ${o} artifacts?`)&&t.map((t=>i.arts.set(t,{lock:!1}))),startIcon:(0,B.tZ)(T.Z,{}),children:[(0,B.tZ)(y.cC,{t:e,i18nKey:"button.unlockrtifacts",children:"Unlock Artifacts"}),(0,B.tZ)(M.Z,{sx:{ml:1},color:o?"success":"secondary",children:o})]})}),(0,B.tZ)(s.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,B.BX)(d.Z,{fullWidth:!0,color:"error",disabled:!a,onClick:()=>window.confirm(`Are you sure you want to lock ${a} artifacts?`)&&t.map((t=>i.arts.set(t,{lock:!0}))),startIcon:(0,B.tZ)(U.Z,{}),children:[(0,B.tZ)(y.cC,{t:e,i18nKey:"button.lockArtifacts",children:"Lock Artifacts"}),(0,B.tZ)(M.Z,{sx:{ml:1},color:a?"success":"secondary",children:a})]})}),(0,B.tZ)(s.ZP,{item:!0,xs:12,sm:12,md:6,display:"flex",justifyContent:"space-around",children:(0,B.tZ)(h.Z,{variant:"caption",color:"text.secondary",children:(0,B.BX)(y.cC,{t:e,i18nKey:"buttonHint",children:["Note: the red buttons above only applies to ",(0,B.tZ)("b",{children:"currently filtered artifacts"})]})})})]})}var j=i(71957),N=i(67937),_=i(2344),L=i(86953);const V=[...E._];function Q({probabilityFilter:t={},setProbabilityFilter:e,disabled:i=!1}){return(0,B.BX)(g.Z,{children:[(0,B.tZ)(o.Z,{sx:{py:1},children:(0,B.tZ)(h.Z,{variant:"h6",children:"Roll Probability Calculator"})}),(0,B.tZ)(P.Z,{}),(0,B.tZ)(o.Z,{children:(0,B.BX)(s.ZP,{container:!0,spacing:1,children:[(0,B.tZ)(s.ZP,{item:!0,xs:12,md:6,children:(0,B.tZ)(N.Z,{children:(0,B.tZ)(o.Z,{children:(0,B.BX)(h.Z,{children:['This UI only pops up when "Sort by" ',(0,B.tZ)("strong",{children:"Probability"}),". In conjunction with the Artifact Filters above, this UI allows you to set a criteria for substats values, and it will sort the artifacts by those with the highest probability to roll into those criteria values.",(0,B.tZ)(_.Z,{color:"warning",children:" Artifacts that already reach the criteria(100%) or are at 0% are hidden."})]})})})}),(0,B.tZ)(s.ZP,{item:!0,xs:12,md:6,spacing:1,sx:{display:"flex",flexDirection:"column",gap:1},children:(0,B.tZ)(L.Z,{statKeys:V,statFilters:t,setStatFilters:e,disabled:i})})]})})]})}var H=i(88408);let R,J,Y=t=>t;const tt=f.lazy((()=>Promise.all([i.e(592),i.e(794),i.e(497)]).then(i.bind(i,52267)))),et=f.lazy((()=>Promise.all([i.e(592),i.e(530)]).then(i.bind(i,66066)))),it={xs:1,sm:2,md:3,lg:3,xl:4},rt={xs:10,sm:12,md:24,lg:24,xl:24};function nt(){const{t}=(0,y.$G)(["artifact","ui"]),{database:e}=(0,f.useContext)(F.t),i=K(),[h,x,w]=(0,C.Z)(!1),P=(0,$.Z)(),v=rt[P],{sortType:A,effFilter:I,ascending:T,probabilityFilter:U}=i,M="probability"===A,[W,N]=(0,f.useState)(0),_=(0,f.useRef)(null),[L,V]=(0,G.Z)(),nt=(0,f.useDeferredValue)(L),ct=(0,f.useMemo)((()=>new Set(I)),[I]),at=(0,f.useCallback)((t=>e.arts.remove(t)),[e]);(0,f.useEffect)((()=>(m.ZP.send({hitType:"pageview",page:"/artifact"}),e.arts.followAny((()=>V())))),[e,V]);const ot=(0,f.useCallback)((t=>e.displayArtifact.set({probabilityFilter:t})),[e]),st=(0,f.useMemo)((()=>!e.arts.values.length),[e]),dt=(0,f.useMemo)((()=>(0,j.x3)(ct,U)),[ct,U]),Zt=(0,f.useMemo)((()=>(0,j.EM)(ct)),[ct]),ut=(0,f.useDeferredValue)(i),ht=(0,f.useDeferredValue)(U);(0,f.useEffect)((()=>{if(M)return e.arts.values.forEach((t=>e.arts.setProbability(t.id,(0,H.B)(t,ht)))),()=>e.arts.values.forEach((t=>e.arts.setProbability(t.id,-1)))}),[e,M,ht]);const{artifactIds:ft,totalArtNum:mt}=(0,f.useMemo)((()=>{var t;const{sortType:i=j.OQ[0],ascending:r=!1,filterOption:n}=ut;let l=e.arts.values;M&&(l=l.filter((t=>t.probability&&1!==t.probability)));const c=l.filter((0,O.C)(n,Zt)).sort((0,O.e)(null!=(t=j.t$[i])?t:[],r,dt)).map((t=>t.id));return Object.assign({artifactIds:c,totalArtNum:l.length},nt)}),[ut,nt,e,dt,Zt,M]),{artifactIdsToShow:yt,numPages:pt,currentPageIndex:bt}=(0,f.useMemo)((()=>{const t=Math.ceil(ft.length/v),e=(0,k.uZ)(W,0,t-1);return{artifactIdsToShow:ft.slice(e*v,(e+1)*v),numPages:t,currentPageIndex:e}}),[ft,W,v]),gt=ft.length!==mt?`${ft.length}/${mt}`:`${mt}`,xt=(0,f.useCallback)(((t,e)=>{var i;null==(i=_.current)||i.scrollIntoView({behavior:"smooth"}),N(e-1)}),[N,_]);return(0,B.BX)(l.Z,{display:"flex",flexDirection:"column",gap:1,my:1,children:[(0,B.tZ)(f.Suspense,{fallback:!1,children:(0,B.tZ)(tt,{artifactIdToEdit:h?"new":"",cancelEdit:w,allowUpload:!0,allowEmpty:!0})}),(0,B.tZ)(X,{pageKey:"artifactPage",modalTitle:t(R||(R=Y`info.title`)),text:t("tipsOfTheDay",{returnObjects:!0}),children:(0,B.tZ)(et,{})}),st&&(0,B.BX)(c.Z,{severity:"info",variant:"filled",children:["Looks like you haven't added any artifacts yet. If you want, there are ",(0,B.tZ)(a.Z,{color:"warning.main",component:p.rU,to:"/scanner",children:"automatic scanners"})," that can speed up the import process!"]}),(0,B.tZ)(q,{numShowing:ft.length,total:mt,artifactIds:ft}),(0,B.tZ)(g.Z,{ref:_,children:(0,B.BX)(o.Z,{children:[(0,B.BX)(s.ZP,{container:!0,sx:{mb:1},children:[(0,B.tZ)(s.ZP,{item:!0,flexGrow:1,children:(0,B.tZ)("span",{children:(0,B.tZ)(y.cC,{t,i18nKey:"efficiencyFilter.title",children:"Substats to use in efficiency calculation"})})}),(0,B.tZ)(s.ZP,{item:!0,children:(0,B.tZ)(d.Z,{size:"small",color:"error",onClick:()=>e.displayArtifact.set({effFilter:[...E._]}),startIcon:(0,B.tZ)(r.Z,{}),children:(0,B.tZ)(y.cC,{t,i18nKey:"ui:reset"})})})]}),(0,B.tZ)(b.Z,{selectedKeys:I,onChange:t=>e.displayArtifact.set({effFilter:t})})]})}),(0,B.tZ)(g.Z,{children:(0,B.BX)(o.Z,{children:[(0,B.BX)(s.ZP,{container:!0,alignItems:"center",sx:{pb:2},children:[(0,B.tZ)(s.ZP,{item:!0,flexGrow:1,children:(0,B.tZ)(Z.Z,{count:pt,page:bt+1,onChange:xt})}),(0,B.tZ)(s.ZP,{item:!0,flexGrow:1,children:(0,B.tZ)(lt,{numShowing:yt.length,total:gt,t})}),(0,B.BX)(s.ZP,{item:!0,xs:12,sm:6,md:4,lg:4,xl:3,display:"flex",children:[(0,B.tZ)(l.Z,{flexGrow:1}),(0,B.tZ)(S.Z,{sortKeys:[...j.OQ],value:A,onChange:t=>e.displayArtifact.set({sortType:t}),ascending:T,onChangeAsc:t=>e.displayArtifact.set({ascending:t})})]})]}),(0,B.tZ)(z,{artifactIds:ft})]})}),M&&(0,B.tZ)(Q,{probabilityFilter:U,setProbabilityFilter:ot}),(0,B.tZ)(d.Z,{fullWidth:!0,onClick:x,color:"info",startIcon:(0,B.tZ)(n.Z,{}),children:t(J||(J=Y`addNew`))}),(0,B.tZ)(f.Suspense,{fallback:(0,B.tZ)(u.Z,{variant:"rectangular",sx:{width:"100%",height:"100%",minHeight:5e3}}),children:(0,B.tZ)(s.ZP,{container:!0,spacing:1,columns:it,children:yt.map((t=>(0,B.tZ)(s.ZP,{item:!0,xs:1,children:(0,B.tZ)(D.Z,{artifactId:t,effFilter:ct,onDelete:at,editorProps:{},canExclude:!0,canEquip:!0})},t)))})}),pt>1&&(0,B.tZ)(g.Z,{children:(0,B.tZ)(o.Z,{children:(0,B.BX)(s.ZP,{container:!0,children:[(0,B.tZ)(s.ZP,{item:!0,flexGrow:1,children:(0,B.tZ)(Z.Z,{count:pt,page:bt+1,onChange:xt})}),(0,B.tZ)(s.ZP,{item:!0,children:(0,B.tZ)(lt,{numShowing:yt.length,total:gt,t})})]})})})]})}function lt({numShowing:t,total:e,t:i}){return(0,B.tZ)(h.Z,{color:"text.secondary",children:(0,B.BX)(y.cC,{t:i,i18nKey:"showingNum",count:t,value:e,children:["Showing ",(0,B.tZ)("b",{children:{count:t}})," out of ",{value:e}," Artifacts"]})})}}}]);