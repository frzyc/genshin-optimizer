"use strict";(self.webpackChunkgenshin_optimizer=self.webpackChunkgenshin_optimizer||[]).push([[213],{36030:function(e,t,n){n.d(t,{N5:function(){return F},Y4:function(){return O},mW:function(){return M},mY:function(){return G}});var r=n(29439),i=n(1413),a=n(45987),s=n(13967),l=n(94198),o=n(58165),c=n(81918),u=n(90493),d=n(68870),f=n(79834),h=n(72791),x=n(22020),p=n(31148),v=n(72828),y=n(79406),Z=n(42320),m=n(50765),g=n(24351),j=n(610),b=n(68244),S=n(10157),w=n(75545),k=n(80184),K=["allArtifactKeysWithGrouper","selectedArtifactKeys","setArtifactKeys","getName","getImage","label"],P=["artSetKeys","setArtSetKeys"],C=["mainStatKeys","setMainStatKeys"],A=["substatKeys","setSubstatKeys"],I=["allArtifactKeysWithGrouper","selectedArtifactKey","setArtifactKey","getName","getImage","label","disable","showDefault","defaultText","defaultIcon"],E=["artSetKey","setArtSetKey","label"];function R(e){var t=e.allArtifactKeysWithGrouper,n=e.selectedArtifactKeys,r=e.setArtifactKeys,u=e.getName,d=e.getImage,f=e.label,x=(0,a.Z)(e,K),p=(0,s.Z)(),v=(0,h.useMemo)((function(){return t.map((function(e){var t=e.key,n=e.grouper;return{key:t,label:u(t),grouper:n}}))}),[t,u]);return(0,k.jsx)(l.Z,(0,i.Z)({autoHighlight:!0,multiple:!0,disableCloseOnSelect:!0,options:v,value:n.map((function(e){return{key:e,label:u(e)}})),onChange:function(e,t){r(t.map((function(e){return e.key})))},getOptionLabel:function(e){return e.label},isOptionEqualToValue:function(e,t){return e.key===t.key},renderInput:function(e){return(0,k.jsx)(o.Z,(0,i.Z)((0,i.Z)({},e),{},{label:f,variant:"filled",InputLabelProps:{style:{color:p.palette.text.primary}},color:n.length?"success":"primary",type:"search"}))},renderOption:function(e,t){return(0,k.jsx)(j.Z,{value:t.key,image:d(t.key),text:t.label,theme:p,isSelected:n.includes(t.key),props:e},t.key)},renderTags:function(e,t){return e.map((function(e,n){var r=g.Kj.find((function(t){return e.key==="".concat(t,"_dmg_")})),a=r||void 0;return(0,h.createElement)(c.Z,(0,i.Z)((0,i.Z)({},t({index:n})),{},{key:e.key,icon:d(e.key),label:e.label,color:a}))}))}},x))}function F(e){var t=e.artSetKeys,n=e.setArtSetKeys,s=(0,a.Z)(e,P),l=(0,Z.Z)((function(){return p.y.getAll}),[]),o=(0,x.$)(["artifact","artifactNames_gen"]).t;if(!l)return null;var c=Object.entries(p.y.setKeysByRarities(l)).flatMap((function(e){var t=(0,r.Z)(e,2),n=t[0];return t[1].map((function(e){return{key:e,grouper:+n}}))})).sort(L);return(0,k.jsx)(R,(0,i.Z)({allArtifactKeysWithGrouper:c,selectedArtifactKeys:t,setArtifactKeys:n,getName:function(e){return l[e].nameRaw},getImage:function(e){return l[e].defIcon},label:o("artifact:autocompleteLabels.sets"),groupBy:function(e){var t,n;return null!==(t=null===(n=e.grouper)||void 0===n?void 0:n.toString())&&void 0!==t?t:""},renderGroup:function(e){return e.group&&(0,k.jsxs)(u.Z,{component:d.Z,children:[(0,k.jsxs)(f.Z,{sx:{top:"-1em"},children:[e.group," ",(0,k.jsx)(S.q,{stars:+e.group})]},"".concat(e.group,"Header")),e.children]},e.group)}},s))}function G(e){var t=e.mainStatKeys,n=e.setMainStatKeys,r=(0,a.Z)(e,C),s=(0,x.$)("artifact").t;return(0,k.jsx)(R,(0,i.Z)({allArtifactKeysWithGrouper:m.r.map((function(e){return{key:e}})),selectedArtifactKeys:t,setArtifactKeys:n,getName:function(e){return y.ZP.getArtStr(e)},getImage:function(e){return w.ZP[e]},label:s("autocompleteLabels.mainStats")},r))}function M(e){var t=e.substatKeys,n=e.setSubstatKeys,r=(0,a.Z)(e,A),s=(0,x.$)("artifact").t;return(0,k.jsx)(R,(0,i.Z)({allArtifactKeysWithGrouper:m._.map((function(e){return{key:e}})),selectedArtifactKeys:t,setArtifactKeys:n,getName:function(e){return y.ZP.getArtStr(e)},getImage:function(e){return w.ZP[e]},label:s("autocompleteLabels.substats")},r))}function N(e){var t=e.allArtifactKeysWithGrouper,n=e.selectedArtifactKey,r=e.setArtifactKey,o=e.getName,c=e.getImage,u=e.label,d=e.disable,f=void 0===d?function(){return!1}:d,x=e.showDefault,p=void 0!==x&&x,v=e.defaultText,y=void 0===v?"":v,Z=(e.defaultIcon,(0,a.Z)(e,I)),m=(0,s.Z)(),g=(0,h.useMemo)((function(){return(p?[{key:"",label:y}]:[]).concat(t.map((function(e){var t=e.key,n=e.grouper;return{key:t,label:o(t),grouper:n}})))}),[t,o,y,p]);return(0,k.jsx)(l.Z,(0,i.Z)({autoHighlight:!0,options:g,clearIcon:n?void 0:"",value:{key:n,label:o(n)},onChange:function(e,t,n){return("change"!==e.type||"clear"!==n)&&r(t?t.key:"")},getOptionLabel:function(e){return e.label?e.label:y},isOptionEqualToValue:function(e,t){return e.key===t.key},getOptionDisabled:function(e){return f(e.key)},renderInput:function(e){return(0,k.jsx)(b.Z,(0,i.Z)((0,i.Z)({},e),{},{label:u,startAdornment:c(n),hasValue:!!n}))},renderOption:function(e,t){return(0,k.jsx)(j.Z,{value:t.key,image:c(t.key),text:t.label,theme:m,isSelected:n===t.key,props:e},t.key)}},Z))}function O(e){var t=e.artSetKey,n=e.setArtSetKey,s=e.label,l=void 0===s?"":s,o=(0,a.Z)(e,E),c=(0,Z.Z)((function(){return p.y.getAll}),[]),h=(0,x.$)(["artifact","artifactNames_gen"]).t;if(l=l||h("artifact:autocompleteLabels.set"),!c)return null;var v=Object.entries(p.y.setKeysByRarities(c)).flatMap((function(e){var t=(0,r.Z)(e,2),n=t[0];return t[1].map((function(e){return{key:e,grouper:+n}}))})).sort(L);return(0,k.jsx)(N,(0,i.Z)({allArtifactKeysWithGrouper:v,selectedArtifactKey:t,setArtifactKey:n,getName:function(e){return e&&c[e].nameRaw},getImage:function(e){return e?c[e].defIcon:(0,k.jsx)(k.Fragment,{})},label:l,groupBy:function(e){var t,n;return null!==(t=null===(n=e.grouper)||void 0===n?void 0:n.toString())&&void 0!==t?t:""},renderGroup:function(e){return e.group&&(0,k.jsxs)(u.Z,{component:d.Z,children:[(0,k.jsxs)(f.Z,{sx:{top:"-1em"},children:[e.group," ",(0,k.jsx)(S.q,{stars:+e.group})]},"".concat(e.group,"Header")),e.children]},e.group)}},o))}function L(e,t){if(e.grouper>t.grouper)return-1;if(e.grouper<t.grouper)return 1;var n=v.Z.t("artifactNames_gen:".concat(e.key)),r=v.Z.t("artifactNames_gen:".concat(t.key));return n<r?-1:n>r?1:0}},92443:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(1413),i=n(45987),a=n(66934),s=n(24518),l=n(80184),o=["children","disabled"],c=(0,a.ZP)(s.Z)((function(e){var t=e.theme;return{"&.Mui-disabled":{backgroundColor:t.palette.primary.dark,color:t.palette.text.secondary}}}));function u(e){var t=e.children,n=(e.disabled,(0,i.Z)(e,o));return(0,l.jsx)(c,(0,r.Z)((0,r.Z)({},n),{},{disabled:!0,children:t}))}},66585:function(e,t,n){n.r(t),n.d(t,{default:function(){return gt}});var r,i=n(30168),a=n(93433),s=n(29439),l=n(1413),o=n(53174),c=n(54483),u=n(43245),d=n(98268),f=n(68087),h=n(49670),x=n(54091),p=n(66934),v=n(13967),y=n(95193),Z=n(47047),m=n(9585),g=n(39504),j=n(61889),b=n(68870),S=n(2199),w=n(24518),k=n(20890),K=n(23786),P=n(57064),C=n(49900),A=n(13239),I=n(94070),E=n(72791),R=n(22020),F=n(76899),G=n(36030),M=n(45987),N=n(24351),O=n(33890),L=n(10157),W=n(80184),T=["rarity","onChange","filter"];function U(e){var t=e.rarity,n=e.onChange,a=e.filter,s=(0,M.Z)(e,T),o=(0,R.$)("artifact").t;return(0,W.jsx)(O.Z,(0,l.Z)((0,l.Z)({},s),{},{title:t?(0,W.jsx)(L.q,{stars:t}):o(r||(r=(0,i.Z)(["editor.rarity"]))),color:t?"success":"primary",children:[5,4,3].map((function(e){return(0,W.jsx)(K.Z,{disabled:!a(e),onClick:function(){return n(e)},children:(0,W.jsx)(L.q,{stars:e})},e)}))}))}var D,V=n(94721),z=n(95614),_=["slotKey","onChange","hasUnselect"];function B(e){var t=e.slotKey,n=void 0===t?"":t,r=e.onChange,a=e.hasUnselect,s=void 0!==a&&a,o=(0,M.Z)(e,_),c=(0,R.$)(["artifact","ui"]).t;return(0,W.jsxs)(O.Z,(0,l.Z)((0,l.Z)({title:c(n?"artifact:slotName:".concat(n):"artifact:slot"),color:n?"success":"primary",startIcon:n?(0,z.Ir)(n):void 0},o),{},{children:[s&&(0,W.jsxs)(K.Z,{selected:""===n,disabled:""===n,onClick:function(){return r("")},children:[(0,W.jsx)(P.Z,{children:(0,W.jsx)(h.Z,{})}),(0,W.jsx)(C.Z,{children:c(D||(D=(0,i.Z)(["ui:unselect"])))})]}),s&&(0,W.jsx)(V.Z,{}),N.eV.map((function(e){return(0,W.jsxs)(K.Z,{selected:n===e,disabled:n===e,onClick:function(){return r(e)},children:[(0,W.jsx)(P.Z,{children:(0,z.Ir)(e)}),(0,W.jsx)(C.Z,{children:c("artifact:slotName:".concat(e))})]},e)}))]}))}var q=n(3992),$=n(71310),H=n(68198),Y=n(58165),J=["value","onChange","disabled","float"];function X(e){var t=e.value,n=e.onChange,r=e.disabled,i=void 0!==r&&r,a=e.float,o=void 0!==a&&a,c=(0,M.Z)(e,J),u=(0,E.useState)(""),d=(0,s.Z)(u,2),f=d[0],h=d[1],x=(0,E.useCallback)((function(){if(""===f)return n(0);var e=o?parseFloat:parseInt;n(e(f))}),[n,f,o]);return(0,E.useEffect)((function(){var e;return h(null!==(e=null===t||void 0===t?void 0:t.toString())&&void 0!==e?e:"")}),[t,h]),(0,W.jsx)(Y.Z,(0,l.Z)({value:f,"aria-label":"custom-input",type:"number",onChange:function(e){return h(e.target.value)},onBlur:x,disabled:i,onKeyDown:function(e){return"Enter"===e.key&&x()}},c))}var Q=n(55942),ee=n(9321),te=n(75545),ne=n(98620),re=n(31148),ie=n(7618),ae=n(45748),se=n(92830),le=n(79406),oe=n(68544),ce=n(42320),ue=n(50765),de=JSON.parse('{"5":{"def_":{"24.0":"24.1"},"critRate_":{"8.5":"8.6","19.5":"19.4","23.0":"22.9"}}}');var fe=n(60393),he=n(72838),xe=n(55221),pe=n(901);function ve(e){var t=e.efficiency,n=e.max,r=void 0!==n&&n,i=e.t,a=e.valid,s=r?"maxSubEff":"curSubEff";return(0,W.jsx)($.Z,{sx:{py:1,px:2},children:(0,W.jsxs)(j.ZP,{container:!0,spacing:1,children:[(0,W.jsx)(j.ZP,{item:!0,children:i("editor.".concat(s))}),(0,W.jsx)(j.ZP,{item:!0,flexGrow:1,children:(0,W.jsx)(xe.Z,{title:(0,W.jsxs)("span",{children:[(0,W.jsx)(k.Z,{variant:"h6",children:i("editor.".concat(s))}),(0,W.jsx)(k.Z,{children:(0,W.jsx)(F.c,{t:i,i18nKey:"editor.".concat(s,"Desc")})})]})})}),(0,W.jsx)(j.ZP,{item:!0,xs:"auto",children:(0,W.jsx)(pe.Z,{valid:a,max:900,value:a?t:"ERR"})})]})})}var ye,Ze,me,ge,je,be,Se,we=n(10600),ke=n(25617),Ke=n(92443);function Pe(e){var t,n=e.index,r=e.artifact,s=e.setSubstat,l=(0,R.$)("artifact").t,o=null!==r&&void 0!==r?r:{},c=o.mainStatKey,u=void 0===c?"":c,d=o.rarity,f=void 0===d?5:d,h=null!==(t=null===r||void 0===r?void 0:r.substats[n])&&void 0!==t?t:{},x=h.key,p=void 0===x?"":x,v=h.value,y=void 0===v?0:v,Z=h.rolls,m=void 0===Z?[]:Z,g=h.efficiency,A=void 0===g?0:g,I=m.reduce((function(e,t){return e+t}),0),E=le.ZP.unit(p),G=m.length,M="",N=[],L=0;if(r){var T=r.rarity,U=ne.Z.rollInfo(T),D=U.numUpgrades,V=U.high;L=D+V-3-G,N=p?ne.Z.getSubstatRollData(p,T):[]}var z=7-N.length;return!G&&p&&y&&(M=M||l(ye||(ye=(0,i.Z)(["editor.substat.error.noCalc"])))),L<0&&(M=M||l("editor.substat.error.noOverRoll",{value:L+G})),(0,W.jsxs)($.Z,{children:[(0,W.jsx)(b.Z,{sx:{display:"flex"},children:(0,W.jsxs)(S.Z,{size:"small",sx:{width:"100%",display:"flex"},children:[(0,W.jsxs)(O.Z,{startIcon:p?te.ZP[p]:void 0,title:p?le.ZP.getArtStr(p):l("editor.substat.substatFormat",{value:n+1}),disabled:!r,color:p?"success":"primary",sx:{whiteSpace:"nowrap"},children:[p&&(0,W.jsx)(K.Z,{onClick:function(){return s(n,{key:"",value:0})},children:l(Ze||(Ze=(0,i.Z)(["editor.substat.noSubstat"])))}),ue._.filter((function(e){return u!==e})).map((function(e){return(0,W.jsxs)(K.Z,{selected:p===e,disabled:p===e,onClick:function(){return s(n,{key:e,value:0})},children:[(0,W.jsx)(P.Z,{children:te.ZP[e]}),(0,W.jsx)(C.Z,{children:le.ZP.getArtStr(e)})]},e)}))]}),(0,W.jsx)(we.CC,{sx:{flexBasis:30,flexGrow:1},children:(0,W.jsx)(we.ZP,{float:"%"===E,placeholder:l(me||(me=(0,i.Z)(["editor.substat.selectSub"]))),value:p?y:void 0,onChange:function(e){return s(n,{key:p,value:null!==e&&void 0!==e?e:0})},disabled:!p,error:!!M,sx:{px:1},inputProps:{sx:{textAlign:"right"}}})}),!!N.length&&(0,W.jsx)(Ke.Z,{children:l(ge||(ge=(0,i.Z)(["editor.substat.nextRolls"])))}),N.map((function(e,t){var r,i,a,l=(0,le.qs)(I+e,E);return l=null!==(r=null===(i=de[f])||void 0===i||null===(a=i[p])||void 0===a?void 0:a[l])&&void 0!==r?r:l,(0,W.jsx)(w.Z,{color:"roll".concat((0,fe.uZ)(z+t,1,6)),disabled:y&&!G||L<=0,onClick:function(){return s(n,{key:p,value:parseFloat(l)})},children:l},t)}))]})}),(0,W.jsx)(b.Z,{sx:{p:1},children:M?(0,W.jsx)(ke.Z,{color:"error",children:l(je||(je=(0,i.Z)(["ui:error"])))}):(0,W.jsxs)(j.ZP,{container:!0,children:[(0,W.jsx)(j.ZP,{item:!0,children:(0,W.jsx)(ke.Z,{color:0===G?"secondary":"roll".concat((0,fe.uZ)(G,1,6)),children:G?l("editor.substat.RollCount",{count:G}):l(be||(be=(0,i.Z)(["editor.substat.noRoll"])))})}),(0,W.jsx)(j.ZP,{item:!0,flexGrow:1,children:!!m.length&&(0,a.Z)(m).sort().map((function(e,t){return(0,W.jsx)(k.Z,{component:"span",color:"roll".concat((0,fe.uZ)(z+N.indexOf(e),1,6),".main"),sx:{ml:1},children:(0,le.qs)(e,E)},"".concat(t,".").concat(e))}))}),(0,W.jsx)(j.ZP,{item:!0,xs:"auto",flexShrink:1,children:(0,W.jsx)(k.Z,{children:(0,W.jsxs)(F.c,{t:l,i18nKey:"editor.substat.eff",color:"text.secondary",children:["Efficiency: ",(0,W.jsx)(pe.Z,{valid:!0,max:100*G,value:A||l(Se||(Se=(0,i.Z)(["editor.substat.noStat"])))})]})})})]})})]})}var Ce=n.p+"static/media/scan_art_main.66f01e51a69c518e4278.png",Ae=n.p+"static/media/snippet.d223e79704fd95bcb783.png";function Ie(e){var t=e.modalShow,n=e.hide;return(0,W.jsx)(ee.Z,{open:t,onClose:n,children:(0,W.jsxs)(q.Z,{children:[(0,W.jsx)(g.Z,{sx:{py:1},children:(0,W.jsxs)(j.ZP,{container:!0,children:[(0,W.jsx)(j.ZP,{item:!0,flexGrow:1,children:(0,W.jsx)(k.Z,{variant:"subtitle1",children:"How do Upload Screenshots for parsing"})}),(0,W.jsx)(j.ZP,{item:!0,children:(0,W.jsx)(H.Z,{onClick:n})})]})}),(0,W.jsx)(V.Z,{}),(0,W.jsxs)(g.Z,{children:[(0,W.jsxs)(I.Z,{variant:"outlined",severity:"warning",children:["NOTE: Artifact Scanning currently only work for ",(0,W.jsx)("strong",{children:"ENGLISH"})," artifacts."]}),(0,W.jsxs)(j.ZP,{container:!0,spacing:1,mt:1,children:[(0,W.jsx)(j.ZP,{item:!0,xs:8,md:4,children:(0,W.jsx)(b.Z,{component:"img",alt:"snippet of the screen to take",src:Ae,width:"100%",height:"auto"})}),(0,W.jsxs)(j.ZP,{item:!0,xs:12,md:8,children:[(0,W.jsx)(k.Z,{gutterBottom:!0,children:"Using screenshots can dramatically decrease the amount of time you manually input in stats on the Genshin Optimizer."}),(0,W.jsx)(k.Z,{variant:"h5",children:"Where to snip the screenshot."}),(0,W.jsxs)(k.Z,{gutterBottom:!0,children:["In game, Open your bag, and navigate to the artifacts tab. Select the artifact you want to scan with Genshin Optimizer. ",(0,W.jsx)("b",{children:"Only artifact from this screen can be scanned."})]}),(0,W.jsx)(k.Z,{variant:"h6",children:"Single artifact"}),(0,W.jsxs)(k.Z,{gutterBottom:!0,children:["To take a screenshot, in Windows, the shortcut is ",(0,W.jsx)("strong",{children:"Shift + WindowsKey + S"}),". Once you selected the region, the image is automatically included in your clipboard."]}),(0,W.jsx)(k.Z,{variant:"h6",children:"Multiple artifacts"}),(0,W.jsxs)(k.Z,{gutterBottom:!0,children:["To take advantage of batch uploads, you can use a tool like ",(0,W.jsx)("a",{href:"https://picpick.app/",target:"_blank",rel:"noreferrer",children:"PicPick"})," to create a macro to easily to screenshot a region to screenshot multiple artifacts at once."]}),(0,W.jsx)(k.Z,{variant:"h5",children:"What to include in the screenshot."}),(0,W.jsx)(k.Z,{children:"As shown in the Image, starting from the top with the artifact name, all the way to the set name(the text in green). "})]}),(0,W.jsxs)(j.ZP,{item:!0,xs:12,md:7,children:[(0,W.jsx)(k.Z,{variant:"h5",children:"Adding Screenshot to Genshin Optimizer"}),(0,W.jsx)(k.Z,{children:"At this point, you should have the artifact snippet either saved to your harddrive, or in your clipboard."}),(0,W.jsx)(k.Z,{gutterBottom:!0,children:'You can click on the box next to "Browse" to browse the files in your harddrive for multiple screenshots.'}),(0,W.jsxs)(k.Z,{children:["For single screenshots from the snippets, just press ",(0,W.jsx)("strong",{children:"Ctrl + V"})," to paste from your clipboard."]}),(0,W.jsxs)(k.Z,{gutterBottom:!0,children:["You should be able to see a Preview of your artifact snippet, and after waiting a few seconds, the artifact set and the substats will be filled in in the ",(0,W.jsx)("b",{children:"Artifact Editor"}),"."]}),(0,W.jsx)(k.Z,{variant:"h5",children:"Finishing the Artifact"}),(0,W.jsxs)(k.Z,{children:["Unfortunately, computer vision is not 100%. There will always be cases where something is not scanned properly. You should always double check the scanned artifact values! Once the artifact has been filled, Click on ",(0,W.jsx)("strong",{children:"Add Artifact"})," to finish editing the artifact."]})]}),(0,W.jsx)(j.ZP,{item:!0,xs:8,md:5,children:(0,W.jsx)(b.Z,{component:"img",alt:"main screen after importing stats",src:Ce,width:"100%",height:"auto"})})]})]}),(0,W.jsx)(V.Z,{}),(0,W.jsx)(g.Z,{sx:{py:1},children:(0,W.jsx)(H.Z,{large:!0,onClick:n})})]})})}var Ee=n(37762),Re=n(74165),Fe=n(15861),Ge=n(31362),Me=n(91702),Ne=n(15671),Oe=n(43144),Le=function(){function e(t,n){(0,Ne.Z)(this,e),this.data={},this.init=void 0,this.deinit=void 0,this.init=t,this.deinit=n}return(0,Oe.Z)(e,[{key:"borrow",value:function(){var e=(0,Fe.Z)((0,Re.Z)().mark((function e(t,n){var r,i;return(0,Re.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.data[t]||(this.data[t]={value:this.init(t),refCount:0}),(r=this.data[t]).refCount+=1,e.next=5,n(r.value);case 5:return i=e.sent,r.refCount-=1,r.refCount||(delete this.data[t],this.deinit(t,r.value)),e.abrupt("return",i);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),We={r:255,g:204,b:50},Te=new Le(function(){var e=(0,Fe.Z)((0,Re.Z)().mark((function e(t){var n,r;return(0,Re.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,Ge.createScheduler)(),r=Array(2).fill(0).map(function(){var e=(0,Fe.Z)((0,Re.Z)().mark((function e(r){var i;return(0,Re.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,Ge.createWorker)({errorHandler:console.error}),e.next=3,i.load();case 3:return e.next=5,i.loadLanguage(t);case 5:return e.next=7,i.initialize(t);case 7:n.addWorker(i);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=4,Promise.any(r);case 4:return e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e,t){t.then((function(e){return e.terminate()}))})),Ue=function(e,t){switch(t.type){case"upload":return{processed:e.processed,outstanding:[].concat((0,a.Z)(e.outstanding),(0,a.Z)(t.files))};case"processing":return{processed:e.processed,outstanding:(0,a.Z)(e.outstanding)};case"processed":return e.outstanding[0].file===t.file?{processed:[].concat((0,a.Z)(e.processed),[t.result]),outstanding:e.outstanding.slice(1)}:e;case"pop":return{processed:e.processed.slice(1),outstanding:e.outstanding};case"clear":return{processed:[],outstanding:[]}}};function De(e){if(!e.result){var t=e.file,n=e.fileName;e.imageURL=tt(t),e.result=e.imageURL.then(function(){var e=(0,Fe.Z)((0,Re.Z)().mark((function e(r){var i,a,l,o,c,u;return(0,Re.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re.y.getAll;case 2:return i=e.sent,e.next=5,it(r);case 5:return a=e.sent,l=ot(i,a.rarities,ct(a.artifactSetTexts,i),ft(a.whiteTexts),pt(a.substatTexts),ht(a.whiteTexts),xt(a.whiteTexts)),o=(0,s.Z)(l,2),c=o[0],u=o[1],e.abrupt("return",{file:t,result:{fileName:n,imageURL:r,artifact:c,texts:u}});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}var Ve,ze,_e,Be,qe,$e,He,Ye,Je,Xe,Qe,et,tt=function(e){return new Promise((function(t){var n=new FileReader;n.onloadend=function(e){var n=e.target;return t(n.result)},n.readAsDataURL(e)}))},nt=function(e){return new Promise((function(t){var n=new Image;n.onload=function(e){var n=e.target;return t(function(e){var t=document.createElement("canvas"),n=t.getContext("2d");return t.width=e.width,t.height=e.height,n.drawImage(e,0,0,e.width,e.height),n.getImageData(0,0,e.width,e.height)}(n))},n.src=e}))};function rt(e){var t=document.createElement("canvas");return t.width=e.width,t.height=e.height,t.getContext("2d").putImageData(e,0,0),t}function it(e){return at.apply(this,arguments)}function at(){return(at=(0,Fe.Z)((0,Re.Z)().mark((function e(t){var n,r,i,a,l,o,c,u,d,f,h;return(0,Re.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nt(t);case 2:return n=e.sent,r=n.width,i=Math.floor(n.height/2),a={rectangle:{top:i,left:0,width:r,height:i}},l=[st(vt(n,[140,140,140],[255,255,255],{mode:"bw",region:"top"})),st(vt(n,[30,50,80],[160,160,160],{region:"bot"}),a),st(vt(n,[30,160,30],[200,255,200],{mode:"bw",region:"bot"}),a)],o=ut(n.data,n.width,n.height),e.next=9,Promise.all(l);case 9:return c=e.sent,u=(0,s.Z)(c,3),d=u[0],f=u[1],h=u[2],e.abrupt("return",{whiteTexts:d,substatTexts:f,artifactSetTexts:h,rarities:o});case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function st(e){return lt.apply(this,arguments)}function lt(){return lt=(0,Fe.Z)((0,Re.Z)().mark((function e(t){var n,r,i,a=arguments;return(0,Re.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:void 0,r=rt(t),e.next=4,Te.borrow("eng",function(){var e=(0,Fe.Z)((0,Re.Z)().mark((function e(t){return(0,Re.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return e.next=4,e.sent.addJob("recognize",r,n);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:return i=e.sent,e.abrupt("return",i.data.lines.map((function(e){return e.text})));case 6:case"end":return e.stop()}}),e)}))),lt.apply(this,arguments)}function ot(e,t,n,r,i,l,o){var c,u=(0,a.Z)(new Set([].concat((0,a.Z)(n),["EmblemOfSeveredFate"]))),d=-1,f=[{setKey:"EmblemOfSeveredFate",rarity:3,level:0,slotKey:"flower",mainStatKey:"hp",substats:[],location:"",lock:!1,exclude:!1}],h=(0,fe.O)(N.En,(function(t){var r=0;n.size&&(r+=(0,a.Z)(n).reduce((function(n,r){return n+(e[r].rarity.includes(t)?1:0)}),0)/n.size);if(i.length){var s=i.reduce((function(e,n){return e+(ne.Z.getSubstatRolls(n.key,n.value,t).length?1:0)}),0);r+=s/i.length*2}return r})),x=(0,Ee.Z)(N.eV);try{for(x.s();!(c=x.n()).done;){var p,v=c.value,y=(0,Ee.Z)(ne.Z.slotMainStats(v));try{var Z=function(){for(var t=p.value,i=(r.has(v)?1:0)+(l.has(t)?1:0),a=o.filter((function(e){return"%"!==e.unit||"%"===le.ZP.unit(t)})).map((function(e){return e.mainStatValue})),c=function(){var r=(0,s.Z)(y[x],2),l=r[0],o=r[1],c=parseInt(l),h=u.filter((function(t){return e[t].rarity.includes(c)})),p=i+o;if(p+2<d)return"continue";var Z,m=(0,Ee.Z)(a);try{var g=function(){var e,r=Z.value,i=ne.Z.mainStatValues(c,t),a=Math.max(0,i.findIndex((function(e){return e>=r}))),s=i[a],l=p+(s===r?1:0),o=(0,Ee.Z)(h);try{for(o.s();!(e=o.n()).done;){var u=e.value,x=l+(n.has(u)?1:0);x>=d&&(x>d&&(f=[]),d=x,f.push({setKey:u,rarity:c,level:a,slotKey:v,mainStatKey:t,substats:[],location:"",lock:!1,exclude:!1}))}}catch(y){o.e(y)}finally{o.f()}};for(m.s();!(Z=m.n()).done;)g()}catch(k){m.e(k)}finally{m.f()}if(p>=d){var j,b=(0,Ee.Z)(h);try{for(b.s();!(j=b.n()).done;){var S=j.value,w=p+(n.has(S)?1:0);w>d&&(f=[]),d=w,f.push({setKey:S,rarity:c,level:0,slotKey:v,mainStatKey:t,substats:[],location:"",lock:!1,exclude:!1})}}catch(k){b.e(k)}finally{b.f()}}},x=0,y=Object.entries(h);x<y.length;x++)c()};for(y.s();!(p=y.n()).done;)Z()}catch(R){y.e(R)}finally{y.f()}}}catch(R){x.e(R)}finally{x.f()}var m={},g={setKey:new Set,rarity:new Set,level:new Set,slotKey:new Set,mainStatKey:new Set,mainStatVal:new Set},j=f[0],b=ne.Z.mainStatValue(j.mainStatKey,j.rarity,j.level);j.substats=i.filter((function(e,t){return e.key!==j.mainStatKey&&i.slice(0,t).every((function(t){return t.key!==e.key}))}));for(var S=j.substats.length;S<4;S++)j.substats.push({key:"",value:0});for(var w=0,k=f;w<k.length;w++){var K=k[w];g.setKey.add(K.setKey),g.rarity.add(K.rarity),g.level.add(K.level),g.slotKey.add(K.slotKey),g.mainStatKey.add(K.mainStatKey)}function P(e,t,n){return(0,W.jsxs)(W.Fragment,{children:["Unknown ",t," : Set to ",(0,W.jsx)(Me.Z,{color:"error",children:n(e)})]})}function C(e,t,n){return(0,W.jsxs)(W.Fragment,{children:["Detected ",t," ",(0,W.jsx)(Me.Z,{color:"success",children:n(e)})]})}function A(e,t,n){return(0,W.jsxs)(W.Fragment,{children:["Inferred ",t," ",(0,W.jsx)(Me.Z,{color:"warning",children:n(e)})]})}function I(e,t,n,r){var i=new Set((0,a.Z)(g[e]).filter((function(e){return t.has(e)})));i.size>1?m[e]=function(e,t,n,r){return(0,W.jsxs)(W.Fragment,{children:["Ambiguous ",n," ",(0,W.jsx)(Me.Z,{color:"error",children:r(e)})," : May also be ",t.filter((function(t){return t!==e})).map((function(e,t){return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)("b",{children:t>0?"/":""}),(0,W.jsx)(Me.Z,{color:"warning",children:r(e)})]})}))]})}(j[e],(0,a.Z)(t),n,r):1===i.size?m[e]=C(j[e],n,r):g[e].size>1?m[e]=P(j[e],n,r):m[e]=A(j[e],n,r)}I("setKey",n,"Set",(function(t){return e[t].name})),I("rarity",t,"Rarity",(function(e){return(0,W.jsxs)(W.Fragment,{children:[e," ",1!==e?"Stars":"Star"]})})),I("slotKey",r,"Slot",(function(e){return(0,W.jsx)(W.Fragment,{children:ne.Z.slotName(e)})})),I("mainStatKey",l,"Main Stat",(function(e){return(0,W.jsx)(W.Fragment,{children:le.ZP.getStr(e)})})),m.substats=(0,W.jsx)(W.Fragment,{children:j.substats.filter((function(e){return""!==e.key})).map((function(e,t){return(0,W.jsx)("div",{children:C(e,"Sub Stat",(function(e){return(0,W.jsxs)(W.Fragment,{children:[le.ZP.getStr(e.key),"+",(0,le.qs)(e.value,le.ZP.unit(e.key)),le.ZP.unit(e.key)]})}))},t)}))});var E=function(e){return(0,W.jsxs)(W.Fragment,{children:[(0,le.qs)(e,le.ZP.unit(j.mainStatKey)),le.ZP.unit(j.mainStatKey)]})};return o.find((function(e){return e.mainStatValue===b}))?l.has(j.mainStatKey)?(m.level=C(j.level,"Level",(function(e){return"+"+e})),m.mainStatVal=C(b,"Main Stat value",E)):(m.level=A(j.level,"Level",(function(e){return"+"+e})),m.mainStatVal=A(b,"Main Stat value",E)):(m.level=P(j.level,"Level",(function(e){return"+"+e})),m.mainStatVal=P(b,"Main Stat value",E)),[j,m]}function ct(e,t){var n,r=new Set([]),i=(0,Ee.Z)(e);try{for(i.s();!(n=i.n()).done;){var a,s=n.value,l=(0,Ee.Z)(N.q2);try{for(l.s();!(a=l.n()).done;){var o=a.value;(0,fe.UX)(s.replace(/\W/g,""),t[o].nameRaw.replace(/\W/g,""))<=2&&r.add(o)}}catch(c){l.e(c)}finally{l.f()}}}catch(c){i.e(c)}finally{i.f()}return r}function ut(e,t,n){for(var r=e,i=0,a=0,s=new Set([]),l=0;l<n;l++){for(var o=0,c=!1,u=0;u<t;u++){var d=4*(l*t+u);dt({r:r[d],g:r[d+1],b:r[d+2]},We)?c||(c=!0,o++):c=!1}i!==o?(i=o,a=1):i&&++a>=10&&s.add((0,fe.uZ)(i,3,5))}return s}function dt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,r=function(e,t){return Math.abs(e-t)<=n};return r(e.r,t.r)&&r(e.g,t.g)&&r(e.b,t.b)}function ft(e){var t,n=new Set,r=(0,Ee.Z)(e);try{for(r.s();!(t=r.n()).done;){var i,a=t.value,s=(0,Ee.Z)(N.eV);try{for(s.s();!(i=s.n()).done;){var l=i.value;(0,fe.UX)(a.replace(/\W/g,""),ne.Z.slotName(l).replace(/\W/g,""))<=2&&n.add(l)}}catch(o){s.e(o)}finally{s.f()}}}catch(o){r.e(o)}finally{r.f()}return n}function ht(e){var t,n=new Set([]),r=(0,Ee.Z)(e);try{for(r.s();!(t=r.n()).done;){var i,a=t.value,s=(0,Ee.Z)(ue.r);try{for(s.s();!(i=s.n()).done;){var l,o,c,u=i.value;a.toLowerCase().includes(null!==(l=null===(o=le.ZP.getStr(u))||void 0===o?void 0:o.toLowerCase())&&void 0!==l?l:"")&&n.add(u),u.includes("_bonu")&&(0,fe.UX)(a.replace(/\W/g,""),(null!==(c=le.ZP.getStr(u))&&void 0!==c?c:"").replace(/\W/g,""))<=1&&n.add(u)}}catch(d){s.e(d)}finally{s.f()}}}catch(d){r.e(d)}finally{r.f()}return n}function xt(e){var t,n=[],r=(0,Ee.Z)(e);try{for(r.s();!(t=r.n()).done;){var i=t.value,a=/(\d+[,|\\.]+\d)%/,s=a.exec(i);s&&n.push({mainStatValue:parseFloat(s[1].replace(/,/g,".").replace(/\.{2,}/g,".")),unit:"%"}),(s=(a=/(\d+[,|\\.]\d{3}|\d{2,3})/).exec(i))&&n.push({mainStatValue:parseInt(s[1].replace(/[,|\\.]+/g,""))})}}catch(l){r.e(l)}finally{r.f()}return n}function pt(e){var t,n=[],r=(0,Ee.Z)(e);try{var i=function(){var e=t.value;e=e.replace(/^[\W]+/,"").replace(/\n/,""),ue._.forEach((function(t){var r=le.ZP.getStr(t),i=("%"===le.ZP.unit(t)?new RegExp(r+"\\s*\\+\\s*(\\d+[\\.|,]+\\d)%","im"):new RegExp(r+"\\s*\\+\\s*(\\d+,\\d+|\\d+)($|\\s)","im")).exec(e);i&&n.push({key:t,value:parseFloat(i[1].replace(/,/g,".").replace(/\.{2,}/g,"."))})}))};for(r.s();!(t=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}return n.slice(0,4)}function vt(e,t,n,r){for(var i=r.region,a=void 0===i?"all":i,s=r.mode,l=void 0===s?"color":s,o=Uint8ClampedArray.from(e.data),c="top"===a,u="bot"===a,d="all"===a,f="bw"===l,h="invert"===l,x=Math.floor(e.width*(e.height/2)*4),p=0;p<o.length;p+=4){var v=o[p],y=o[p+1],Z=o[p+2];(d||c&&p<x||u&&p>x)&&v>=t[0]&&v<=n[0]&&y>=t[1]&&y<=n[1]&&Z>=t[2]&&Z<=n[2]?f?o[p]=o[p+1]=o[p+2]=0:h&&(o[p]=255-v,o[p+1]=255-y,o[p+2]=255-Z):o[p]=o[p+1]=o[p+2]=255}return new ImageData(o,e.width,e.height)}var yt=new Set(ue._);function Zt(e,t){switch(t.type){case"reset":return;case"substat":var n=t.index,r=t.substat,i=r.key?e.substats.findIndex((function(e){return e.key===r.key})):-1;if(-1===i||i===n)e.substats[n]=r;else{var a=[e.substats[i],e.substats[n]];e.substats[n]=a[0],e.substats[i]=a[1]}return(0,l.Z)({},e);case"overwrite":return t.artifact;case"update":return(0,l.Z)((0,l.Z)({},e),t.artifact)}}var mt=(0,p.ZP)("input")({display:"none"});function gt(e){var t,n,r=e.artifactIdToEdit,p=void 0===r?"":r,M=e.cancelEdit,L=e.allowUpload,T=void 0!==L&&L,D=e.allowEmpty,V=void 0!==D&&D,z=(0,R.$)("artifact").t,_=(0,ce.Z)((function(){return re.y.getAll}),[]),Y=(0,E.useContext)(ie.t).database,J=(0,E.useState)(!1),ue=(0,s.Z)(J,2),de=ue[0],xe=ue[1],pe=(0,oe.Z)(),ye=(0,s.Z)(pe,2),Ze=ye[0],me=ye[1];(0,E.useEffect)((function(){return Y.arts.followAny(me)}),[Y,me]);var ge=(0,E.useReducer)(Zt,void 0),je=(0,s.Z)(ge,2),be=je[0],Se=je[1],we=(0,E.useMemo)((function(){return be&&(0,ae.R$)(be)}),[be]),ke=(0,E.useState)(!1),Ke=(0,s.Z)(ke,2),Ce=Ke[0],Ae=Ke[1],Ee=(0,E.useReducer)(Ue,{processed:[],outstanding:[]}),Re=(0,s.Z)(Ee,2),Fe=Re[0],Ge=Fe.processed,Me=Fe.outstanding,Ne=Re[1],Oe=Ge[0],Le=Me[0],We=(0,ce.Z)((function(){return null===Le||void 0===Le?void 0:Le.imageURL}),[null===Le||void 0===Le?void 0:Le.imageURL]),Te=(0,ce.Z)((function(){return null===Le||void 0===Le?void 0:Le.result}),[null===Le||void 0===Le?void 0:Le.result]),tt=Ge.length+Me.length,nt=null!==(t=null===Oe||void 0===Oe?void 0:Oe.imageURL)&&void 0!==t?t:We,rt=null!==Oe&&void 0!==Oe?Oe:{},it=rt.artifact,at=rt.texts,st=!(null===we||void 0===we||!we.location);(0,E.useEffect)((function(){!we&&it&&Se({type:"overwrite",artifact:it})}),[we,it,Se]),(0,E.useEffect)((function(){var e=Math.min(16-Ge.length,3,Me.length),t=e&&!Me[0].result;Me.slice(0,e).forEach(De),t&&Ne({type:"processing"})}),[Ge.length,Me]),(0,E.useEffect)((function(){Te&&Ne((0,l.Z)({type:"processed"},Te))}),[Te,Ne]);var lt=(0,E.useCallback)((function(e){xe(!0),Ne({type:"upload",files:(0,a.Z)(e).map((function(e){return{file:e,fileName:e.name}}))})}),[Ne,xe]),ot=(0,E.useCallback)((function(){return Ne({type:"clear"})}),[Ne]);(0,E.useEffect)((function(){var e=function(e){return lt(e.clipboardData.files)};return T&&window.addEventListener("paste",e),function(){T&&window.removeEventListener("paste",e)}}),[lt,T]);var ct=(0,E.useCallback)((function(e){lt(e.target.files),e.target.value=null}),[lt]),ut=(0,E.useMemo)((function(){var e,t=Ze&&p&&Y.arts.get(p);if(t)return{old:t,oldType:"edit"};if(void 0===we)return{old:void 0,oldType:""};var n=Ze&&Y.arts.findDups(we),r=n.duplicated,i=n.upgraded;return{old:null!==(e=r[0])&&void 0!==e?e:i[0],oldType:0!==r.length?"duplicate":"upgrade"}}),[we,p,Y,Ze]),dt=ut.old,ft=ut.oldType,ht=(0,E.useMemo)((function(){if(!we)return{artifact:void 0,errors:[]};var e=(0,se.BG)(we,p);return dt&&(e.artifact.location=dt.location,e.artifact.exclude=dt.exclude),e}),[we,p,dt]),xt=ht.artifact,pt=ht.errors;(0,E.useEffect)((function(){"new"===p&&(xe(!0),Se({type:"reset"}));var e=p&&Ze&&Y.arts.get(p);e&&(xe(!0),Se({type:"overwrite",artifact:(0,fe.I8)(e)}))}),[p,Y,Ze]);var vt=we?null===_||void 0===_?void 0:_[we.setKey]:void 0,gt=(0,E.useCallback)((function(){null===M||void 0===M||M(),Ne({type:"pop"}),Se({type:"reset"})}),[M,Se]),jt=(0,E.useCallback)((function(e){var t,n,r=e.setKey?_[e.setKey]:vt;function i(e,t,n){return e&&t.includes(e)?e:null!==n&&void 0!==n?n:t[0]}e.setKey&&(e.rarity=i(null===we||void 0===we?void 0:we.rarity,r.rarity,Math.max.apply(Math,(0,a.Z)(r.rarity))),e.slotKey=i(null===we||void 0===we?void 0:we.slotKey,r.slots)),e.rarity&&(e.level=null!==(t=null===we||void 0===we?void 0:we.level)&&void 0!==t?t:0),e.level&&(e.level=(0,fe.uZ)(e.level,0,4*(null!==(n=e.rarity)&&void 0!==n?n:we.rarity))),e.slotKey&&(e.mainStatKey=i(null===we||void 0===we?void 0:we.mainStatKey,ne.Z.slotMainStats(e.slotKey))),e.mainStatKey&&(e.substats=[0,1,2,3].map((function(t){return we&&we.substats[t].key!==e.mainStatKey?we.substats[t]:{key:"",value:0}}))),Se({type:"update",artifact:e})}),[we,_,vt,Se]),bt=(0,E.useCallback)((function(e,t){Se({type:"substat",index:e,substat:t})}),[Se]),St=!pt.length,wt=null!==we&&void 0!==we?we:{},kt=wt.rarity,Kt=void 0===kt?5:kt,Pt=wt.level,Ct=void 0===Pt?0:Pt,At=wt.slotKey,It=void 0===At?"flower":At,Et=xt?ne.Z.getArtifactEfficiency(xt,yt):{},Rt=Et.currentEfficiency,Ft=void 0===Rt?0:Rt,Gt=Et.maxEfficiency,Mt=void 0===Gt?0:Gt,Nt=Ge.length||Me.length,Ot=(0,E.useCallback)((function(e){Nt&&e.preventDefault(),xe(!1),M()}),[Nt,xe,M]),Lt=(0,v.Z)(),Wt=(0,y.Z)(Lt.breakpoints.up("md")),Tt=we?N.Kj.find((function(e){return we.mainStatKey.includes(e)})):void 0,Ut=we?null!==Tt&&void 0!==Tt?Tt:"success":"primary",Dt=(0,E.useCallback)((function(e){return jt({setKey:e})}),[jt]),Vt=(0,E.useCallback)((function(e){return""===e||!(!st||"circlet"===It||"PrayersForDestiny"!==e&&"PrayersForIllumination"!==e&&"PrayersForWisdom"!==e&&"PrayersToSpringtime"!==e)}),[st,It]);return(0,W.jsx)(ee.Z,{open:de,onClose:Ot,children:(0,W.jsx)(E.Suspense,{fallback:(0,W.jsx)(Z.Z,{variant:"rectangular",sx:{width:"100%",height:de?"100%":64}}),children:(0,W.jsxs)(q.Z,{children:[(0,W.jsx)(Ie,{modalShow:Ce,hide:function(){return Ae(!1)}}),(0,W.jsx)(m.Z,{title:(0,W.jsx)(F.c,{t:z,i18nKey:"editor.title",children:"Artifact Editor"}),action:(0,W.jsx)(H.Z,{disabled:!!Nt,onClick:Ot})}),(0,W.jsxs)(g.Z,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,W.jsxs)(j.ZP,{container:!0,spacing:1,columns:{xs:1,md:2},children:[(0,W.jsxs)(j.ZP,{item:!0,xs:1,display:"flex",flexDirection:"column",gap:1,children:[(0,W.jsxs)(b.Z,{sx:{display:"flex",gap:1,mb:1},children:[(0,W.jsx)(G.Y4,{showDefault:!0,disableClearable:!0,size:"small",artSetKey:null!==(n=null===we||void 0===we?void 0:we.setKey)&&void 0!==n?n:"",setArtSetKey:Dt,sx:function(e){return{flexGrow:1,".MuiFilledInput-root":{borderBottomRightRadius:e.shape.borderRadius,borderBottomLeftRadius:e.shape.borderRadius}}},defaultText:z("editor.unknownSetName"),disable:Vt}),(0,W.jsx)(U,{rarity:we?Kt:void 0,onChange:function(e){return jt({rarity:e})},filter:function(e){var t,n;return!(null===vt||void 0===vt||null===(t=vt.rarity)||void 0===t||null===(n=t.includes)||void 0===n||!n.call(t,e))},disabled:!vt})]}),(0,W.jsxs)(b.Z,{component:"div",display:"flex",children:[(0,W.jsx)(X,{id:"filled-basic",label:"Level",variant:"filled",sx:{flexShrink:1,flexGrow:1,mr:1,my:0},margin:"dense",size:"small",value:Ct,disabled:!vt,placeholder:"0~".concat(4*Kt),onChange:function(e){return jt({level:e})}}),(0,W.jsxs)(S.Z,{children:[(0,W.jsx)(w.Z,{onClick:function(){return jt({level:Ct-1})},disabled:!vt||0===Ct,children:"-"}),Kt?(0,a.Z)(Array(Kt+1).keys()).map((function(e){return 4*e})).map((function(e){return(0,W.jsx)(w.Z,{onClick:function(){return jt({level:e})},disabled:!vt||Ct===e,children:e},e)})):null,(0,W.jsx)(w.Z,{onClick:function(){return jt({level:Ct+1})},disabled:!vt||Ct===4*Kt,children:"+"})]})]}),(0,W.jsxs)(b.Z,{component:"div",display:"flex",children:[(0,W.jsx)(B,{disabled:st||!vt,slotKey:It,onChange:function(e){return jt({slotKey:e})}}),(0,W.jsx)($.Z,{sx:{p:1,ml:1,flexGrow:1},children:(0,W.jsx)(E.Suspense,{fallback:(0,W.jsx)(Z.Z,{width:"60%"}),children:(0,W.jsx)(k.Z,{color:"text.secondary",children:null!==vt&&void 0!==vt&&vt.getSlotName(we.slotKey)?(0,W.jsxs)("span",{children:[(0,W.jsx)(Q.Z,{src:vt.slotIcons[we.slotKey]})," ",null===vt||void 0===vt?void 0:vt.getSlotName(we.slotKey)]}):z(ze||(ze=(0,i.Z)(["editor.unknownPieceName"])))})})})]}),(0,W.jsxs)(b.Z,{component:"div",display:"flex",children:[(0,W.jsx)(O.Z,{startIcon:Tt?te.hJ[Tt]:null!==we&&void 0!==we&&we.mainStatKey?te.ZP[we.mainStatKey]:void 0,title:(0,W.jsx)("b",{children:we?le.ZP.getArtStr(we.mainStatKey):z(_e||(_e=(0,i.Z)(["mainStat"])))}),disabled:!vt,color:Ut,children:ne.Z.slotMainStats(It).map((function(e){return(0,W.jsxs)(K.Z,{selected:(null===we||void 0===we?void 0:we.mainStatKey)===e,disabled:(null===we||void 0===we?void 0:we.mainStatKey)===e,onClick:function(){return jt({mainStatKey:e})},children:[(0,W.jsx)(P.Z,{children:te.ZP[e]}),(0,W.jsx)(C.Z,{children:le.ZP.getArtStr(e)})]},e)}))}),(0,W.jsx)($.Z,{sx:{p:1,ml:1,flexGrow:1},children:(0,W.jsx)(k.Z,{color:"text.secondary",children:we?"".concat((0,le.qs)(ne.Z.mainStatValue(we.mainStatKey,Kt,Ct),le.ZP.unit(we.mainStatKey))).concat(le.ZP.unit(we.mainStatKey)):z(Be||(Be=(0,i.Z)(["mainStat"])))})})]}),(0,W.jsx)(ve,{valid:St,efficiency:Ft,t:z}),Ft!==Mt&&(0,W.jsx)(ve,{max:!0,valid:St,efficiency:Mt,t:z}),T&&(0,W.jsx)($.Z,{children:(0,W.jsx)(g.Z,{sx:{display:"flex",flexDirection:"column",gap:1},children:(0,W.jsxs)(E.Suspense,{fallback:(0,W.jsx)(Z.Z,{width:"100%",height:"100"}),children:[(0,W.jsxs)(j.ZP,{container:!0,spacing:1,alignItems:"center",children:[(0,W.jsx)(j.ZP,{item:!0,flexGrow:1,children:(0,W.jsxs)("label",{htmlFor:"contained-button-file",children:[(0,W.jsx)(mt,{accept:"image/*",id:"contained-button-file",multiple:!0,type:"file",onChange:ct}),(0,W.jsx)(w.Z,{component:"span",startIcon:(0,W.jsx)(u.Z,{}),children:"Upload Screenshot (or Ctrl-V)"})]})}),(0,W.jsx)(j.ZP,{item:!0,children:(0,W.jsx)(w.Z,{color:"info",sx:{px:2,minWidth:0},onClick:function(){return Ae(!0)},children:(0,W.jsx)(k.Z,{children:(0,W.jsx)(c.G,{icon:o.Fuz})})})})]}),nt&&(0,W.jsx)(b.Z,{display:"flex",justifyContent:"center",children:(0,W.jsx)(b.Z,{component:"img",src:nt,width:"100%",maxWidth:350,height:"auto",alt:"Screenshot to parse for artifact values"})}),tt>0&&(0,W.jsx)(q.Z,{sx:{pl:2},children:(0,W.jsxs)(j.ZP,{container:!0,spacing:1,alignItems:"center",children:[!Oe&&Le&&(0,W.jsx)(j.ZP,{item:!0,children:(0,W.jsx)(A.Z,{size:"1em"})}),(0,W.jsx)(j.ZP,{item:!0,flexGrow:1,children:(0,W.jsx)(k.Z,{children:(0,W.jsxs)("span",{children:["Screenshots in file-queue: ",(0,W.jsx)("b",{children:tt})]})})}),(0,W.jsx)(j.ZP,{item:!0,children:(0,W.jsx)(w.Z,{size:"small",color:"error",onClick:ot,children:"Clear file-queue"})})]})})]})})})]}),(0,W.jsxs)(j.ZP,{item:!0,xs:1,display:"flex",flexDirection:"column",gap:1,children:[[0,1,2,3].map((function(e){return(0,W.jsx)(Pe,{index:e,artifact:xt,setSubstat:bt},e)})),at&&(0,W.jsx)($.Z,{children:(0,W.jsxs)(g.Z,{children:[(0,W.jsx)("div",{children:at.slotKey}),(0,W.jsx)("div",{children:at.mainStatKey}),(0,W.jsx)("div",{children:at.mainStatVal}),(0,W.jsx)("div",{children:at.rarity}),(0,W.jsx)("div",{children:at.level}),(0,W.jsx)("div",{children:at.substats}),(0,W.jsx)("div",{children:at.setKey})]})})]})]}),dt&&(0,W.jsxs)(j.ZP,{container:!0,sx:{justifyContent:"space-around"},spacing:1,children:[(0,W.jsx)(j.ZP,{item:!0,xs:12,md:5.5,lg:4,children:(0,W.jsxs)($.Z,{children:[(0,W.jsx)(k.Z,{sx:{textAlign:"center"},py:1,variant:"h6",color:"text.secondary",children:z("edit"!==ft?"duplicate"===ft?qe||(qe=(0,i.Z)(["editor.dupArt"])):$e||($e=(0,i.Z)(["editor.upArt"])):He||(He=(0,i.Z)(["editor.beforeEdit"])))}),(0,W.jsx)(he.Z,{artifactObj:dt})]})}),Wt&&(0,W.jsx)(j.ZP,{item:!0,md:1,display:"flex",alignItems:"center",justifyContent:"center",children:(0,W.jsx)($.Z,{sx:{display:"flex"},children:(0,W.jsx)(d.Z,{sx:{fontSize:40}})})}),(0,W.jsx)(j.ZP,{item:!0,xs:12,md:5.5,lg:4,children:(0,W.jsxs)($.Z,{children:[(0,W.jsx)(k.Z,{sx:{textAlign:"center"},py:1,variant:"h6",color:"text.secondary",children:z(Ye||(Ye=(0,i.Z)(["editor.preview"])))}),(0,W.jsx)(he.Z,{artifactObj:xt})]})})]}),!St&&(0,W.jsx)(I.Z,{variant:"filled",severity:"error",children:pt.map((function(e,t){return(0,W.jsx)("div",{children:e},t)}))}),(0,W.jsxs)(j.ZP,{container:!0,spacing:2,children:[(0,W.jsx)(j.ZP,{item:!0,children:"edit"===ft?(0,W.jsx)(w.Z,{startIcon:(0,W.jsx)(f.Z,{}),onClick:function(){Y.arts.set(dt.id,be),V?gt():(xe(!1),M())},disabled:!be||!St,color:"primary",children:z(Je||(Je=(0,i.Z)(["editor.btnSave"])))}):(0,W.jsx)(w.Z,{startIcon:(0,W.jsx)(f.Z,{}),onClick:function(){Y.arts.new(we),V?gt():(xe(!1),M())},disabled:!we||!St,color:"duplicate"===ft?"warning":"primary",children:z(Xe||(Xe=(0,i.Z)(["editor.btnAdd"])))})}),(0,W.jsx)(j.ZP,{item:!0,flexGrow:1,children:V&&(0,W.jsx)(w.Z,{startIcon:(0,W.jsx)(h.Z,{}),disabled:!we,onClick:function(){window.confirm(z(Ve||(Ve=(0,i.Z)(["editor.clearPrompt"]))))&&gt()},color:"error",children:z(Qe||(Qe=(0,i.Z)(["editor.btnClear"])))})}),(0,W.jsx)(j.ZP,{item:!0,children:!1}),dt&&"edit"!==ft&&(0,W.jsx)(j.ZP,{item:!0,children:(0,W.jsx)(w.Z,{startIcon:(0,W.jsx)(x.Z,{}),onClick:function(){Y.arts.set(dt.id,be),V?gt():xe(!1)},disabled:!be||!St,color:"success",children:z(et||(et=(0,i.Z)(["editor.btnUpdate"])))})})]})]})]})})})}}}]);
//# sourceMappingURL=213.f3a09006.chunk.js.map