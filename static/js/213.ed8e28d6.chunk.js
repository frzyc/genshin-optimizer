"use strict";(self.webpackChunkgenshin_optimizer=self.webpackChunkgenshin_optimizer||[]).push([[213],{36030:function(e,t,n){n.d(t,{N5:function(){return F},Y4:function(){return O},mW:function(){return M},mY:function(){return G}});var r=n(29439),i=n(1413),a=n(45987),s=n(13967),l=n(94198),o=n(58165),c=n(81918),u=n(90493),d=n(68870),f=n(79834),h=n(72791),x=n(22020),p=n(31148),v=n(72828),y=n(79406),Z=n(42320),m=n(50765),g=n(24351),j=n(610),b=n(68244),S=n(10157),w=n(75545),k=n(80184),K=["allArtifactKeysWithGrouper","selectedArtifactKeys","setArtifactKeys","getName","getImage","label"],P=["artSetKeys","setArtSetKeys"],C=["mainStatKeys","setMainStatKeys"],A=["substatKeys","setSubstatKeys"],I=["allArtifactKeysWithGrouper","selectedArtifactKey","setArtifactKey","getName","getImage","label","disable","showDefault","defaultText","defaultIcon"],E=["artSetKey","setArtSetKey","label"];function R(e){var t=e.allArtifactKeysWithGrouper,n=e.selectedArtifactKeys,r=e.setArtifactKeys,u=e.getName,d=e.getImage,f=e.label,x=(0,a.Z)(e,K),p=(0,s.Z)(),v=(0,h.useMemo)((function(){return t.map((function(e){var t=e.key,n=e.grouper;return{key:t,label:u(t),grouper:n}}))}),[t,u]);return(0,k.jsx)(l.Z,(0,i.Z)({autoHighlight:!0,multiple:!0,disableCloseOnSelect:!0,options:v,value:n.map((function(e){return{key:e,label:u(e)}})),onChange:function(e,t){r(t.map((function(e){return e.key})))},getOptionLabel:function(e){return e.label},isOptionEqualToValue:function(e,t){return e.key===t.key},renderInput:function(e){return(0,k.jsx)(o.Z,(0,i.Z)((0,i.Z)({},e),{},{label:f,variant:"filled",InputLabelProps:{style:{color:p.palette.text.primary}},color:n.length?"success":"primary",type:"search"}))},renderOption:function(e,t){return(0,k.jsx)(j.Z,{value:t.key,image:d(t.key),text:t.label,theme:p,isSelected:n.includes(t.key),props:e},t.key)},renderTags:function(e,t){return e.map((function(e,n){var r=g.Kj.find((function(t){return e.key==="".concat(t,"_dmg_")})),a=r||void 0;return(0,h.createElement)(c.Z,(0,i.Z)((0,i.Z)({},t({index:n})),{},{key:e.key,icon:d(e.key),label:e.label,color:a}))}))}},x))}function F(e){var t=e.artSetKeys,n=e.setArtSetKeys,s=(0,a.Z)(e,P),l=(0,Z.Z)((function(){return p.y.getAll}),[]),o=(0,x.$)(["artifact","artifactNames_gen"]).t;if(!l)return null;var c=Object.entries(p.y.setKeysByRarities(l)).flatMap((function(e){var t=(0,r.Z)(e,2),n=t[0];return t[1].map((function(e){return{key:e,grouper:+n}}))})).sort(L);return(0,k.jsx)(R,(0,i.Z)({allArtifactKeysWithGrouper:c,selectedArtifactKeys:t,setArtifactKeys:n,getName:function(e){return l[e].nameRaw},getImage:function(e){return l[e].defIcon},label:o("artifact:autocompleteLabels.sets"),groupBy:function(e){var t,n;return null!==(t=null===(n=e.grouper)||void 0===n?void 0:n.toString())&&void 0!==t?t:""},renderGroup:function(e){return e.group&&(0,k.jsxs)(u.Z,{component:d.Z,children:[(0,k.jsxs)(f.Z,{sx:{top:"-1em"},children:[e.group," ",(0,k.jsx)(S.q,{stars:+e.group})]},"".concat(e.group,"Header")),e.children]},e.group)}},s))}function G(e){var t=e.mainStatKeys,n=e.setMainStatKeys,r=(0,a.Z)(e,C),s=(0,x.$)("artifact").t;return(0,k.jsx)(R,(0,i.Z)({allArtifactKeysWithGrouper:m.r.map((function(e){return{key:e}})),selectedArtifactKeys:t,setArtifactKeys:n,getName:function(e){return y.ZP.getArtStr(e)},getImage:function(e){return w.Z[e]},label:s("autocompleteLabels.mainStats")},r))}function M(e){var t=e.substatKeys,n=e.setSubstatKeys,r=(0,a.Z)(e,A),s=(0,x.$)("artifact").t;return(0,k.jsx)(R,(0,i.Z)({allArtifactKeysWithGrouper:m._.map((function(e){return{key:e}})),selectedArtifactKeys:t,setArtifactKeys:n,getName:function(e){return y.ZP.getArtStr(e)},getImage:function(e){return w.Z[e]},label:s("autocompleteLabels.substats")},r))}function N(e){var t=e.allArtifactKeysWithGrouper,n=e.selectedArtifactKey,r=e.setArtifactKey,o=e.getName,c=e.getImage,u=e.label,d=e.disable,f=void 0===d?function(){return!1}:d,x=e.showDefault,p=void 0!==x&&x,v=e.defaultText,y=void 0===v?"":v,Z=(e.defaultIcon,(0,a.Z)(e,I)),m=(0,s.Z)(),g=(0,h.useMemo)((function(){return(p?[{key:"",label:y}]:[]).concat(t.map((function(e){var t=e.key,n=e.grouper;return{key:t,label:o(t),grouper:n}})))}),[t,o,y,p]);return(0,k.jsx)(l.Z,(0,i.Z)({autoHighlight:!0,options:g,clearIcon:n?void 0:"",value:{key:n,label:o(n)},onChange:function(e,t,n){return("change"!==e.type||"clear"!==n)&&r(t?t.key:"")},getOptionLabel:function(e){return e.label?e.label:y},isOptionEqualToValue:function(e,t){return e.key===t.key},getOptionDisabled:function(e){return f(e.key)},renderInput:function(e){return(0,k.jsx)(b.Z,(0,i.Z)((0,i.Z)({},e),{},{label:u,startAdornment:c(n),hasValue:!!n}))},renderOption:function(e,t){return(0,k.jsx)(j.Z,{value:t.key,image:c(t.key),text:t.label,theme:m,isSelected:n===t.key,props:e},t.key)}},Z))}function O(e){var t=e.artSetKey,n=e.setArtSetKey,s=e.label,l=void 0===s?"":s,o=(0,a.Z)(e,E),c=(0,Z.Z)((function(){return p.y.getAll}),[]),h=(0,x.$)(["artifact","artifactNames_gen"]).t;if(l=l||h("artifact:autocompleteLabels.set"),!c)return null;var v=Object.entries(p.y.setKeysByRarities(c)).flatMap((function(e){var t=(0,r.Z)(e,2),n=t[0];return t[1].map((function(e){return{key:e,grouper:+n}}))})).sort(L);return(0,k.jsx)(N,(0,i.Z)({allArtifactKeysWithGrouper:v,selectedArtifactKey:t,setArtifactKey:n,getName:function(e){return e&&c[e].nameRaw},getImage:function(e){return e?c[e].defIcon:(0,k.jsx)(k.Fragment,{})},label:l,groupBy:function(e){var t,n;return null!==(t=null===(n=e.grouper)||void 0===n?void 0:n.toString())&&void 0!==t?t:""},renderGroup:function(e){return e.group&&(0,k.jsxs)(u.Z,{component:d.Z,children:[(0,k.jsxs)(f.Z,{sx:{top:"-1em"},children:[e.group," ",(0,k.jsx)(S.q,{stars:+e.group})]},"".concat(e.group,"Header")),e.children]},e.group)}},o))}function L(e,t){if(e.grouper>t.grouper)return-1;if(e.grouper<t.grouper)return 1;var n=v.Z.t("artifactNames_gen:".concat(e.key)),r=v.Z.t("artifactNames_gen:".concat(t.key));return n<r?-1:n>r?1:0}},92443:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(1413),i=n(45987),a=n(66934),s=n(24518),l=n(80184),o=["children","disabled"],c=(0,a.ZP)(s.Z)((function(e){var t=e.theme;return{"&.Mui-disabled":{backgroundColor:t.palette.primary.dark,color:t.palette.text.secondary}}}));function u(e){var t=e.children,n=(e.disabled,(0,i.Z)(e,o));return(0,l.jsx)(c,(0,r.Z)((0,r.Z)({},n),{},{disabled:!0,children:t}))}},66585:function(e,t,n){n.r(t),n.d(t,{default:function(){return jt}});var r,i=n(30168),a=n(93433),s=n(29439),l=n(1413),o=n(53174),c=n(54483),u=n(43245),d=n(98268),f=n(68087),h=n(49670),x=n(54091),p=n(66934),v=n(13967),y=n(95193),Z=n(47047),m=n(9585),g=n(39504),j=n(61889),b=n(68870),S=n(2199),w=n(24518),k=n(20890),K=n(23786),P=n(13239),C=n(94070),A=n(72791),I=n(22020),E=n(76899),R=n(36030),F=n(45987),G=n(24351),M=n(33890),N=n(10157),O=n(80184),L=["rarity","onChange","filter"];function W(e){var t=e.rarity,n=e.onChange,a=e.filter,s=(0,F.Z)(e,L),o=(0,I.$)("artifact").t;return(0,O.jsx)(M.Z,(0,l.Z)((0,l.Z)({},s),{},{title:t?(0,O.jsx)(N.q,{stars:t}):o(r||(r=(0,i.Z)(["editor.rarity"]))),color:t?"success":"primary",children:[5,4,3].map((function(e){return(0,O.jsx)(K.Z,{disabled:!a(e),onClick:function(){return n(e)},children:(0,O.jsx)(N.q,{stars:e})},e)}))}))}var T,U=n(57064),D=n(49900),V=n(94721),z=n(95614),_=["slotKey","onChange","hasUnselect"];function B(e){var t=e.slotKey,n=void 0===t?"":t,r=e.onChange,a=e.hasUnselect,s=void 0!==a&&a,o=(0,F.Z)(e,_),c=(0,I.$)(["artifact","ui"]).t;return(0,O.jsxs)(M.Z,(0,l.Z)((0,l.Z)({title:c(n?"artifact:slotName:".concat(n):"artifact:slot"),color:n?"success":"primary",startIcon:n?(0,z.Ir)(n):void 0},o),{},{children:[s&&(0,O.jsxs)(K.Z,{selected:""===n,disabled:""===n,onClick:function(){return r("")},children:[(0,O.jsx)(U.Z,{children:(0,O.jsx)(h.Z,{})}),(0,O.jsx)(D.Z,{children:c(T||(T=(0,i.Z)(["ui:unselect"])))})]}),s&&(0,O.jsx)(V.Z,{}),G.eV.map((function(e){return(0,O.jsxs)(K.Z,{selected:n===e,disabled:n===e,onClick:function(){return r(e)},children:[(0,O.jsx)(U.Z,{children:(0,z.Ir)(e)}),(0,O.jsx)(D.Z,{children:c("artifact:slotName:".concat(e))})]},e)}))]}))}var q=n(3992),$=n(71310),H=n(68198),Y=n(58165),X=["value","onChange","disabled","float"];function J(e){var t=e.value,n=e.onChange,r=e.disabled,i=void 0!==r&&r,a=e.float,o=void 0!==a&&a,c=(0,F.Z)(e,X),u=(0,A.useState)(""),d=(0,s.Z)(u,2),f=d[0],h=d[1],x=(0,A.useCallback)((function(){if(""===f)return n(0);var e=o?parseFloat:parseInt;n(e(f))}),[n,f,o]);return(0,A.useEffect)((function(){var e;return h(null!==(e=null===t||void 0===t?void 0:t.toString())&&void 0!==e?e:"")}),[t,h]),(0,O.jsx)(Y.Z,(0,l.Z)({value:f,"aria-label":"custom-input",type:"number",onChange:function(e){return h(e.target.value)},onBlur:x,disabled:i,onKeyDown:function(e){return"Enter"===e.key&&x()}},c))}var Q=n(55942),ee=n(9321),te=n(87174),ne=n(75545),re=n(98620),ie=n(31148),ae=n(34369),se=n(45748),le=n(92830),oe=n(79406),ce=n(68544),ue=n(42320),de=n(50765),fe=JSON.parse('{"5":{"def_":{"24.0":"24.1"},"critRate_":{"8.5":"8.6","19.5":"19.4","23.0":"22.9"}}}');var he=n(60393),xe=n(72838),pe=n(55221),ve=n(901);function ye(e){var t=e.efficiency,n=e.max,r=void 0!==n&&n,i=e.t,a=e.valid,s=r?"maxSubEff":"curSubEff";return(0,O.jsx)($.Z,{sx:{py:1,px:2},children:(0,O.jsxs)(j.ZP,{container:!0,spacing:1,children:[(0,O.jsx)(j.ZP,{item:!0,children:i("editor.".concat(s))}),(0,O.jsx)(j.ZP,{item:!0,flexGrow:1,children:(0,O.jsx)(pe.Z,{title:(0,O.jsxs)("span",{children:[(0,O.jsx)(k.Z,{variant:"h6",children:i("editor.".concat(s))}),(0,O.jsx)(k.Z,{children:(0,O.jsx)(E.c,{t:i,i18nKey:"editor.".concat(s,"Desc")})})]})})}),(0,O.jsx)(j.ZP,{item:!0,xs:"auto",children:(0,O.jsx)(ve.Z,{valid:a,max:900,value:a?t:"ERR"})})]})})}var Ze,me,ge,je,be,Se,we,ke=n(10600),Ke=n(25617),Pe=n(92443);function Ce(e){var t,n=e.index,r=e.artifact,s=e.setSubstat,l=(0,I.$)("artifact").t,o=null!==r&&void 0!==r?r:{},c=o.mainStatKey,u=void 0===c?"":c,d=o.rarity,f=void 0===d?5:d,h=null!==(t=null===r||void 0===r?void 0:r.substats[n])&&void 0!==t?t:{},x=h.key,p=void 0===x?"":x,v=h.value,y=void 0===v?0:v,Z=h.rolls,m=void 0===Z?[]:Z,g=h.efficiency,P=void 0===g?0:g,C=m.reduce((function(e,t){return e+t}),0),A=oe.ZP.unit(p),R=m.length,F="",G=[],N=0;if(r){var L=r.rarity,W=re.ZP.rollInfo(L),T=W.numUpgrades,V=W.high;N=T+V-3-R,G=p?re.ZP.getSubstatRollData(p,L):[]}var z=7-G.length;return!R&&p&&y&&(F=F||l(Ze||(Ze=(0,i.Z)(["editor.substat.error.noCalc"])))),N<0&&(F=F||l("editor.substat.error.noOverRoll",{value:N+R})),(0,O.jsxs)($.Z,{children:[(0,O.jsx)(b.Z,{sx:{display:"flex"},children:(0,O.jsxs)(S.Z,{size:"small",sx:{width:"100%",display:"flex"},children:[(0,O.jsxs)(M.Z,{startIcon:p?ne.Z[p]:void 0,title:p?oe.ZP.getArtStr(p):l("editor.substat.substatFormat",{value:n+1}),disabled:!r,color:p?"success":"primary",sx:{whiteSpace:"nowrap"},children:[p&&(0,O.jsx)(K.Z,{onClick:function(){return s(n,{key:"",value:0})},children:l(me||(me=(0,i.Z)(["editor.substat.noSubstat"])))}),de._.filter((function(e){return u!==e})).map((function(e){return(0,O.jsxs)(K.Z,{selected:p===e,disabled:p===e,onClick:function(){return s(n,{key:e,value:0})},children:[(0,O.jsx)(U.Z,{children:ne.Z[e]}),(0,O.jsx)(D.Z,{children:oe.ZP.getArtStr(e)})]},e)}))]}),(0,O.jsx)(ke.CC,{sx:{flexBasis:30,flexGrow:1},children:(0,O.jsx)(ke.ZP,{float:"%"===A,placeholder:l(ge||(ge=(0,i.Z)(["editor.substat.selectSub"]))),value:p?y:void 0,onChange:function(e){return s(n,{key:p,value:null!==e&&void 0!==e?e:0})},disabled:!p,error:!!F,sx:{px:1},inputProps:{sx:{textAlign:"right"}}})}),!!G.length&&(0,O.jsx)(Pe.Z,{children:l(je||(je=(0,i.Z)(["editor.substat.nextRolls"])))}),G.map((function(e,t){var r,i,a,l=(0,oe.qs)(C+e,A);return l=null!==(r=null===(i=fe[f])||void 0===i||null===(a=i[p])||void 0===a?void 0:a[l])&&void 0!==r?r:l,(0,O.jsx)(w.Z,{color:"roll".concat((0,he.uZ)(z+t,1,6)),disabled:y&&!R||N<=0,onClick:function(){return s(n,{key:p,value:parseFloat(l)})},children:l},t)}))]})}),(0,O.jsx)(b.Z,{sx:{p:1},children:F?(0,O.jsx)(Ke.Z,{color:"error",children:l(be||(be=(0,i.Z)(["ui:error"])))}):(0,O.jsxs)(j.ZP,{container:!0,children:[(0,O.jsx)(j.ZP,{item:!0,children:(0,O.jsx)(Ke.Z,{color:0===R?"secondary":"roll".concat((0,he.uZ)(R,1,6)),children:R?l("editor.substat.RollCount",{count:R}):l(Se||(Se=(0,i.Z)(["editor.substat.noRoll"])))})}),(0,O.jsx)(j.ZP,{item:!0,flexGrow:1,children:!!m.length&&(0,a.Z)(m).sort().map((function(e,t){return(0,O.jsx)(k.Z,{component:"span",color:"roll".concat((0,he.uZ)(z+G.indexOf(e),1,6),".main"),sx:{ml:1},children:(0,oe.qs)(e,A)},"".concat(t,".").concat(e))}))}),(0,O.jsx)(j.ZP,{item:!0,xs:"auto",flexShrink:1,children:(0,O.jsx)(k.Z,{children:(0,O.jsxs)(E.c,{t:l,i18nKey:"editor.substat.eff",color:"text.secondary",children:["Efficiency: ",(0,O.jsx)(ve.Z,{valid:!0,max:100*R,value:P||l(we||(we=(0,i.Z)(["editor.substat.noStat"])))})]})})})]})})]})}var Ae=n.p+"static/media/scan_art_main.66f01e51a69c518e4278.png",Ie=n.p+"static/media/snippet.d223e79704fd95bcb783.png";function Ee(e){var t=e.modalShow,n=e.hide;return(0,O.jsx)(ee.Z,{open:t,onClose:n,children:(0,O.jsxs)(q.Z,{children:[(0,O.jsx)(g.Z,{sx:{py:1},children:(0,O.jsxs)(j.ZP,{container:!0,children:[(0,O.jsx)(j.ZP,{item:!0,flexGrow:1,children:(0,O.jsx)(k.Z,{variant:"subtitle1",children:"How do Upload Screenshots for parsing"})}),(0,O.jsx)(j.ZP,{item:!0,children:(0,O.jsx)(H.Z,{onClick:n})})]})}),(0,O.jsx)(V.Z,{}),(0,O.jsxs)(g.Z,{children:[(0,O.jsxs)(C.Z,{variant:"outlined",severity:"warning",children:["NOTE: Artifact Scanning currently only work for ",(0,O.jsx)("strong",{children:"ENGLISH"})," artifacts."]}),(0,O.jsxs)(j.ZP,{container:!0,spacing:1,mt:1,children:[(0,O.jsx)(j.ZP,{item:!0,xs:8,md:4,children:(0,O.jsx)(b.Z,{component:"img",alt:"snippet of the screen to take",src:Ie,width:"100%",height:"auto"})}),(0,O.jsxs)(j.ZP,{item:!0,xs:12,md:8,children:[(0,O.jsx)(k.Z,{gutterBottom:!0,children:"Using screenshots can dramatically decrease the amount of time you manually input in stats on the Genshin Optimizer."}),(0,O.jsx)(k.Z,{variant:"h5",children:"Where to snip the screenshot."}),(0,O.jsxs)(k.Z,{gutterBottom:!0,children:["In game, Open your bag, and navigate to the artifacts tab. Select the artifact you want to scan with Genshin Optimizer. ",(0,O.jsx)("b",{children:"Only artifact from this screen can be scanned."})]}),(0,O.jsx)(k.Z,{variant:"h6",children:"Single artifact"}),(0,O.jsxs)(k.Z,{gutterBottom:!0,children:["To take a screenshot, in Windows, the shortcut is ",(0,O.jsx)("strong",{children:"Shift + WindowsKey + S"}),". Once you selected the region, the image is automatically included in your clipboard."]}),(0,O.jsx)(k.Z,{variant:"h6",children:"Multiple artifacts"}),(0,O.jsxs)(k.Z,{gutterBottom:!0,children:["To take advantage of batch uploads, you can use a tool like ",(0,O.jsx)("a",{href:"https://picpick.app/",target:"_blank",rel:"noreferrer",children:"PicPick"})," to create a macro to easily to screenshot a region to screenshot multiple artifacts at once."]}),(0,O.jsx)(k.Z,{variant:"h5",children:"What to include in the screenshot."}),(0,O.jsx)(k.Z,{children:"As shown in the Image, starting from the top with the artifact name, all the way to the set name(the text in green). "})]}),(0,O.jsxs)(j.ZP,{item:!0,xs:12,md:7,children:[(0,O.jsx)(k.Z,{variant:"h5",children:"Adding Screenshot to Genshin Optimizer"}),(0,O.jsx)(k.Z,{children:"At this point, you should have the artifact snippet either saved to your harddrive, or in your clipboard."}),(0,O.jsx)(k.Z,{gutterBottom:!0,children:'You can click on the box next to "Browse" to browse the files in your harddrive for multiple screenshots.'}),(0,O.jsxs)(k.Z,{children:["For single screenshots from the snippets, just press ",(0,O.jsx)("strong",{children:"Ctrl + V"})," to paste from your clipboard."]}),(0,O.jsxs)(k.Z,{gutterBottom:!0,children:["You should be able to see a Preview of your artifact snippet, and after waiting a few seconds, the artifact set and the substats will be filled in in the ",(0,O.jsx)("b",{children:"Artifact Editor"}),"."]}),(0,O.jsx)(k.Z,{variant:"h5",children:"Finishing the Artifact"}),(0,O.jsxs)(k.Z,{children:["Unfortunately, computer vision is not 100%. There will always be cases where something is not scanned properly. You should always double check the scanned artifact values! Once the artifact has been filled, Click on ",(0,O.jsx)("strong",{children:"Add Artifact"})," to finish editing the artifact."]})]}),(0,O.jsx)(j.ZP,{item:!0,xs:8,md:5,children:(0,O.jsx)(b.Z,{component:"img",alt:"main screen after importing stats",src:Ae,width:"100%",height:"auto"})})]})]}),(0,O.jsx)(V.Z,{}),(0,O.jsx)(g.Z,{sx:{py:1},children:(0,O.jsx)(H.Z,{large:!0,onClick:n})})]})})}var Re=n(37762),Fe=n(74165),Ge=n(15861),Me=n(31362),Ne=n(91702),Oe=n(15671),Le=n(43144),We=function(){function e(t,n){(0,Oe.Z)(this,e),this.data={},this.init=void 0,this.deinit=void 0,this.init=t,this.deinit=n}return(0,Le.Z)(e,[{key:"borrow",value:function(){var e=(0,Ge.Z)((0,Fe.Z)().mark((function e(t,n){var r,i;return(0,Fe.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.data[t]||(this.data[t]={value:this.init(t),refCount:0}),(r=this.data[t]).refCount+=1,e.next=5,n(r.value);case 5:return i=e.sent,r.refCount-=1,r.refCount||(delete this.data[t],this.deinit(t,r.value)),e.abrupt("return",i);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),Te={r:255,g:204,b:50},Ue=new We(function(){var e=(0,Ge.Z)((0,Fe.Z)().mark((function e(t){var n,r;return(0,Fe.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,Me.createScheduler)(),r=Array(2).fill(0).map(function(){var e=(0,Ge.Z)((0,Fe.Z)().mark((function e(r){var i;return(0,Fe.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,Me.createWorker)({errorHandler:console.error}),e.next=3,i.load();case 3:return e.next=5,i.loadLanguage(t);case 5:return e.next=7,i.initialize(t);case 7:n.addWorker(i);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=4,Promise.any(r);case 4:return e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e,t){t.then((function(e){return e.terminate()}))})),De=function(e,t){switch(t.type){case"upload":return{processed:e.processed,outstanding:[].concat((0,a.Z)(e.outstanding),(0,a.Z)(t.files))};case"processing":return{processed:e.processed,outstanding:(0,a.Z)(e.outstanding)};case"processed":return e.outstanding[0].file===t.file?{processed:[].concat((0,a.Z)(e.processed),[t.result]),outstanding:e.outstanding.slice(1)}:e;case"pop":return{processed:e.processed.slice(1),outstanding:e.outstanding};case"clear":return{processed:[],outstanding:[]}}};function Ve(e){if(!e.result){var t=e.file,n=e.fileName;e.imageURL=nt(t),e.result=e.imageURL.then(function(){var e=(0,Ge.Z)((0,Fe.Z)().mark((function e(r){var i,a,l,o,c,u;return(0,Fe.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie.y.getAll;case 2:return i=e.sent,e.next=5,at(r);case 5:return a=e.sent,l=ct(i,a.rarities,ut(a.artifactSetTexts,i),ht(a.whiteTexts),vt(a.substatTexts),xt(a.whiteTexts),pt(a.whiteTexts)),o=(0,s.Z)(l,2),c=o[0],u=o[1],e.abrupt("return",{file:t,result:{fileName:n,imageURL:r,artifact:c,texts:u}});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}var ze,_e,Be,qe,$e,He,Ye,Xe,Je,Qe,et,tt,nt=function(e){return new Promise((function(t){var n=new FileReader;n.onloadend=function(e){var n=e.target;return t(n.result)},n.readAsDataURL(e)}))},rt=function(e){return new Promise((function(t){var n=new Image;n.onload=function(e){var n=e.target;return t(function(e){var t=document.createElement("canvas"),n=t.getContext("2d");return t.width=e.width,t.height=e.height,n.drawImage(e,0,0,e.width,e.height),n.getImageData(0,0,e.width,e.height)}(n))},n.src=e}))};function it(e){var t=document.createElement("canvas");return t.width=e.width,t.height=e.height,t.getContext("2d").putImageData(e,0,0),t}function at(e){return st.apply(this,arguments)}function st(){return(st=(0,Ge.Z)((0,Fe.Z)().mark((function e(t){var n,r,i,a,l,o,c,u,d,f,h;return(0,Fe.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rt(t);case 2:return n=e.sent,r=n.width,i=Math.floor(n.height/2),a={rectangle:{top:i,left:0,width:r,height:i}},l=[lt(yt(n,[140,140,140],[255,255,255],{mode:"bw",region:"top"})),lt(yt(n,[30,50,80],[160,160,160],{region:"bot"}),a),lt(yt(n,[30,160,30],[200,255,200],{mode:"bw",region:"bot"}),a)],o=dt(n.data,n.width,n.height),e.next=9,Promise.all(l);case 9:return c=e.sent,u=(0,s.Z)(c,3),d=u[0],f=u[1],h=u[2],e.abrupt("return",{whiteTexts:d,substatTexts:f,artifactSetTexts:h,rarities:o});case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lt(e){return ot.apply(this,arguments)}function ot(){return ot=(0,Ge.Z)((0,Fe.Z)().mark((function e(t){var n,r,i,a=arguments;return(0,Fe.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:void 0,r=it(t),e.next=4,Ue.borrow("eng",function(){var e=(0,Ge.Z)((0,Fe.Z)().mark((function e(t){return(0,Fe.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return e.next=4,e.sent.addJob("recognize",r,n);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:return i=e.sent,e.abrupt("return",i.data.lines.map((function(e){return e.text})));case 6:case"end":return e.stop()}}),e)}))),ot.apply(this,arguments)}function ct(e,t,n,r,i,l,o){var c,u=(0,a.Z)(new Set([].concat((0,a.Z)(n),["EmblemOfSeveredFate"]))),d=-1,f=[{setKey:"EmblemOfSeveredFate",rarity:3,level:0,slotKey:"flower",mainStatKey:"hp",substats:[],location:"",lock:!1,exclude:!1}],h=(0,he.O)(G.En,(function(t){var r=0;n.size&&(r+=(0,a.Z)(n).reduce((function(n,r){return n+(e[r].rarity.includes(t)?1:0)}),0)/n.size);if(i.length){var s=i.reduce((function(e,n){return e+(re.ZP.getSubstatRolls(n.key,n.value,t).length?1:0)}),0);r+=s/i.length*2}return r})),x=(0,Re.Z)(G.eV);try{for(x.s();!(c=x.n()).done;){var p,v=c.value,y=(0,Re.Z)(re.ZP.slotMainStats(v));try{var Z=function(){for(var t=p.value,i=(r.has(v)?1:0)+(l.has(t)?1:0),a=o.filter((function(e){return"%"!==e.unit||"%"===oe.ZP.unit(t)})).map((function(e){return e.mainStatValue})),c=function(){var r=(0,s.Z)(y[x],2),l=r[0],o=r[1],c=parseInt(l),h=u.filter((function(t){return e[t].rarity.includes(c)})),p=i+o;if(p+2<d)return"continue";var Z,m=(0,Re.Z)(a);try{var g=function(){var e,r=Z.value,i=re.ZP.mainStatValues(c,t),a=Math.max(0,i.findIndex((function(e){return e>=r}))),s=i[a],l=p+(s===r?1:0),o=(0,Re.Z)(h);try{for(o.s();!(e=o.n()).done;){var u=e.value,x=l+(n.has(u)?1:0);x>=d&&(x>d&&(f=[]),d=x,f.push({setKey:u,rarity:c,level:a,slotKey:v,mainStatKey:t,substats:[],location:"",lock:!1,exclude:!1}))}}catch(y){o.e(y)}finally{o.f()}};for(m.s();!(Z=m.n()).done;)g()}catch(k){m.e(k)}finally{m.f()}if(p>=d){var j,b=(0,Re.Z)(h);try{for(b.s();!(j=b.n()).done;){var S=j.value,w=p+(n.has(S)?1:0);w>d&&(f=[]),d=w,f.push({setKey:S,rarity:c,level:0,slotKey:v,mainStatKey:t,substats:[],location:"",lock:!1,exclude:!1})}}catch(k){b.e(k)}finally{b.f()}}},x=0,y=Object.entries(h);x<y.length;x++)c()};for(y.s();!(p=y.n()).done;)Z()}catch(R){y.e(R)}finally{y.f()}}}catch(R){x.e(R)}finally{x.f()}var m={},g={setKey:new Set,rarity:new Set,level:new Set,slotKey:new Set,mainStatKey:new Set,mainStatVal:new Set},j=f[0],b=re.ZP.mainStatValue(j.mainStatKey,j.rarity,j.level);j.substats=i.filter((function(e,t){return e.key!==j.mainStatKey&&i.slice(0,t).every((function(t){return t.key!==e.key}))}));for(var S=j.substats.length;S<4;S++)j.substats.push({key:"",value:0});for(var w=0,k=f;w<k.length;w++){var K=k[w];g.setKey.add(K.setKey),g.rarity.add(K.rarity),g.level.add(K.level),g.slotKey.add(K.slotKey),g.mainStatKey.add(K.mainStatKey)}function P(e,t,n){return(0,O.jsxs)(O.Fragment,{children:["Unknown ",t," : Set to ",(0,O.jsx)(Ne.Z,{color:"error",children:n(e)})]})}function C(e,t,n){return(0,O.jsxs)(O.Fragment,{children:["Detected ",t," ",(0,O.jsx)(Ne.Z,{color:"success",children:n(e)})]})}function A(e,t,n){return(0,O.jsxs)(O.Fragment,{children:["Inferred ",t," ",(0,O.jsx)(Ne.Z,{color:"warning",children:n(e)})]})}function I(e,t,n,r){var i=new Set((0,a.Z)(g[e]).filter((function(e){return t.has(e)})));i.size>1?m[e]=function(e,t,n,r){return(0,O.jsxs)(O.Fragment,{children:["Ambiguous ",n," ",(0,O.jsx)(Ne.Z,{color:"error",children:r(e)})," : May also be ",t.filter((function(t){return t!==e})).map((function(e,t){return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)("b",{children:t>0?"/":""}),(0,O.jsx)(Ne.Z,{color:"warning",children:r(e)})]})}))]})}(j[e],(0,a.Z)(t),n,r):1===i.size?m[e]=C(j[e],n,r):g[e].size>1?m[e]=P(j[e],n,r):m[e]=A(j[e],n,r)}I("setKey",n,"Set",(function(t){return e[t].name})),I("rarity",t,"Rarity",(function(e){return(0,O.jsxs)(O.Fragment,{children:[e," ",1!==e?"Stars":"Star"]})})),I("slotKey",r,"Slot",(function(e){return(0,O.jsx)(O.Fragment,{children:re.ZP.slotName(e)})})),I("mainStatKey",l,"Main Stat",(function(e){return(0,O.jsx)(O.Fragment,{children:oe.ZP.getStr(e)})})),m.substats=(0,O.jsx)(O.Fragment,{children:j.substats.filter((function(e){return""!==e.key})).map((function(e,t){return(0,O.jsx)("div",{children:C(e,"Sub Stat",(function(e){return(0,O.jsxs)(O.Fragment,{children:[oe.ZP.getStr(e.key),"+",(0,oe.qs)(e.value,oe.ZP.unit(e.key)),oe.ZP.unit(e.key)]})}))},t)}))});var E=function(e){return(0,O.jsxs)(O.Fragment,{children:[(0,oe.qs)(e,oe.ZP.unit(j.mainStatKey)),oe.ZP.unit(j.mainStatKey)]})};return o.find((function(e){return e.mainStatValue===b}))?l.has(j.mainStatKey)?(m.level=C(j.level,"Level",(function(e){return"+"+e})),m.mainStatVal=C(b,"Main Stat value",E)):(m.level=A(j.level,"Level",(function(e){return"+"+e})),m.mainStatVal=A(b,"Main Stat value",E)):(m.level=P(j.level,"Level",(function(e){return"+"+e})),m.mainStatVal=P(b,"Main Stat value",E)),[j,m]}function ut(e,t){var n,r=new Set([]),i=(0,Re.Z)(e);try{for(i.s();!(n=i.n()).done;){var a,s=n.value,l=(0,Re.Z)(G.q2);try{for(l.s();!(a=l.n()).done;){var o=a.value;(0,he.UX)(s.replace(/\W/g,""),t[o].nameRaw.replace(/\W/g,""))<=2&&r.add(o)}}catch(c){l.e(c)}finally{l.f()}}}catch(c){i.e(c)}finally{i.f()}return r}function dt(e,t,n){for(var r=e,i=0,a=0,s=new Set([]),l=0;l<n;l++){for(var o=0,c=!1,u=0;u<t;u++){var d=4*(l*t+u);ft({r:r[d],g:r[d+1],b:r[d+2]},Te)?c||(c=!0,o++):c=!1}i!==o?(i=o,a=1):i&&++a>=10&&s.add((0,he.uZ)(i,3,5))}return s}function ft(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,r=function(e,t){return Math.abs(e-t)<=n};return r(e.r,t.r)&&r(e.g,t.g)&&r(e.b,t.b)}function ht(e){var t,n=new Set,r=(0,Re.Z)(e);try{for(r.s();!(t=r.n()).done;){var i,a=t.value,s=(0,Re.Z)(G.eV);try{for(s.s();!(i=s.n()).done;){var l=i.value;(0,he.UX)(a.replace(/\W/g,""),re.ZP.slotName(l).replace(/\W/g,""))<=2&&n.add(l)}}catch(o){s.e(o)}finally{s.f()}}}catch(o){r.e(o)}finally{r.f()}return n}function xt(e){var t,n=new Set([]),r=(0,Re.Z)(e);try{for(r.s();!(t=r.n()).done;){var i,a=t.value,s=(0,Re.Z)(de.r);try{for(s.s();!(i=s.n()).done;){var l,o,c,u=i.value;a.toLowerCase().includes(null!==(l=null===(o=oe.ZP.getStr(u))||void 0===o?void 0:o.toLowerCase())&&void 0!==l?l:"")&&n.add(u),u.includes("_bonu")&&(0,he.UX)(a.replace(/\W/g,""),(null!==(c=oe.ZP.getStr(u))&&void 0!==c?c:"").replace(/\W/g,""))<=1&&n.add(u)}}catch(d){s.e(d)}finally{s.f()}}}catch(d){r.e(d)}finally{r.f()}return n}function pt(e){var t,n=[],r=(0,Re.Z)(e);try{for(r.s();!(t=r.n()).done;){var i=t.value,a=/(\d+[,|\\.]+\d)%/,s=a.exec(i);s&&n.push({mainStatValue:parseFloat(s[1].replace(/,/g,".").replace(/\.{2,}/g,".")),unit:"%"}),(s=(a=/(\d+[,|\\.]\d{3}|\d{2,3})/).exec(i))&&n.push({mainStatValue:parseInt(s[1].replace(/[,|\\.]+/g,""))})}}catch(l){r.e(l)}finally{r.f()}return n}function vt(e){var t,n=[],r=(0,Re.Z)(e);try{var i=function(){var e=t.value;e=e.replace(/^[\W]+/,"").replace(/\n/,""),de._.forEach((function(t){var r=oe.ZP.getStr(t),i=("%"===oe.ZP.unit(t)?new RegExp(r+"\\s*\\+\\s*(\\d+[\\.|,]+\\d)%","im"):new RegExp(r+"\\s*\\+\\s*(\\d+,\\d+|\\d+)($|\\s)","im")).exec(e);i&&n.push({key:t,value:parseFloat(i[1].replace(/,/g,".").replace(/\.{2,}/g,"."))})}))};for(r.s();!(t=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}return n.slice(0,4)}function yt(e,t,n,r){for(var i=r.region,a=void 0===i?"all":i,s=r.mode,l=void 0===s?"color":s,o=Uint8ClampedArray.from(e.data),c="top"===a,u="bot"===a,d="all"===a,f="bw"===l,h="invert"===l,x=Math.floor(e.width*(e.height/2)*4),p=0;p<o.length;p+=4){var v=o[p],y=o[p+1],Z=o[p+2];(d||c&&p<x||u&&p>x)&&v>=t[0]&&v<=n[0]&&y>=t[1]&&y<=n[1]&&Z>=t[2]&&Z<=n[2]?f?o[p]=o[p+1]=o[p+2]=0:h&&(o[p]=255-v,o[p+1]=255-y,o[p+2]=255-Z):o[p]=o[p+1]=o[p+2]=255}return new ImageData(o,e.width,e.height)}var Zt=new Set(de._);function mt(e,t){switch(t.type){case"reset":return;case"substat":var n=t.index,r=t.substat,i=r.key?e.substats.findIndex((function(e){return e.key===r.key})):-1;if(-1===i||i===n)e.substats[n]=r;else{var a=[e.substats[i],e.substats[n]];e.substats[n]=a[0],e.substats[i]=a[1]}return(0,l.Z)({},e);case"overwrite":return t.artifact;case"update":return(0,l.Z)((0,l.Z)({},e),t.artifact)}}var gt=(0,p.ZP)("input")({display:"none"});function jt(e){var t,n,r=e.artifactIdToEdit,p=void 0===r?"":r,F=e.cancelEdit,N=e.allowUpload,L=void 0!==N&&N,T=e.allowEmpty,U=void 0!==T&&T,D=(0,I.$)("artifact").t,V=(0,ue.Z)((function(){return ie.y.getAll}),[]),z=(0,A.useContext)(ae.t).database,_=(0,A.useState)(!1),Y=(0,s.Z)(_,2),X=Y[0],de=Y[1],fe=(0,ce.Z)(),pe=(0,s.Z)(fe,2),ve=pe[0],Ze=pe[1];(0,A.useEffect)((function(){return z.arts.followAny(Ze)}),[z,Ze]);var me=(0,A.useReducer)(mt,void 0),ge=(0,s.Z)(me,2),je=ge[0],be=ge[1],Se=(0,A.useMemo)((function(){return je&&(0,se.R$)(je)}),[je]),we=(0,A.useState)(!1),ke=(0,s.Z)(we,2),Ke=ke[0],Pe=ke[1],Ae=(0,A.useReducer)(De,{processed:[],outstanding:[]}),Ie=(0,s.Z)(Ae,2),Re=Ie[0],Fe=Re.processed,Ge=Re.outstanding,Me=Ie[1],Ne=Fe[0],Oe=Ge[0],Le=(0,ue.Z)((function(){return null===Oe||void 0===Oe?void 0:Oe.imageURL}),[null===Oe||void 0===Oe?void 0:Oe.imageURL]),We=(0,ue.Z)((function(){return null===Oe||void 0===Oe?void 0:Oe.result}),[null===Oe||void 0===Oe?void 0:Oe.result]),Te=Fe.length+Ge.length,Ue=null!==(t=null===Ne||void 0===Ne?void 0:Ne.imageURL)&&void 0!==t?t:Le,nt=null!==Ne&&void 0!==Ne?Ne:{},rt=nt.artifact,it=nt.texts,at=!(null===Se||void 0===Se||!Se.location);(0,A.useEffect)((function(){!Se&&rt&&be({type:"overwrite",artifact:rt})}),[Se,rt,be]),(0,A.useEffect)((function(){var e=Math.min(16-Fe.length,3,Ge.length),t=e&&!Ge[0].result;Ge.slice(0,e).forEach(Ve),t&&Me({type:"processing"})}),[Fe.length,Ge]),(0,A.useEffect)((function(){We&&Me((0,l.Z)({type:"processed"},We))}),[We,Me]);var st=(0,A.useCallback)((function(e){de(!0),Me({type:"upload",files:(0,a.Z)(e).map((function(e){return{file:e,fileName:e.name}}))})}),[Me,de]),lt=(0,A.useCallback)((function(){return Me({type:"clear"})}),[Me]);(0,A.useEffect)((function(){var e=function(e){return st(e.clipboardData.files)};return L&&window.addEventListener("paste",e),function(){L&&window.removeEventListener("paste",e)}}),[st,L]);var ot=(0,A.useCallback)((function(e){st(e.target.files),e.target.value=null}),[st]),ct=(0,A.useMemo)((function(){var e,t=ve&&p&&z.arts.get(p);if(t)return{old:t,oldType:"edit"};if(void 0===Se)return{old:void 0,oldType:""};var n=ve&&z.arts.findDups(Se),r=n.duplicated,i=n.upgraded;return{old:null!==(e=r[0])&&void 0!==e?e:i[0],oldType:0!==r.length?"duplicate":"upgrade"}}),[Se,p,z,ve]),ut=ct.old,dt=ct.oldType,ft=(0,A.useMemo)((function(){if(!Se)return{artifact:void 0,errors:[]};var e=(0,le.BG)(Se,p);return ut&&(e.artifact.location=ut.location,e.artifact.exclude=ut.exclude),e}),[Se,p,ut]),ht=ft.artifact,xt=ft.errors;(0,A.useEffect)((function(){"new"===p&&(de(!0),be({type:"reset"}));var e=p&&ve&&z.arts.get(p);e&&(de(!0),be({type:"overwrite",artifact:(0,he.I8)(e)}))}),[p,z,ve]);var pt=Se?null===V||void 0===V?void 0:V[Se.setKey]:void 0,vt=(0,A.useCallback)((function(){null===F||void 0===F||F(),Me({type:"pop"}),be({type:"reset"})}),[F,be]),yt=(0,A.useCallback)((function(e){var t,n,r=e.setKey?V[e.setKey]:pt;function i(e,t,n){return e&&t.includes(e)?e:null!==n&&void 0!==n?n:t[0]}e.setKey&&(e.rarity=i(null===Se||void 0===Se?void 0:Se.rarity,r.rarity,Math.max.apply(Math,(0,a.Z)(r.rarity))),e.slotKey=i(null===Se||void 0===Se?void 0:Se.slotKey,r.slots)),e.rarity&&(e.level=null!==(t=null===Se||void 0===Se?void 0:Se.level)&&void 0!==t?t:0),e.level&&(e.level=(0,he.uZ)(e.level,0,4*(null!==(n=e.rarity)&&void 0!==n?n:Se.rarity))),e.slotKey&&(e.mainStatKey=i(null===Se||void 0===Se?void 0:Se.mainStatKey,re.ZP.slotMainStats(e.slotKey))),e.mainStatKey&&(e.substats=[0,1,2,3].map((function(t){return Se&&Se.substats[t].key!==e.mainStatKey?Se.substats[t]:{key:"",value:0}}))),be({type:"update",artifact:e})}),[Se,V,pt,be]),jt=(0,A.useCallback)((function(e,t){be({type:"substat",index:e,substat:t})}),[be]),bt=!xt.length,St=null!==Se&&void 0!==Se?Se:{},wt=St.rarity,kt=void 0===wt?5:wt,Kt=St.level,Pt=void 0===Kt?0:Kt,Ct=St.slotKey,At=void 0===Ct?"flower":Ct,It=ht?re.ZP.getArtifactEfficiency(ht,Zt):{},Et=It.currentEfficiency,Rt=void 0===Et?0:Et,Ft=It.maxEfficiency,Gt=void 0===Ft?0:Ft,Mt=Fe.length||Ge.length,Nt=(0,A.useCallback)((function(e){Mt&&e.preventDefault(),de(!1),F()}),[Mt,de,F]),Ot=(0,v.Z)(),Lt=(0,y.Z)(Ot.breakpoints.up("md")),Wt=Se?G.Kj.find((function(e){return Se.mainStatKey.includes(e)})):void 0,Tt=Se?null!==Wt&&void 0!==Wt?Wt:"success":"primary",Ut=(0,A.useCallback)((function(e){return yt({setKey:e})}),[yt]),Dt=(0,A.useCallback)((function(e){return""===e||!(!at||"circlet"===At||"PrayersForDestiny"!==e&&"PrayersForIllumination"!==e&&"PrayersForWisdom"!==e&&"PrayersToSpringtime"!==e)}),[at,At]);return(0,O.jsx)(ee.Z,{open:X,onClose:Nt,children:(0,O.jsx)(A.Suspense,{fallback:(0,O.jsx)(Z.Z,{variant:"rectangular",sx:{width:"100%",height:X?"100%":64}}),children:(0,O.jsxs)(q.Z,{children:[(0,O.jsx)(Ee,{modalShow:Ke,hide:function(){return Pe(!1)}}),(0,O.jsx)(m.Z,{title:(0,O.jsx)(E.c,{t:D,i18nKey:"editor.title",children:"Artifact Editor"}),action:(0,O.jsx)(H.Z,{disabled:!!Mt,onClick:Nt})}),(0,O.jsxs)(g.Z,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,O.jsxs)(j.ZP,{container:!0,spacing:1,columns:{xs:1,md:2},children:[(0,O.jsxs)(j.ZP,{item:!0,xs:1,display:"flex",flexDirection:"column",gap:1,children:[(0,O.jsxs)(b.Z,{sx:{display:"flex",gap:1,mb:1},children:[(0,O.jsx)(R.Y4,{showDefault:!0,disableClearable:!0,size:"small",artSetKey:null!==(n=null===Se||void 0===Se?void 0:Se.setKey)&&void 0!==n?n:"",setArtSetKey:Ut,sx:function(e){return{flexGrow:1,".MuiFilledInput-root":{borderBottomRightRadius:e.shape.borderRadius,borderBottomLeftRadius:e.shape.borderRadius}}},defaultText:D("editor.unknownSetName"),disable:Dt}),(0,O.jsx)(W,{rarity:Se?kt:void 0,onChange:function(e){return yt({rarity:e})},filter:function(e){var t,n;return!(null===pt||void 0===pt||null===(t=pt.rarity)||void 0===t||null===(n=t.includes)||void 0===n||!n.call(t,e))},disabled:!pt})]}),(0,O.jsxs)(b.Z,{component:"div",display:"flex",children:[(0,O.jsx)(J,{id:"filled-basic",label:"Level",variant:"filled",sx:{flexShrink:1,flexGrow:1,mr:1,my:0},margin:"dense",size:"small",value:Pt,disabled:!pt,placeholder:"0~".concat(4*kt),onChange:function(e){return yt({level:e})}}),(0,O.jsxs)(S.Z,{children:[(0,O.jsx)(w.Z,{onClick:function(){return yt({level:Pt-1})},disabled:!pt||0===Pt,children:"-"}),kt?(0,a.Z)(Array(kt+1).keys()).map((function(e){return 4*e})).map((function(e){return(0,O.jsx)(w.Z,{onClick:function(){return yt({level:e})},disabled:!pt||Pt===e,children:e},e)})):null,(0,O.jsx)(w.Z,{onClick:function(){return yt({level:Pt+1})},disabled:!pt||Pt===4*kt,children:"+"})]})]}),(0,O.jsxs)(b.Z,{component:"div",display:"flex",children:[(0,O.jsx)(B,{disabled:at||!pt,slotKey:At,onChange:function(e){return yt({slotKey:e})}}),(0,O.jsx)($.Z,{sx:{p:1,ml:1,flexGrow:1},children:(0,O.jsx)(A.Suspense,{fallback:(0,O.jsx)(Z.Z,{width:"60%"}),children:(0,O.jsx)(k.Z,{color:"text.secondary",children:null!==pt&&void 0!==pt&&pt.getSlotName(Se.slotKey)?(0,O.jsxs)("span",{children:[(0,O.jsx)(Q.Z,{src:pt.slotIcons[Se.slotKey]})," ",null===pt||void 0===pt?void 0:pt.getSlotName(Se.slotKey)]}):D(_e||(_e=(0,i.Z)(["editor.unknownPieceName"])))})})})]}),(0,O.jsxs)(b.Z,{component:"div",display:"flex",children:[(0,O.jsx)(M.Z,{startIcon:null!==Se&&void 0!==Se&&Se.mainStatKey?ne.Z[Se.mainStatKey]:void 0,title:(0,O.jsx)("b",{children:Se?oe.ZP.getArtStr(Se.mainStatKey):D(Be||(Be=(0,i.Z)(["mainStat"])))}),disabled:!pt,color:Tt,children:re.ZP.slotMainStats(At).map((function(e){return(0,O.jsx)(K.Z,{selected:(null===Se||void 0===Se?void 0:Se.mainStatKey)===e,disabled:(null===Se||void 0===Se?void 0:Se.mainStatKey)===e,onClick:function(){return yt({mainStatKey:e})},children:(0,O.jsx)(te._,{statKey:e})},e)}))}),(0,O.jsx)($.Z,{sx:{p:1,ml:1,flexGrow:1},children:(0,O.jsx)(k.Z,{color:"text.secondary",children:Se?"".concat((0,oe.qs)(re.ZP.mainStatValue(Se.mainStatKey,kt,Pt),oe.ZP.unit(Se.mainStatKey))).concat(oe.ZP.unit(Se.mainStatKey)):D(qe||(qe=(0,i.Z)(["mainStat"])))})})]}),(0,O.jsx)(ye,{valid:bt,efficiency:Rt,t:D}),Rt!==Gt&&(0,O.jsx)(ye,{max:!0,valid:bt,efficiency:Gt,t:D}),L&&(0,O.jsx)($.Z,{children:(0,O.jsx)(g.Z,{sx:{display:"flex",flexDirection:"column",gap:1},children:(0,O.jsxs)(A.Suspense,{fallback:(0,O.jsx)(Z.Z,{width:"100%",height:"100"}),children:[(0,O.jsxs)(j.ZP,{container:!0,spacing:1,alignItems:"center",children:[(0,O.jsx)(j.ZP,{item:!0,flexGrow:1,children:(0,O.jsxs)("label",{htmlFor:"contained-button-file",children:[(0,O.jsx)(gt,{accept:"image/*",id:"contained-button-file",multiple:!0,type:"file",onChange:ot}),(0,O.jsx)(w.Z,{component:"span",startIcon:(0,O.jsx)(u.Z,{}),children:"Upload Screenshot (or Ctrl-V)"})]})}),(0,O.jsx)(j.ZP,{item:!0,children:(0,O.jsx)(w.Z,{color:"info",sx:{px:2,minWidth:0},onClick:function(){return Pe(!0)},children:(0,O.jsx)(k.Z,{children:(0,O.jsx)(c.G,{icon:o.Fuz})})})})]}),Ue&&(0,O.jsx)(b.Z,{display:"flex",justifyContent:"center",children:(0,O.jsx)(b.Z,{component:"img",src:Ue,width:"100%",maxWidth:350,height:"auto",alt:"Screenshot to parse for artifact values"})}),Te>0&&(0,O.jsx)(q.Z,{sx:{pl:2},children:(0,O.jsxs)(j.ZP,{container:!0,spacing:1,alignItems:"center",children:[!Ne&&Oe&&(0,O.jsx)(j.ZP,{item:!0,children:(0,O.jsx)(P.Z,{size:"1em"})}),(0,O.jsx)(j.ZP,{item:!0,flexGrow:1,children:(0,O.jsx)(k.Z,{children:(0,O.jsxs)("span",{children:["Screenshots in file-queue: ",(0,O.jsx)("b",{children:Te})]})})}),(0,O.jsx)(j.ZP,{item:!0,children:(0,O.jsx)(w.Z,{size:"small",color:"error",onClick:lt,children:"Clear file-queue"})})]})})]})})})]}),(0,O.jsxs)(j.ZP,{item:!0,xs:1,display:"flex",flexDirection:"column",gap:1,children:[[0,1,2,3].map((function(e){return(0,O.jsx)(Ce,{index:e,artifact:ht,setSubstat:jt},e)})),it&&(0,O.jsx)($.Z,{children:(0,O.jsxs)(g.Z,{children:[(0,O.jsx)("div",{children:it.slotKey}),(0,O.jsx)("div",{children:it.mainStatKey}),(0,O.jsx)("div",{children:it.mainStatVal}),(0,O.jsx)("div",{children:it.rarity}),(0,O.jsx)("div",{children:it.level}),(0,O.jsx)("div",{children:it.substats}),(0,O.jsx)("div",{children:it.setKey})]})})]})]}),ut&&(0,O.jsxs)(j.ZP,{container:!0,sx:{justifyContent:"space-around"},spacing:1,children:[(0,O.jsx)(j.ZP,{item:!0,xs:12,md:5.5,lg:4,children:(0,O.jsxs)($.Z,{children:[(0,O.jsx)(k.Z,{sx:{textAlign:"center"},py:1,variant:"h6",color:"text.secondary",children:D("edit"!==dt?"duplicate"===dt?$e||($e=(0,i.Z)(["editor.dupArt"])):He||(He=(0,i.Z)(["editor.upArt"])):Ye||(Ye=(0,i.Z)(["editor.beforeEdit"])))}),(0,O.jsx)(xe.Z,{artifactObj:ut})]})}),Lt&&(0,O.jsx)(j.ZP,{item:!0,md:1,display:"flex",alignItems:"center",justifyContent:"center",children:(0,O.jsx)($.Z,{sx:{display:"flex"},children:(0,O.jsx)(d.Z,{sx:{fontSize:40}})})}),(0,O.jsx)(j.ZP,{item:!0,xs:12,md:5.5,lg:4,children:(0,O.jsxs)($.Z,{children:[(0,O.jsx)(k.Z,{sx:{textAlign:"center"},py:1,variant:"h6",color:"text.secondary",children:D(Xe||(Xe=(0,i.Z)(["editor.preview"])))}),(0,O.jsx)(xe.Z,{artifactObj:ht})]})})]}),!bt&&(0,O.jsx)(C.Z,{variant:"filled",severity:"error",children:xt.map((function(e,t){return(0,O.jsx)("div",{children:e},t)}))}),(0,O.jsxs)(j.ZP,{container:!0,spacing:2,children:[(0,O.jsx)(j.ZP,{item:!0,children:"edit"===dt?(0,O.jsx)(w.Z,{startIcon:(0,O.jsx)(f.Z,{}),onClick:function(){z.arts.set(ut.id,je),U?vt():(de(!1),F())},disabled:!je||!bt,color:"primary",children:D(Je||(Je=(0,i.Z)(["editor.btnSave"])))}):(0,O.jsx)(w.Z,{startIcon:(0,O.jsx)(f.Z,{}),onClick:function(){z.arts.new(Se),U?vt():(de(!1),F())},disabled:!Se||!bt,color:"duplicate"===dt?"warning":"primary",children:D(Qe||(Qe=(0,i.Z)(["editor.btnAdd"])))})}),(0,O.jsx)(j.ZP,{item:!0,flexGrow:1,children:U&&(0,O.jsx)(w.Z,{startIcon:(0,O.jsx)(h.Z,{}),disabled:!Se,onClick:function(){window.confirm(D(ze||(ze=(0,i.Z)(["editor.clearPrompt"]))))&&vt()},color:"error",children:D(et||(et=(0,i.Z)(["editor.btnClear"])))})}),(0,O.jsx)(j.ZP,{item:!0,children:!1}),ut&&"edit"!==dt&&(0,O.jsx)(j.ZP,{item:!0,children:(0,O.jsx)(w.Z,{startIcon:(0,O.jsx)(x.Z,{}),onClick:function(){z.arts.set(ut.id,je),U?vt():de(!1)},disabled:!je||!bt,color:"success",children:D(tt||(tt=(0,i.Z)(["editor.btnUpdate"])))})})]})]})]})})})}}}]);
//# sourceMappingURL=213.ed8e28d6.chunk.js.map