"use strict";(self.webpackChunkgenshin_optimizer=self.webpackChunkgenshin_optimizer||[]).push([[302],{36030:function(e,t,n){n.d(t,{N5:function(){return I},Y4:function(){return _},mW:function(){return M},mY:function(){return R}});var r=n(29439),i=n(1413),a=n(45987),s=n(13967),l=n(94198),c=n(58165),o=n(81918),u=n(90493),d=n(68870),x=n(79834),f=n(72791),h=n(22020),p=n(31148),m=n(72828),j=n(79406),Z=n(42320),v=n(50765),g=n(24351),y=n(610),b=n(68244),w=n(10157),k=n(75545),C=n(80184),S=["allArtifactKeysWithGrouper","selectedArtifactKeys","setArtifactKeys","getName","getImage","label"],P=["artSetKeys","setArtSetKeys"],K=["mainStatKeys","setMainStatKeys"],O=["substatKeys","setSubstatKeys"],E=["allArtifactKeysWithGrouper","selectedArtifactKey","setArtifactKey","getName","getImage","label","disable","showDefault","defaultText","defaultIcon"],A=["artSetKey","setArtSetKey","label"];function D(e){var t=e.allArtifactKeysWithGrouper,n=e.selectedArtifactKeys,r=e.setArtifactKeys,u=e.getName,d=e.getImage,x=e.label,h=(0,a.Z)(e,S),p=(0,s.Z)(),m=(0,f.useMemo)((function(){return t.map((function(e){var t=e.key,n=e.grouper;return{key:t,label:u(t),grouper:n}}))}),[t,u]);return(0,C.jsx)(l.Z,(0,i.Z)({autoHighlight:!0,multiple:!0,disableCloseOnSelect:!0,options:m,value:n.map((function(e){return{key:e,label:u(e)}})),onChange:function(e,t){r(t.map((function(e){return e.key})))},getOptionLabel:function(e){return e.label},isOptionEqualToValue:function(e,t){return e.key===t.key},renderInput:function(e){return(0,C.jsx)(c.Z,(0,i.Z)((0,i.Z)({},e),{},{label:x,variant:"filled",InputLabelProps:{style:{color:p.palette.text.primary}},color:n.length?"success":"primary",type:"search"}))},renderOption:function(e,t){return(0,C.jsx)(y.Z,{value:t.key,image:d(t.key),text:t.label,theme:p,isSelected:n.includes(t.key),props:e},t.key)},renderTags:function(e,t){return e.map((function(e,n){var r=g.Kj.find((function(t){return e.key==="".concat(t,"_dmg_")})),a=r||void 0;return(0,f.createElement)(o.Z,(0,i.Z)((0,i.Z)({},t({index:n})),{},{key:e.key,icon:d(e.key),label:e.label,color:a}))}))}},h))}function I(e){var t=e.artSetKeys,n=e.setArtSetKeys,s=(0,a.Z)(e,P),l=(0,Z.Z)((function(){return p.y.getAll}),[]),c=(0,h.$)(["artifact","artifactNames_gen"]).t;if(!l)return null;var o=Object.entries(p.y.setKeysByRarities(l)).flatMap((function(e){var t=(0,r.Z)(e,2),n=t[0];return t[1].map((function(e){return{key:e,grouper:+n}}))})).sort(T);return(0,C.jsx)(D,(0,i.Z)({allArtifactKeysWithGrouper:o,selectedArtifactKeys:t,setArtifactKeys:n,getName:function(e){return l[e].nameRaw},getImage:function(e){return l[e].defIcon},label:c("artifact:autocompleteLabels.sets"),groupBy:function(e){var t,n;return null!==(t=null===(n=e.grouper)||void 0===n?void 0:n.toString())&&void 0!==t?t:""},renderGroup:function(e){return e.group&&(0,C.jsxs)(u.Z,{component:d.Z,children:[(0,C.jsxs)(x.Z,{sx:{top:"-1em"},children:[e.group," ",(0,C.jsx)(w.q,{stars:+e.group})]},"".concat(e.group,"Header")),e.children]},e.group)}},s))}function R(e){var t=e.mainStatKeys,n=e.setMainStatKeys,r=(0,a.Z)(e,K),s=(0,h.$)("artifact").t;return(0,C.jsx)(D,(0,i.Z)({allArtifactKeysWithGrouper:v.r.map((function(e){return{key:e}})),selectedArtifactKeys:t,setArtifactKeys:n,getName:function(e){return j.ZP.getArtStr(e)},getImage:function(e){return k.Z[e]},label:s("autocompleteLabels.mainStats")},r))}function M(e){var t=e.substatKeys,n=e.setSubstatKeys,r=(0,a.Z)(e,O),s=(0,h.$)("artifact").t;return(0,C.jsx)(D,(0,i.Z)({allArtifactKeysWithGrouper:v._.map((function(e){return{key:e}})),selectedArtifactKeys:t,setArtifactKeys:n,getName:function(e){return j.ZP.getArtStr(e)},getImage:function(e){return k.Z[e]},label:s("autocompleteLabels.substats")},r))}function z(e){var t=e.allArtifactKeysWithGrouper,n=e.selectedArtifactKey,r=e.setArtifactKey,c=e.getName,o=e.getImage,u=e.label,d=e.disable,x=void 0===d?function(){return!1}:d,h=e.showDefault,p=void 0!==h&&h,m=e.defaultText,j=void 0===m?"":m,Z=(e.defaultIcon,(0,a.Z)(e,E)),v=(0,s.Z)(),g=(0,f.useMemo)((function(){return(p?[{key:"",label:j}]:[]).concat(t.map((function(e){var t=e.key,n=e.grouper;return{key:t,label:c(t),grouper:n}})))}),[t,c,j,p]);return(0,C.jsx)(l.Z,(0,i.Z)({autoHighlight:!0,options:g,clearIcon:n?void 0:"",value:{key:n,label:c(n)},onChange:function(e,t,n){return("change"!==e.type||"clear"!==n)&&r(t?t.key:"")},getOptionLabel:function(e){return e.label?e.label:j},isOptionEqualToValue:function(e,t){return e.key===t.key},getOptionDisabled:function(e){return x(e.key)},renderInput:function(e){return(0,C.jsx)(b.Z,(0,i.Z)((0,i.Z)({},e),{},{label:u,startAdornment:o(n),hasValue:!!n}))},renderOption:function(e,t){return(0,C.jsx)(y.Z,{value:t.key,image:o(t.key),text:t.label,theme:v,isSelected:n===t.key,props:e},t.key)}},Z))}function _(e){var t=e.artSetKey,n=e.setArtSetKey,s=e.label,l=void 0===s?"":s,c=(0,a.Z)(e,A),o=(0,Z.Z)((function(){return p.y.getAll}),[]),f=(0,h.$)(["artifact","artifactNames_gen"]).t;if(l=l||f("artifact:autocompleteLabels.set"),!o)return null;var m=Object.entries(p.y.setKeysByRarities(o)).flatMap((function(e){var t=(0,r.Z)(e,2),n=t[0];return t[1].map((function(e){return{key:e,grouper:+n}}))})).sort(T);return(0,C.jsx)(z,(0,i.Z)({allArtifactKeysWithGrouper:m,selectedArtifactKey:t,setArtifactKey:n,getName:function(e){return e&&o[e].nameRaw},getImage:function(e){return e?o[e].defIcon:(0,C.jsx)(C.Fragment,{})},label:l,groupBy:function(e){var t,n;return null!==(t=null===(n=e.grouper)||void 0===n?void 0:n.toString())&&void 0!==t?t:""},renderGroup:function(e){return e.group&&(0,C.jsxs)(u.Z,{component:d.Z,children:[(0,C.jsxs)(x.Z,{sx:{top:"-1em"},children:[e.group," ",(0,C.jsx)(w.q,{stars:+e.group})]},"".concat(e.group,"Header")),e.children]},e.group)}},c))}function T(e,t){if(e.grouper>t.grouper)return-1;if(e.grouper<t.grouper)return 1;var n=m.Z.t("artifactNames_gen:".concat(e.key)),r=m.Z.t("artifactNames_gen:".concat(t.key));return n<r?-1:n>r?1:0}},21977:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(29439),i=n(57621),a=n(10889),s=n(72791),l=n(60393),c=n(10600),o=n(80184);function u(e){var t=e.levelLow,n=e.levelHigh,u=e.setLow,d=e.setHigh,x=e.setBoth,f=e.dark,h=void 0!==f&&f,p=e.disabled,m=void 0!==p&&p,j=e.showLevelText,Z=void 0!==j&&j,v=(0,s.useState)(t),g=(0,r.Z)(v,2),y=g[0],b=g[1],w=(0,s.useState)(n),k=(0,r.Z)(w,2),C=k[0],S=k[1],P=(0,s.useCallback)((function(e,t){if("number"==typeof t)throw new TypeError;var n=(0,r.Z)(t,2),i=n[0],a=n[1];b(i),S(a)}),[b,S]);return(0,s.useEffect)((function(){return b(t)}),[b,t]),(0,s.useEffect)((function(){return S(n)}),[S,n]),(0,o.jsxs)(i.Z,{sx:{width:"100%",display:"flex",alignItems:"center",bgcolor:h?"contentDark.main":"contentLight.main"},children:[(0,o.jsx)(c.ZP,{value:y,onChange:function(e){return u((0,l.uZ)(e,0,n))},sx:{px:1,pl:Z?2:void 0,width:Z?100:50},inputProps:{sx:{textAlign:"center"}},startAdornment:Z?"Level: ":void 0,disabled:m}),(0,o.jsx)(a.ZP,{sx:{width:100,flexGrow:1,mx:2},getAriaLabel:function(){return"Arifact Level Range"},value:[y,C],onChange:P,onChangeCommitted:function(e,t){return x(t[0],t[1])},valueLabelDisplay:"auto",min:0,max:20,step:1,marks:!0,disabled:m}),(0,o.jsx)(c.ZP,{value:C,onChange:function(e){return d((0,l.uZ)(e,t,20))},sx:{px:1,width:50},inputProps:{sx:{textAlign:"center"}},disabled:m})]})}},18726:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(20890),i=n(52791),a=n(80184);function s(e){var t=e.avatar,n=e.title,s=e.action;return(0,a.jsxs)(i.Z,{display:"flex",gap:1,p:2,alignItems:"center",children:[t,(0,a.jsx)(r.Z,{variant:"subtitle1",sx:{flexGrow:1},children:n}),s&&(0,a.jsx)(r.Z,{variant:"caption",children:s})]})}},37503:function(e,t,n){n.d(t,{X:function(){return _},Z:function(){return I}});var r=n(68870),i=n(20890),a=n(94721),s=n(72791),l=n(13746),c=n(60393),o=n(3992),u=n(18726),d=n(39504),x=n(88034),f=n(29439),h=n(72247),p=n(9912),m=n(24518),j=n(23786),Z=n(2199),v=n(97714),g=n(33890),y=n(25617),b=n(66624),w=n(80184);function k(e){var t=e.conditional,n=e.disabled,r=void 0!==n&&n;return 1===Object.keys(t.states).length&&"path"in t?(0,w.jsx)(C,{conditional:t,disabled:r}):"path"in t?(0,w.jsx)(S,{conditional:t,disabled:r}):(0,w.jsx)(P,{conditional:t,disabled:r})}function C(e){var t=e.conditional,n=e.disabled,r=(0,s.useContext)(v.K),i=r.character,a=r.characterDispatch,o=(0,s.useContext)(l.R).data,u=(0,s.useCallback)((function(e){var n=(0,c.I8)(i.conditional);e?(0,c.SR)(n,t.path,e):(0,c.uH)(n,t.path),a({conditional:n})}),[t,i,a]),d=o.get(t.value).value,x=(0,f.Z)(Object.entries(t.states)[0],2),j=x[0],Z=O(x[1].name),g=E(t.name);return(0,w.jsxs)(m.Z,{fullWidth:!0,size:"small",sx:{borderRadius:0},color:d?"success":"primary",onClick:function(){return u(d?void 0:j)},disabled:n,startIcon:d?(0,w.jsx)(h.Z,{}):(0,w.jsx)(p.Z,{}),children:[g," ",Z]})}function S(e){var t=e.conditional,n=e.disabled,r=(0,s.useContext)(v.K),i=r.character,o=r.characterDispatch,u=(0,s.useContext)(l.R).data,d=(0,s.useCallback)((function(e){var n=(0,c.I8)(i.conditional);e?(0,c.SR)(n,t.path,e):(0,c.uH)(n,t.path),o({conditional:n})}),[t,i,o]),x=u.get(t.value).value,h=x?t.states[x]:void 0,p=h?O(h.name):(0,w.jsx)(y.Z,{color:"secondary",children:"Not Active"}),m=E(t.name);return(0,w.jsxs)(g.Z,{fullWidth:!0,size:"small",sx:{borderRadius:0},color:x?"success":"primary",title:(0,w.jsxs)("span",{children:[m," ",p]}),disabled:n,children:[(0,w.jsx)(j.Z,{onClick:function(){return d()},selected:!h,disabled:!h,children:(0,w.jsx)("span",{children:"Not Active"})}),(0,w.jsx)(a.Z,{}),Object.entries(t.states).map((function(e){var t=(0,f.Z)(e,2),n=t[0],r=t[1];return(0,w.jsx)(j.Z,{onClick:function(){return d(n)},selected:x===n,disabled:x===n,children:r.name},n)}))]})}function P(e){var t=e.conditional,n=e.disabled,r=(0,s.useContext)(v.K),i=r.character,a=r.characterDispatch,o=(0,s.useContext)(l.R).data,u=(0,s.useCallback)((function(e,t){var n=(0,c.I8)(i.conditional);t?(0,c.SR)(n,e,t):(0,c.uH)(n,e),a({conditional:n})}),[i,a]);return(0,w.jsx)(Z.Z,{fullWidth:!0,orientation:"vertical",disableElevation:!0,color:"secondary",children:Object.entries(t.states).map((function(e){var t=(0,f.Z)(e,2),r=t[0],i=t[1],a=o.get(i.value).value,s=a===r;return(0,w.jsx)(m.Z,{color:s?"success":"primary",disabled:n,fullWidth:!0,onClick:function(){return u(i.path,a?void 0:r)},size:"small",startIcon:s?(0,w.jsx)(h.Z,{}):(0,w.jsx)(p.Z,{}),sx:{borderRadius:0},children:E(i.name)},r)}))})}function K(e){return"string"!==typeof e}function O(e){if(!e)return"";var t="primary",n=e;return e&&K(e)&&e.props.color&&(t=e.props.color,n=(0,w.jsx)("span",{children:e.props.children})),(0,w.jsx)(y.Z,{sx:{ml:.5},color:t,children:n})}function E(e){if(K(e)){var t=e.props.key18,n=e.props.ns,r=e.props.values;return(0,w.jsx)(b.v,{ns:n,key18:t,values:r,useBadge:!0})}return e}function A(e){var t,n=e.conditional,r=e.hideHeader,i=void 0!==r&&r,a=e.hideDesc,u=void 0!==a&&a,f=(0,s.useContext)(l.R).data;if("path"in n){var h,p=f.get(n.value).value;t=p&&(null===(h=n.states[p])||void 0===h?void 0:h.fields)}else t=Object.values(n.states).flatMap((function(e){return f.get(e.value).value?e.fields:[]}));return(0,w.jsxs)(o.Z,{children:[!(0,c.mY)(i,n)&&(0,w.jsx)(_,{header:n.header,hideDesc:u}),(0,w.jsx)(d.Z,{sx:{p:0,"&:last-child":{pb:0}},children:(0,w.jsx)(k,{conditional:n})}),t&&(0,w.jsx)(x.ZP,{fields:t})]})}var D=n(55221);function I(e){var t=e.sections,n=e.teamBuffOnly,i=e.hideDesc,a=void 0!==i&&i,c=e.hideHeader,o=void 0!==c&&c,u=(0,s.useContext)(l.R).data;if(!t.length)return null;var d=t.map((function(e,t){return e.canShow&&!u.get(e.canShow).value||n&&!e.teamBuff?null:(0,w.jsx)(R,{section:e,hideDesc:a,hideHeader:o},t)})).filter((function(e){return e}));return d.length?(0,w.jsx)(r.Z,{display:"flex",flexDirection:"column",gap:1,children:d}):null}function R(e){var t=e.section,n=e.hideDesc,r=void 0!==n&&n,i=e.hideHeader,a=void 0!==i&&i;return"fields"in t?(0,w.jsx)(M,{section:t,hideDesc:r,hideHeader:a}):"states"in t?(0,w.jsx)(A,{conditional:t,hideDesc:r,hideHeader:a}):(0,w.jsx)(z,{section:t})}function M(e){var t=e.section,n=e.hideDesc,r=e.hideHeader;return(0,w.jsxs)(o.Z,{children:[!(0,c.mY)(r,t)&&t.header&&(0,w.jsx)(_,{header:t.header,hideDesc:n,hideDivider:0===t.fields.length}),(0,w.jsx)(x.ZP,{fields:t.fields})]})}function z(e){var t=e.section,n=(0,s.useContext)(l.R).data;return(0,w.jsx)("div",{children:(0,c.mY)(t.text,n)})}function _(e){var t=e.header,n=e.hideDesc,r=e.hideDivider,o=(0,s.useContext)(l.R).data,d=t.icon,x=t.title,f=t.action;d=(0,c.mY)(d,o);var h=!n&&(0,c.mY)(t.description,o),p=n?x:(0,w.jsxs)("span",{children:[x," ",(0,w.jsx)(D.Z,{title:(0,w.jsx)(i.Z,{children:h})})]});return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(u.Z,{avatar:d,title:p,action:f}),!r&&(0,w.jsx)(a.Z,{})]})}},29371:function(e,t,n){n.d(t,{Z:function(){return p}});var r=n(29439),i=n(93433),a=n(2199),s=n(24518),l=n(23786),c=n(72791),o=n(22020),u=n(2139),d=n(60393),x=n(10600),f=n(33890),h=n(80184);function p(e){var t=e.level,n=e.ascension,p=e.setBoth,m=e.useLow,j=void 0!==m&&m,Z=(0,o.$)("ui").t,v=j?u.sU:u.SJ,g=(0,c.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;e=(0,d.uZ)(e,1,j?u.d8:u.Qq);var t=v.findIndex((function(t){return e<=t}));p({level:e,ascension:t})}),[p,v,j]),y=(0,c.useCallback)((function(){var e=v.findIndex((function(e){return 90!==t&&t===e}));p(n===e?{ascension:n+1}:{ascension:e})}),[p,v,n,t]);return(0,h.jsxs)(a.Z,{sx:{bgcolor:function(e){return e.palette.contentDark.main}},children:[(0,h.jsx)(x.CC,{children:(0,h.jsx)(x.ZP,{onChange:g,value:t,startAdornment:"Lv. ",inputProps:{min:1,max:90,sx:{textAlign:"center",width:"3em"}},sx:{height:"100%",pl:2}})}),(0,h.jsx)(s.Z,{sx:{pl:1,whiteSpace:"nowrap"},disabled:!(j?u.nB:u.ek)(t),onClick:y,children:(0,h.jsxs)("strong",{children:["/ ",u.SJ[n]]})}),(0,h.jsx)(f.Z,{title:Z("selectlevel"),sx:{flexGrow:1},children:(0,i.Z)(j?u.vF:u.D4).map((function(e){var i=(0,r.Z)(e,2),a=i[0],s=i[1],c=a===t&&s===n;return(0,h.jsx)(l.Z,{selected:c,disabled:c,onClick:function(){return p({level:a,ascension:s})},children:a===v[s]?"Lv. ".concat(a):"Lv. ".concat(a,"/").concat(v[s])},"".concat(a,"/").concat(s))}))})]})}},6805:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(23786),i=n(22020),a=n(24351),s=n(33890),l=n(80184);function c(e){var t=e.refinement,n=e.setRefinement,c=(0,i.$)("ui").t;return(0,l.jsx)(s.Z,{title:c("refinement",{value:t}),children:a.a.map((function(e){return(0,l.jsx)(r.Z,{onClick:function(){return n(e)},selected:t===e,disabled:t===e,children:c("refinement",{value:e})},e)}))})}},92443:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(1413),i=n(45987),a=n(66934),s=n(24518),l=n(80184),c=["children","disabled"],o=(0,a.ZP)(s.Z)((function(e){var t=e.theme;return{"&.Mui-disabled":{backgroundColor:t.palette.primary.dark,color:t.palette.text.secondary}}}));function u(e){var t=e.children,n=(e.disabled,(0,i.Z)(e,c));return(0,l.jsx)(o,(0,r.Z)((0,r.Z)({},n),{},{disabled:!0,children:t}))}},44361:function(e,t,n){n.d(t,{Z:function(){return S}});var r=n(93433),i=n(29439),a=n(39504),s=n(61889),l=n(58165),c=n(94721),o=n(66647),u=n(68870),d=n(20890),x=n(72791),f=n(22020),h=n(10658),p=n(66218),m=n(42320),j=n(24351),Z=n(3992),v=n(71310),g=n(68198),y=n(55942),b=n(9321),w=n(10157),k=n(73578),C=n(80184);function S(e){var t=e.show,n=e.ascension,S=void 0===n?0:n,P=e.onHide,K=e.onSelect,O=e.filter,E=void 0===O?function(){return!0}:O,A=e.weaponTypeFilter,D=(0,f.$)(["page_weapon","weaponNames_gen"]).t,I=(0,m.Z)((function(){return p.Z.getAll}),[]),R=(0,x.useState)(A?[A]:(0,r.Z)(j.yd)),M=(0,i.Z)(R,2),z=M[0],_=M[1];(0,x.useEffect)((function(){return A&&_([A])}),[A]);var T=(0,x.useState)(""),G=(0,i.Z)(T,2),N=G[0],q=G[1],L=(0,x.useDeferredValue)(N),W=I?j.fG.filter((function(e){return E(I[e])})).filter((function(e){var t;return z.includes(null===I||void 0===I||null===(t=I[e])||void 0===t?void 0:t.weaponType)})).filter((function(e){return!L||D("weaponNames_gen:".concat(e)).toLowerCase().includes(L.toLowerCase())})).sort((function(e,t){var n,r,i,a;return(null!==(n=null===I||void 0===I||null===(r=I[t])||void 0===r?void 0:r.rarity)&&void 0!==n?n:0)-(null!==(i=null===I||void 0===I||null===(a=I[e])||void 0===a?void 0:a.rarity)&&void 0!==i?i:0)})):[];return I?(0,C.jsx)(b.Z,{open:t,onClose:P,children:(0,C.jsxs)(Z.Z,{children:[(0,C.jsx)(a.Z,{sx:{py:1},children:(0,C.jsxs)(s.ZP,{container:!0,spacing:1,children:[(0,C.jsx)(s.ZP,{item:!0,children:(0,C.jsx)(k.Z,{value:z,onChange:_,disabled:!!A,size:"small"})}),(0,C.jsx)(s.ZP,{item:!0,flexGrow:1,children:(0,C.jsx)(l.Z,{autoFocus:!0,size:"small",value:N,onChange:function(e){return q(e.target.value)},label:D("weaponName"),sx:{height:"100%"},InputProps:{sx:{height:"100%"}}})}),(0,C.jsx)(s.ZP,{item:!0,children:(0,C.jsx)(g.Z,{onClick:P})})]})}),(0,C.jsx)(c.Z,{}),(0,C.jsx)(a.Z,{children:(0,C.jsx)(s.ZP,{container:!0,spacing:1,children:W.map((function(e){var t,n=I[e];return(0,C.jsx)(s.ZP,{item:!0,lg:3,md:4,children:(0,C.jsx)(v.Z,{sx:{height:"100%"},children:(0,C.jsxs)(o.Z,{onClick:function(){P(),K(e)},sx:{display:"flex"},children:[(0,C.jsx)(u.Z,{component:"img",src:n.getImg(S),sx:{width:100,height:"auto"},className:" grad-".concat(n.rarity,"star")}),(0,C.jsxs)(u.Z,{sx:{flexGrow:1,px:1},children:[(0,C.jsx)(d.Z,{variant:"subtitle1",children:n.name}),(0,C.jsxs)(d.Z,{children:[(0,C.jsx)(y.Z,{src:null===(t=h.Z.weaponTypes)||void 0===t?void 0:t[n.weaponType]})," ",(0,C.jsx)(w.q,{stars:n.rarity,colored:!0})]})]})]})})},e)}))})}),(0,C.jsx)(c.Z,{}),(0,C.jsx)(a.Z,{sx:{py:1},children:(0,C.jsx)(g.Z,{large:!0,onClick:P})})]})}):null}},68302:function(e,t,n){n.r(t),n.d(t,{default:function(){return pa}});var r=n(29439),i=n(63833),a=n(45781),s=n(35893),l=n(10284),c=n(31289),o=n(68575),u=n(66630),d=n(68870),x=n(47047),f=n(39504),h=n(25228),p=n(43896),m=n(24518),j=n(72791),Z=n(22020),v=n(43504),g=n(16871),y=n(3992),b=n(71310),w=n(68198),k=n(32490),C=n(97714),S=n(13746),P=n(60705),K=n(947),O=n(24711),E=n(13434),A=n(50920),D=n(42320),I=n(47639),R=n(72056),M=n(24351),z=n(28057),_=n(3082),T=n(2380),G=n(566),N=n(80184);function q(){var e,t=(0,Z.$)("page_character").t,n=(0,j.useContext)(C.K).characterSheet,i=(0,j.useState)(!1),a=(0,r.Z)(i,2),s=a[0],l=a[1],c=(0,G.Z)();return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(_.w,{show:s,onHide:function(){return l(!1)},onSelect:c}),(0,N.jsx)(m.Z,{color:"info",onClick:function(){return l(!0)},startIcon:(0,N.jsx)(T.Z,{src:null===n||void 0===n?void 0:n.thumbImgSide}),children:null!==(e=null===n||void 0===n?void 0:n.name)&&void 0!==e?e:t("selectCharacter")})]})}var L=n(37355),W=n(9585),B=n(94721),F=n(89673),V=n(55818),H=n(20890),U=n(3721),$=n(63210),Y=n(18726),J=n(91702),X=n(55942),Q=n(9321),ee=n(25617),te=n(8430),ne=n(79406);function re(){var e=(0,j.useContext)(P.M).modalOpen,t=(0,j.useContext)(P.M).setFormulaData,n=(0,j.useCallback)((function(){return null===t||void 0===t?void 0:t(void 0,void 0)}),[t]);return(0,N.jsx)(Q.Z,{open:!!e,onClose:n,children:(0,N.jsxs)(y.Z,{children:[(0,N.jsx)(W.Z,{title:"Formulas & Calculations",action:(0,N.jsx)(w.Z,{onClick:n})}),(0,N.jsx)(f.Z,{sx:{pt:0},children:(0,N.jsx)(ie,{})})]})})}function ie(){var e=(0,j.useContext)(S.R).data,t=(0,j.useContext)(P.M).data,n=(0,te.U)(null!==t&&void 0!==t?t:e);return(0,N.jsx)(j.Suspense,{fallback:(0,N.jsx)(x.Z,{variant:"rectangular",width:"100%",height:1e3}),children:(0,N.jsx)(d.Z,{sx:{mr:-1,mb:-1},children:n.map((function(e){var t=(0,r.Z)(e,2),n=t[0],i=t[1];return(0,N.jsx)(ae,{displayNs:i,sectionKey:n},n)}))})})}function ae(e){var t=e.sectionKey,n=e.displayNs,i=(0,j.useContext)(S.R).data,a=(0,j.useContext)(P.M).data,s=(0,D.Z)((function(){return(0,te.f)(null!==a&&void 0!==a?a:i,t)}),[a,i,t]);if(!s)return null;if(Object.entries(n).every((function(e){var t=(0,r.Z)(e,2);t[0];return t[1].isEmpty})))return null;var l=s.title,c=s.icon,o=s.action;return(0,N.jsxs)(b.Z,{sx:{mb:1},children:[(0,N.jsx)(Y.Z,{avatar:c&&(0,N.jsx)(X.Z,{size:2,sx:{m:-1},src:c}),title:l,action:o&&(0,N.jsx)(ee.Z,{children:o})}),(0,N.jsx)(B.Z,{}),(0,N.jsx)(f.Z,{children:Object.entries(n).map((function(e){var t=(0,r.Z)(e,2),n=t[0],i=t[1];return!i.isEmpty&&(0,N.jsx)(se,{node:i},n)}))})]})}function se(e){var t,n=e.node,i=(0,j.useContext)(P.M).node,a=(0,j.useState)(!1),s=(0,r.Z)(a,2),l=s[0],c=s[1],o=(0,j.useCallback)((function(e,t){return c(t)}),[]),u=(0,j.useRef)();return(0,j.useEffect)((function(){n===i&&setTimeout((function(){var e,t;return null===u||void 0===u||null===(e=u.current)||void 0===e||null===(t=e.scrollIntoView)||void 0===t?void 0:t.call(e,{behavior:"smooth"})}),300)}),[u,n,i]),(0,N.jsxs)(F.Z,{sx:{bgcolor:"contentDark.main"},expanded:n===i||l,onChange:o,ref:u,children:[(0,N.jsxs)(V.Z,{expandIcon:(0,N.jsx)(L.Z,{}),children:[(0,N.jsxs)(H.Z,{children:[(0,N.jsx)(J.Z,{color:n.info.variant,children:ne.ZP.get(null!==(t=n.info.key)&&void 0!==t?t:"")})," ",(0,N.jsx)("strong",{children:(0,ne.EC)(n.value,n.unit)})]}),M.jU.includes(n.info.variant)&&(0,N.jsx)(d.Z,{sx:{display:"inline-block",ml:"auto",mr:2},children:(0,N.jsx)($.Z,{reaction:n.info.variant,trigger:n.info.subVariant})})]}),(0,N.jsx)(U.Z,{children:n.formulas.map((function(e,t){return(0,N.jsx)(H.Z,{children:e},t)}))})]})}var le=n(29371),ce=n(93433),oe=n(53767),ue=n(61889),de=n(15021),xe=n(52791),fe=n(1413),he=n(72247),pe=n(9912),me=n(81918),je=n(56125),Ze=n(26138),ve=n(45987),ge=n(66934),ye=n(13400),be=["expand"],we=(0,ge.ZP)((function(e){e.expand;var t=(0,ve.Z)(e,be);return(0,N.jsx)(ye.Z,(0,fe.Z)({},t))}))((function(e){var t=e.theme;return{transform:e.expand?"rotate(180deg)":"rotate(0deg)",marginLeft:"auto",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest})}})),ke=n(75545),Ce=n(49670),Se=n(2199),Pe=n(10600),Ke=n(92443),Oe=["name","children","value","placeholder","defaultValue","onValueChange","percent","disabled","onReset"],Ee=(0,ge.ZP)(Se.Z)({display:"flex"});function Ae(e){var t=e.name,n=e.children,r=e.value,i=e.placeholder,a=e.defaultValue,s=void 0===a?0:a,l=e.onValueChange,c=e.percent,o=void 0!==c&&c,u=e.disabled,d=void 0!==u&&u,x=e.onReset,f=(0,ve.Z)(e,Oe);return(0,N.jsxs)(Ee,(0,fe.Z)((0,fe.Z)({},f),{},{children:[n,(0,N.jsx)(Ke.Z,{sx:{px:1},children:t}),(0,N.jsx)(Pe.CC,{sx:{flexBasis:"10em",flexGrow:1},children:(0,N.jsx)(Pe.ZP,{sx:{px:1},inputProps:{sx:{textAlign:"right"}},float:o,placeholder:i,value:r,onChange:l,disabled:d,endAdornment:o?"%":void 0})}),(0,N.jsx)(m.Z,{sx:{flexShrink:2},size:"small",color:"error",onClick:function(){return x?x():l(s)},disabled:d||r===s,children:(0,N.jsx)(Ce.Z,{})})]}))}function De(){var e=(0,j.useContext)(S.R).data,t=(0,j.useState)(!1),n=(0,r.Z)(t,2),i=n[0],a=n[1],s=(0,j.useCallback)((function(){return a(!i)}),[a,i]),l=e.get(Ze.ri.enemy.level),c=e.get(Ze.ri.enemy.defRed),o=e.get(Ze.ri.enemy.defIgn);return(0,N.jsxs)(b.Z,{children:[(0,N.jsxs)(f.Z,{sx:{display:"flex"},children:[(0,N.jsxs)(ue.ZP,{container:!0,spacing:1,flexGrow:1,alignItems:"center",children:[(0,N.jsx)(ue.ZP,{item:!0,children:(0,N.jsx)(me.Z,{size:"small",color:"success",label:(0,N.jsxs)("span",{children:[ne.ZP.get(l.info.key)," ",(0,N.jsx)("strong",{children:l.value})]})})}),M.Kj.map((function(e){return(0,N.jsx)(ue.ZP,{item:!0,children:(0,N.jsx)(H.Z,{children:(0,N.jsx)(Ie,{element:e})},e)},e)})),(0,N.jsx)(ue.ZP,{item:!0,children:(0,N.jsxs)(H.Z,{children:["DEF Reduction ",(0,ne.EC)(c.value,c.unit)]})}),(0,N.jsx)(ue.ZP,{item:!0,children:(0,N.jsxs)(H.Z,{children:["DEF Ignore ",(0,ne.EC)(o.value,o.unit)]})})]}),(0,N.jsx)(we,{expand:i,onClick:s,"aria-expanded":i,"aria-label":"show more",size:"small",sx:{p:0},children:(0,N.jsx)(L.Z,{})})]}),(0,N.jsx)(je.Z,{in:i,timeout:"auto",unmountOnExit:!0,children:(0,N.jsx)(f.Z,{sx:{pt:0},children:(0,N.jsx)(Re,{})})})]})}function Ie(e){var t=e.element,n=(0,j.useContext)(S.R).data.get(Ze.ri.enemy["".concat(t,"_res_")]),r=!isFinite(n.value)?(0,N.jsxs)("span",{children:[ke.Z[t]," IMMUNE"]}):(0,N.jsxs)("span",{children:[ke.Z[t],"RES ",(0,N.jsx)("strong",{children:(0,ne.EC)(n.value,n.unit)})]});return(0,N.jsx)(J.Z,{color:t,children:r})}function Re(e){var t,n,r,i=e.bsProps,a=void 0===i?{xs:12,md:6}:i,s=(0,j.useContext)(C.K),l=s.character.enemyOverride,c=s.characterDispatch,o=(0,j.useContext)(S.R).data,u=null!==(t=l.enemyLevel)&&void 0!==t?t:o.get(Ze.ri.lvl).value,d=null!==(n=l.enemyDefIgn_)&&void 0!==n?n:0,x=null!==(r=l.enemyDefRed_)&&void 0!==r?r:0;return(0,N.jsxs)(ue.ZP,{container:!0,spacing:1,children:[(0,N.jsx)(ue.ZP,(0,fe.Z)((0,fe.Z)({item:!0},a),{},{children:(0,N.jsx)(m.Z,{fullWidth:!0,sx:{height:"100%"},size:"small",component:"a",color:"warning",href:"https://genshin-impact.fandom.com/wiki/Resistance#Base_Enemy_Resistances",target:"_blank",rel:"noreferrer",children:"To get the specific resistance values of enemies, please visit the wiki."})})),(0,N.jsx)(ue.ZP,(0,fe.Z)((0,fe.Z)({item:!0},a),{},{children:(0,N.jsx)(Ae,{sx:{bgcolor:function(e){return e.palette.contentLight.main},width:"100%"},name:(0,N.jsx)("b",{children:ne.ZP.get("enemyLevel")}),value:u,placeholder:ne.ZP.getStr("enemyLevel"),defaultValue:o.get(Ze.ri.lvl).value,onValueChange:function(e){return c({type:"enemyOverride",statKey:"enemyLevel",value:e})},onReset:function(){return c({type:"enemyOverride",statKey:"enemyLevel",value:void 0})}})})),M.Kj.map((function(e){var t="".concat(e,"_enemyRes_"),n=l[t],r=n===Number.MAX_VALUE;return(0,N.jsx)(ue.ZP,(0,fe.Z)((0,fe.Z)({item:!0},a),{},{children:(0,N.jsx)(Ae,{sx:{bgcolor:function(e){return e.palette.contentLight.main},width:"100%"},name:(0,N.jsx)(J.Z,{color:e,children:(0,N.jsx)("b",{children:ne.ZP.get(t)})}),value:n?r?1/0:n:10,placeholder:r?"Immune ":ne.ZP.getStr(t),defaultValue:10,onValueChange:function(e){return c({type:"enemyOverride",statKey:t,value:e})},disabled:r,percent:!0,children:(0,N.jsx)(m.Z,{color:e,onClick:function(){return c({type:"enemyOverride",statKey:t,value:r?10:Number.MAX_VALUE})},startIcon:r?(0,N.jsx)(he.Z,{}):(0,N.jsx)(pe.Z,{}),children:"Immunity"})})}),e)})),(0,N.jsx)(ue.ZP,(0,fe.Z)((0,fe.Z)({item:!0},a),{},{children:(0,N.jsx)(Ae,{sx:{bgcolor:function(e){return e.palette.contentLight.main},width:"100%"},name:(0,N.jsx)("b",{children:ne.ZP.get("enemyDefIgn_")}),value:d,placeholder:ne.ZP.getStr("enemyDefIgn_"),defaultValue:0,onValueChange:function(e){return c({type:"enemyOverride",statKey:"enemyDefIgn_",value:e})},percent:!0})})),(0,N.jsx)(ue.ZP,(0,fe.Z)((0,fe.Z)({item:!0},a),{},{children:(0,N.jsx)(Ae,{sx:{bgcolor:function(e){return e.palette.contentLight.main},width:"100%"},name:(0,N.jsx)("b",{children:ne.ZP.get("enemyDefRed_")}),value:x,placeholder:ne.ZP.getStr("enemyDefRed_"),defaultValue:0,onValueChange:function(e){return c({type:"enemyOverride",statKey:"enemyDefRed_",value:e})},percent:!0})})),(0,N.jsx)(ue.ZP,{item:!0,xs:12,children:(0,N.jsx)("small",{children:"Note: Genshin Impact halves resistance shred values below 0%. For the sake of calculations enter the RAW value and GO will do the rest. (e.g. 10% - 20% = -10%)"})})]})}var Me=n(88034),ze=n(43696),_e={xs:1,md:2,lg:3};function Te(e){var t=e.open,n=e.onClose;return(0,N.jsx)(Q.Z,{open:t,onClose:n,children:(0,N.jsxs)(y.Z,{children:[(0,N.jsx)(W.Z,{title:"Detailed Stats",action:(0,N.jsx)(w.Z,{onClick:n})}),(0,N.jsx)(f.Z,{sx:{pt:0},children:(0,N.jsxs)(oe.Z,{spacing:1,children:[(0,N.jsx)(qe,{}),(0,N.jsx)(De,{}),(0,N.jsx)(Ue,{})]})})]})})}var Ge=(0,ce.Z)(Ze.lR),Ne=function(e){return(0,N.jsx)(ue.ZP,{item:!0,xs:1,children:e})};function qe(){var e=(0,j.useContext)(C.K),t=e.character.bonusStats,n=e.characterDispatch,r=(0,j.useCallback)((function(e){return n({bonusStats:e})}),[n]);return(0,N.jsx)(b.Z,{children:(0,N.jsx)(f.Z,{sx:{display:"flex"},children:(0,N.jsx)(ue.ZP,{container:!0,columns:_e,sx:{pt:1},spacing:1,children:(0,N.jsx)(ze.Z,{statKeys:Ge,statFilters:t,setStatFilters:r,wrapperFunc:Ne})})})})}var Le=["eleMas","critRate_","critDMG_","enerRech_","heal_"],We=[].concat(["hp","atk","def"],Le).map((function(e){return Ze.ri.total[e]})),Be=["atk_","atk","hp_","hp","def_","def"].concat(Le),Fe=[].concat((0,ce.Z)(ne.hX),(0,ce.Z)(ne.Sx),["stamina","incHeal_","shield_","cdRed_"]),Ve=Ze.lR.filter((function(e){return!Be.includes(e)&&!Fe.includes(e)}));function He(e){var t=e.nodes,n=e.extra,r=(0,j.useContext)(S.R),i=r.data,a=r.oldData;return(0,N.jsxs)(Me.lD,{children:[t.map((function(e){var t,n;return(0,N.jsx)(Me.JW,{component:de.ZP,node:i.get(e),oldValue:null===a||void 0===a||null===(n=a.get(e))||void 0===n?void 0:n.value},null===(t=e.info)||void 0===t?void 0:t.key)})),n]})}function Ue(){var e=(0,j.useContext)(C.K),t=e.character.elementKey,n=e.characterSheet,r=(0,j.useContext)(S.R).data,i=r.get(Ze.ri.special),a=null!==t&&void 0!==t?t:n.elementKey,s=n.isMelee(),l=(0,j.useMemo)((function(){var e=Fe.map((function(e){return Ze.ri.total[e]})),t=(0,ce.Z)(M.N).filter((function(e){return e!==a}));return s&&t.concat(["physical"]),e.filter((function(e){return!(!r.get(e).value&&t.some((function(t){var n,r,i;return null===(n=e.info)||void 0===n||null===(r=n.key)||void 0===r||null===(i=r.includes)||void 0===i?void 0:i.call(r,t)})))}))}),[r,a,s]),c=(0,j.useMemo)((function(){return Ve.map((function(e){return Ze.ri.total[e]})).filter((function(e){return r.get(e).value}))}),[r]);return(0,N.jsx)(b.Z,{children:(0,N.jsx)(f.Z,{children:(0,N.jsxs)(ue.ZP,{container:!0,columns:_e,spacing:1,children:[(0,N.jsx)(ue.ZP,{item:!0,xs:1,children:(0,N.jsx)($e,{title:"Main Stats",children:(0,N.jsx)(He,{nodes:We,extra:i&&(0,N.jsxs)(de.ZP,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,N.jsxs)("span",{children:[(0,N.jsx)("b",{children:"Special:"})," ",(0,N.jsxs)(J.Z,{color:i.info.variant,children:[i.info.key&&ke.Z[i.info.key]," ",i.info.key&&ne.ZP.get(i.info.key)]})]}),(0,N.jsx)("span",{children:(0,ne.EC)(i.value,i.unit)})]})})})}),(0,N.jsx)(ue.ZP,{item:!0,xs:1,children:(0,N.jsx)($e,{title:"Other Stats",children:(0,N.jsx)(He,{nodes:l})})}),!!c.length&&(0,N.jsx)(ue.ZP,{item:!0,xs:1,children:(0,N.jsx)($e,{title:"Misc Stats",children:(0,N.jsx)(He,{nodes:c})})})]})})})}function $e(e){var t=e.title,n=e.children;return(0,N.jsxs)(y.Z,{children:[(0,N.jsx)(f.Z,{sx:{py:1},children:(0,N.jsx)(xe.Z,{display:"flex",justifyContent:"space-between",children:(0,N.jsx)(H.Z,{variant:"subtitle1",children:t})})}),n]})}var Ye=n(30168),Je=n(74165),Xe=n(15861),Qe=n(96739),et=n(94070),tt=n(23060),nt=n(23786),rt=n(90388);function it(){return new Worker(n.p+"static/js/BackgroundWorker.c81d19aa.worker.js")}var at=n(21977),st=n(96106),lt=n(30865),ct=n(33890),ot=n(91839),ut=(0,j.createContext)(void 0),dt=n(34369),xt=n(73036),ft=n(69292),ht=n(17278),pt=n(68544),mt=n(12759),jt=n(60393),Zt=n(9138),vt=n(37762),gt=n(64737),yt=n(78661),bt=(0,Je.Z)().mark(Mt),wt=(0,Je.Z)().mark(_t);function kt(e,t,n,r,i,a){for(var s=a,l={pruneNodeRange:!0},c={pruneNodeRange:!0},o={reaffine:!0},u={pruneOrder:!0,pruneArtRange:!0,pruneNodeRange:!0},d=0;Object.values(s).some((function(e){return e}))&&d++<20;){if(s.pruneOrder){delete s.pruneOrder;var x=St(n,r,i);n!==x&&(n=x,s=(0,fe.Z)((0,fe.Z)({},s),l))}if(s.pruneArtRange){delete s.pruneArtRange;var f=Pt(e,n,t);n!==f&&(n=f,s=(0,fe.Z)((0,fe.Z)({},s),c))}if(s.pruneNodeRange){delete s.pruneNodeRange;var h=Kt(e,n);e!==h&&(e=h,s=(0,fe.Z)((0,fe.Z)({},s),o))}if(s.reaffine){delete s.reaffine;var p=Ct(e,n),m=p.nodes,j=p.arts;e===m&&n===j||(e=m,n=j,s=(0,fe.Z)((0,fe.Z)({},s),u))}}return{nodes:e,arts:n}}function Ct(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=new Set,a=new Set;function s(e,t){t?i.add(e):e.operands.forEach((function(e){var t=e;i.has(t)&&a.add(t)}))}var l=new Set;if((0,gt.aD)(e,(function(e){}),(function(e){var t=e.operation;switch(t){case"read":if("number"!==e.type||"dyn"!==e.path[0]||"add"!==e.accu)throw new Error("Found unsupported ".concat(t," node at path ").concat(e.path," when computing affine nodes"));l.add(e.path[1]),s(e,!0);break;case"add":s(e,e.operands.every((function(e){return i.has(e)})));break;case"mul":var n=e.operands.filter((function(e){return"const"!==e.operation}));s(e,0===n.length||1===n.length&&i.has(n[0]));break;case"const":if("string"===typeof e.value||void 0===e.value)throw new Error("Found constant ".concat(e.value," while compacting"));s(e,!0);break;case"res":case"threshold":case"sum_frac":case"max":case"min":s(e,!1);break;case"data":case"subscript":case"lookup":case"match":case"prio":case"small":throw new Error("Found unsupported ".concat(t," node when computing affine nodes"));default:(0,jt.UT)(t)}})),(0,ce.Z)(a).every((function(e){var t=e.operation;return"read"===t||"const"===t}))&&Object.keys(t.base).length===l.size)return{nodes:e,arts:t};var c=-1;function o(){for(;l.has("".concat(++c)););return"".concat(c)}e.forEach((function(e){return i.has(e)&&a.add(e)}));var u=(0,ce.Z)(a).filter((function(e){return"const"!==e.operation})),d=new Map(u.map((function(e){return[e,n||"read"!==e.operation||"dyn"!==e.path[0]?(0,fe.Z)((0,fe.Z)({},(0,yt.UF)(["dyn","".concat(o())])),{},{accu:"add"}):e]})));function x(e){var t=(0,ft.CG)((0,ce.Z)(d.keys()),{dyn:(0,jt.xh)(e,(function(e){return(0,yt.a9)(e)}))},(function(e){return!0}));return Object.fromEntries((0,ce.Z)(d.values()).map((function(e,n){return[e.path[1],t[n].value]})))}for(var f={nodes:e=(0,gt.uW)(e,(function(e){var t;return null!==(t=d.get(e))&&void 0!==t?t:e}),(function(e){return e})),arts:{base:x(t.base),values:(0,jt.O)(M.eV,(function(e){return t.values[e].map((function(e){return{id:e.id,set:e.set,values:x(e.values)}}))}))}},h=Object.entries(x({})),p=0,m=Object.values(f.arts.values);p<m.length;p++){var j,Z=m[p],v=(0,vt.Z)(Z);try{for(v.s();!(j=v.n()).done;){var g,y=j.value.values,b=(0,vt.Z)(h);try{for(b.s();!(g=b.n()).done;){var w=(0,r.Z)(g.value,2),k=w[0],C=w[1];y[k]-=C}}catch(S){b.e(S)}finally{b.f()}}}catch(S){v.e(S)}finally{v.f()}}return f}function St(e,t,n){var i,a=!1,s=!(null!==(i=n.rainbow)&&void 0!==i&&i.length),l=new Set(Object.entries(n).filter((function(e){var t=(0,r.Z)(e,2);t[0];return t[1].length})).map((function(e){return(0,r.Z)(e,1)[0]}))),c=new Set(Object.entries(n).filter((function(e){var t=(0,r.Z)(e,2),n=(t[0],t[1]);return n.includes(2)&&!n.includes(4)})).map((function(e){return(0,r.Z)(e,1)[0]}))),o=(0,jt.O)(M.eV,(function(n){var i=e.values[n],o=i.filter((function(e){var n=0;return i.every((function(i){var a=Object.entries(i.values).every((function(t){var n=(0,r.Z)(t,2),i=n[0];return n[1]>=e.values[i]})),o=Object.entries(i.values).some((function(t){var n=(0,r.Z)(t,2),i=n[0];return n[1]>e.values[i]}));return a&&(o||i.id>e.id)&&(s&&!l.has(i.set)&&!c.has(e.set)||e.set===i.set)&&n++,n<t}))}));return o.length!==i.length&&(a=!0),o}));return a?{base:e.base,values:o}:e}function Pt(e,t,n){for(var i=Object.fromEntries(Object.entries(t.base).map((function(e){var t=(0,r.Z)(e,2),n=t[0],i=t[1];return[n,{min:i,max:i}]}))),a={arts:t},s=function(){var t=(0,jt.O)(M.eV,(function(e){return Et(a.arts.values[e])})),r=(0,jt.O)(M.eV,(function(e){return Ot(Object.entries(t).map((function(t){return t[0]===e?i:t[1]})).filter((function(e){return e})))})),s=!1,l=(0,jt.O)(M.eV,(function(t){var i=a.arts.values[t].filter((function(i){var a=Ot([Et([i]),r[t]]),s=At(e,a);return e.every((function(e,t){var r;return s.get(e).max>=(null!==(r=n[t])&&void 0!==r?r:-1/0)}))}));return i.length!==a.arts.values[t].length&&(s=!0),i}));if(!s)return"break";a.arts={base:a.arts.base,values:l}};;){if("break"===s())break}return a.arts}function Kt(e,t){var n=At(e,Ot([Object.fromEntries(Object.entries(t.base).map((function(e){var t=(0,r.Z)(e,2),n=t[0],i=t[1];return[n,{min:i,max:i}]})))].concat((0,ce.Z)(Object.values(t.values).map((function(e){return Et(e)}))))));return(0,gt.uW)(e,(function(e){var t=e.operation,i=e.operands.map((function(e){return n.get(e)}));switch(t){case"threshold":var a=(0,r.Z)(i,4),s=a[0],l=a[1],c=a[2],o=a[3];if(s.min>=l.max)return e.operands[2];if(s.max<l.min)return(0,yt.a9)(0);if(c.max===c.min&&o.max===o.min&&c.min===o.min&&isFinite(c.min))return(0,yt.a9)(c.max);break;case"min":var u=e.operands.filter((function(e,t){var n=i[t];return i.every((function(e,t){return n.min<=e.max}))}));if(u.length<i.length)return yt.VV.apply(void 0,(0,ce.Z)(u));break;case"max":var d=e.operands.filter((function(e,t){var n=i[t];return i.every((function(e){return n.max>=e.min}))}));if(d.length<i.length)return yt.Fp.apply(void 0,(0,ce.Z)(d))}return e}),(function(e){return e}))}function Ot(e){var t={};return e.forEach((function(e){Object.entries(e).forEach((function(e){var n=(0,r.Z)(e,2),i=n[0],a=n[1];t[i]?(t[i].min+=a.min,t[i].max+=a.max):t[i]=(0,fe.Z)({},a)}))})),t}function Et(e){var t={};return e.length&&(Object.keys(e[0].values).filter((function(t){return e.every((function(e){return e.values[t]}))})).forEach((function(n){return t[n]={min:e[0].values[n],max:e[0].values[n]}})),e.forEach((function(e){for(var n=e.values,i=0,a=Object.entries(n);i<a.length;i++){var s=(0,r.Z)(a[i],2),l=s[0],c=s[1];t[l]?(t[l].max<c&&(t[l].max=c),t[l].min>c&&(t[l].min=c)):t[l]={min:0,max:c}}}))),t}function At(e,t){var n=new Map;return(0,gt.aD)(e,(function(e){}),(function(e){var i,a,s=e,l=s.operation,c=s.operands.map((function(e){return n.get(e)}));switch(l){case"read":if("dyn"!==s.path[0])throw new Error("Found non-dyn path ".concat(s.path," while computing range"));a=null!==(i=t[s.path[1]])&&void 0!==i?i:{min:0,max:0};break;case"const":a=Dt([s.value]);break;case"subscript":a=Dt(s.list);break;case"add":case"min":case"max":a={min:ft.aj[l](c.map((function(e){return e.min}))),max:ft.aj[l](c.map((function(e){return e.max})))};break;case"res":a={min:ft.aj[l]([c[0].max]),max:ft.aj[l]([c[0].min])};break;case"mul":a=c.reduce((function(e,t){return Dt([e.min*t.min,e.min*t.max,e.max*t.min,e.max*t.max])}));break;case"threshold":a=c[0].min>=c[1].max?c[2]:c[0].max<c[1].min?Dt([0]):Dt([0],[c[2]]);break;case"sum_frac":var o=(0,r.Z)(c,2),u=o[0],d=o[1],x={min:u.min+d.min,max:u.max+d.max};a=x.min<=0&&x.max>=0?u.min<=0&&u.max>=0?{min:NaN,max:NaN}:{min:-1/0,max:1/0}:Dt([u.min/x.min,u.min/x.max,u.max/x.min,u.max/x.max]);break;case"data":case"lookup":case"match":throw new Error("Unsupported ".concat(l," node"));default:(0,jt.UT)(l)}n.set(s,a)})),n}function Dt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Math.max.apply(Math,(0,ce.Z)(e).concat((0,ce.Z)(t.map((function(e){return e.max}))))),r=Math.min.apply(Math,(0,ce.Z)(e).concat((0,ce.Z)(t.map((function(e){return e.min})))));return{min:r,max:n}}function It(e,t){return e.flatMap((function(e){return e})).sort((function(e,t){return t.value-e.value})).slice(0,t)}function Rt(e){for(var t=.01,n=new Set(e.flatMap((function(e){return Object.values(e).map((function(e){return Math.round(e.plot/t)}))})));n.size>1500;)t*=2,n=new Set((0,ce.Z)(n).map((function(e){return Math.round(e/2)})));var r,i={},a=(0,vt.Z)(e);try{for(a.s();!(r=a.n()).done;)for(var s=r.value,l=0,c=Object.values(s);l<c.length;l++){var o=c[l],u=Math.round(o.plot/t)*t;(!i[u]||i[u].value<o.value)&&(i[u]=o)}}catch(d){a.e(d)}finally{a.f()}return i}function Mt(e,t){var n,i,a,s,l,c,o;return(0,Je.Z)().wrap((function(u){for(;;)switch(u.prev=u.next){case 0:n=(0,jt.xh)(t.values,(function(e){return new Set(e.map((function(e){return e.set})))})),i=(0,vt.Z)(e),u.prev=2,i.s();case 4:if((a=i.n()).done){u.next=19;break}s=a.value,l=function(){var e=(0,r.Z)(o[c],2),t=e[0],i=e[1],a=n[t];switch(i.kind){case"required":if((0,ce.Z)(i.sets).every((function(e){return!a.has(e)})))return"continue|filter_loop";break;case"exclude":if((0,ce.Z)(a).every((function(e){return i.sets.has(e)})))return"continue|filter_loop"}},c=0,o=Object.entries(s);case 8:if(!(c<o.length)){u.next=15;break}if("continue|filter_loop"!==l()){u.next=12;break}return u.abrupt("continue",17);case 12:c++,u.next=8;break;case 15:return u.next=17,s;case 17:u.next=4;break;case 19:u.next=24;break;case 21:u.prev=21,u.t0=u.catch(2),i.e(u.t0);case 24:return u.prev=24,i.f(),u.finish(24);case 27:case"end":return u.stop()}}),bt,null,[[2,21,24,27]])}function zt(e){return new Set(null!==e&&void 0!==e&&e.includes(2)?e.includes(4)?[0,1]:[0,1,4,5]:null!==e&&void 0!==e&&e.includes(4)?[0,1,2,3]:[0,1,2,3,4,5])}function _t(e,t){var n,i,a,s,l,c,o,u,d,x,f,h,p,m,j,Z;return(0,Je.Z)().wrap((function(v){for(;;)switch(v.prev=v.next){case 0:for(p=function(e){var t,r,a,s,l,c,o,u,d,p,m;return(0,Je.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:m=function(e){var t,n,a,s,c,o,u,d,p,j,Z,v,g,y;return(0,Je.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:t=l.length-e,n=[],a=[],s=[],c=0,o=(0,vt.Z)(i),r.prev=3,d=function(){var e=u.value,r=h[e],i=f[e];if(!r)return"continue";(0,jt.w6)(1,t).every((function(e){return!r.has(i+e)}))?s.push(e):r.has(i)?(0,jt.w6)(0,t).some((function(e){return!r.has(i+e)}))&&n.push(e):(c+=(0,ce.Z)(r).find((function(e){return e>i}))-i,a.push(e))},o.s();case 6:if((u=o.n()).done){r.next=12;break}if("continue"!==d()){r.next=10;break}return r.abrupt("continue",10);case 10:r.next=6;break;case 12:r.next=17;break;case 14:r.prev=14,r.t0=r.catch(3),o.e(r.t0);case 17:return r.prev=17,o.f(),r.finish(17);case 20:if(!(c>t)){r.next=22;break}return r.abrupt("return");case 22:if(e!==l.length){r.next=26;break}return r.next=25,(0,fe.Z)({},x);case 25:return r.abrupt("return");case 26:if(c!==t){r.next=47;break}p=(0,vt.Z)(a),r.prev=28,p.s();case 30:if((j=p.n()).done){r.next=38;break}return Z=j.value,f[Z]++,x[M.eV[l[e]]]={kind:"required",sets:new Set([Z])},r.delegateYield(m(e+1),"t1",35);case 35:f[Z]--;case 36:r.next=30;break;case 38:r.next=43;break;case 40:r.prev=40,r.t2=r.catch(28),p.e(r.t2);case 43:return r.prev=43,p.f(),r.finish(43);case 46:return r.abrupt("return");case 47:v=0,g=[].concat(n,a);case 48:if(!(v<g.length)){r.next=57;break}return y=g[v],f[y]++,x[M.eV[l[e]]]={kind:"required",sets:new Set([y])},r.delegateYield(m(e+1),"t3",53);case 53:f[y]--;case 54:v++,r.next=48;break;case 57:return x[M.eV[l[e]]]={kind:"exclude",sets:new Set([].concat(a,s,n))},r.delegateYield(m(e+1),"t4",59);case 59:case"end":return r.stop()}}),r,null,[[3,14,17,20],[28,40,43,46]])},p=function(e){var n,r,l;return(0,Je.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e!==s.length){t.next=3;break}return t.delegateYield(m(0),"t0",2);case 2:return t.abrupt("return",t.t0);case 3:n=(0,vt.Z)(i),t.prev=4,l=(0,Je.Z)().mark((function t(){var n,i,l,c,o;return(0,Je.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.value,!a.has(n)){t.next=3;break}return t.abrupt("return","continue");case 3:if(i=s[e].length,l=h[n],c=0,!l||l.has(i)){t.next=9;break}if(!((c=(null!==(o=(0,jt.w6)(i+1,5).find((function(e){return l.has(e)})))&&void 0!==o?o:6)-i)>d)){t.next=9;break}return t.abrupt("return","continue");case 9:return a.add(n),f[n]=s[e].length,s[e].forEach((function(e){return x[M.eV[e]]={kind:"required",sets:new Set([n])}})),d-=c,t.delegateYield(p(e+1),"t0",14);case 14:d+=c,f[n]=0,a.delete(n);case 17:case"end":return t.stop()}}),t)})),n.s();case 7:if((r=n.n()).done){t.next=14;break}return t.delegateYield(l(),"t1",9);case 9:if("continue"!==t.t1){t.next=12;break}return t.abrupt("continue",12);case 12:t.next=7;break;case 14:t.next=19;break;case 16:t.prev=16,t.t2=t.catch(4),n.e(t.t2);case 19:return t.prev=19,n.f(),t.finish(19);case 22:case"end":return t.stop()}}),t,null,[[4,16,19,22]])},t=(0,Je.Z)().mark(p),r=(0,Je.Z)().mark(m),a=new Set,s=[],l=[],c=(0,vt.Z)(e);try{for(c.s();!(o=c.n()).done;)u=o.value,s.push([]),5===u?l.push(s.length-1):s[u].push(s.length-1)}catch(j){c.e(j)}finally{c.f()}return s=s.filter((function(e){return e.length})).sort((function(e,t){return t.length-e.length})),d=l.length,n.delegateYield(p(0),"t0",10);case 10:case"end":return n.stop()}}),n)},c=function(e,t){if(!(0,jt.w6)(t+1,4).some((function(t){return 5!==e[t]})))return(e=(0,ce.Z)(e))[t]=5,e.reduce((function(e,t){return 6*e+t}),0)},l=function(e,t,n){if(5!==e.length){var r,i=(0,vt.Z)(t);try{var c=function(){var i=r.value;l([].concat((0,ce.Z)(e),[i]),t,n.filter((function(e){return e!==i})))};for(i.s();!(r=i.n()).done;)c()}catch(o){i.e(o)}finally{i.f()}l([].concat((0,ce.Z)(e),[e.length]),new Set([].concat((0,ce.Z)(t),[e.length])),[].concat((0,ce.Z)(n),[e.length]))}else a.has(n.length)&&s.push(e)},n=(0,Je.Z)().mark(p),i=(0,ce.Z)(new Set(t)),a=zt(e.rainbow),s=[],l([0],new Set([0]),[0]),o=function(e){var t,n=new Map,i=(0,vt.Z)(s);try{for(i.s();!(t=i.n()).done;){var a,l=t.value,o=c(l,e);void 0!==o&&n.set(o,(null!==(a=n.get(o))&&void 0!==a?a:new Set(l.slice(0,e)).size+1)-1)}}catch(f){i.e(f)}finally{i.f()}var u,d=(0,vt.Z)(n.entries());try{var x=function(){var t=(0,r.Z)(u.value,2),n=t[0];if(0===t[1]){var i=(0,ce.Z)(s.find((function(t){return c(t,e)===n})));i[e]=5,s=s.filter((function(t){return c(t,e)!==n})),s.push(i)}};for(d.s();!(u=d.n()).done;)x()}catch(f){d.e(f)}finally{d.f()}},u=4;u>=0;u--)o(u);d={kind:"exclude",sets:new Set},x=(0,jt.O)(M.eV,(function(e){return d})),f=(0,fe.Z)((0,fe.Z)({},(0,jt.xh)(e,(function(e){return 0}))),(0,jt.O)(i,(function(e){return 0}))),h=(0,jt.xh)(e,zt),m=(0,vt.Z)(s),v.prev=14,m.s();case 16:if((j=m.n()).done){v.next=21;break}return Z=j.value,v.delegateYield(p(Z),"t0",19);case 19:v.next=16;break;case 21:v.next=26;break;case 23:v.prev=23,v.t1=v.catch(14),m.e(v.t1);case 26:return v.prev=26,m.f(),v.finish(26);case 29:case"end":return v.stop()}}),wt,null,[[14,23,26,29]])}var Tt=n(53174),Gt=n(54483),Nt=n(16614),qt=n(76899),Lt=n(31148),Wt=n(37503);function Bt(e){var t,n=e.setKey,r=e.setNumKey,i=e.hideHeader,a=void 0!==i&&i,s=e.conditionalsOnly,l=void 0!==s&&s,c=(0,D.Z)((function(){return Lt.y.get(n)}),[n]);if(!c)return null;var o=l?null===(t=c.setEffectDocument(r))||void 0===t?void 0:t.filter((function(e){return"states"in e})):c.setEffectDocument(r);return(0,N.jsx)(d.Z,{display:"flex",flexDirection:"column",children:o?(0,N.jsx)(Wt.Z,{sections:o,hideHeader:a}):null})}var Ft,Vt,Ht,Ut,$t,Yt,Jt,Xt,Qt,en,tn,nn,rn,an,sn,ln,cn=n(95614),on=n(55221),un=n(10157),dn=n(66624),xn=n(18327);function fn(e){var t=(0,j.useContext)(dt.t).database,n=(0,j.useState)((function(){return t.buildSettings.get(e)})),i=(0,r.Z)(n,2),a=i[0],s=i[1];return(0,j.useEffect)((function(){return s(t.buildSettings.get(e))}),[t,e]),(0,j.useEffect)((function(){return t.buildSettings.follow(e,s)}),[e,s,t]),{buildSetting:a,buildSettingDispatch:(0,j.useCallback)((function(n){return e&&t.buildSettings.set(e,n)}),[e,t])}}function hn(e){var t,n,i=e.disabled,a=(0,Z.$)(["page_character","sheet"]).t,s=(0,j.useContext)(S.R),l=(0,j.useContext)(dt.t).database,c=(0,j.useContext)(C.K),o=c.character,u=o.key,x=o.conditional,h=c.characterDispatch,p=fn(u),v=p.buildSetting.artSetExclusion,g=p.buildSettingDispatch,k=(0,j.useState)(!1),P=(0,r.Z)(k,2),K=P[0],O=P[1],E=(0,j.useCallback)((function(){return O(!0)}),[O]),A=(0,j.useCallback)((function(){return O(!1)}),[O]),I=(0,D.Z)((function(){return Lt.y.getAll}),[]),R=(0,j.useMemo)((function(){return I?Object.entries(Lt.y.setKeysByRarities(I)).reverse().flatMap((function(e){return(0,r.Z)(e,2)[1]})).filter((function(e){return!e.includes("Prayers")})):[]}),[I]),z=(0,pt.Z)(),_=(0,r.Z)(z,2),T=_[0],G=_[1];(0,j.useEffect)((function(){return l.arts.followAny(G)}),[l,G]);var q=(0,j.useMemo)((function(){var e=Object.fromEntries(R.map((function(e){return[e,Object.fromEntries(M.eV.map((function(e){return[e,0]})))]})));return l.arts.values.map((function(t){return e[t.setKey]&&e[t.setKey][t.slotKey]++})),T&&e}),[T,l,R]),L=!(null!==(t=v.rainbow)&&void 0!==t&&t.includes(2)),W=!(null!==(n=v.rainbow)&&void 0!==n&&n.includes(4)),F=(0,j.useMemo)((function(){return{allow2:R.filter((function(e){var t;return!(null!==(t=v[e])&&void 0!==t&&t.includes(2))})).length,allow4:R.filter((function(e){var t;return!(null!==(t=v[e])&&void 0!==t&&t.includes(4))})).length,exclude2:R.filter((function(e){var t;return null===(t=v[e])||void 0===t?void 0:t.includes(2)})).length,exclude4:R.filter((function(e){var t;return null===(t=v[e])||void 0===t?void 0:t.includes(4)})).length}}),[R,v]),V=F.allow2,U=F.allow4,$=F.exclude2,Y=F.exclude4,X=(0,j.useMemo)((function(){return Object.keys(x).filter((function(e){return M.q2.includes(e)&&0!==Object.keys(x[e]).length})).length}),[x]),te=(0,j.useMemo)((function(){return(0,fe.Z)((0,fe.Z)({},s),{},{data:new xn.w((0,fe.Z)((0,fe.Z)({},s.data.data[0]),{},{artSet:(0,jt.O)(M.q2,(function(e){return(0,yt.a9)(4)}))}),void 0)})}),[s]),ne=(0,j.useCallback)((function(){var e=Object.fromEntries(Object.entries(x).filter((function(e){var t=(0,r.Z)(e,2),n=t[0];t[1];return!M.q2.includes(n)})));h({conditional:e})}),[x,h]),re=(0,j.useCallback)((function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=(0,jt.I8)(v);R.forEach((function(r){var i;t?n[r]=[].concat((0,ce.Z)(null!==(i=n[r])&&void 0!==i?i:[]),[e]):n[r]&&(n[r]=n[r].filter((function(t){return t!==e})))})),g({artSetExclusion:n})}),[R,v,g]);return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(b.Z,{sx:{display:"flex"},children:[(0,N.jsxs)(f.Z,{sx:{flexGrow:1},children:[(0,N.jsx)(H.Z,{children:(0,N.jsx)("strong",{children:a(Ft||(Ft=(0,Ye.Z)(["tabOptimize.artSetConfig.title"])))})}),(0,N.jsxs)(oe.Z,{spacing:1,children:[(0,N.jsxs)(H.Z,{children:[a(Vt||(Vt=(0,Ye.Z)(["tabOptimize.artSetConfig.setEffCond"])))," ",(0,N.jsxs)(ee.Z,{color:X?"success":"secondary",children:[X," ",a("tabOptimize.artSetConfig.enabled")]})]}),(0,N.jsxs)(H.Z,{children:[a(Ht||(Ht=(0,Ye.Z)(["sheet:2set"])))," ",(0,N.jsxs)(ee.Z,{color:"success",children:[V," ",(0,N.jsx)(Gt.G,{icon:Tt.Stf,className:"fa-fw"})," ",a("tabOptimize.artSetConfig.allowed")]}),!!$&&" / ",!!$&&(0,N.jsxs)(ee.Z,{color:"secondary",children:[$," ",(0,N.jsx)(Gt.G,{icon:Tt.gPx,className:"fa-fw"})," ",a("tabOptimize.artSetConfig.excluded")]})]}),(0,N.jsxs)(H.Z,{children:[a(Ut||(Ut=(0,Ye.Z)(["sheet:4set"])))," ",(0,N.jsxs)(ee.Z,{color:"success",children:[U," ",(0,N.jsx)(Gt.G,{icon:Tt.Stf,className:"fa-fw"})," ",a("tabOptimize.artSetConfig.allowed")]}),!!Y&&" / ",!!Y&&(0,N.jsxs)(ee.Z,{color:"secondary",children:[Y," ",(0,N.jsx)(Gt.G,{icon:Tt.gPx,className:"fa-fw"})," ",a("tabOptimize.artSetConfig.excluded")]})]}),(0,N.jsxs)(H.Z,{children:[a($t||($t=(0,Ye.Z)(["tabOptimize.artSetConfig.2rainbow"])))," ",(0,N.jsxs)(ee.Z,{color:L?"success":"secondary",children:[(0,N.jsx)(Gt.G,{icon:L?Tt.Stf:Tt.gPx,className:"fa-fw"})," ",L?a("tabOptimize.artSetConfig.allowed"):"Excluded"]})]}),(0,N.jsxs)(H.Z,{children:[a(Yt||(Yt=(0,Ye.Z)(["tabOptimize.artSetConfig.4rainbow"])))," ",(0,N.jsxs)(ee.Z,{color:W?"success":"secondary",children:[(0,N.jsx)(Gt.G,{icon:W?Tt.Stf:Tt.gPx,className:"fa-fw"})," ",W?a("tabOptimize.artSetConfig.allowed"):"Excluded"]})]})]})]}),(0,N.jsx)(m.Z,{onClick:E,disabled:i,color:"info",sx:{borderRadius:0},children:(0,N.jsx)(Nt.Z,{})})]}),I&&(0,N.jsx)(Q.Z,{open:K,onClose:A,children:(0,N.jsxs)(y.Z,{children:[(0,N.jsxs)(f.Z,{sx:{display:"flex",gap:1,justifyContent:"space-between"},children:[(0,N.jsx)(H.Z,{variant:"h6",children:a(Jt||(Jt=(0,Ye.Z)(["tabOptimize.artSetConfig.title"])))}),(0,N.jsx)(w.Z,{onClick:A})]}),(0,N.jsx)(B.Z,{}),(0,N.jsxs)(f.Z,{children:[(0,N.jsx)(b.Z,{sx:{mb:1},children:(0,N.jsxs)(f.Z,{children:[(0,N.jsxs)(d.Z,{display:"flex",gap:1,children:[(0,N.jsx)(H.Z,{children:(0,N.jsx)("strong",{children:a(Xt||(Xt=(0,Ye.Z)(["tabOptimize.artSetConfig.modal.setCond.title"])))})}),(0,N.jsx)(H.Z,{sx:{flexGrow:1},children:(0,N.jsxs)(ee.Z,{color:X?"success":"secondary",children:[X," ",a("tabOptimize.artSetConfig.selected")]})}),(0,N.jsx)(m.Z,{size:"small",onClick:ne,color:"error",startIcon:(0,N.jsx)(Ce.Z,{}),children:a(Qt||(Qt=(0,Ye.Z)(["tabOptimize.artSetConfig.modal.setCond.reset"])))})]}),(0,N.jsx)(H.Z,{children:a(en||(en=(0,Ye.Z)(["tabOptimize.artSetConfig.modal.setCond.text"])))})]})}),(0,N.jsx)(b.Z,{sx:{mb:1},children:(0,N.jsxs)(f.Z,{children:[(0,N.jsx)(H.Z,{sx:{flexGrow:1},children:(0,N.jsx)("strong",{children:(0,N.jsxs)(qt.c,{t:a,i18nKey:"tabOptimize.artSetConfig.modal.ArtSetFilter.title",children:["Artifact Sets ",(0,N.jsxs)(J.Z,{color:"success",children:["Allowed",(0,N.jsx)(Gt.G,{icon:Tt.Stf,className:"fa-fw"})]})," / ",(0,N.jsxs)(J.Z,{color:"secondary",variant:"light",children:["Excluded",(0,N.jsx)(Gt.G,{icon:Tt.gPx,className:"fa-fw"})]})]})})}),(0,N.jsx)(H.Z,{children:(0,N.jsxs)(qt.c,{t:a,i18nKey:"tabOptimize.artSetConfig.modal.ArtSetFilter.intro",children:["You can allow/exclude which sets you want the builder to consider. In the following examples, ",(0,N.jsx)("strong",{children:"A"})," is on-set, and ",(0,N.jsx)("strong",{children:"R"})," is rainbow(off-set)"]})}),(0,N.jsx)(H.Z,{children:(0,N.jsxs)(qt.c,{t:a,i18nKey:"tabOptimize.artSetConfig.modal.ArtSetFilter.2set",children:[(0,N.jsx)("strong",{children:(0,N.jsxs)(J.Z,{color:"secondary",variant:"light",children:["Excluding",(0,N.jsx)(Gt.G,{icon:Tt.gPx,className:"fa-fw"})," 2-Set"]})})," would exclude 2-Set builds: ",(0,N.jsxs)("strong",{children:[(0,N.jsx)(J.Z,{color:"secondary",variant:"light",children:"AA"}),"RRR"]})," and ",(0,N.jsxs)("strong",{children:[(0,N.jsx)(J.Z,{color:"secondary",variant:"light",children:"AAA"}),"RR"]}),"."]})}),(0,N.jsx)(H.Z,{children:(0,N.jsxs)(qt.c,{t:a,i18nKey:"tabOptimize.artSetConfig.modal.ArtSetFilter.4set",children:[(0,N.jsx)("strong",{children:(0,N.jsxs)(J.Z,{color:"secondary",variant:"light",children:["Excluding",(0,N.jsx)(Gt.G,{icon:Tt.gPx,className:"fa-fw"})," 4-Set"]})})," would exclude 4-Set builds: ",(0,N.jsxs)("strong",{children:[(0,N.jsx)(J.Z,{color:"secondary",variant:"light",children:"AAAA"}),"R"]})," and ",(0,N.jsx)("strong",{children:(0,N.jsx)(J.Z,{color:"secondary",variant:"light",children:"AAAAA"})}),"."]})}),(0,N.jsx)(H.Z,{children:(0,N.jsxs)(qt.c,{t:a,i18nKey:"tabOptimize.artSetConfig.modal.ArtSetFilter.2rain",children:[(0,N.jsx)("strong",{children:(0,N.jsxs)(J.Z,{color:"secondary",variant:"light",children:["Excluding",(0,N.jsx)(Gt.G,{icon:Tt.gPx,className:"fa-fw"})," 3-Rainbow"]})})," would exclude 2-Set + 3-Rainbow builds: ",(0,N.jsxs)("strong",{children:["AA",(0,N.jsx)(J.Z,{color:"secondary",variant:"light",children:"RRR"})]})," and ",(0,N.jsxs)("strong",{children:["AAA",(0,N.jsx)(J.Z,{color:"secondary",variant:"light",children:"RR"})]}),"."]})}),(0,N.jsx)(H.Z,{children:(0,N.jsxs)(qt.c,{t:a,i18nKey:"tabOptimize.artSetConfig.modal.ArtSetFilter.4rain",children:[(0,N.jsx)("strong",{children:(0,N.jsxs)(J.Z,{color:"secondary",variant:"light",children:["Excluding",(0,N.jsx)(Gt.G,{icon:Tt.gPx,className:"fa-fw"})," 5-Rainbow"]})})," would exclude full 5-Rainbow builds: ",(0,N.jsx)("strong",{children:(0,N.jsx)(J.Z,{color:"secondary",variant:"light",children:"RRRRR"})}),"."]})})]})}),(0,N.jsxs)(ue.ZP,{container:!0,columns:{xs:2,lg:3},sx:{mb:1},spacing:1,children:[(0,N.jsx)(ue.ZP,{item:!0,xs:1,children:(0,N.jsx)(pn,{setNum:2,numAllow:V,numExclude:$,setAllExclusion:re})}),(0,N.jsx)(ue.ZP,{item:!0,xs:1,children:(0,N.jsx)(pn,{setNum:4,numAllow:U,numExclude:Y,setAllExclusion:re})}),(0,N.jsx)(ue.ZP,{item:!0,xs:1,children:(0,N.jsx)(b.Z,{children:(0,N.jsxs)(f.Z,{children:[(0,N.jsx)(H.Z,{gutterBottom:!0,children:(0,N.jsx)("strong",{children:(0,N.jsxs)(qt.c,{t:a,i18nKey:"tabOptimize.artSetConfig.alExRainbow",children:[(0,N.jsxs)(J.Z,{color:"success",children:["Allow ",(0,N.jsx)(Gt.G,{icon:Tt.Stf,className:"fa-fw"})]})," / ",(0,N.jsxs)(J.Z,{color:"secondary",variant:"light",children:["Exclude ",(0,N.jsx)(Gt.G,{icon:Tt.gPx,className:"fa-fw"})]})," Rainbow Builds"]})})}),(0,N.jsxs)(d.Z,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,N.jsx)(m.Z,{fullWidth:!0,onClick:function(){return g({type:"artSetExclusion",setKey:"rainbow",num:2})},color:L?"success":"secondary",startIcon:L?(0,N.jsx)(he.Z,{}):(0,N.jsx)(pe.Z,{}),endIcon:(0,N.jsx)(Gt.G,{icon:L?Tt.Stf:Tt.gPx,className:"fa-fw"}),children:a(tn||(tn=(0,Ye.Z)(["tabOptimize.artSetConfig.2rainbow"])))}),(0,N.jsx)(m.Z,{fullWidth:!0,onClick:function(){return g({type:"artSetExclusion",setKey:"rainbow",num:4})},color:W?"success":"secondary",startIcon:W?(0,N.jsx)(he.Z,{}):(0,N.jsx)(pe.Z,{}),endIcon:(0,N.jsx)(Gt.G,{icon:W?Tt.Stf:Tt.gPx,className:"fa-fw"}),children:a(nn||(nn=(0,Ye.Z)(["tabOptimize.artSetConfig.4rainbow"])))})]})]})})})]}),(0,N.jsx)(ue.ZP,{container:!0,spacing:1,columns:{xs:2,lg:3},children:R.map((function(e){return(0,N.jsx)(mn,{setKey:e,sheet:I[e],fakeDataContextObj:te,slotCount:q[e]},e)}))})]}),(0,N.jsx)(B.Z,{}),(0,N.jsx)(f.Z,{sx:{py:1},children:(0,N.jsx)(w.Z,{large:!0,onClick:A})})]})})]})}function pn(e){var t=e.numAllow,n=e.numExclude,r=e.setNum,i=e.setAllExclusion,a=(0,Z.$)(["page_character","sheet"]).t;return(0,N.jsx)(b.Z,{children:(0,N.jsxs)(f.Z,{children:[(0,N.jsxs)(H.Z,{gutterBottom:!0,children:[(0,N.jsx)("strong",{children:a("sheet:".concat(r,"set"))})," ",(0,N.jsxs)(ee.Z,{color:"success",children:[t," ",(0,N.jsx)(Gt.G,{icon:Tt.Stf,className:"fa-fw"})," ",a("tabOptimize.artSetConfig.allowed")]}),!!n&&" / ",!!n&&(0,N.jsxs)(ee.Z,{color:"secondary",children:[n," ",(0,N.jsx)(Gt.G,{icon:Tt.gPx,className:"fa-fw"})," ",a("tabOptimize.artSetConfig.excluded")]})]}),(0,N.jsxs)(d.Z,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,N.jsx)(m.Z,{fullWidth:!0,disabled:!n,onClick:function(){return i(r,!1)},color:"success",startIcon:(0,N.jsx)(Gt.G,{icon:Tt.Stf,className:"fa-fw"}),children:a("tabOptimize.artSetConfig.allowAll".concat(r,"set"))}),(0,N.jsx)(m.Z,{fullWidth:!0,disabled:!t,onClick:function(){return i(r,!0)},color:"secondary",startIcon:(0,N.jsx)(Gt.G,{icon:Tt.gPx,className:"fa-fw"}),children:a("tabOptimize.artSetConfig.excludeAll".concat(r,"set"))})]})]})})}function mn(e){var t,n,i,a=e.sheet,s=e.setKey,l=e.fakeDataContextObj,c=e.slotCount,o=(0,Z.$)("sheet").t,u=fn((0,j.useContext)(C.K).character.key),x=u.buildSetting,h=u.buildSettingDispatch,p=null!==(t=null===x||void 0===x||null===(n=x.artSetExclusion)||void 0===n?void 0:n[s])&&void 0!==t?t:[],v=!p.includes(4),g=(0,j.useMemo)((function(){return Object.values(c).reduce((function(e,t){return e+(t?1:0)}),0)}),[c]),y=(0,j.useMemo)((function(){return!v||g<4?[]:Object.keys(a.setEffects).filter((function(e){var t;return null===(t=a.setEffects[e])||void 0===t?void 0:t.document.some((function(e){return"states"in e}))}))}),[a.setEffects,v,g]),w=p.includes(2),k=p.includes(4);return g<2?null:(0,N.jsx)(ue.ZP,{item:!0,xs:1,children:(0,N.jsxs)(b.Z,{sx:{height:"100%"},children:[(0,N.jsxs)(d.Z,{className:"grad-".concat(a.rarity[0],"star"),width:"100%",sx:{display:"flex"},children:[(0,N.jsx)(d.Z,{component:"img",src:a.defIconSrc,sx:{height:100,width:"auto",mx:-1}}),(0,N.jsxs)(d.Z,{sx:{flexGrow:1,px:1,display:"flex",flexDirection:"column",justifyContent:"center"},children:[(0,N.jsx)(H.Z,{variant:"h6",children:null!==(i=a.name)&&void 0!==i?i:""}),(0,N.jsxs)(d.Z,{display:"flex",gap:1,children:[(0,N.jsx)(H.Z,{variant:"subtitle1",children:a.rarity.map((function(e,t){return(0,N.jsxs)("span",{children:[e," ",(0,N.jsx)(un.q,{stars:1})," ",t<a.rarity.length-1?"/ ":null]},e)}))}),(0,N.jsx)(on.Z,{title:(0,N.jsxs)(d.Z,{children:[(0,N.jsx)(H.Z,{children:(0,N.jsx)(ee.Z,{color:"success",children:o(rn||(rn=(0,Ye.Z)(["2set"])))})}),(0,N.jsx)(H.Z,{children:(0,N.jsx)(dn.v,{ns:"artifact_".concat(s,"_gen"),key18:"setEffects.2"})}),(0,N.jsxs)(d.Z,{paddingTop:2,sx:{opacity:p.includes(4)?.6:1},children:[(0,N.jsx)(H.Z,{children:(0,N.jsx)(ee.Z,{color:"success",children:o(an||(an=(0,Ye.Z)(["4set"])))})}),(0,N.jsx)(H.Z,{children:(0,N.jsx)(dn.v,{ns:"artifact_".concat(s,"_gen"),key18:"setEffects.4"})})]})]})})]}),(0,N.jsx)(d.Z,{sx:{display:"flex",gap:1},children:Object.entries(c).map((function(e){var t=(0,r.Z)(e,2),n=t[0],i=t[1];return(0,N.jsx)(H.Z,{sx:{flexGrow:1},variant:"subtitle2",children:(0,N.jsxs)(ee.Z,{sx:{width:"100%"},color:i?"primary":"secondary",children:[(0,cn.Ir)(n),i]})},n)}))})]})]}),(0,N.jsxs)(Se.Z,{sx:{".MuiButton-root":{borderRadius:0}},fullWidth:!0,children:[g>=2&&(0,N.jsx)(m.Z,{startIcon:w?(0,N.jsx)(pe.Z,{}):(0,N.jsx)(he.Z,{}),onClick:function(){return h({type:"artSetExclusion",setKey:s,num:2})},color:w?"secondary":"success",endIcon:(0,N.jsx)(Gt.G,{icon:w?Tt.gPx:Tt.Stf,className:"fa-fw"}),children:o(sn||(sn=(0,Ye.Z)(["2set"])))}),g>=4&&(0,N.jsx)(m.Z,{startIcon:k?(0,N.jsx)(pe.Z,{}):(0,N.jsx)(he.Z,{}),onClick:function(){return h({type:"artSetExclusion",setKey:s,num:4})},color:k?"secondary":"success",endIcon:(0,N.jsx)(Gt.G,{icon:k?Tt.gPx:Tt.Stf,className:"fa-fw"}),children:o(ln||(ln=(0,Ye.Z)(["4set"])))})]}),!!y.length&&(0,N.jsx)(S.R.Provider,{value:l,children:(0,N.jsx)(f.Z,{sx:{display:"flex",flexDirection:"column",gap:2},children:y.map((function(e){return(0,N.jsx)(Bt,{setKey:s,setNumKey:parseInt(e),hideHeader:!0,conditionalsOnly:!0},e)}))})})]})},s)}var jn=[0,4,8,12,16,20];function Zn(e){var t=e.mainStatAssumptionLevel,n=void 0===t?0:t,r=e.setmainStatAssumptionLevel,i=e.disabled,a=(0,Z.$)("page_character").t;return(0,N.jsx)(ct.Z,{fullWidth:!0,color:n?"success":"primary",disabled:i,title:n?a("tabOptimize.assumptionLvl.lvl",{lvl:n}):a("tabOptimize.assumptionLvl.no"),children:jn.map((function(e){return(0,N.jsx)(nt.Z,{onClick:function(){return r(e)},children:e?a("tabOptimize.assumptionLvl.lvl",{lvl:e}):a("tabOptimize.assumptionLvl.no")},e)}))})}function vn(){var e=(0,j.useContext)(C.K).character.bonusStats,t=(0,j.useContext)(S.R).data,n=Object.keys(e);if(!n.length)return null;var r=n.map((function(e){return t.get(Ze.ri.customBonus[e])}));return(0,N.jsxs)(b.Z,{children:[(0,N.jsx)(f.Z,{children:(0,N.jsx)(H.Z,{children:"Bonus Stats"})}),(0,N.jsx)(B.Z,{}),(0,N.jsx)(f.Z,{children:r.map((function(e){return(0,N.jsx)(Me.JW,{node:e},e.info.key)}))})]})}var gn=n(57482),yn=n(52771),bn=(0,ge.ZP)("strong")({fontFamily:"monospace"}),wn=(0,ge.ZP)(gn.Z)((function(e){e.theme;return{height:10,borderRadius:5}}));function kn(e){var t=e.status,n=t.type,r=t.tested,i=(t.failed,t.skipped),a=t.total,s=t.startTime,l=t.finishTime,c=e.characterName,o=isFinite(a),u="inactive"!==n,d=a-i,x=(0,N.jsx)(bn,{children:r.toLocaleString()}),f=(0,N.jsx)(bn,{children:d.toLocaleString()}),h=!!i&&(0,N.jsxs)("span",{children:["(",(0,N.jsx)("b",{children:(0,N.jsx)(bn,{children:i.toLocaleString()})})," skipped)"]}),p=(0,N.jsx)(bn,{children:(0,yn.e6)(Math.round((null!==l&&void 0!==l?l:performance.now())-(null!==s&&void 0!==s?s:NaN)))}),m="",j="",Z=void 0;if(u)Z=100*r/d,m=(0,N.jsxs)(H.Z,{children:["Generating and testing ",x,o?(0,N.jsxs)(N.Fragment,{children:["/",f]}):void 0," build configurations against the criteria for ",(0,N.jsx)("b",{children:c}),". ",h]}),j=(0,N.jsxs)(H.Z,{children:["Time elapsed: ",p]});else{if(!(r+i))return null;Z=100,m=(0,N.jsxs)(H.Z,{children:["Generated and tested ",x," Build configurations against the criteria for ",(0,N.jsx)("b",{children:c}),". ",h]}),j=(0,N.jsxs)(H.Z,{children:["Total duration: ",p]})}return(0,N.jsxs)(et.Z,{severity:"success",variant:"filled",sx:{"& .MuiAlert-message":{flexGrow:1}},children:[m,j,void 0!==Z&&(0,N.jsxs)(ue.ZP,{container:!0,spacing:1,alignItems:"center",children:[o&&(0,N.jsx)(ue.ZP,{item:!0,children:(0,N.jsx)(H.Z,{children:"".concat(Z.toFixed(1),"%")})}),(0,N.jsx)(ue.ZP,{item:!0,flexGrow:1,children:(0,N.jsx)(wn,{variant:o?"determinate":"indeterminate",value:Z,color:"primary"})})]})]})}var Cn=n(98268),Sn=n(63204),Pn=n(66647),Kn=n(13967),On=n(12065),En=n(10658),An=n(98620),Dn=n(63372),In=n(20005),Rn=n(87174),Mn=n(64929);function zn(e){var t,n,r=e.artifactId,i=e.slotKey,a=e.mainStatAssumptionLevel,s=void 0===a?0:a,l=e.showLocation,c=void 0!==l&&l,o=e.onClick,u=e.BGComponent,x=void 0===u?y.Z:u,f=(0,Dn.Z)(r),h=(0,D.Z)((function(){return Lt.y.get(null===f||void 0===f?void 0:f.setKey)}),[null===f||void 0===f?void 0:f.setKey]),p=(0,j.useCallback)((function(e){return(0,N.jsx)(Pn.Z,{onClick:o,sx:{height:"100%"},children:e})}),[o]),m=(0,Kn.Z)();if(!f)return(0,N.jsx)(x,{sx:{display:"flex",height:"100%",alignItems:"center",justifyContent:"center"},children:(0,N.jsx)(d.Z,{component:"img",src:En.Z.slot[i],sx:{width:"25%",height:"auto",opacity:.7}})});var Z=f.slotKey,v=f.rarity,g=f.level,b=f.mainStatKey,w=f.substats,k=f.location,C=Math.max(Math.min(s,4*v),g),S=ne.ZP.unit(b),P=M.Kj.find((function(e){return f.mainStatKey.includes(e)})),K=P?(0,On.Fq)(m.palette[P].main,.6):(0,On.Fq)(m.palette.secondary.main,.6);return(0,N.jsx)(x,{sx:{height:"100%"},children:(0,N.jsx)(In.Z,{condition:!!o,wrapper:p,children:(0,N.jsxs)(d.Z,{display:"flex",height:"100%",children:[(0,N.jsxs)(d.Z,{className:"grad-".concat(v,"star"),sx:{position:"relative",flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[(0,N.jsx)(Mn.Z,{art:f,children:(0,N.jsx)(d.Z,{component:"img",src:null!==(t=null===h||void 0===h?void 0:h.slotIcons[Z])&&void 0!==t?t:"",sx:{m:-1,maxHeight:"110%",maxWidth:"110%"}})}),(0,N.jsxs)(d.Z,{sx:{position:"absolute",width:"100%",height:"100%",p:.5,opacity:.85,display:"flex",justifyContent:"space-between",pointerEvents:"none"},children:[(0,N.jsx)(me.Z,{size:"small",label:(0,N.jsx)("strong",{children:" +".concat(g)}),color:An.ZP.levelVariant(g)}),c&&(0,N.jsx)(me.Z,{size:"small",label:(0,N.jsx)(Tn,{location:k}),color:"secondary",sx:{overflow:"visible",".MuiChip-label":{overflow:"visible"}}})]}),(0,N.jsx)(me.Z,{size:"small",sx:{position:"absolute",bottom:0,mb:1,backgroundColor:K},label:(0,N.jsxs)(H.Z,{sx:{display:"flex",gap:.5,px:1,zIndex:1},children:[(0,N.jsx)(st.Z,{placement:"top",title:(0,N.jsx)(H.Z,{children:(0,N.jsx)(Rn._,{statKey:b})}),disableInteractive:!0,children:(0,N.jsx)("span",{children:ke.Z[b]})}),(0,N.jsxs)(J.Z,{color:C!==g?"warning":void 0,children:[(0,ne.qs)(null!==(n=An.ZP.mainStatValue(b,v,C))&&void 0!==n?n:0,ne.ZP.unit(b)),S]})]})})]}),(0,N.jsx)(d.Z,{display:"flex",flexDirection:"column",justifyContent:"space-between",sx:{p:1},children:w.map((function(e,t){return(0,N.jsx)(_n,{stat:e},t+e.key)}))})]})})})}function _n(e){var t,n,r=e.stat;if(!r.value)return null;var i=null!==(t=null===(n=r.rolls)||void 0===n?void 0:n.length)&&void 0!==t?t:0,a="roll".concat((0,jt.uZ)(i,1,6)),s=ne.ZP.unit(r.key);return(0,N.jsx)(d.Z,{display:"flex",gap:1,alignContent:"center",children:(0,N.jsxs)(H.Z,{sx:{flexGrow:1,display:"flex",gap:.5},color:i?"".concat(a,".main"):"error.main",component:"span",children:[(0,N.jsx)(st.Z,{placement:"top",title:(0,N.jsx)(H.Z,{children:r.key&&(0,N.jsx)(Rn._,{statKey:r.key})}),disableInteractive:!0,children:(0,N.jsx)("span",{children:ke.Z[r.key]})}),(0,N.jsx)("span",{children:"".concat((0,ne.qs)(r.value,ne.ZP.unit(r.key))).concat(s)})]})})}function Tn(e){var t=e.location,n=(0,D.Z)((function(){return K.Z.get(null!==t&&void 0!==t?t:"")}),[t]);return n?(0,N.jsx)(st.Z,{placement:"right-end",title:(0,N.jsx)(H.Z,{children:n.name}),children:(0,N.jsx)(X.Z,{src:n.thumbImgSide,sx:{height:"3em",marginTop:"-1.5em",marginLeft:"-0.5em"}})}):(0,N.jsx)(Sn.Z,{})}var Gn=n(80616),Nn=n(16002);function qn(){var e=(0,j.useContext)(S.R).data,t=(0,j.useMemo)((function(){return(0,te.U)(e).filter((function(e){var t=(0,r.Z)(e,2)[1];return Object.values(t).some((function(e){return!e.isEmpty}))}))}),[e]);return(0,N.jsx)(xe.Z,{sx:{mr:-1,mb:-1},children:(0,N.jsx)(Nn.ZP,{columns:{xs:1,sm:2,md:3,xl:4},spacing:1,children:t.map((function(e){var t=(0,r.Z)(e,2),n=t[0],i=t[1];return(0,N.jsx)(Ln,{displayNs:i,sectionKey:n},n)}))})})}function Ln(e){var t=e.displayNs,n=e.sectionKey,i=(0,j.useContext)(ut),a=(0,j.useContext)(S.R),s=a.data,l=a.oldData,c=(0,D.Z)((function(){return(0,te.f)(s,n)}),[s,n]),o=(0,j.useMemo)((function(){return(0,jt.xh)(t,(function(e,t){return(0,yt.UF)(["display",n,t])}))}),[t,n]);if(!c)return(0,N.jsx)(y.Z,{});var u=c.title,d=c.icon,x=c.action;return(0,N.jsxs)(y.Z,{children:[(0,N.jsx)(Y.Z,{avatar:d&&(0,N.jsx)(X.Z,{size:2,sx:{m:-1},src:d}),title:u,action:x&&(0,N.jsx)(ee.Z,{children:x})}),(0,N.jsx)(B.Z,{}),(0,N.jsx)(Me.lD,{sx:{m:0},children:Object.entries(t).map((function(e){var t=(0,r.Z)(e,2),a=t[0],s=t[1];return(0,N.jsx)(Me.JW,{node:s,oldValue:l?l.get(o[a]).value:void 0,component:de.ZP,emphasize:JSON.stringify(i)===JSON.stringify([n,a])},a)}))})]})}var Wn=n(66218),Bn=n(74480),Fn=n(41717);function Vn(e){var t=e.weaponId,n=e.showLocation,r=void 0!==n&&n,i=e.onClick,a=e.BGComponent,s=void 0===a?y.Z:a,l=(0,Bn.Z)(t),c=(0,D.Z)((function(){return(null===l||void 0===l?void 0:l.key)&&Wn.Z.get(l.key)}),[null===l||void 0===l?void 0:l.key]),o=(0,j.useCallback)((function(e){return(0,N.jsx)(Pn.Z,{sx:{height:"100%"},onClick:i,children:e})}),[i]),u=(0,j.useMemo)((function(){return c&&l&&(0,xt.mP)([c.data,(0,xt.v0)(l)])}),[c,l]);if(!l||!c||!u)return(0,N.jsx)(s,{sx:{height:"100%"},children:(0,N.jsx)(x.Z,{variant:"rectangular",sx:{width:"100%",height:"100%"}})});var f=l.refinement,h=l.location;return(0,N.jsx)(s,{sx:{height:"100%"},children:(0,N.jsx)(In.Z,{condition:!!i,wrapper:o,children:(0,N.jsxs)(d.Z,{display:"flex",height:"100%",alignItems:"stretch",children:[(0,N.jsxs)(d.Z,{className:"grad-".concat(c.rarity,"star"),sx:{height:"100%",position:"relative",flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-end"},children:[(0,N.jsx)(Fn.Z,{sheet:c,children:(0,N.jsx)(d.Z,{component:"img",src:c.getImg(l.ascension),sx:{mx:-1,maxHeight:"100%",maxWidth:"100%"}})}),(0,N.jsxs)(d.Z,{sx:{position:"absolute",width:"100%",height:"100%",p:.5,opacity:.85,display:"flex",justifyContent:"space-between",pointerEvents:"none"},children:[(0,N.jsx)(me.Z,{size:"small",label:(0,N.jsx)("strong",{children:Wn.Z.getLevelString(l)}),color:"primary"}),r&&(0,N.jsx)(me.Z,{size:"small",label:(0,N.jsx)(Un,{location:h}),color:"secondary",sx:{overflow:"visible",".MuiChip-label":{overflow:"visible"}}})]}),(0,N.jsx)(d.Z,{sx:{position:"absolute",width:"100%",height:"100%",p:.5,opacity:.85,display:"flex",justifyContent:"flex-end",alignItems:"flex-end"},children:c.hasRefinement&&(0,N.jsx)(me.Z,{size:"small",color:"info",label:(0,N.jsxs)("strong",{children:["R",f]})})})]}),(0,N.jsxs)(d.Z,{display:"flex",flexDirection:"column",sx:{p:1},children:[(0,N.jsx)(Hn,{node:u.get(Ze.qH.weapon.main)}),(0,N.jsx)(Hn,{node:u.get(Ze.qH.weapon.sub)})]})]})})})}function Hn(e){var t=e.node;if(!t.info.key)return null;var n=(0,ne.EC)(t.value,t.unit,t.unit?void 0:0);return(0,N.jsx)(d.Z,{display:"flex",gap:1,alignContent:"center",children:(0,N.jsxs)(H.Z,{sx:{flexGrow:1,display:"flex",gap:1},component:"span",children:[(0,N.jsx)(st.Z,{placement:"top",title:(0,N.jsx)(H.Z,{children:t.info.key&&ne.ZP.getArtStr(t.info.key)}),disableInteractive:!0,children:(0,N.jsx)("span",{children:ke.Z[t.info.key]})}),(0,N.jsx)("span",{children:n})]})})}function Un(e){var t=e.location,n=(0,D.Z)((function(){return K.Z.get(null!==t&&void 0!==t?t:"")}),[t]);return n?(0,N.jsx)(st.Z,{placement:"right-end",title:(0,N.jsx)(H.Z,{children:n.name}),children:(0,N.jsx)(X.Z,{src:n.thumbImgSide,sx:{height:"3em",marginTop:"-1.5em",marginLeft:"-0.5em"}})}):(0,N.jsx)(Sn.Z,{})}var $n=n(72838);function Yn(e){var t=e.index,n=e.compareBuild,i=e.extraButtons,a=e.disabled,s=(0,j.useContext)(C.K).character,l=s.key,c=s.equippedArtifacts,o=fn(l).buildSetting.mainStatAssumptionLevel,u=(0,j.useContext)(dt.t).database,d=(0,j.useContext)(S.R),h=d.data,p=d.oldData,Z=(0,j.useState)(void 0),v=(0,r.Z)(Z,2),g=v[0],y=v[1],w=(0,j.useCallback)((function(){return y(void 0)}),[y]),k=(0,j.useCallback)((function(){if(window.confirm("Do you want to equip this build to this character?")){var e=Object.fromEntries(M.eV.map((function(e){return[e,h.get(Ze.ri.art[e].id).value]})));u.chars.equipArtifacts(l,e),u.weapons.set(h.get(Ze.ri.weapon.id).value,{location:l})}}),[l,h,u]),P=(0,j.useMemo)((function(){var e=(0,fe.Z)({},d);return n||(e.oldData=void 0),e}),[d,n]),K=(0,j.useMemo)((function(){return M.eV.map((function(e){return(0,N.jsx)(ue.ZP,{item:!0,xs:1,children:(0,N.jsx)(zn,{showLocation:!0,slotKey:e,artifactId:h.get(Ze.ri.art[e].id).value,mainStatAssumptionLevel:o,onClick:function(){var t=c[e],n=h.get(Ze.ri.art[e].id).value;y({oldId:t!==n?t:void 0,newId:n})}})},e)}))}),[h,y,c,o]);if(!p)return null;var O=M.eV.every((function(e){return h.get(Ze.ri.art[e].id).value===p.get(Ze.ri.art[e].id).value}))&&h.get(Ze.ri.weapon.id).value===p.get(Ze.ri.weapon.id).value;return(0,N.jsx)(b.Z,{children:(0,N.jsxs)(j.Suspense,{fallback:(0,N.jsx)(x.Z,{variant:"rectangular",width:"100%",height:600}),children:[g&&(0,N.jsx)(Qn,{newOld:g,mainStatAssumptionLevel:o,onClose:w}),(0,N.jsxs)(f.Z,{children:[(0,N.jsxs)(xe.Z,{display:"flex",gap:1,sx:{pb:1},flexWrap:"wrap",children:[void 0!==t&&(0,N.jsx)(ee.Z,{color:"info",children:(0,N.jsx)(H.Z,{children:(0,N.jsxs)("strong",{children:["#",t+1,O?" (Equipped)":""]})})}),(0,N.jsx)(Jn,{currentlyEquipped:O}),(0,N.jsx)(xe.Z,{sx:{flexGrow:1,display:"flex",justifyContent:"flex-end"}}),(0,N.jsx)(m.Z,{size:"small",color:"success",onClick:k,disabled:a||O,children:"Equip Build"}),i]}),(0,N.jsxs)(ue.ZP,{container:!0,spacing:1,sx:{pb:1},columns:{xs:2,sm:3,md:4,lg:6},children:[(0,N.jsx)(ue.ZP,{item:!0,xs:1,children:(0,N.jsx)(Vn,{showLocation:!0,weaponId:h.get(Ze.ri.weapon.id).value})}),K]}),(0,N.jsx)(S.R.Provider,{value:P,children:(0,N.jsx)(qn,{})})]})]})})}function Jn(e){var t=e.currentlyEquipped,n=void 0!==t&&t,i=(0,j.useContext)(S.R).data,a={};return M.eV.forEach((function(e){var t=i.get(Ze.ri.art[e].set).value;t&&(a[t]?a[t].push(e):a[t]=[e])})),(0,N.jsx)(N.Fragment,{children:Object.entries(a).sort((function(e,t){var n=(0,r.Z)(e,2),i=(n[0],n[1]),a=(0,r.Z)(t,2);a[0];return a[1].length-i.length})).map((function(e){var t=(0,r.Z)(e,2),i=t[0],a=t[1];return(0,N.jsx)(Xn,{setKey:i,currentlyEquipped:n,slotarr:a},i)}))})}function Xn(e){var t,n=e.setKey,r=e.currentlyEquipped,i=void 0!==r&&r,a=e.slotarr,s=(0,D.Z)((function(){return Lt.y.get(n)}),[]);if(!s)return null;var l=a.length,c=Object.keys(s.setEffects).map((function(e){return parseInt(e)})).filter((function(e){return e<=l}));return(0,N.jsx)(xe.Z,{children:(0,N.jsx)(Gn.Z,{artifactSheet:s,numInSet:l,children:(0,N.jsx)(ee.Z,{color:i?"success":"primary",children:(0,N.jsxs)(H.Z,{children:[a.map((function(e){return(0,cn.Ir)(e)}))," ",null!==(t=s.name)&&void 0!==t?t:"",c.map((function(e){return(0,N.jsx)(ee.Z,{sx:{ml:.5},color:"success",children:e},e)}))]})})})})}function Qn(e){var t=e.newOld,n=t.newId,r=t.oldId,i=e.mainStatAssumptionLevel,a=e.onClose,s=(0,j.useContext)(dt.t).database,l=(0,j.useContext)(C.K).character.key,c=(0,j.useCallback)((function(){window.confirm("Do you want to equip this artifact to this character?")&&(s.arts.set(n,{location:l}),a())}),[n,s,l,a]);return(0,N.jsx)(Q.Z,{open:!!n,onClose:a,containerProps:{maxWidth:r?"md":"xs"},children:(0,N.jsx)(y.Z,{children:(0,N.jsxs)(f.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"stretch",gap:2,height:"100%"},children:[r&&(0,N.jsx)(xe.Z,{minWidth:320,children:(0,N.jsx)($n.Z,{artifactId:r,mainStatAssumptionLevel:i,canExclude:!0,canEquip:!0})}),r&&(0,N.jsx)(xe.Z,{display:"flex",flexGrow:1}),r&&(0,N.jsx)(xe.Z,{display:"flex",alignItems:"center",justifyContent:"center",children:(0,N.jsx)(m.Z,{onClick:c,sx:{display:"flex"},children:(0,N.jsx)(Cn.Z,{sx:{fontSize:40}})})}),r&&(0,N.jsx)(xe.Z,{display:"flex",flexGrow:1}),(0,N.jsx)(xe.Z,{minWidth:320,children:(0,N.jsx)($n.Z,{artifactId:n,mainStatAssumptionLevel:i,canExclude:!0,canEquip:!0})})]})})})}var er=n(94294),tr=n(72456),nr=n(40165),rr=n(20601),ir=n(37389),ar=n(82839),sr=n(90466),lr=n(12891),cr=n(42633),or=n(27281),ur=n(64694),dr=n(62066);function xr(e){var t=e.chartData,n=e.plotBase,i=e.setPlotBase,a=e.disabled,s=void 0!==a&&a,l=(0,j.useState)(!1),c=(0,r.Z)(l,2),o=c[0],u=c[1],d=(0,j.useState)(!0),x=(0,r.Z)(d,2),h=x[0],p=x[1],Z=(0,j.useContext)(S.R).data,v=["atk","hp","def","eleMas","critRate_","critDMG_","heal_","enerRech_"];"catalyst"!==Z.get(Ze.ri.weaponType).value&&v.push("physical_dmg_"),v.push("".concat(Z.get(Ze.ri.charEle).value,"_dmg_"));var g=(0,j.useMemo)((function(){var e,n;if(!t)return{displayData:null,downloadData:null};var r,i=t.data.map((function(e){var t=e.value;return{x:e.plot,y:t}})).sort((function(e,t){return e.x-t.x})),a=[],s=(0,vt.Z)(i);try{for(s.s();!(r=s.n()).done;){for(var l=r.value,c=void 0;c=a.pop();)if(c.y>l.y){a.push(c);break}a.push(l)}}catch(u){s.e(u)}finally{s.f()}(null===(e=a[0])||void 0===e?void 0:e.x)!==(null===(n=i[0])||void 0===n?void 0:n.x)&&(i[0].min=a[0].y),a.forEach((function(e){e.min=e.y}));var o={minimum:a.map((function(e){return[e.x,e.y]})),allData:i.map((function(e){return[e.x,e.y]}))};return{displayData:i,downloadData:o}}),[t]),w=g.displayData,k=g.downloadData;return(0,N.jsxs)(b.Z,{children:[(0,N.jsx)(f.Z,{children:(0,N.jsxs)(ue.ZP,{container:!0,spacing:1,alignItems:"center",children:[(0,N.jsx)(ue.ZP,{item:!0,children:(0,N.jsx)(H.Z,{variant:"h6",children:"Optimization Target vs"})}),(0,N.jsx)(ue.ZP,{item:!0,children:(0,N.jsxs)(ct.Z,{title:n?ne.ZP.get(n):"Not Selected",color:n?"success":"primary",disabled:s,children:[(0,N.jsx)(nt.Z,{onClick:function(){i("")},children:"Unselect"}),(0,N.jsx)(B.Z,{}),v.map((function(e){return(0,N.jsx)(nt.Z,{onClick:function(){i(e)},children:ne.ZP.get(e)},e)}))]})}),(0,N.jsx)(ue.ZP,{item:!0,flexGrow:1,children:(0,N.jsx)(nr.Z,{placement:"top",title:"Using data from the builder, this will generate a graph to visualize Optimization Target vs. a selected stat. The graph will show the maximum Optimization Target value per 0.01 of the selected stat.",children:(0,N.jsx)(er.Z,{})})}),!!k&&(0,N.jsx)(ue.ZP,{item:!0,children:(0,N.jsx)(m.Z,{startIcon:h?(0,N.jsx)(he.Z,{}):(0,N.jsx)(pe.Z,{}),color:h?"success":"secondary",onClick:function(){return p(!h)},children:"Show Min Stat Threshold"})}),!!k&&(0,N.jsx)(ue.ZP,{item:!0,children:(0,N.jsx)(m.Z,{color:"info",startIcon:(0,N.jsx)(tr.Z,{}),onClick:function(){return u(!o)},children:"Download Data"})})]})}),!!w&&(0,N.jsx)(B.Z,{}),t&&!!w&&(0,N.jsxs)(f.Z,{children:[(0,N.jsx)(je.Z,{in:!!k&&o,children:(0,N.jsx)(y.Z,{sx:{mb:2},children:(0,N.jsxs)(f.Z,{children:[(0,N.jsx)(H.Z,{children:"Min Data"}),(0,N.jsx)(hr,{data:null===k||void 0===k?void 0:k.minimum}),(0,N.jsx)(H.Z,{children:"All Data"}),(0,N.jsx)(hr,{data:null===k||void 0===k?void 0:k.allData})]})})}),(0,N.jsx)(pr,{displayData:w,plotNode:t.plotNode,valueNode:t.valueNode,showMin:h})]})]})}var fr=(0,ge.ZP)("textarea")({width:"100%",fontFamily:"monospace",resize:"vertical",minHeight:"5em"});function hr(e){var t=e.data;return(0,N.jsx)(fr,{readOnly:!0,value:JSON.stringify(t),onClick:function(e){var t=e.target;t.selectionStart=0,t.selectionEnd=t.value.length}})}function pr(e){var t,n,r=e.displayData,i=e.plotNode,a=e.valueNode,s=e.showMin,l=ne.ZP.unit(null===(t=i.info)||void 0===t?void 0:t.key),c=ne.ZP.unit(null===(n=a.info)||void 0===n?void 0:n.key);return(0,N.jsx)(rr.h,{width:"100%",height:600,children:(0,N.jsxs)(ir.c,{data:r,children:[(0,N.jsx)(ar.q,{strokeDasharray:"3 3"}),(0,N.jsx)(sr.K,{dataKey:"x",scale:"linear",unit:l,domain:["auto","auto"],tick:{fill:"white"},type:"number",tickFormatter:function(e){return e>1e4?e.toFixed():e.toFixed(1)}}),(0,N.jsx)(lr.B,{name:"DMG",domain:["auto","auto"],unit:c,allowDecimals:!1,tick:{fill:"white"},type:"number"}),(0,N.jsx)(cr.d,{dataKey:"y",range:[3,25]}),(0,N.jsx)(or.D,{}),(0,N.jsx)(ur.b,{name:"Optimization Target",dataKey:"y",fill:"#8884d8",line:!0,lineType:"fitting",isAnimationActive:!1}),s&&(0,N.jsx)(dr.x,{name:"Minimum Stat Requirement Threshold",dataKey:"min",stroke:"#ff7300",type:"stepBefore",connectNulls:!0,strokeWidth:2,isAnimationActive:!1})]})})}var mr=["sands","goblet","circlet"];function jr(e){var t=e.disabled,n=void 0!==t&&t,r=(0,Z.$)("artifact").t,i=fn((0,j.useContext)(C.K).character.key),a=i.buildSetting.mainStatKeys,s=i.buildSettingDispatch;return(0,N.jsx)(xe.Z,{display:"flex",flexDirection:"column",gap:1,children:mr.map((function(e){var t=a[e].length;return(0,N.jsxs)(xe.Z,{children:[(0,N.jsx)(B.Z,{}),(0,N.jsxs)(f.Z,{sx:{pt:1},children:[(0,N.jsxs)(xe.Z,{sx:{display:"flex",gap:1,alignItems:"center",pb:1},children:[(0,N.jsx)(st.Z,{placement:"top",title:(0,N.jsx)(H.Z,{children:r("slotName.".concat(e))}),children:(0,N.jsx)("span",{children:(0,cn.Ir)(e)})}),(0,N.jsx)(xe.Z,{flexGrow:1,children:(0,N.jsx)(ee.Z,{color:"info",children:t?"".concat(t," Selected"):"Any"})}),(0,N.jsx)(m.Z,{color:"error",size:"small",disabled:!a[e].length||n,sx:{mt:-1,mb:-1},onClick:function(){return s({type:"mainStatKey",slotKey:e})},children:(0,N.jsx)(Ce.Z,{})})]}),(0,N.jsx)(ue.ZP,{container:!0,spacing:1,children:An.ZP.slotMainStats(e).map((function(t,r){var i=M.Kj.find((function(e){return t.includes(e)})),l=a[e].includes(t)?null!==i&&void 0!==i?i:"success":"secondary";return(0,N.jsx)(ue.ZP,{item:!0,flexGrow:1,xs:r<3&&"goblet"!==e?4:void 0,children:(0,N.jsx)(st.Z,{placement:"top",title:(0,N.jsx)(H.Z,{children:(0,N.jsx)("strong",{children:(0,N.jsx)(Rn._,{statKey:t})})}),disableInteractive:!0,children:(0,N.jsx)(m.Z,{fullWidth:!0,size:"small",color:l,sx:{fontSize:"1.2em",height:"100%",pointerEvents:n?"none":void 0,cursor:n?"none":void 0},onClick:function(){return s({type:"mainStatKey",slotKey:e,mainStatKey:t})},children:ke.Z[t]})})},t)}))})]})]},e)}))})}var Zr,vr,gr=n(72814);function yr(e){var t=e.disabled,n=void 0!==t&&t,r=(0,Z.$)("page_character").t,i=(0,j.useContext)(C.K).character.key,a=(0,j.useContext)(S.R).data,s=fn(i),l=s.buildSetting.statFilters,c=s.buildSettingDispatch,o=(0,j.useCallback)((function(e){return c({statFilters:e})}),[c]),u=(0,j.useMemo)((function(){var e=["atk","hp","def","eleMas","critRate_","critDMG_","heal_","enerRech_"];"catalyst"!==a.get(Ze.qH.weaponType).value&&e.push("physical_dmg_");var t=a.get(Ze.qH.charEle).value;return e.push("".concat(t,"_dmg_")),e}),[a]);return(0,N.jsxs)(d.Z,{children:[(0,N.jsx)(b.Z,{children:(0,N.jsxs)(f.Z,{sx:{display:"flex",gap:1,justifyContent:"space-between"},children:[(0,N.jsx)(H.Z,{children:r(Zr||(Zr=(0,Ye.Z)(["tabOptimize.constraintFilter.title"])))}),(0,N.jsx)(on.Z,{title:(0,N.jsx)(H.Z,{children:r(vr||(vr=(0,Ye.Z)(["tabOptimize.constraintFilter.tooltip"])))})})]})}),(0,N.jsx)(d.Z,{display:"flex",flexDirection:"column",gap:.5,children:(0,N.jsx)(ze.Z,{statKeys:u,statFilters:l,setStatFilters:o,disabled:n})})]})}var br=n(89841),wr=n(70558),kr=n(1235),Cr=n(68125),Sr=n(68087),Pr=n(52991),Kr=n(84684),Or=n(77208),Er=navigator.hardwareConcurrency||4;function Ar(){return{equipmentPriority:[],threads:Er}}function Dr(){return(0,ht.Z)("TabOptimize",Ar)}function Ir(e){var t=e.disabled,n=void 0!==t&&t,i=(0,Z.$)("page_character").t,a=(0,j.useContext)(C.K).character.key,s=fn(a),l=s.buildSetting.useEquippedArts,c=s.buildSettingDispatch,o=(0,j.useContext)(dt.t).database,u=(0,O.Z)(!1),x=(0,r.Z)(u,3),h=x[0],p=x[1],v=x[2],g=Dr(),k=(0,r.Z)(g,2),S=k[0].equipmentPriority,P=k[1],K=(0,j.useMemo)((function(){return(0,ce.Z)(new Set(S)).filter((function(e){return o.chars.get(e)}))}),[o,S]),E=(0,j.useCallback)((function(e){return P({equipmentPriority:e})}),[P]),A=(0,j.useCallback)((function(e,t){var n=(0,ce.Z)(K),r=n[e];n.splice(e,1),n.splice(t,0,r),E(n)}),[K,E]),D=(0,j.useCallback)((function(e){var t=(0,ce.Z)(K);t.splice(e,1),E(t)}),[K,E]),I=(0,j.useCallback)((function(e){return E([].concat((0,ce.Z)(K),[e]))}),[K,E]),R=(0,j.useCallback)((function(){return E([])}),[E]),M=(0,j.useMemo)((function(){var e=K.length,t=K.indexOf(a);return t>=0&&(e=t),e}),[a,K]),z=(0,j.useMemo)((function(){return o.chars.keys.length-1-M}),[M,o]),_=(0,j.useMemo)((function(){return o.chars.keys.length-K.length}),[K,o]);return(0,N.jsxs)(d.Z,{display:"flex",gap:1,children:[(0,N.jsx)(Q.Z,{open:h,onClose:v,containerProps:{maxWidth:"sm"},children:(0,N.jsxs)(y.Z,{children:[(0,N.jsx)(f.Z,{children:(0,N.jsxs)(ue.ZP,{container:!0,spacing:1,children:[(0,N.jsx)(ue.ZP,{item:!0,flexGrow:1,children:(0,N.jsx)(H.Z,{variant:"h6",children:(0,N.jsx)(qt.c,{t:i,i18nKey:"tabOptimize.useEquipped.modal.title",children:"Character Priority for Equipped Artifacts"})})}),(0,N.jsx)(ue.ZP,{item:!0,sx:{mb:-1},children:(0,N.jsx)(w.Z,{onClick:v})})]})}),(0,N.jsx)(B.Z,{}),(0,N.jsxs)(f.Z,{children:[(0,N.jsx)(b.Z,{sx:{mb:1},children:(0,N.jsxs)(f.Z,{children:[(0,N.jsx)(H.Z,{gutterBottom:!0,children:(0,N.jsx)(qt.c,{t:i,i18nKey:"tabOptimize.useEquipped.modal.desc1",children:"When generating a build, the Optimizer will only consider equipped artifacts from characters below the current character or those not on the list."})}),(0,N.jsx)(H.Z,{gutterBottom:!0,children:(0,N.jsx)(qt.c,{t:i,i18nKey:"tabOptimize.useEquipped.modal.desc2",children:"If the current character is not on the list, the Optimizer will only consider equipped artifacts from others characters that are not on the list."})})]})}),(0,N.jsxs)(d.Z,{display:"flex",flexDirection:"column",gap:2,children:[K.map((function(e,t){return(0,N.jsx)(Rr,{characterKey:e,rank:t+1,maxRank:K.length,setRank:function(e){return e&&A(t,e-1)},onRemove:function(){return D(t)},numAbove:M},e)})),(0,N.jsxs)(d.Z,{sx:{display:"flex",gap:1},children:[(0,N.jsx)(Mr,{onAdd:I,list:K}),(0,N.jsx)(m.Z,{color:"error",onClick:R,startIcon:(0,N.jsx)(Ce.Z,{}),children:(0,N.jsx)(qt.c,{t:i,i18nKey:"tabOptimize.useEquipped.modal.clearList",children:"Clear List"})})]}),!!z&&(0,N.jsx)(ee.Z,{color:"success",children:(0,N.jsx)(H.Z,{children:(0,N.jsxs)(qt.c,{t:i,i18nKey:"tabOptimize.useEquipped.modal.usingNum",count:_,children:["Using artifacts from ",(0,N.jsx)("strong",{children:{count:_}})," unlisted characters"]})})})]})]})]})}),(0,N.jsxs)(Se.Z,{sx:{display:"flex",width:"100%"},children:[(0,N.jsx)(m.Z,{sx:{flexGrow:1},onClick:function(){return c({useEquippedArts:!l})},disabled:n,startIcon:l?(0,N.jsx)(he.Z,{}):(0,N.jsx)(pe.Z,{}),color:l?"success":"secondary",children:(0,N.jsxs)(d.Z,{children:[(0,N.jsx)("span",{children:(0,N.jsx)(qt.c,{t:i,i18nKey:"tabOptimize.useEquipped.title",children:"Use Equipped Artifacts"})}),l&&(0,N.jsx)(ee.Z,{children:(0,N.jsxs)(qt.c,{t:i,i18nKey:"tabOptimize.useEquipped.usingNum",count:z,children:["Using from ",(0,N.jsx)("strong",{children:{count:z}})," characters"]})})]})}),l&&(0,N.jsx)(m.Z,{sx:{flexShrink:1},color:"info",onClick:p,disabled:n,children:(0,N.jsx)(Nt.Z,{})})]})]})}function Rr(e){var t=e.characterKey,n=e.rank,i=e.maxRank,a=e.setRank,s=e.onRemove,l=e.numAbove,c=(0,Z.$)("page_character").t,o=(0,j.useContext)(dt.t).database,u=(0,E.Z)(t),x=(0,G.Z)();if(!u)return null;var f=u.equippedWeapon,h=u.equippedArtifacts;return(0,N.jsxs)(b.Z,{sx:{p:1},children:[(0,N.jsxs)(d.Z,{sx:{pb:1,display:"flex",justifyContent:"space-between",gap:1},children:[(0,N.jsx)(ee.Z,{color:"info",children:(0,N.jsxs)(H.Z,{children:["#",n]})}),(0,N.jsx)(ee.Z,{sx:{flexGrow:1},color:l===n-1?"warning":n-1<l?"error":"success",children:(0,N.jsx)(H.Z,{children:l===n-1?(0,N.jsx)(qt.c,{t:c,i18nKey:"tabOptimize.useEquipped.modal.status.curr",children:"Current character"}):n-1<l?(0,N.jsx)(qt.c,{t:c,i18nKey:"tabOptimize.useEquipped.modal.status.dont",children:"Don't Use artifacts"}):(0,N.jsx)(qt.c,{t:c,i18nKey:"tabOptimize.useEquipped.modal.status.use",children:"Use artifacts"})})}),(0,N.jsx)(d.Z,{children:(0,N.jsxs)(Se.Z,{sx:{flexGrow:1},size:"small",children:[(0,N.jsx)(Pe.CC,{children:(0,N.jsx)(Pe.ZP,{onChange:a,value:n,inputProps:{min:1,max:i,sx:{textAlign:"center"}},sx:{width:"100%",height:"100%",pl:2}})}),(0,N.jsx)(m.Z,{disabled:1===n,onClick:function(){return a(1)},children:(0,N.jsx)(br.Z,{})}),(0,N.jsx)(m.Z,{disabled:1===n,onClick:function(){return a(n-1)},children:(0,N.jsx)(wr.Z,{})}),(0,N.jsx)(m.Z,{disabled:n===i,onClick:function(){return a(n+1)},children:(0,N.jsx)(kr.Z,{})}),(0,N.jsx)(m.Z,{disabled:n===i,onClick:function(){return a(i)},children:(0,N.jsx)(Cr.Z,{})}),(0,N.jsx)(m.Z,{color:"error",onClick:s,children:(0,N.jsx)(Qe.Z,{})})]})})]}),(0,N.jsxs)(ue.ZP,{container:!0,columns:7,spacing:1,children:[(0,N.jsx)(ue.ZP,{item:!0,xs:1,children:(0,N.jsx)(Kr.Z,{characterKey:t,onClick:x})}),(0,N.jsx)(ue.ZP,{item:!0,xs:1,children:(0,N.jsx)(Or.Z,{weaponId:f})}),Object.entries(h).map((function(e){var t=(0,r.Z)(e,2),n=t[0],i=t[1];return(0,N.jsx)(ue.ZP,{item:!0,xs:1,children:(0,N.jsx)(Pr.Z,{slotKey:n,artifactObj:o.arts.get(i)})},n)}))]})]})}function Mr(e){var t=e.onAdd,n=e.list,i=(0,Z.$)("page_character").t,a=(0,O.Z)(!1),s=(0,r.Z)(a,3),l=s[0],c=s[1],o=s[2],u=(0,j.useCallback)((function(e){return!!e&&!n.includes(e.key)}),[n]);return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(_.w,{show:l,onHide:o,onSelect:t,filter:u}),(0,N.jsx)(m.Z,{fullWidth:!0,sx:{height:60},color:"info",onClick:c,startIcon:(0,N.jsx)(Sr.Z,{}),children:(0,N.jsx)(qt.c,{t:i,i18nKey:"tabOptimize.useEquipped.modal.add",children:"Add character to list"})})]})}function zr(e){var t=e.disabled,n=void 0!==t&&t,r=e.artsDirty,i=(0,Z.$)("page_character").t,a=(0,j.useContext)(C.K).character.key,s=fn(a),l=s.buildSetting.useExcludedArts,c=s.buildSettingDispatch,o=(0,j.useContext)(dt.t).database,u=(0,j.useMemo)((function(){return r&&o.arts.values.reduce((function(e,t){return e+(t.exclude&&t.location!==a?1:0)}),0)}),[o,r,a]);return(0,N.jsx)(m.Z,{fullWidth:!0,onClick:function(){return c({useExcludedArts:!l})},disabled:!u||n,startIcon:l?(0,N.jsx)(he.Z,{}):(0,N.jsx)(pe.Z,{}),color:l?"success":"secondary",children:(0,N.jsxs)(d.Z,{children:[(0,N.jsx)("span",{children:(0,N.jsx)(qt.c,{t:i,i18nKey:"tabOptimize.useExcluded.title",count:u,children:"Use Excluded Artifacts"})}),l&&(0,N.jsx)(ee.Z,{children:(0,N.jsxs)(qt.c,{t:i,i18nKey:"tabOptimize.useExcluded.usingNum",count:u,children:["Using ",(0,N.jsx)("strong",{children:{count:u}})," excluded artifacts"]})})]})})}var _r,Tr=n(4942),Gr=n(50765),Nr=(0,yt.yY)((0,jt.I8)({dyn:(0,fe.Z)((0,fe.Z)({},Ze.qH.art),Ze.qH.artSet)})),qr={art:(0,jt.O)([].concat((0,ce.Z)(Gr.r),(0,ce.Z)(Gr._)),(function(e){return Nr.dyn[e]})),artSet:(0,jt.xh)(Ze.qH.artSet,(function(e,t){return Nr.dyn[t]}))};function Lr(e,t,n){var r,i={base:{},values:{flower:[],plume:[],goblet:[],circlet:[],sands:[]}},a=new Set,s=(0,vt.Z)(e);try{for(s.s();!(r=s.n()).done;){var l,c=r.value,o=An.ZP.mainStatValue(c.mainStatKey,c.rarity,Math.max(Math.min(t,4*c.rarity),c.level)),u={id:c.id,set:c.setKey,values:(0,fe.Z)((l={},(0,Tr.Z)(l,c.setKey,1),(0,Tr.Z)(l,c.mainStatKey,c.mainStatKey.endsWith("_")?o/100:o),l),Object.fromEntries(c.substats.map((function(e){return[e.key,e.key.endsWith("_")?e.accurateValue/100:e.accurateValue]}))))};delete u.values[""],i.values[c.slotKey].push(u),Object.keys(u.values).forEach((function(e){return a.add(e)}))}}catch(f){s.e(f)}finally{s.f()}if(i.base=(0,jt.O)((0,ce.Z)(a),(function(e){return 0})),n)for(var d=0,x=Object.values(i.values);d<x.length;d++){x[d].push({id:"",values:{}})}return i}function Wr(){var e,t,n=(0,Z.$)("page_character").t,i=(0,j.useContext)(C.K).character,a=i.key,s=i.compareData,c=(0,ht.Z)("GlobalSettings",mt.c),o=(0,r.Z)(c,1)[0].tcMode,u=(0,j.useContext)(dt.t).database,x=(0,j.useState)({type:"inactive",tested:0,failed:0,skipped:0,total:0}),h=(0,r.Z)(x,2),p=h[0],g=h[1],y="inactive"!==p.type,w=(0,j.useState)(void 0),P=(0,r.Z)(w,2),K=P[0],O=P[1],E=(0,pt.Z)(),D=(0,r.Z)(E,2),R=D[0],M=D[1],z=Dr(),_=(0,r.Z)(z,2),T=_[0],q=T.equipmentPriority,L=T.threads,W=void 0===L?Er:L,F=_[1],V=W>Er?Er:W,U=(0,j.useCallback)((function(e){return F({threads:e})}),[F]),$=(0,A.Z)(a),Y=(0,G.Z)(),J=(0,j.useMemo)((function(){return!u.arts.values.length}),[u]),X=fn(a),Q=X.buildSetting,ee=X.buildSettingDispatch,te=Q.plotBase,re=Q.optimizationTarget,ie=Q.mainStatAssumptionLevel,ae=Q.allowPartial,se=Q.builds,le=Q.buildDate,oe=Q.maxBuildsToShow,de=Q.levelLow,xe=Q.levelHigh,me=(0,I.Z)(a,ie),je=null!==(e=null===me||void 0===me?void 0:me[a])&&void 0!==e?e:{},ve=je.characterSheet,ge=je.target,ye=(0,j.useMemo)((function(){return se.map((function(e){return e.map((function(e){return u.arts.get(e)}))}))}),[se,u]);(0,j.useEffect)((function(){return u.arts.followAny(M)}),[M,u]);var be=(0,j.useRef)((function(){}));(0,j.useEffect)((function(){return function(){return be.current()}}),[]);var we=(0,j.useCallback)((0,Xe.Z)((0,Je.Z)().mark((function e(){var t,n,i,s,l,c,o,d,x,f,h,p,m,j,Z,v,y,b,w,k,C,S,P,K,E,A,D,R,M,z,_,T,G,N,L,W,B,F,H,U,$,Y,J,X,te,re,ie,ae,se,le,oe,ue,de,xe,he,pe;return(0,Je.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(J=function(){var e=B.pop();return e?{command:"iterate",threshold:G.buildValues[p-1],filter:e}:void 0},Y=function(){var e=W.next(),t=e.done,n=e.value;return t?void 0:{command:"split",minCount:N,threshold:G.buildValues[p-1],filter:n}},$=function(){return{command:"split",filter:void 0,minCount:N,threshold:G.buildValues[p-1]}},i=Q.artSetExclusion,s=Q.plotBase,l=Q.statFilters,c=Q.mainStatKeys,o=Q.optimizationTarget,d=Q.mainStatAssumptionLevel,x=Q.useExcludedArts,f=Q.useEquippedArts,h=Q.allowPartial,p=Q.maxBuildsToShow,m=Q.levelLow,j=Q.levelHigh,a&&o){e.next=6;break}return e.abrupt("return");case 6:return Z=[],f&&(v=q.indexOf(a),Z=v<0?(0,ce.Z)(q):q.slice(0,v)),y=u.arts.values.filter((function(e){if(e.level<m)return!1;if(e.level>j)return!1;var t=c[e.slotKey];return!(null!==t&&void 0!==t&&t.length&&!t.includes(e.mainStatKey))&&(e.location===a||!(e.exclude&&!x)&&(!(e.location&&!f)&&!(e.location&&f&&Z.includes(e.location))))})),b=Lr(y,d,h),e.next=12,(0,I.V)(u,a,d,[]);case 12:if(w=e.sent){e.next=15;break}return e.abrupt("return");case 15:if(k=null===(t=(0,xt.Qo)(w.teamData,a)[a])||void 0===t?void 0:t.target.data[0]){e.next=18;break}return e.abrupt("return");case 18:if(Object.assign(k,(0,xt.b3)([k,qr])),C=(0,jt.Hm)(null!==(n=k.display)&&void 0!==n?n:{},o)){e.next=22;break}return e.abrupt("return");case 22:for(S=C,P=Object.entries(l).map((function(e){var t=(0,r.Z)(e,2),n=t[0],i=t[1];return n.endsWith("_")&&(i/=100),{value:Ze.ri.total[n],minimum:i}})).filter((function(e){return e.value&&e.minimum>-1/0})),O(void 0),K=new Promise((function(e){return be.current=e})),E=[].concat((0,ce.Z)(P.map((function(e){return e.value}))),[C]),A=b,D=Mt(_t(i,Object.values(b.values).flatMap((function(e){return e.map((function(e){return e.set}))}))),b),R=[].concat((0,ce.Z)(P.map((function(e){return e.minimum}))),[-1/0]),M={tested:0,failed:0,skipped:0,total:NaN,startTime:performance.now()},s&&(E.push(Ze.ri.total[s]),R.push(-1/0)),z=A,E=(0,ft.tL)(E,k,(function(e){return"dyn"!==(0,r.Z)(e.path,1)[0]})),_=kt(E,R,A,p,i,{reaffine:!0,pruneArtRange:!0,pruneNodeRange:!0,pruneOrder:!0}),E=_.nodes,A=_.arts,E=(0,ft.tL)(E,{},(function(e){return!1})),T=s?E.pop():void 0,C=E.pop(),G={buildValues:Array(p).fill(0).map((function(e){return-1/0}))},N=8e6,L=4*V,W=D[Symbol.iterator](),B=[],F=[],H=new Set,U=[],X=E.map((function(e,t){return{value:e,min:R[t]}})).filter((function(e){return e.min>-1/0})),te=[],re=function(e){var t=new it,n={command:"setup",id:e,arts:A,optimizationTarget:C,plotBase:T,maxBuilds:p,filters:X};if(t.postMessage(n,void 0),0===e){var a={command:"count",exclusion:i,arts:[A,z]};t.postMessage(a,void 0)}var s=void 0,l=new Promise((function(e){return s=e}));t.onmessage=function(){var e=(0,Xe.Z)((0,Je.Z)().mark((function e(n){var i,a,l,c,o,u,d,x;return(0,Je.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=n.data,e.t0=i.command,e.next="interim"===e.t0?4:"split"===e.t0?9:"iterate"===e.t0?12:"finalize"===e.t0?14:"count"===e.t0?17:21;break;case 4:return M.tested+=i.tested,M.failed+=i.failed,M.skipped+=i.skipped,i.buildValues&&((a=G.buildValues).push.apply(a,(0,ce.Z)(i.buildValues)),G.buildValues.sort((function(e,t){return t-e})).splice(p)),e.abrupt("break",22);case 9:return i.filter?(B.push(i.filter),H.add(i.id)):H.delete(i.id),F.push(i.id),e.abrupt("break",22);case 12:return F.push(i.id),e.abrupt("break",22);case 14:return t.terminate(),s(i),e.abrupt("return");case 17:return l=(0,r.Z)(i.counts,2),c=l[0],o=l[1],M.total=o,M.skipped+=o-c,e.abrupt("return");case 21:console.log("DEBUG",i);case 22:if(!F.length){e.next=36;break}if(u=F.pop(),d=U[u],x=void 0,B.length<L&&!(x=Y())&&H.has(u)&&(x=$()),x||(x=J()),!x){e.next=31;break}d.postMessage(x),e.next=34;break;case 31:return F.push(u),F.length===8*V&&function(){var e={command:"finalize"};U.forEach((function(t){return t.postMessage(e)}))}(),e.abrupt("break",36);case 34:e.next=22;break;case 36:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U.push(t),K.then((function(){return t.terminate()})),te.push(l)},ie=0;ie<V;ie++)re(ie);for(ae=0;ae<7;ae++)F.push.apply(F,(0,ce.Z)((0,jt.w6)(0,V-1)));return se=setInterval((function(){return g((0,fe.Z)({type:"active"},M))}),100),e.next=52,Promise.any([Promise.all(te),K]);case 52:le=e.sent,clearInterval(se),be.current=function(){},le?(s&&(de=Rt(le.map((function(e){return e.plotData}))),xe=Ze.ri.total[s],he=Object.values(de),"%"===ne.ZP.unit(null===(oe=S.info)||void 0===oe?void 0:oe.key)&&(he=he.map((function(e){return{value:100*e.value,plot:e.plot}}))),"%"===ne.ZP.unit(null===(ue=xe.info)||void 0===ue?void 0:ue.key)&&(he=he.map((function(e){var t=e.value,n=e.plot;return{value:t,plot:100*(null!==n&&void 0!==n?n:0)}}))),O({valueNode:S,plotNode:xe,data:he})),pe=It(le.map((function(e){return e.builds})),p),ee({builds:pe.map((function(e){return e.artifactIds})),buildDate:Date.now()})):(M.tested=0,M.failed=0,M.skipped=0,M.total=0),g((0,fe.Z)((0,fe.Z)({},M),{},{type:"inactive",finishTime:performance.now()}));case 57:case"end":return e.stop()}}),e)}))),[a,u,ee,V,Q,q]),ke=null!==(t=null===ve||void 0===ve?void 0:ve.name)&&void 0!==t?t:"Character Name",Ce=(0,j.useCallback)((function(e){ee({plotBase:e}),O(void 0)}),[ee]),Pe=(0,j.useMemo)((function(){return ge&&me&&{data:ge,teamData:me}}),[ge,me]);return(0,N.jsxs)(d.Z,{display:"flex",flexDirection:"column",gap:1,children:[J&&(0,N.jsxs)(et.Z,{severity:"warning",variant:"filled",children:[" Opps! It looks like you haven't added any artifacts to GO yet! You should go to the ",(0,N.jsx)(tt.Z,{component:v.rU,to:"/artifact",children:"Artifacts"})," page and add some!"]}),Pe&&(0,N.jsxs)(S.R.Provider,{value:Pe,children:[(0,N.jsxs)(ue.ZP,{container:!0,spacing:1,children:[(0,N.jsx)(ue.ZP,{item:!0,xs:12,sm:6,lg:3,display:"flex",flexDirection:"column",gap:1,children:(0,N.jsx)(d.Z,{children:(0,N.jsx)(lt.Z,{characterKey:a,onClickTeammate:Y})})}),(0,N.jsxs)(ue.ZP,{item:!0,xs:12,sm:6,lg:3,display:"flex",flexDirection:"column",gap:1,children:[(0,N.jsxs)(b.Z,{children:[(0,N.jsxs)(f.Z,{children:[(0,N.jsx)(H.Z,{gutterBottom:!0,children:"Main Stat"}),(0,N.jsx)(st.Z,{placement:"top",title:(0,N.jsxs)(H.Z,{children:[(0,N.jsx)("strong",{children:"Level Assumption"})," changes mainstat value to be at least a specific level. Does not change substats."]}),children:(0,N.jsx)(d.Z,{children:(0,N.jsx)(Zn,{mainStatAssumptionLevel:ie,setmainStatAssumptionLevel:function(e){return ee({mainStatAssumptionLevel:e})},disabled:y})})})]}),(0,N.jsx)(jr,{disabled:y})]}),(0,N.jsx)(vn,{})]}),(0,N.jsxs)(ue.ZP,{item:!0,xs:12,sm:6,lg:6,display:"flex",flexDirection:"column",gap:1,children:[(0,N.jsx)(hn,{disabled:y}),(0,N.jsx)(zr,{disabled:y,artsDirty:R}),(0,N.jsx)(Ir,{disabled:y}),(0,N.jsx)(m.Z,{fullWidth:!0,startIcon:ae?(0,N.jsx)(he.Z,{}):(0,N.jsx)(pe.Z,{}),color:ae?"success":"secondary",onClick:function(){return ee({allowPartial:!ae})},children:n(_r||(_r=(0,Ye.Z)(["tabOptimize.allowPartial"])))}),(0,N.jsxs)(b.Z,{children:[(0,N.jsx)(f.Z,{children:"Artifact Level Filter"}),(0,N.jsx)(at.Z,{levelLow:de,levelHigh:xe,setLow:function(e){return ee({levelLow:e})},setHigh:function(e){return ee({levelHigh:e})},setBoth:function(e,t){return ee({levelLow:e,levelHigh:t})},disabled:y})]}),(0,N.jsx)(yr,{disabled:y})]})]}),(0,N.jsxs)(ue.ZP,{container:!0,spacing:1,children:[(0,N.jsx)(ue.ZP,{item:!0,flexGrow:1,children:(0,N.jsxs)(Se.Z,{children:[(0,N.jsx)(m.Z,{disabled:!a||y||!re||!(0,jt.Hm)(null===ge||void 0===ge?void 0:ge.getDisplay(),re),color:a?"success":"warning",onClick:we,startIcon:(0,N.jsx)(l.Z,{}),children:"Generate Builds"}),(0,N.jsxs)(ct.Z,{disabled:y||!a,title:(0,N.jsxs)("span",{children:[(0,N.jsx)("b",{children:oe})," ",1===oe?"Build":"Builds"]}),children:[(0,N.jsx)(nt.Z,{children:(0,N.jsx)(H.Z,{variant:"caption",color:"info.main",children:"Decreasing the number of generated build will decrease build calculation time for large number of builds."})}),(0,N.jsx)(B.Z,{}),Zt.s.map((function(e){return(0,N.jsxs)(nt.Z,{onClick:function(){return ee({maxBuildsToShow:e})},children:[e," ",1===e?"Build":"Builds"]},e)}))]}),(0,N.jsxs)(ct.Z,{disabled:y||!a,title:(0,N.jsxs)("span",{children:[(0,N.jsx)("b",{children:V})," ",1===V?"Thread":"Threads"]}),children:[(0,N.jsx)(nt.Z,{children:(0,N.jsx)(H.Z,{variant:"caption",color:"info.main",children:"Increasing the number of threads will speed up build time, but will use more CPU power."})}),(0,N.jsx)(B.Z,{}),(0,jt.w6)(1,Er).reverse().map((function(e){return(0,N.jsxs)(nt.Z,{onClick:function(){return U(e)},children:[e," ",1===e?"Thread":"Threads"]},e)}))]}),(0,N.jsx)(m.Z,{disabled:!y,color:"error",onClick:function(){return be.current()},startIcon:(0,N.jsx)(Qe.Z,{}),children:"Cancel"})]})}),(0,N.jsxs)(ue.ZP,{item:!0,children:[(0,N.jsx)("span",{children:"Optimization Target: "}),(0,N.jsx)(gr.Z,{optimizationTarget:re,setTarget:function(e){return ee({optimizationTarget:e})},disabled:!!y})]})]}),!!a&&(0,N.jsx)(kn,{status:p,characterName:ke,maxBuildsToShow:oe}),o&&(0,N.jsx)(d.Z,{children:(0,N.jsx)(xr,{disabled:y,chartData:K,plotBase:te,setPlotBase:Ce})}),(0,N.jsx)(b.Z,{children:(0,N.jsxs)(f.Z,{children:[(0,N.jsxs)(d.Z,{display:"flex",alignItems:"center",gap:1,mb:1,children:[(0,N.jsx)(H.Z,{sx:{flexGrow:1},children:se?(0,N.jsxs)("span",{children:["Showing ",(0,N.jsx)("strong",{children:se.length})," Builds generated for ",ke,". ",!!le&&(0,N.jsxs)("span",{children:["Build generated on: ",(0,N.jsx)("strong",{children:new Date(le).toLocaleString()})]})]}):(0,N.jsx)("span",{children:"Select a character to generate builds."})}),(0,N.jsx)(m.Z,{disabled:!se.length,color:"error",onClick:function(){return ee({builds:[],buildDate:0})},children:"Clear Builds"})]}),(0,N.jsxs)(ue.ZP,{container:!0,display:"flex",spacing:1,children:[(0,N.jsx)(ue.ZP,{item:!0,children:(0,N.jsx)(k.Hn,{size:"small"})}),(0,N.jsx)(ue.ZP,{item:!0,children:(0,N.jsx)(k.oX,{size:"small"})}),(0,N.jsx)(ue.ZP,{item:!0,flexGrow:1}),(0,N.jsx)(ue.ZP,{item:!0,children:(0,N.jsxs)(ot.Z,{exclusive:!0,value:s,onChange:function(e,t){return $({compareData:t})},size:"small",children:[(0,N.jsx)(rt.Z,{value:!1,disabled:!s,children:"Show new builds"}),(0,N.jsx)(rt.Z,{value:!0,disabled:s,children:"Compare vs. equipped"})]})})]})]})}),(0,N.jsx)(ut.Provider,{value:re,children:(0,N.jsx)(Br,{buildsArts:ye,characterKey:a,data:ge,compareData:s,disabled:!!y})})]})]})}function Br(e){var t=e.buildsArts,n=e.characterKey,r=e.data,i=e.compareData,a=e.disabled;return(0,j.useMemo)((function(){return(0,N.jsx)(j.Suspense,{fallback:(0,N.jsx)(x.Z,{variant:"rectangular",width:"100%",height:600}),children:null===t||void 0===t?void 0:t.map((function(e,t){return n&&r&&(0,N.jsx)(Fr,{characterKey:n,build:e,oldData:r,children:(0,N.jsx)(Yn,{index:t,compareBuild:i,disabled:a})},t+e.join())}))})}),[t,n,r,i,a])}function Fr(e){var t=e.children,n=e.characterKey,r=e.build,i=e.oldData,a=fn(n).buildSetting.mainStatAssumptionLevel,s=(0,I.Z)(n,a,r),l=(0,j.useMemo)((function(){return s&&{data:s[n].target,teamData:s,oldData:i}}),[s,i,n]);return l?(0,N.jsx)(S.R.Provider,{value:l,children:t}):null}var Vr,Hr,Ur=n(14361),$r=n(90690),Yr=n(96874),Jr=n(2139),Xr=n(97719),Qr=n(95193),ei=n(30418),ti=n(15678),ni=n(901),ri=n(90543),ii=n(44824),ai=n(70645),si=n(46956),li=n(99405);function ci(e){var t=e.artId,n=e.weaponId,i=(0,Z.$)("page_character").t,a=(0,O.Z)(!1),s=(0,r.Z)(a,3),l=s[0],c=s[1],o=s[2],u=(0,j.useContext)(dt.t).database,d=(0,j.useContext)(C.K).character,f=d.key,h=d.equippedArtifacts,p=fn(f).buildSetting.mainStatAssumptionLevel,v=(0,j.useContext)(S.R).data,g=(0,j.useMemo)((function(){var e=u.arts.get(null!==t&&void 0!==t?t:""),n=(0,jt.xh)(h,(function(t,n){return n===(null===e||void 0===e?void 0:e.slotKey)?e:u.arts.get(t)}));return Object.values(n)}),[u,h,t]),y=(0,I.Z)(f,p,g,n?u.weapons.get(n):void 0),b=(0,j.useMemo)((function(){return y&&{data:y[f].target,teamData:y,oldData:v}}),[f,y,v]);return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(Q.Z,{open:l,onClose:o,containerProps:{maxWidth:"xl"},children:(0,N.jsx)(j.Suspense,{fallback:(0,N.jsx)(x.Z,{variant:"rectangular",width:"100%",height:600}),children:b&&(0,N.jsx)(S.R.Provider,{value:b,children:(0,N.jsx)(Yn,{compareBuild:!0,extraButtons:(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(k.Hn,{size:"small"}),(0,N.jsx)(k.oX,{size:"small"}),(0,N.jsx)(m.Z,{size:"small",color:"error",onClick:o,children:(0,N.jsx)(Qe.Z,{})})]})})})})}),(0,N.jsx)(nr.Z,{title:(0,N.jsx)(H.Z,{children:i(Vr||(Vr=(0,Ye.Z)(["tabEquip.compare"])))}),placement:"top",arrow:!0,children:(0,N.jsx)(m.Z,{color:"info",size:"small",onClick:c,children:(0,N.jsx)(li.Z,{})})})]})}var oi={xs:6,sm:6,md:9,lg:12,xl:12},ui=(0,j.lazy)((function(){return n.e(849).then(n.bind(n,80367))}));function di(e){var t=e.onChangeId,n=e.slotKey,i=e.show,a=e.onClose,s=(0,Z.$)("page_character").t,l=(0,j.useContext)(dt.t).database,c=(0,j.useCallback)((function(e){t(e),a()}),[t,a]),o=(0,j.useCallback)((function(e,t){return(0,fe.Z)((0,fe.Z)((0,fe.Z)({},e),t),{},{slotKeys:[n]})}),[n]),u=(0,j.useReducer)(o,(0,fe.Z)((0,fe.Z)({},(0,ii.Af)()),{},{slotKeys:[n]})),h=(0,r.Z)(u,2),p=h[0],m=h[1],v=(0,pt.Z)(),g=(0,r.Z)(v,2),b=g[0],k=g[1];(0,j.useEffect)((function(){return l.arts.followAny(k)}),[l,k]);var C=(0,ai.Z)(),S=(0,j.useMemo)((function(){return(0,ii.EM)()}),[]),P=(0,j.useMemo)((function(){var e=(0,si.C)(p,S);return b&&l.arts.values.filter(e).map((function(e){return e.id})).slice(0,oi[C])}),[b,l,S,p,C]);return(0,N.jsx)(Q.Z,{open:i,onClose:a,containerProps:{maxWidth:"xl"},children:(0,N.jsxs)(y.Z,{children:[(0,N.jsxs)(f.Z,{sx:{py:1,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,N.jsxs)(H.Z,{variant:"h6",children:[n?(0,N.jsx)(X.Z,{src:En.Z.slot[n]}):null," ",s(Hr||(Hr=(0,Ye.Z)(["tabEquip.swapArt"])))]}),(0,N.jsx)(w.Z,{onClick:a})]}),(0,N.jsx)(B.Z,{}),(0,N.jsxs)(f.Z,{children:[(0,N.jsx)(j.Suspense,{fallback:(0,N.jsx)(x.Z,{variant:"rectangular",width:"100%",height:200}),children:(0,N.jsx)(ui,{filterOption:p,filterOptionDispatch:m,disableSlotFilter:!0})}),(0,N.jsx)(d.Z,{mt:1,children:(0,N.jsx)(j.Suspense,{fallback:(0,N.jsx)(x.Z,{variant:"rectangular",width:"100%",height:300}),children:(0,N.jsx)(ue.ZP,{container:!0,spacing:1,columns:{xs:2,md:3,lg:4},children:P.map((function(e){return(0,N.jsx)(ue.ZP,{item:!0,xs:1,children:(0,N.jsx)($n.Z,{artifactId:e,extraButtons:(0,N.jsx)(ci,{artId:e}),onClick:c})},e)}))})})})]})]})})}var xi,fi,hi,pi,mi,ji,Zi,vi=n(58165),gi=n(75308),yi=n(66045),bi=(0,gi.X)((0,ce.Z)(M.wC));function wi(e){var t=e.onChangeId,n=e.weaponTypeKey,i=e.show,a=e.onClose,s=(0,Z.$)(["page_character","page_weapon","weaponNames_gen"]).t,l=(0,j.useContext)(dt.t).database,c=(0,j.useCallback)((function(e){t(e),a()}),[t,a]),o=(0,pt.Z)(),u=(0,r.Z)(o,2),x=u[0],h=u[1];(0,j.useEffect)((function(){return l.weapons.followAny(h)}),[h,l]);var p=(0,D.Z)((function(){return Wn.Z.getAll}),[]),m=(0,j.useMemo)((function(){return p&&(0,yi.Xg)(p)}),[p]),v=(0,j.useMemo)((function(){return p&&(0,yi.Sn)(p)}),[p]),g=(0,j.useState)([5,4,3]),b=(0,r.Z)(g,2),k=b[0],C=b[1],S=(0,j.useState)(""),P=(0,r.Z)(S,2),K=P[0],O=P[1],E=(0,j.useDeferredValue)(K),A=(0,j.useMemo)((function(){var e;return null!==(e=m&&v&&x&&l.weapons.values.filter((0,si.C)({weaponType:n,rarity:k,name:E},m)).sort((0,si.e)("level",!1,v)).map((function(e){return e.id})))&&void 0!==e?e:[]}),[x,l,m,v,k,n,E]);return(0,N.jsx)(Q.Z,{open:i,onClose:a,children:(0,N.jsxs)(y.Z,{children:[(0,N.jsx)(f.Z,{sx:{py:1},children:(0,N.jsxs)(ue.ZP,{container:!0,children:[(0,N.jsx)(ue.ZP,{item:!0,flexGrow:1,children:(0,N.jsxs)(H.Z,{variant:"h6",children:[n?(0,N.jsx)(X.Z,{src:En.Z.weaponTypes[n]}):null," ",s(xi||(xi=(0,Ye.Z)(["page_character:tabEquip.swapWeapon"])))]})}),(0,N.jsx)(ue.ZP,{item:!0,children:(0,N.jsx)(w.Z,{onClick:a})})]})}),(0,N.jsx)(B.Z,{}),(0,N.jsxs)(f.Z,{children:[(0,N.jsxs)(ue.ZP,{container:!0,spacing:1,mb:1,children:[(0,N.jsx)(ue.ZP,{item:!0,children:(0,N.jsx)(ot.Z,{sx:{height:"100%"},value:k,size:"small",children:M.wC.map((function(e){return(0,N.jsx)(rt.Z,{value:e,onClick:function(){return C(bi(k,e))},children:(0,N.jsxs)(d.Z,{display:"flex",gap:1,children:[(0,N.jsx)("strong",{children:e}),(0,N.jsx)(un.q,{stars:1})]})},e)}))})}),(0,N.jsx)(ue.ZP,{item:!0,flexGrow:1,children:(0,N.jsx)(vi.Z,{autoFocus:!0,size:"small",value:K,onChange:function(e){return O(e.target.value)},label:s("page_weapon:weaponName"),sx:{height:"100%"},InputProps:{sx:{height:"100%"}}})})]}),(0,N.jsx)(ue.ZP,{container:!0,spacing:1,children:A.map((function(e){return(0,N.jsx)(ue.ZP,{item:!0,xs:6,sm:6,md:4,lg:3,children:(0,N.jsx)(ri.Z,{weaponId:e,onClick:c,extraButtons:(0,N.jsx)(ci,{weaponId:e})})},e)}))})]})]})})}var ki=(0,j.lazy)((function(){return n.e(923).then(n.bind(n,74476))}));function Ci(){var e,t=(0,j.useContext)(C.K),n=t.character,i=n.equippedWeapon,a=n.key,s=t.characterSheet,l=fn(a).buildSetting.mainStatAssumptionLevel,c=(0,j.useContext)(S.R),o=c.teamData,u=c.data,x=null===(e=o[a])||void 0===e?void 0:e.weaponSheet,h=(0,j.useState)(""),p=(0,r.Z)(h,2),m=p[0],Z=p[1],v=(0,j.useCallback)((function(){return Z(i)}),[i]),g=(0,j.useCallback)((function(){return Z("")}),[]);(0,j.useEffect)((function(){m&&m!==i&&Z(i)}),[m,i]);var y=(0,ei.Z)(),w=(0,Qr.Z)(y.breakpoints.up("lg")),k=(0,j.useMemo)((function(){return x&&x.document.length>0&&(0,N.jsx)(b.Z,{children:(0,N.jsx)(f.Z,{children:(0,N.jsx)(Wt.Z,{sections:x.document})})})}),[x]),P=(0,ht.Z)("charMeta_".concat(a),mt.B),K=(0,r.Z)(P,1)[0].rvFilter,O=(0,j.useDeferredValue)(K),E=(0,j.useMemo)((function(){return new Set(O)}),[O]);return(0,N.jsxs)(d.Z,{children:[(0,N.jsx)(j.Suspense,{fallback:!1,children:(0,N.jsx)(ki,{weaponId:m,footer:!0,onClose:g,extraButtons:(0,N.jsx)(Ki,{weaponTypeKey:s.weaponTypeKey})})}),(0,N.jsxs)(ue.ZP,{container:!0,spacing:1,children:[w&&(0,N.jsxs)(ue.ZP,{item:!0,xs:12,md:12,lg:3,xl:3,sx:{display:"flex",flexDirection:"column",gap:1},children:[k&&k,(0,N.jsx)(Ei,{})]}),(0,N.jsxs)(ue.ZP,{item:!0,xs:12,md:12,lg:9,xl:9,container:!0,spacing:1,children:[(0,N.jsx)(ue.ZP,{item:!0,xs:12,sm:6,md:4,display:"flex",flexDirection:"column",gap:1,children:(0,N.jsx)(ri.Z,{weaponId:i,onEdit:v,canEquip:!0,extraButtons:(0,N.jsx)(Pi,{weaponTypeKey:s.weaponTypeKey})})}),M.eV.map((function(e){return(0,N.jsx)(ue.ZP,{item:!0,xs:12,sm:6,md:4,children:u.get(Ze.ri.art[e].id).value?(0,N.jsx)($n.Z,{artifactId:u.get(Ze.ri.art[e].id).value,mainStatAssumptionLevel:l,effFilter:E,extraButtons:(0,N.jsx)(Oi,{slotKey:e}),editor:!0,canExclude:!0,canEquip:!0}):(0,N.jsx)(Si,{slotKey:e})},e)}))]}),!w&&(0,N.jsxs)(ue.ZP,{item:!0,xs:12,md:12,xl:3,container:!0,spacing:1,children:[k&&(0,N.jsx)(ue.ZP,{item:!0,xs:12,md:6,lg:4,children:k}),(0,N.jsx)(ue.ZP,{item:!0,xs:12,md:6,lg:4,sx:{display:"flex",flexDirection:"column",gap:1},children:(0,N.jsx)(Ei,{})})]})]})]})}function Si(e){var t=e.slotKey,n=(0,j.useContext)(C.K).character.key,i=(0,j.useContext)(dt.t).database,a=(0,O.Z)(),s=(0,r.Z)(a,3),l=s[0],c=s[1],o=s[2];return(0,N.jsxs)(b.Z,{sx:{height:"100%",width:"100%",minHeight:300,display:"flex",flexDirection:"column"},children:[(0,N.jsx)(f.Z,{children:(0,N.jsx)(H.Z,{children:(0,N.jsx)(cn.ZP,{slotKey:t})})}),(0,N.jsx)(B.Z,{}),(0,N.jsxs)(d.Z,{sx:{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center"},children:[(0,N.jsx)(di,{slotKey:t,show:l,onClose:o,onChangeId:function(e){return i.arts.set(e,{location:n})}}),(0,N.jsx)(m.Z,{onClick:c,color:"info",sx:{borderRadius:"1em"},children:(0,N.jsx)(Xr.Z,{sx:{height:100,width:100}})})]})]})}function Pi(e){var t=e.weaponTypeKey,n=(0,Z.$)("page_character").t,i=(0,j.useContext)(C.K).character.key,a=(0,j.useContext)(dt.t).database,s=(0,O.Z)(),l=(0,r.Z)(s,3),c=l[0],o=l[1],u=l[2];return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(nr.Z,{title:(0,N.jsx)(H.Z,{children:n(fi||(fi=(0,Ye.Z)(["tabEquip.swapWeapon"])))}),placement:"top",arrow:!0,children:(0,N.jsx)(m.Z,{color:"info",size:"small",onClick:o,children:(0,N.jsx)(Xr.Z,{})})}),(0,N.jsx)(wi,{weaponTypeKey:t,onChangeId:function(e){return a.weapons.set(e,{location:i})},show:c,onClose:u})]})}function Ki(e){var t=e.weaponTypeKey,n=(0,Z.$)("page_character").t,i=(0,j.useContext)(C.K).character.key,a=(0,j.useContext)(dt.t).database,s=(0,O.Z)(),l=(0,r.Z)(s,3),c=l[0],o=l[1],u=l[2];return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(m.Z,{color:"info",onClick:o,startIcon:(0,N.jsx)(Xr.Z,{}),children:n(hi||(hi=(0,Ye.Z)(["tabEquip.swapWeapon"])))}),(0,N.jsx)(wi,{weaponTypeKey:t,onChangeId:function(e){return a.weapons.set(e,{location:i})},show:c,onClose:u})]})}function Oi(e){var t=e.slotKey,n=(0,Z.$)("page_character").t,i=(0,j.useContext)(C.K).character.key,a=(0,j.useContext)(dt.t).database,s=(0,O.Z)(),l=(0,r.Z)(s,3),c=l[0],o=l[1],u=l[2];return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(nr.Z,{title:(0,N.jsx)(H.Z,{children:n(pi||(pi=(0,Ye.Z)(["tabEquip.swapArt"])))}),placement:"top",arrow:!0,children:(0,N.jsx)(m.Z,{color:"info",size:"small",onClick:o,children:(0,N.jsx)(Xr.Z,{})})}),(0,N.jsx)(di,{slotKey:t,show:c,onClose:u,onChangeId:function(e){return a.arts.set(e,{location:i})}})]})}function Ei(){var e,t=(0,Z.$)(["page_character","artifact"]).t,n=(0,j.useContext)(dt.t).database,i=(0,j.useContext)(C.K),a=i.character,s=i.character,l=s.key,c=s.equippedArtifacts,o=(0,j.useContext)(S.R).data,u=(0,D.Z)((function(){return Lt.y.getAll}),[]),d=(0,j.useMemo)((function(){return!!Object.values(c).filter((function(e){return e})).length}),[c]),x=(0,j.useCallback)((function(){a&&window.confirm("Do you want to move all currently equipped artifacts to inventory?")&&Object.values(c).forEach((function(e){return n.arts.set(e,{location:""})}))}),[a,n,c]),h=(0,j.useMemo)((function(){return u&&Lt.y.setEffects(u,o)}),[u,o]),p=(0,ht.Z)("charMeta_".concat(l),mt.B),v=(0,r.Z)(p,2),g=v[0].rvFilter,w=v[1],k=(0,j.useCallback)((function(e){return w({rvFilter:e})}),[w]),P=(0,O.Z)(),K=(0,r.Z)(P,3),E=K[0],A=K[1],I=K[2],R=(0,j.useDeferredValue)(g),M=(0,j.useMemo)((function(){var e=Object.values(c).reduce((function(e,t){var r=n.arts.get(t);if(r){var i=An.ZP.getArtifactEfficiency(r,new Set(R)),a=i.currentEfficiency,s=i.maxEfficiency,l=An.ZP.getArtifactEfficiency(r,new Set(Gr._)),c=l.currentEfficiency,o=l.maxEfficiency;e.currentEfficiency=e.currentEfficiency+a,e.maxEfficiency=e.maxEfficiency+s,e.currentEfficiency_=e.currentEfficiency_+c,e.maxEfficiency_=e.maxEfficiency_+o}return e}),{currentEfficiency:0,currentEfficiency_:0,maxEfficiency:0,maxEfficiency_:0}),r=e.currentEfficiency,i=e.currentEfficiency_,a=e.maxEfficiency,s=e.maxEfficiency_;return{rvField:{text:t(mi||(mi=(0,Ye.Z)(["artifact:editor.curSubEff"]))),value:r-i?(0,N.jsxs)("span",{children:[(0,N.jsx)(ni.Z,{value:r,max:4500,valid:!0})," / ",(0,N.jsx)(ni.Z,{value:i,max:4500,valid:!0})]}):(0,N.jsx)(ni.Z,{value:r,max:4500,valid:!0})},rvmField:{text:t(ji||(ji=(0,Ye.Z)(["artifact:editor.maxSubEff"]))),canShow:function(){return!!(i-s)},value:a-s?(0,N.jsxs)("span",{children:[(0,N.jsx)(ni.Z,{value:a,max:4500,valid:!0})," / ",(0,N.jsx)(ni.Z,{value:s,max:4500,valid:!0})]}):(0,N.jsx)(ni.Z,{value:a,max:4500,valid:!0})}}}),[t,R,c,n]),z=M.rvField,_=M.rvmField;return(0,N.jsxs)(b.Z,{children:[d&&(0,N.jsx)(m.Z,{color:"error",onClick:x,fullWidth:!0,sx:{borderBottomRightRadius:0,borderBottomLeftRadius:0},children:t(Zi||(Zi=(0,Ye.Z)(["tabEquip.unequipArts"])))}),(0,N.jsx)(f.Z,{children:(0,N.jsxs)(oe.Z,{spacing:1,children:[(0,N.jsxs)(y.Z,{children:[(0,N.jsx)(m.Z,{fullWidth:!0,color:"info",startIcon:(0,N.jsx)(Nt.Z,{}),sx:{borderBottomLeftRadius:0,borderBottomRightRadius:0},onClick:A,children:"RV Filter"}),(0,N.jsx)(Q.Z,{open:E,onClose:I,children:(0,N.jsx)(y.Z,{children:(0,N.jsx)(f.Z,{children:(0,N.jsx)(ti.Z,{selectedKeys:g,onChange:k})})})}),(0,N.jsxs)(Me.lD,{children:[(0,N.jsx)(Me.ms,{field:z,component:de.ZP}),(null===_||void 0===_||null===(e=_.canShow)||void 0===e?void 0:e.call(_,o))&&(0,N.jsx)(Me.ms,{field:_,component:de.ZP})]})]}),u&&h&&Object.entries(h).flatMap((function(e){var t=(0,r.Z)(e,2),n=t[0];return t[1].map((function(e){return(0,N.jsx)(y.Z,{sx:{display:"flex",flexDirection:"column",gap:2},children:(0,N.jsx)(Bt,{setKey:n,setNumKey:e},n+e)},n+e)}))}))]})})]})}function Ai(){var e=(0,j.useRef)(),t=(0,j.useCallback)((function(){var t,n;return null===e||void 0===e||null===(t=e.current)||void 0===t||null===(n=t.scrollIntoView)||void 0===n?void 0:n.call(t,{behavior:"smooth"})}),[e]);return(0,N.jsxs)(oe.Z,{spacing:1,children:[(0,N.jsxs)(ue.ZP,{container:!0,spacing:1,sx:{justifyContent:"center"},children:[(0,N.jsx)(ue.ZP,{item:!0,xs:8,sm:5,md:4,lg:2.3,children:(0,N.jsx)(Ii,{})}),(0,N.jsxs)(ue.ZP,{item:!0,xs:12,sm:7,md:8,lg:9.7,sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,N.jsx)(Di,{onClick:t}),(0,N.jsx)(b.Z,{sx:{flexGrow:1,p:1},children:(0,N.jsx)(qn,{})})]})]}),(0,N.jsx)(d.Z,{ref:e,children:(0,N.jsx)(Ci,{})})]})}function Di(e){var t=e.onClick,n=(0,j.useContext)(C.K).character.equippedWeapon,r=(0,j.useContext)(S.R).data;return(0,N.jsxs)(ue.ZP,{container:!0,spacing:1,columns:{xs:2,sm:2,md:3,lg:6,xl:6},children:[(0,N.jsx)(ue.ZP,{item:!0,xs:1,children:(0,N.jsx)(Vn,{weaponId:n,BGComponent:b.Z,onClick:t})}),M.eV.map((function(e){return(0,N.jsx)(ue.ZP,{item:!0,xs:1,children:(0,N.jsx)(zn,{artifactId:r.get(Ze.ri.art[e].id).value,slotKey:e,BGComponent:b.Z,onClick:t})},e)}))]})}function Ii(){var e,t=(0,j.useContext)(C.K),n=t.characterSheet,i=t.character,a=i.key,s=i.team,l=(0,j.useContext)(S.R).data,c=(0,A.Z)(a),o=(0,g.s0)(),u=l.get(Ze.ri.charEle).value,x=n.weaponTypeKey,h=l.get(Ze.ri.lvl).value,p=l.get(Ze.ri.asc).value,m=l.get(Ze.ri.constellation).value,Z={auto:l.get(Ze.ri.total.auto).value,skill:l.get(Ze.ri.total.skill).value,burst:l.get(Ze.ri.total.burst).value},v={auto:l.get(Ze.ri.bonus.auto).value,skill:l.get(Ze.ri.bonus.skill).value,burst:l.get(Ze.ri.bonus.burst).value},y=(0,ht.Z)("charMeta_".concat(a),mt.B),w=(0,r.Z)(y,2),k=w[0].favorite,P=w[1];return(0,N.jsxs)(b.Z,{sx:{height:"100%"},children:[(0,N.jsxs)(d.Z,{sx:{position:"relative"},children:[(0,N.jsxs)(d.Z,{sx:{position:"absolute",width:"100%",height:"100%"},children:[(0,N.jsx)(H.Z,{variant:"h6",sx:{position:"absolute",left:"50%",bottom:0,transform:"translate(-50%, -50%)",opacity:.75},children:(0,N.jsx)(un.q,{stars:n.rarity,colored:!0})}),(0,N.jsx)(d.Z,{sx:{position:"absolute",left:"50%",bottom:"5%",transform:"translate(-50%, -50%)",opacity:.85,width:"100%",display:"flex",justifyContent:"center",px:1},children:(0,N.jsx)(me.Z,{color:u,sx:{height:"auto"},label:(0,N.jsxs)(H.Z,{variant:"h6",sx:{display:"flex",gap:1,alignItems:"center"},children:[ke.Z[u],(0,N.jsx)(d.Z,{sx:{whiteSpace:"normal",textAlign:"center"},children:n.name}),(0,N.jsx)(X.Z,{src:null===(e=En.Z.weaponTypes)||void 0===e?void 0:e[x]})]})})}),(0,N.jsx)(d.Z,{sx:{position:"absolute",left:0,top:0},children:(0,N.jsx)(ye.Z,{sx:{p:1},color:"error",onClick:function(){return P({favorite:!k})},children:k?(0,N.jsx)(Ur.Z,{}):(0,N.jsx)($r.Z,{})})}),(0,N.jsx)(H.Z,{sx:{p:1,position:"absolute",right:0,top:0,opacity:.8},children:(0,N.jsx)(ee.Z,{children:(0,Jr.wQ)(h,p)})})]}),(0,N.jsx)(d.Z,{src:n.cardImg,component:"img",width:"100%",height:"auto"})]}),(0,N.jsxs)(f.Z,{children:[(0,N.jsx)(Pn.Z,{sx:{p:1},onClick:function(){return o("talent")},children:(0,N.jsx)(ue.ZP,{container:!0,spacing:1,mt:-1,children:["auto","skill","burst"].map((function(e){var t;return(0,N.jsx)(ue.ZP,{item:!0,xs:4,children:(0,N.jsx)(Yr.Z,{badgeContent:Z[e],color:v[e]?"info":"secondary",overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},sx:{width:"100%",height:"100%","& > .MuiBadge-badge":{fontSize:"1.25em",padding:".25em .4em",borderRadius:".5em",lineHeight:1,height:"1.25em"}},children:(0,N.jsx)(d.Z,{component:"img",src:null===(t=n.getTalentOfKey(e,u))||void 0===t?void 0:t.img,width:"100%",height:"auto"})})},e)}))})}),(0,N.jsx)(H.Z,{sx:{textAlign:"center",mt:1},variant:"h6",children:n.constellationName}),(0,N.jsx)(ue.ZP,{container:!0,spacing:1,children:(0,jt.w6)(1,6).map((function(e){var t;return(0,N.jsx)(ue.ZP,{item:!0,xs:4,children:(0,N.jsx)(Pn.Z,{onClick:function(){return c({constellation:e===m?e-1:e})},children:(0,N.jsx)(d.Z,{component:"img",src:null===(t=n.getTalentOfKey("constellation".concat(e),u))||void 0===t?void 0:t.img,sx:(0,fe.Z)({},m>=e?{}:{filter:"brightness(50%)"}),width:"100%",height:"auto"})})},e)}))}),(0,N.jsx)(Pn.Z,{sx:{p:1},onClick:function(){return o("teambuffs")},children:(0,N.jsx)(ue.ZP,{container:!0,columns:3,spacing:1,children:(0,jt.w6)(0,2).map((function(e){return(0,N.jsx)(ue.ZP,{item:!0,xs:1,height:"100%",children:(0,N.jsx)(Kr.Z,{characterKey:s[e],index:e})},e)}))})})]})]})}var Ri={xs:12,sm:6,md:4};function Mi(){var e=(0,j.useContext)(C.K),t=e.character,n=e.characterSheet,i=(0,j.useContext)(S.R).data,a=(0,A.Z)(t.key),s=i.get(Ze.ri.charEle).value,l=i.get(Ze.ri.asc).value,c=i.get(Ze.ri.constellation).value,o=(0,ei.Z)(),u=(0,Qr.Z)(o.breakpoints.up("lg")),x=(0,j.useMemo)((function(){return(0,jt.w6)(1,6).map((function(e){return(0,N.jsx)(Ti,{talentKey:"constellation".concat(e),subtitle:"Constellation Lv. ".concat(e),onClickTitle:function(){return a({constellation:e===c?e-1:e})}})}))}),[c,a]);return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(zi,{}),(0,N.jsxs)(ue.ZP,{container:!0,spacing:1,children:[u&&(0,N.jsxs)(ue.ZP,{item:!0,xs:12,md:12,lg:3,sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,N.jsx)(b.Z,{children:(0,N.jsx)(f.Z,{children:(0,N.jsxs)(H.Z,{variant:"h6",sx:{textAlign:"center"},children:["Constellation Lv. ",c]})})}),x.map((function(e,t){return(0,N.jsx)(d.Z,{sx:{opacity:c>=t+1?1:.5},children:e},t)}))]}),(0,N.jsxs)(ue.ZP,{item:!0,xs:12,md:12,lg:9,container:!0,spacing:1,children:[[["auto","Normal/Charged Attack"],["skill","Elemental Skill"],["burst","Elemental Burst"]].map((function(e){var t=(0,r.Z)(e,2),n=t[0],i=t[1];return(0,N.jsx)(ue.ZP,(0,fe.Z)((0,fe.Z)({item:!0},Ri),{},{children:(0,N.jsx)(Ti,{talentKey:n,subtitle:i})}),n)})),!!n.getTalentOfKey("sprint",s)&&(0,N.jsx)(ue.ZP,(0,fe.Z)((0,fe.Z)({item:!0},Ri),{},{children:(0,N.jsx)(Ti,{talentKey:"sprint",subtitle:"Alternative Sprint"})})),!!n.getTalentOfKey("passive",s)&&(0,N.jsx)(ue.ZP,(0,fe.Z)((0,fe.Z)({item:!0},Ri),{},{children:(0,N.jsx)(Ti,{talentKey:"passive",subtitle:"Passive"})})),[["passive1","Unlocked at Ascension 1",1],["passive2","Unlocked at Ascension 4",4],["passive3","Unlocked by Default",0]].map((function(e){var t=(0,r.Z)(e,3),i=t[0],a=t[1],c=t[2],o=l>=c;return n.getTalentOfKey(i,s)?(0,N.jsx)(ue.ZP,(0,fe.Z)((0,fe.Z)({item:!0,style:{opacity:o?1:.5}},Ri),{},{children:(0,N.jsx)(Ti,{talentKey:i,subtitle:a})}),i):null}))]}),!u&&(0,N.jsxs)(ue.ZP,{item:!0,xs:12,md:12,lg:3,container:!0,spacing:1,children:[(0,N.jsx)(ue.ZP,{item:!0,xs:12,children:(0,N.jsx)(b.Z,{children:(0,N.jsx)(f.Z,{children:(0,N.jsxs)(H.Z,{variant:"h6",sx:{textAlign:"center"},children:["Constellation Lv. ",c]})})})}),x.map((function(e,t){return(0,N.jsx)(ue.ZP,(0,fe.Z)((0,fe.Z)({item:!0,sx:{opacity:c>=t+1?1:.5}},Ri),{},{children:e}),t)}))]})]})]})}function zi(){var e=(0,j.useContext)(S.R).data.getDisplay().reaction;return(0,N.jsx)(b.Z,{children:(0,N.jsx)(f.Z,{children:(0,N.jsx)(ue.ZP,{container:!0,spacing:1,children:Object.entries(e).map((function(e){var t=(0,r.Z)(e,2),n=t[0],i=t[1];return(0,N.jsx)(ue.ZP,{item:!0,children:(0,N.jsx)(y.Z,{children:(0,N.jsx)(f.Z,{sx:{p:1,"&:last-child":{pb:1}},children:(0,N.jsx)(Me.JW,{node:i})})})},n)}))})})})}var _i=[1,1,2,4,6,8,10];function Ti(e){var t=e.talentKey,n=e.subtitle,r=e.onClickTitle,i=(0,j.useContext)(C.K),a=i.character.talent,s=i.characterSheet,l=i.characterDispatch,c=(0,j.useContext)(S.R).data,o=(0,j.useCallback)((function(e){return(0,N.jsx)(Pn.Z,{onClick:r,children:e})}),[r]),u=(0,j.useCallback)((function(e,t){return l({talent:(0,fe.Z)((0,fe.Z)({},a),{},(0,Tr.Z)({},e,t))})}),[a,l]),x=null;if(t in a){var h=c.get(Ze.ri.bonus[t]).value,p=c.get(Ze.ri.total[t]).value,m=c.get(Ze.ri.asc).value;x=(0,N.jsx)(ct.Z,{fullWidth:!0,title:"Talent Lv. ".concat(p),color:h?"info":"primary",sx:{borderRadius:0},children:(0,jt.w6)(1,_i[m]).map((function(e){return(0,N.jsxs)(nt.Z,{selected:a[t]===e,disabled:a[t]===e,onClick:function(){return u(t,e)},children:["Talent Lv. ",e+h]},e)}))})}var Z=s.getTalentOfKey(t,c.get(Ze.ri.charEle).value);return(0,N.jsxs)(b.Z,{sx:{height:"100%"},children:[x,(0,N.jsxs)(f.Z,{children:[(0,N.jsx)(In.Z,{condition:!!r,wrapper:o,children:(0,N.jsxs)(ue.ZP,{container:!0,sx:{flexWrap:"nowrap"},children:[(0,N.jsx)(ue.ZP,{item:!0,children:(0,N.jsx)(d.Z,{component:"img",src:null===Z||void 0===Z?void 0:Z.img,sx:{width:60,height:"auto"}})}),(0,N.jsxs)(ue.ZP,{item:!0,flexGrow:1,sx:{pl:1},children:[(0,N.jsx)(H.Z,{variant:"h6",children:null===Z||void 0===Z?void 0:Z.name}),(0,N.jsx)(H.Z,{variant:"subtitle1",children:n})]})]})}),null!==Z&&void 0!==Z&&Z.sections?(0,N.jsx)(Wt.Z,{sections:Z.sections,hideDesc:!0,hideHeader:function(e){var n,r=null===(n=e.header)||void 0===n?void 0:n.action;return!(!r||"string"===typeof r)&&r.props.children.props.key18.includes(t)}}):null]})]})}var Gi=n(49142),Ni=n(16649),qi=n(33439),Li=n(59496),Wi=n(36030),Bi=n(82095),Fi=n(6805),Vi=n(44361),Hi=n(82010),Ui=n(11400);function $i(){var e,t=(0,j.useContext)(dt.t).database,n=(0,j.useContext)(S.R).data,i=(0,j.useContext)(C.K),a=i.character,s=i.character,l=s.key,c=s.compareData,o=i.characterSheet,u=i.characterDispatch,f=function(e,t){var n=(0,j.useContext)(dt.t).database,i=(0,j.useState)(n.charTCs.getWithInit(e,t)),a=(0,r.Z)(i,2),s=a[0],l=a[1];return(0,j.useEffect)((function(){return l(n.charTCs.getWithInit(e,t))}),[n,e,t]),(0,j.useEffect)((function(){return e?n.charTCs.follow(e,(function(e){return e&&l(e)})):void 0}),[e,l,n]),s}(l,(0,Ui.mT)(o.weaponTypeKey)),h=(0,j.useCallback)((function(e){return t.charTCs.set(l,e)}),[l,t]),p=(0,j.useCallback)((function(){h((0,Hi.O)((0,Ui.mT)(o.weaponTypeKey)))}),[h,o]),Z=(0,j.useCallback)((function(e){h((0,fe.Z)((0,fe.Z)({},f),{},{weapon:(0,fe.Z)((0,fe.Z)({},f.weapon),e)}))}),[h,f]),v=(0,j.useCallback)((function(){var e=t.weapons.get(a.equippedWeapon),n=(0,Hi.O)(e.key);n.artifact.substats.type=f.artifact.substats.type,n.weapon.level=e.level,n.weapon.ascension=e.ascension,n.weapon.refinement=e.refinement;var i={};Object.values(a.equippedArtifacts).forEach((function(e){var r,a=t.arts.get(e);if(a){var s=a.slotKey,l=a.setKey,c=a.substats,o=a.mainStatKey,u=a.level,d=a.rarity;n.artifact.slots[s].level=u,n.artifact.slots[s].statKey=o,n.artifact.slots[s].rarity=d,i[l]=(null!==(r=i[l])&&void 0!==r?r:0)+1,c.forEach((function(e){var t;return n.artifact.substats.stats[e.key]=(null!==(t=n.artifact.substats.stats[e.key])&&void 0!==t?t:0)+e.accurateValue}))}})),n.artifact.sets=Object.fromEntries(Object.entries(i).map((function(e){var t=(0,r.Z)(e,2),n=t[0],i=t[1];return[n,3===i?2:5===i?4:1!==i||n.startsWith("PrayersFor")?i:0]})).filter((function(e){var t=(0,r.Z)(e,2);t[0];return t[1]}))),h(n)}),[t,f,a.equippedArtifacts,a.equippedWeapon,h]),g=(0,j.useMemo)((function(){return(0,fe.Z)((0,fe.Z)({},f.weapon),{},{location:"",lock:!1,id:""})}),[f]),y=(0,j.useCallback)((function(e){var t=(0,jt.I8)(f);t.artifact=e,h(t)}),[f,h]),w=(0,j.useCallback)((function(e){var t=(0,jt.I8)(f);t.artifact.substats.type=e,h(t)}),[f,h]),k=(0,j.useCallback)((function(e){var t=(0,jt.I8)(f);t.artifact.substats.stats=e,h(t)}),[f,h]),P=(0,j.useMemo)((function(){var e=(0,fe.Z)({},f.artifact.substats.stats);return Object.values(f.artifact.slots).forEach((function(t){var n,r=t.statKey,i=t.rarity,a=t.level;return e[r]=(null!==(n=e[r])&&void 0!==n?n:0)+An.ZP.mainStatValue(r,i,a)})),{art:(0,jt.xh)(e,(function(e,t){return t.endsWith("_")?(0,yt.aQ)(e/100):(0,yt.a9)(e)})),artSet:(0,jt.xh)(f.artifact.sets,(function(e){return(0,yt.a9)(e)}))}}),[f]),K=(0,j.useMemo)((function(){return{id:"",location:"",key:f.weapon.key,level:f.weapon.level,ascension:f.weapon.ascension,refinement:f.weapon.refinement,lock:!1}}),[f]),O=(0,I.Z)(l,0,P,K),E=(null!==(e=null===O||void 0===O?void 0:O[l])&&void 0!==e?e:{}).target,A=(0,j.useMemo)((function(){if(O&&E)return{data:E,teamData:O,oldData:c?n:void 0}}),[E,O,c,n]);return(0,N.jsx)(oe.Z,{spacing:1,children:A?(0,N.jsxs)(S.R.Provider,{value:A,children:[(0,N.jsx)(d.Z,{children:(0,N.jsx)(b.Z,{children:(0,N.jsxs)(d.Z,{sx:{display:"flex",gap:1,p:1},children:[(0,N.jsxs)(d.Z,{sx:{flexGrow:1,display:"flex",gap:1},children:[(0,N.jsx)(m.Z,{color:"info",onClick:v,startIcon:(0,N.jsx)(Ni.Z,{}),children:"Copy from equipped"}),(0,N.jsx)(m.Z,{color:"error",onClick:p,startIcon:(0,N.jsx)(qi.Z,{}),children:"Reset"})]}),(0,N.jsxs)(ot.Z,{exclusive:!0,value:c,onChange:function(e,t){return u({compareData:t})},size:"small",children:[(0,N.jsx)(rt.Z,{value:!1,disabled:!c,children:"Show TC stats"}),(0,N.jsx)(rt.Z,{value:!0,disabled:c,children:"Compare vs. equipped"})]})]})})}),(0,N.jsx)(d.Z,{children:(0,N.jsxs)(ue.ZP,{container:!0,spacing:1,sx:{justifyContent:"center"},columns:4,children:[(0,N.jsx)(ue.ZP,{item:!0,sx:{flexGrow:-1},children:(0,N.jsx)(Yi,{weapon:g,setWeapon:Z,weaponTypeKey:o.weaponTypeKey})}),(0,N.jsx)(ue.ZP,{item:!0,sx:{flexGrow:1},children:(0,N.jsx)(Ji,{artifactData:f.artifact,setArtifactData:y})}),(0,N.jsx)(ue.ZP,{item:!0,sx:{flexGrow:1},children:(0,N.jsx)(ta,{substats:f.artifact.substats.stats,setSubstats:k,substatsType:f.artifact.substats.type,setSubstatsType:w})})]})}),(0,N.jsx)(b.Z,{sx:{flexGrow:1,p:1},children:(0,N.jsx)(qn,{})})]}):(0,N.jsx)(x.Z,{variant:"rectangular",width:"100%",height:1e3})})}function Yi(e){var t=e.weapon,n=e.setWeapon,i=e.weaponTypeKey,a=t.key,s=t.level,l=void 0===s?0:s,c=t.refinement,o=void 0===c?1:c,u=t.ascension,x=void 0===u?0:u,f=(0,D.Z)((function(){return Wn.Z.get(a)}),[a]),h=(0,O.Z)(),p=(0,r.Z)(h,3),Z=p[0],v=p[1],g=p[2],w=(0,j.useContext)(S.R).data,k=(0,j.useMemo)((function(){return f&&t&&(0,xt.mP)([f.data,(0,xt.v0)(t)])}),[f,t]);return(0,N.jsxs)(b.Z,{sx:{p:1,height:"100%"},children:[(0,N.jsx)(Vi.Z,{ascension:x,show:Z,onHide:g,onSelect:function(e){return n({key:e})},weaponTypeFilter:i}),(0,N.jsxs)(d.Z,{display:"flex",flexDirection:"column",gap:1,children:[(0,N.jsxs)(d.Z,{display:"flex",gap:1,children:[f&&(0,N.jsx)(d.Z,{className:"grad-".concat(f.rarity,"star"),component:"img",src:f.getImg(t.ascension),sx:{flexshrink:1,flexBasis:0,maxWidth:"30%",borderRadius:1}}),(0,N.jsxs)(oe.Z,{spacing:1,flexGrow:1,children:[(0,N.jsx)(m.Z,{fullWidth:!0,color:"info",sx:{flexGrow:1},onClick:v,children:null===f||void 0===f?void 0:f.name}),(null===f||void 0===f?void 0:f.hasRefinement)&&(0,N.jsx)(Fi.Z,{refinement:o,setRefinement:function(e){return n({refinement:e})}})]})]}),f&&(0,N.jsx)(le.Z,{level:l,ascension:x,setBoth:n,useLow:!f.hasRefinement}),(0,N.jsxs)(y.Z,{children:[(0,N.jsx)(W.Z,{title:"Main Stats",titleTypographyProps:{variant:"subtitle2"}}),(0,N.jsx)(B.Z,{}),k&&(0,N.jsx)(Me.lD,{children:[Ze.ri.weapon.main,Ze.ri.weapon.sub,Ze.ri.weapon.sub2].map((function(e,t){var n=k.get(e);return n.isEmpty||!n.value?null:(0,N.jsx)(Me.JW,{node:n,component:de.ZP},n.info.key)}))})]}),w&&(null===f||void 0===f?void 0:f.document)&&(0,N.jsx)(Wt.Z,{sections:f.document})]})]})}function Ji(e){var t=e.artifactData,n=e.setArtifactData,r=(0,j.useCallback)((function(e){return function(r){var i=(0,jt.I8)(t);i.slots[e]=r,n(i)}}),[t,n]),i=(0,j.useCallback)((function(e){var r=(0,jt.I8)(t);r.sets=e,n(r)}),[t,n]);return(0,N.jsxs)(oe.Z,{spacing:1,sx:{height:"100%"},children:[(0,N.jsx)(b.Z,{sx:{p:1},children:(0,N.jsx)(oe.Z,{spacing:1,children:M.eV.map((function(e){return(0,N.jsx)(Xi,{slotKey:e,slot:t.slots[e],setSlot:r(e)},e)}))})}),(0,N.jsx)(Qi,{artSet:t.sets,setArtSet:i})]})}function Xi(e){var t,n=e.slotKey,r=e.slot,i=e.setSlot,a=r.level,s=r.statKey,l=r.rarity,c=An.ZP.slotMainStats(n),o=(0,j.useCallback)((function(e){i((0,fe.Z)((0,fe.Z)({},r),e))}),[r,i]),u=(0,j.useCallback)((function(e){var t,n=null!==(t=An.P4[e])&&void 0!==t?t:0;o(a>n?{rarity:e,level:n}:{rarity:e})}),[a,o]);return(0,N.jsxs)(d.Z,{display:"flex",gap:1,justifyContent:"space-between",alignItems:"center",children:[(0,N.jsx)(Bi.Z,{icon:cn.xe[n]}),(0,N.jsx)(y.Z,{sx:{height:"100%",minWidth:"5em",flexGrow:1,display:"flex"},children:1===c.length?(0,N.jsxs)(d.Z,{p:1,justifyContent:"center",alignItems:"center",width:"100%",display:"flex",gap:1,children:[ke.Z[c[0]],ne.ZP.getStr(c[0])]}):(0,N.jsx)(ct.Z,{sx:{px:0},fullWidth:!0,title:(0,N.jsx)(Rn.x,{statKey:s}),color:null!==(t=ne.ZP.getVariant(s))&&void 0!==t?t:"success",children:c.map((function(e){return(0,N.jsx)(nt.Z,{disabled:s===e,onClick:function(){return o({statKey:e})},children:(0,N.jsx)(Rn._,{statKey:e})},e)}))})}),(0,N.jsx)(ct.Z,{sx:{px:0},title:(0,N.jsxs)("span",{children:[l," ",(0,N.jsx)(Gt.G,{icon:Tt.Tab})]}),children:[5,4,3].map((function(e){return(0,N.jsx)(nt.Z,{disabled:l===e,onClick:function(){return u(e)},children:(0,N.jsxs)("span",{children:[e," ",(0,N.jsx)(Gt.G,{icon:Tt.Tab})]})},e)}))}),(0,N.jsx)(Pe.ZP,{startAdornment:"+",value:a,color:An.ZP.levelVariant(a),onChange:function(e){return void 0!==e&&o({level:e})},sx:{borderRadius:1,pl:1,my:0,height:"100%"},inputProps:{sx:{pl:.5,width:"2em"},max:20,min:0}}),(0,N.jsx)(y.Z,{sx:{height:"100%",minWidth:"4em"},children:(0,N.jsx)(d.Z,{p:1,textAlign:"center",children:"".concat((0,ne.qs)(An.ZP.mainStatValue(s,l,a),ne.ZP.unit(s))).concat(ne.ZP.unit(s))})})]})}function Qi(e){var t=e.artSet,n=e.setArtSet,i=(0,D.Z)((function(){return Lt.y.getAll}),[]),a=(0,j.useCallback)((function(e){e&&i&&n((0,fe.Z)((0,fe.Z)({},t),{},(0,Tr.Z)({},e,parseInt(Object.keys(i[e].setEffects)[0]))))}),[t,n,i]),s=(0,j.useCallback)((function(e){return function(r){return n((0,fe.Z)((0,fe.Z)({},t),{},(0,Tr.Z)({},e,r)))}}),[t,n]),l=(0,j.useCallback)((function(e){return function(){t[e];var r=(0,ve.Z)(t,[e].map(Gi.Z));n((0,fe.Z)({},r))}}),[t,n]),c=5-Object.values(t).reduce((function(e,t){return e+t}),0);return(0,N.jsxs)(oe.Z,{spacing:1,sx:{flexGrow:1},children:[Object.entries(t).map((function(e){var t=(0,r.Z)(e,2),n=t[0],i=t[1];return(0,N.jsx)(ea,{setKey:n,value:i,setValue:s(n),deleteValue:l(n),remaining:c},n)})),(0,N.jsx)(b.Z,{sx:{flexGrow:1},children:(0,N.jsx)(Wi.Y4,{showDefault:!0,disableClearable:!0,size:"small",artSetKey:"",setArtSetKey:a,sx:function(e){return{flexGrow:1,".MuiFilledInput-root":{borderBottomRightRadius:e.shape.borderRadius,borderBottomLeftRadius:e.shape.borderRadius}}},defaultText:"New Artifact Set",disable:function(e){return Object.keys(t).includes(e)||!(null!==i&&void 0!==i&&i[e])||Object.keys(i[e].setEffects).every((function(e){return parseInt(e)>c}))}})})]})}function ea(e){var t=e.setKey,n=e.value,r=e.setValue,i=e.deleteValue,a=e.remaining,s=(0,D.Z)((function(){return Lt.y.get(t)}),[]),l=(0,j.useMemo)((function(){return n<4||!s?[]:Object.keys(s.setEffects).filter((function(e){var t;return null===(t=s.setEffects[e])||void 0===t?void 0:t.document.some((function(e){return"states"in e}))}))}),[s,n]);return s?(0,N.jsxs)(b.Z,{children:[(0,N.jsxs)(d.Z,{display:"flex",children:[(0,N.jsx)(Gn.Z,{artifactSheet:s,numInSet:n,children:(0,N.jsxs)(d.Z,{flexGrow:1,p:1,display:"flex",gap:1,alignItems:"center",children:[(0,N.jsx)(X.Z,{size:2,sx:{m:-1},src:s.defIconSrc}),(0,N.jsx)(d.Z,{children:s.setName}),(0,N.jsx)(er.Z,{})]})}),(0,N.jsxs)(Se.Z,{children:[(0,N.jsx)(ct.Z,{size:"small",title:(0,N.jsxs)(d.Z,{whiteSpace:"nowrap",children:[n,"-set"]}),children:Object.keys(s.setEffects).map((function(e){return parseInt(e)})).map((function(e){return(0,N.jsxs)(nt.Z,{disabled:n===e||e>a+n,onClick:function(){return r(e)},children:[e,"-set"]},e)}))}),(0,N.jsx)(m.Z,{color:"error",size:"small",onClick:i,children:(0,N.jsx)(Li.Z,{})})]})]}),!!l.length&&(0,N.jsx)(oe.Z,{spacing:1,sx:{p:1},children:l.map((function(e){return(0,N.jsx)(Bt,{setKey:t,setNumKey:parseInt(e),hideHeader:!0,conditionalsOnly:!0},e)}))})]}):null}function ta(e){var t=e.substats,n=e.setSubstats,i=e.substatsType,a=e.setSubstatsType,s=(0,j.useCallback)((function(e){return function(r){return n((0,fe.Z)((0,fe.Z)({},t),{},(0,Tr.Z)({},e,r)))}}),[t,n]),l=(0,Z.$)("page_character").t,c=100*Object.entries(t).reduce((function(e,t){var n=(0,r.Z)(t,2),i=n[0];return e+n[1]/An.ZP.substatValue(i)}),0);return(0,N.jsxs)(b.Z,{sx:{p:1,height:"100%"},children:[(0,N.jsxs)(d.Z,{sx:{mb:1,display:"flex",gap:1},children:[(0,N.jsx)(ct.Z,{fullWidth:!0,title:l("tabTheorycraft.substatType.".concat(i)),children:M.Q7.map((function(e){return(0,N.jsx)(nt.Z,{disabled:i===e,onClick:function(){return a(e)},children:l("tabTheorycraft.substatType.".concat(e))},e)}))}),(0,N.jsxs)(y.Z,{sx:{textAlign:"center",p:.5,minWidth:"10em"},children:["Tot. RV: ",(0,N.jsxs)("strong",{children:[c.toFixed(1),"%"]})]})]}),(0,N.jsx)(oe.Z,{spacing:1,children:Object.entries(t).map((function(e){var t=(0,r.Z)(e,2),n=t[0],a=t[1];return(0,N.jsx)(na,{statKey:n,value:a,setValue:s(n),substatsType:i},n)}))})]})}function na(e){var t=e.statKey,n=e.value,r=e.setValue,i=e.substatsType,a=ne.ZP.unit(t),s=An.ZP.substatValue(t,5,i),l=n/An.ZP.substatValue(t)*100;return(0,N.jsxs)(d.Z,{display:"flex",gap:1,justifyContent:"space-between",alignItems:"center",children:[(0,N.jsxs)(y.Z,{sx:{p:.5,minWidth:"11em",flexGrow:1,display:"flex",gap:1,alignItems:"center",justifyContent:"center"},children:[ke.Z[t],ne.ZP.getStr(t),ne.ZP.unit(t)]}),(0,N.jsx)(Pe.ZP,{color:n?"success":"primary",float:"%"===ne.ZP.unit(t),endAdornment:ne.ZP.unit(t)||(0,N.jsx)(d.Z,{width:"1em",component:"span"}),value:parseFloat(n.toFixed(2)),onChange:function(e){return void 0!==e&&r(e)},sx:{borderRadius:1,px:1,height:"100%",width:"6em"},inputProps:{sx:{textAlign:"right"},min:0}}),(0,N.jsx)(Pe.ZP,{color:n?"success":"primary",float:!0,startAdornment:(0,N.jsxs)(d.Z,{sx:{whiteSpace:"nowrap",width:"7em",display:"flex",justifyContent:"space-between"},children:[(0,N.jsxs)("span",{children:[(0,ne.qs)(s,a),a]}),(0,N.jsx)("span",{children:"x"})]}),value:parseFloat((n/s).toFixed(2)),onChange:function(e){return void 0!==e&&r(e*s)},sx:{borderRadius:1,px:1,my:0,height:"100%",width:"7em"},inputProps:{sx:{textAlign:"right",pr:.5},min:0,step:1}}),(0,N.jsxs)(y.Z,{sx:{textAlign:"center",p:.5,minWidth:"8em"},children:["RV: ",(0,N.jsxs)("strong",{children:[l.toFixed(1),"%"]})]})]})}var ra=n(43992),ia=n(31038),aa=n(11741);function sa(){return(0,N.jsx)(xe.Z,{display:"flex",flexDirection:"column",gap:1,alignItems:"stretch",children:(0,N.jsxs)(ue.ZP,{container:!0,spacing:1,children:[(0,N.jsxs)(ue.ZP,{item:!0,xs:12,md:6,lg:3,sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,N.jsx)(la,{}),(0,N.jsx)(ca,{})]}),(0,jt.w6)(0,2).map((function(e){return(0,N.jsx)(ue.ZP,{item:!0,xs:12,md:6,lg:3,children:(0,N.jsx)(oa,{index:e})},e)}))]})})}function la(){var e,t,n,i=(0,j.useContext)(S.R),a=i.data,s=i.oldData,l=a.getTeamBuff(),c=[];return Object.entries(null!==(e=l.total)&&void 0!==e?e:{}).forEach((function(e){var t=(0,r.Z)(e,2),n=t[0],i=t[1];return!i.isEmpty&&0!==i.value&&c.push([["total",n],i])})),Object.entries(null!==(t=l.premod)&&void 0!==t?t:{}).forEach((function(e){var t=(0,r.Z)(e,2),n=t[0],i=t[1];return!i.isEmpty&&0!==i.value&&c.push([["premod",n],i])})),Object.entries(null!==(n=l.enemy)&&void 0!==n?n:{}).forEach((function(e){var t=(0,r.Z)(e,2),n=t[0],i=t[1];return!i.isEmpty&&"number"===typeof i.value&&0!==i.value&&c.push([["enemy",n],i])})),c.length?(0,N.jsxs)(b.Z,{children:[(0,N.jsx)(f.Z,{children:(0,N.jsx)(H.Z,{children:"Team Buffs"})}),(0,N.jsx)(B.Z,{}),(0,N.jsx)(f.Z,{children:(0,N.jsx)(ue.ZP,{container:!0,children:c.map((function(e,t){var n,i,a=(0,r.Z)(e,2),l=a[0],c=a[1];return c&&(0,N.jsx)(ue.ZP,{item:!0,xs:12,children:(0,N.jsx)(Me.JW,{node:c,oldValue:null===(i=(0,jt.Hm)(null===s||void 0===s?void 0:s.getTeamBuff(),l))||void 0===i?void 0:i.value})},(null!==(n=c.info.key)&&void 0!==n?n:"")+t)}))})})]}):null}function ca(){var e=(0,j.useContext)(S.R).data;return(0,N.jsx)(N.Fragment,{children:aa.J.map((function(t,n){var r=(0,N.jsx)(on.Z,{title:(0,N.jsx)(H.Z,{children:t.desc})}),i=(0,N.jsxs)("span",{children:[t.name," ",r]});return(0,N.jsxs)(b.Z,{sx:{opacity:t.canShow(e)?1:.5},children:[(0,N.jsx)(W.Z,{title:i,action:t.icon,titleTypographyProps:{variant:"subtitle2"}}),t.canShow(e)&&(0,N.jsx)(B.Z,{}),t.canShow(e)&&(0,N.jsx)(f.Z,{children:(0,N.jsx)(Wt.Z,{sections:t.sections,teamBuffOnly:!0,hideDesc:!0})})]},n)}))})}function oa(e){var t=e.index,n=(0,j.useContext)(S.R).teamData,r=(0,Z.$)("page_character").t,i=(0,j.useContext)(C.K),a=i.character,s=i.character.key,l=i.characterDispatch,c=a.team[t],o=(0,G.Z)(),u=n[c],d=(0,j.useMemo)((function(){var e;return u&&{character:(0,fe.Z)((0,fe.Z)({},u.character),{},{conditional:null!==(e=a.teamConditional[c])&&void 0!==e?e:{}}),characterSheet:u.characterSheet,characterDispatch:function(e){if(c&&"conditional"in e){var t=e.conditional;l({type:"teamConditional",teamMateKey:c,conditional:t})}}}}),[a,c,u,l]),x=(0,j.useMemo)((function(){return u&&{data:u.target,teamData:n}}),[u,n]);return(0,N.jsxs)(b.Z,{children:[(0,N.jsx)(ia.Z,{fullWidth:!0,value:c,onChange:function(e){return l({type:"team",index:t,charKey:e})},disable:function(e){return e===s||""!==e&&a.team.includes(e)},labelText:r("teammate",{count:t+1}),defaultText:r("none"),defaultIcon:(0,N.jsx)(ra.Z,{}),showDefault:!0}),d&&(0,N.jsx)(C.K.Provider,{value:d,children:x&&(0,N.jsx)(S.R.Provider,{value:x,children:(0,N.jsx)(lt.Z,{characterKey:c,onClickHeader:o,artifactChildren:(0,N.jsx)(C.K.Provider,{value:d,children:(0,N.jsx)(S.R.Provider,{value:x,children:(0,N.jsx)(ua,{})})}),weaponChildren:(0,N.jsx)(C.K.Provider,{value:d,children:(0,N.jsx)(S.R.Provider,{value:x,children:(0,N.jsx)(da,{})})}),characterChildren:(0,N.jsx)(C.K.Provider,{value:d,children:(0,N.jsx)(S.R.Provider,{value:x,children:(0,N.jsx)(xa,{})})}),isTeammateCard:!0})})})]})}function ua(){var e=(0,j.useContext)(S.R).data,t=(0,D.Z)((function(){return Lt.y.getAll}),[]),n=(0,j.useMemo)((function(){return t&&Object.entries(Lt.y.setEffects(t,e)).flatMap((function(e){var n=(0,r.Z)(e,2),i=n[0];return n[1].flatMap((function(e){return t[i].setEffectDocument(e)}))}))}),[t,e]);return n?(0,N.jsx)(Wt.Z,{sections:n,teamBuffOnly:!0}):null}function da(){var e=(0,j.useContext)(C.K).character.key,t=(0,j.useContext)(S.R).teamData[e].weaponSheet;return t.document?(0,N.jsx)(Wt.Z,{sections:t.document,teamBuffOnly:!0}):null}function xa(){var e=(0,j.useContext)(C.K).character.key,t=(0,j.useContext)(S.R),n=t.data,r=t.teamData[e].characterSheet.getTalent(n.get(Ze.ri.charEle).value),i=Object.values(r.sheets).flatMap((function(e){return e.sections}));return i?(0,N.jsx)(Wt.Z,{sections:i,teamBuffOnly:!0}):null}var fa=n(53343);function ha(){var e=(0,j.useContext)(C.K),t=e.character,n=e.characterSheet,r=e.characterDispatch,i=t.elementKey,a=void 0===i?"anemo":i;return"talents"in n.sheet?(0,N.jsx)(ct.Z,{color:a,title:(0,N.jsx)("strong",{children:(0,fa.Oy)("element.".concat(a))}),children:Object.keys(n.sheet.talents).map((function(e){return(0,N.jsx)(nt.Z,{selected:a===e,disabled:a===e,onClick:function(){return r({elementKey:e})},children:(0,N.jsx)("strong",{children:(0,N.jsx)(J.Z,{color:e,children:(0,fa.Oy)("element.".concat(e))})})},e)}))}):null}function pa(){var e,t=(0,g.s0)(),n=(0,j.useCallback)((function(){return t("/characters")}),[t]),r=(0,g.UO)().characterKey;return!M.IV.includes(null!==(e=r)&&void 0!==e?e:"")?(0,N.jsx)(g.Fg,{to:"/characters"}):(0,N.jsx)(d.Z,{my:1,display:"flex",flexDirection:"column",gap:1,children:(0,N.jsx)(j.Suspense,{fallback:(0,N.jsx)(x.Z,{variant:"rectangular",width:"100%",height:1e3}),children:r&&(0,N.jsx)(ma,{characterKey:r,onClose:n})})})}function ma(e){var t,n,r,i=e.characterKey,a=e.onClose,s=(0,E.Z)(i),l=(0,D.Z)((function(){return K.Z.get(i)}),[i]),c=(0,I.Z)(i),o=(null!==(t=null===c||void 0===c?void 0:c[i])&&void 0!==t?t:{}).target,u=(null!==(n=(0,g.bS)({path:"/characters/:charKey/:tab",end:!1}))&&void 0!==n?n:{params:{tab:"overview"}}).params.tab,h=void 0===u?"overview":u,p=(0,Z.$)().t;(0,R.Z)("".concat(p("char_".concat(i,"_gen:name"))," - ").concat(p("page_character:tabs.".concat(h))));var m=(0,A.Z)(null!==(r=null===s||void 0===s?void 0:s.key)&&void 0!==r?r:""),v=(0,j.useMemo)((function(){if(c&&o)return{data:o,teamData:c,oldData:void 0}}),[o,c]),O=(0,j.useMemo)((function(){if(s&&l)return{character:s,characterSheet:l,characterDispatch:m}}),[s,l,m]);return(0,N.jsx)(y.Z,{children:v&&O?(0,N.jsx)(C.K.Provider,{value:O,children:(0,N.jsx)(S.R.Provider,{value:v,children:(0,N.jsx)(P.B,{children:(0,N.jsxs)(f.Z,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,N.jsxs)(d.Z,{display:"flex",children:[(0,N.jsxs)(d.Z,{display:"flex",gap:1,flexWrap:"wrap",flexGrow:1,children:[(0,N.jsx)(q,{}),(0,N.jsx)(ha,{}),(0,N.jsx)(va,{}),(0,N.jsx)(z.J,{}),(0,N.jsx)(ga,{})]}),!!a&&(0,N.jsx)(w.Z,{onClick:a})]}),(0,N.jsxs)(d.Z,{display:"flex",gap:1,flexWrap:"wrap",children:[s&&(0,N.jsx)(le.Z,{level:s.level,ascension:s.ascension,setBoth:m}),(0,N.jsx)(k.Hn,{size:"small"}),(0,N.jsx)(k.pg,{}),(0,N.jsx)(k.oX,{size:"small"})]}),(0,N.jsx)(b.Z,{children:(0,N.jsx)(Za,{tab:h})}),(0,N.jsx)(ja,{}),(0,N.jsx)(b.Z,{children:(0,N.jsx)(Za,{tab:h})})]})})})}):(0,N.jsx)(x.Z,{variant:"rectangular",width:"100%",height:1e3})})}function ja(){return(0,N.jsx)(j.Suspense,{fallback:(0,N.jsx)(x.Z,{variant:"rectangular",width:"100%",height:500}),children:(0,N.jsxs)(g.Z5,{children:[(0,N.jsx)(g.AW,{index:!0,element:(0,N.jsx)(Ai,{})}),(0,N.jsx)(g.AW,{path:"/talent",element:(0,N.jsx)(Mi,{})}),(0,N.jsx)(g.AW,{path:"/teambuffs",element:(0,N.jsx)(sa,{})}),(0,N.jsx)(g.AW,{path:"/optimize",element:(0,N.jsx)(Wr,{})}),(0,N.jsx)(g.AW,{path:"/theorycraft",element:(0,N.jsx)($i,{})})]})})}function Za(e){var t=e.tab,n=(0,Z.$)("page_character").t;return(0,N.jsxs)(h.Z,{value:t,variant:"scrollable",allowScrollButtonsMobile:!0,sx:{"& .MuiTab-root:hover":{transition:"background-color 0.25s ease",backgroundColor:"rgba(255,255,255,0.1)"}},children:[(0,N.jsx)(p.Z,{sx:{minWidth:"20%"},value:"overview",label:n("tabs.overview"),icon:(0,N.jsx)(i.Z,{}),component:v.rU,to:""}),(0,N.jsx)(p.Z,{sx:{minWidth:"20%"},value:"talent",label:n("tabs.talent"),icon:(0,N.jsx)(a.Z,{}),component:v.rU,to:"talent"}),(0,N.jsx)(p.Z,{sx:{minWidth:"20%"},value:"teambuffs",label:n("tabs.teambuffs"),icon:(0,N.jsx)(s.Z,{}),component:v.rU,to:"teambuffs"}),(0,N.jsx)(p.Z,{sx:{minWidth:"20%"},value:"optimize",label:n("tabs.optimize"),icon:(0,N.jsx)(l.Z,{}),component:v.rU,to:"optimize"}),(0,N.jsx)(p.Z,{sx:{minWidth:"20%"},value:"theorycraft",label:n("tabs.theorycraft"),icon:(0,N.jsx)(c.Z,{}),component:v.rU,to:"theorycraft"})]})}function va(){var e=(0,O.Z)(),t=(0,r.Z)(e,3),n=t[0],i=t[1],a=t[2];return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(m.Z,{color:"info",startIcon:(0,N.jsx)(o.Z,{}),onClick:i,children:"Detailed Stats"}),(0,N.jsx)(Te,{open:n,onClose:a})]})}function ga(){var e=(0,j.useContext)(P.M).onModalOpen;return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(m.Z,{color:"info",startIcon:(0,N.jsx)(u.Z,{}),onClick:e,children:["Formulas ","&"," Calcs"]}),(0,N.jsx)(re,{})]})}},90543:function(e,t,n){n.d(t,{Z:function(){return T}});var r,i=n(30168),a=n(53174),s=n(54483),l=n(40117),c=n(62002),o=n(63204),u=n(66647),d=n(68870),x=n(47047),f=n(13400),h=n(20890),p=n(39504),m=n(2199),j=n(40165),Z=n(24518),v=n(72791),g=n(22020),y=n(10658),b=n(71310),w=n(31038),k=n(40020),C=n(20005),S=n(55942),P=n(10157),K=n(75545),O=n(2139),E=n(66218),A=n(34369),D=n(26138),I=n(73036),R=n(79406),M=n(42320),z=n(74480),_=n(80184);function T(e){var t,n=e.weaponId,T=e.onClick,G=e.onEdit,N=e.onDelete,q=e.canEquip,L=void 0!==q&&q,W=e.extraButtons,B=(0,g.$)(["page_weapon","ui"]).t,F=(0,v.useContext)(A.t).database,V=(0,z.Z)(n),H=(0,M.Z)((function(){return null!==V&&void 0!==V&&V.key?E.Z.get(V.key):void 0}),[null===V||void 0===V?void 0:V.key]),U=(0,v.useCallback)((function(e){return e.weaponTypeKey===(null===H||void 0===H?void 0:H.weaponType)}),[H]),$=(0,v.useCallback)((function(e){return(0,_.jsx)(u.Z,{onClick:function(){return null===T||void 0===T?void 0:T(n)},children:e})}),[T,n]),Y=(0,v.useCallback)((function(e){return(0,_.jsx)(d.Z,{children:e})}),[]),J=(0,v.useCallback)((function(e){return F.weapons.set(n,{location:e})}),[F,n]),X=(0,v.useMemo)((function(){return H&&V&&(0,I.mP)([H.data,(0,I.v0)(V)])}),[H,V]);if(!V||!H||!X)return null;var Q=V.level,ee=V.ascension,te=V.refinement,ne=V.id,re=V.location,ie=void 0===re?"":re,ae=V.lock,se=X.get(D.ri.weapon.type).value,le=[D.ri.weapon.main,D.ri.weapon.sub,D.ri.weapon.sub2].map((function(e){return X.get(e)})),ce=H.getImg(ee);return(0,_.jsx)(v.Suspense,{fallback:(0,_.jsx)(x.Z,{variant:"rectangular",sx:{width:"100%",height:"100%",minHeight:300}}),children:(0,_.jsxs)(b.Z,{sx:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[(0,_.jsxs)(C.Z,{condition:!!T,wrapper:$,falseWrapper:Y,children:[(0,_.jsxs)(d.Z,{className:"grad-".concat(H.rarity,"star"),sx:{position:"relative",pt:2,px:2},children:[!T&&(0,_.jsx)(f.Z,{color:"primary",onClick:function(){return F.weapons.set(ne,{lock:!ae})},sx:{position:"absolute",right:0,bottom:0,zIndex:2},children:ae?(0,_.jsx)(l.Z,{}):(0,_.jsx)(c.Z,{})}),(0,_.jsxs)(d.Z,{sx:{position:"relative",zIndex:1},children:[(0,_.jsxs)(d.Z,{component:"div",sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[(0,_.jsx)(S.Z,{sx:{fontSize:"1.5em"},src:null===(t=y.Z.weaponTypes)||void 0===t?void 0:t[se]}),(0,_.jsx)(h.Z,{noWrap:!0,sx:{textAlign:"center",backgroundColor:"rgba(100,100,100,0.35)",borderRadius:"1em",px:1},children:(0,_.jsx)("strong",{children:H.name})})]}),(0,_.jsxs)(h.Z,{component:"span",variant:"h5",children:["Lv. ",Q]}),(0,_.jsxs)(h.Z,{component:"span",variant:"h5",color:"text.secondary",children:["/",O.SJ[ee]]}),(0,_.jsxs)(h.Z,{variant:"h6",children:["Refinement ",(0,_.jsx)("strong",{children:te})]}),(0,_.jsx)(h.Z,{children:(0,_.jsx)(P.q,{stars:H.rarity,colored:!0})})]}),(0,_.jsx)(d.Z,{sx:{height:"100%",position:"absolute",right:0,top:0},children:(0,_.jsx)(d.Z,{component:"img",src:null!==ce&&void 0!==ce?ce:"",width:"auto",height:"100%",sx:{float:"right"}})})]}),(0,_.jsx)(p.Z,{children:le.map((function(e){if(!e.info.key)return null;var t=(0,R.EC)(e.value,e.unit,e.unit?void 0:0);return(0,_.jsxs)(d.Z,{sx:{display:"flex"},children:[(0,_.jsxs)(h.Z,{flexGrow:1,children:[K.Z[e.info.key]," ",R.ZP.get(e.info.key)]}),(0,_.jsx)(h.Z,{children:t})]},e.info.key)}))})]}),(0,_.jsxs)(d.Z,{sx:{p:1,display:"flex",gap:1,justifyContent:"space-between",alignItems:"center"},children:[L?(0,_.jsx)(w.Z,{size:"small",sx:{flexGrow:1},disable:function(e){return""===e},showDefault:!0,defaultIcon:(0,_.jsx)(o.Z,{}),defaultText:B("ui:inventory"),value:ie,onChange:J,filter:U,disableClearable:!0}):(0,_.jsx)(k.Z,{location:ie}),(0,_.jsxs)(m.Z,{children:[!!G&&(0,_.jsx)(j.Z,{title:(0,_.jsx)(h.Z,{children:B(r||(r=(0,i.Z)(["page_weapon:edit"])))}),placement:"top",arrow:!0,children:(0,_.jsx)(Z.Z,{color:"info",onClick:function(){return G(ne)},children:(0,_.jsx)(s.G,{icon:a.Xcf,className:"fa-fw"})})}),!!N&&(0,_.jsx)(Z.Z,{color:"error",onClick:function(){return N(ne)},disabled:!!ie||ae,children:(0,_.jsx)(s.G,{icon:a.I7k,className:"fa-fw"})}),W]})]})]})})}},52771:function(e,t,n){n.d(t,{JR:function(){return o},e6:function(){return u},g4:function(){return a},mf:function(){return l},vL:function(){return i},yJ:function(){return s}});var r=n(60393),i=1e3,a=60*i,s=60*a,l=24*s;function c(e){var t=e%1e3,n=Math.floor(e/1e3%60),r=Math.floor(e/6e4%60);return{hours:Math.floor(e/36e5),minutes:r,seconds:n,milliseconds:t}}function o(e){var t=c(e),n=t.hours,i=t.minutes,a=t.seconds,s="Minutes";return n&&(s="Hours"),"".concat(n?"".concat(n,":"):"").concat((0,r.H_)(i,"0",2),":").concat((0,r.H_)(a,"0",2)," ").concat(s)}function u(e){var t=c(e),n=t.hours,i=t.minutes,a=t.seconds,s=t.milliseconds,l="Minutes";return n&&(l="Hours"),"".concat(n?"".concat(n,":"):"").concat((0,r.H_)(i,"0",2),":").concat((0,r.H_)(a,"0",2),".").concat((0,r.H_)(s,"0",3)," ").concat(l)}},66045:function(e,t,n){n.d(t,{Ol:function(){return i},Sn:function(){return a},Xg:function(){return s}});var r=n(72828),i=["level","rarity"];function a(e){return{level:{getValue:function(e){var t;return null!==(t=e.level*e.ascension)&&void 0!==t?t:0},tieBreaker:"rarity"},rarity:{getValue:function(t){var n;return null===e||void 0===e||null===(n=e[t.key])||void 0===n?void 0:n.rarity},tieBreaker:"level"}}}function s(e){return{rarity:function(t,n){var r;return n.includes(null===e||void 0===e||null===(r=e[t.key])||void 0===r?void 0:r.rarity)},weaponType:function(t,n){var r;return n.includes(null===e||void 0===e||null===(r=e[t.key])||void 0===r?void 0:r.weaponType)},name:function(e,t){return r.Z.t("weaponNames_gen:".concat(e.key)).toLowerCase().includes(t.toLowerCase())}}}}}]);
//# sourceMappingURL=302.0e5bd6fd.chunk.js.map