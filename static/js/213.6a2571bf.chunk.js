"use strict";(self.webpackChunkgenshin_optimizer=self.webpackChunkgenshin_optimizer||[]).push([[213],{70867:function(e,t,n){n.d(t,{mY:function(){return N},N5:function(){return G},Y4:function(){return T},mW:function(){return O}});var r=n(29439),i=n(1413),a=n(45987),s=n(13967),l=n(94198),o=n(58165),c=n(81918),u=n(90493),d=n(68870),f=n(79834),h=n(72791),x=n(22020),p=n(31148),v=n(72828),y=n(79406),Z=n(42320),m=n(50765),g=n(24351),j=n(23786),b=n(57064),S=n(49900),w=n(80184);function k(e){var t=e.value,n=e.image,r=void 0===n?"":n,a=e.text,s=e.theme,l=e.isSelected,o=e.addlElement,c=e.props;return(0,w.jsxs)(j.Z,(0,i.Z)((0,i.Z)({value:t},c),{},{children:[(0,w.jsx)(b.Z,{children:r}),(0,w.jsx)(S.Z,{primaryTypographyProps:{style:{fontWeight:l?s.typography.fontWeightMedium:s.typography.fontWeightRegular}},children:a}),o&&o]}),t)}var K=n(68244),P=n(10157),C=n(75545),A=["allArtifactKeysWithGrouper","selectedArtifactKeys","setArtifactKeys","getName","getImage","label"],I=["artSetKeys","setArtSetKeys"],E=["mainStatKeys","setMainStatKeys"],R=["substatKeys","setSubstatKeys"],F=["allArtifactKeysWithGrouper","selectedArtifactKey","setArtifactKey","getName","getImage","label","disable","showDefault","defaultText","defaultIcon"],M=["artSetKey","setArtSetKey","label"];function W(e){var t=e.allArtifactKeysWithGrouper,n=e.selectedArtifactKeys,r=e.setArtifactKeys,u=e.getName,d=e.getImage,f=e.label,x=(0,a.Z)(e,A),p=(0,s.Z)(),v=(0,h.useMemo)((function(){return t.map((function(e){var t=e.key,n=e.grouper;return{key:t,label:u(t),grouper:n}}))}),[t,u]);return(0,w.jsx)(l.Z,(0,i.Z)({autoHighlight:!0,multiple:!0,disableCloseOnSelect:!0,options:v,value:n.map((function(e){return{key:e,label:u(e)}})),onChange:function(e,t){r(t.map((function(e){return e.key})))},getOptionLabel:function(e){return e.label},isOptionEqualToValue:function(e,t){return e.key===t.key},renderInput:function(e){return(0,w.jsx)(o.Z,(0,i.Z)((0,i.Z)({},e),{},{label:f,variant:"filled",InputLabelProps:{style:{color:p.palette.text.primary}},color:n.length?"success":"primary",type:"search"}))},renderOption:function(e,t){return(0,w.jsx)(k,{value:t.key,image:d(t.key),text:t.label,theme:p,isSelected:n.includes(t.key),props:e},t.key)},renderTags:function(e,t){return e.map((function(e,n){var r=g.Kj.find((function(t){return e.key==="".concat(t,"_dmg_")})),a=r||void 0;return(0,h.createElement)(c.Z,(0,i.Z)((0,i.Z)({},t({index:n})),{},{key:e.key,icon:d(e.key),label:e.label,color:a}))}))}},x))}function G(e){var t=e.artSetKeys,n=e.setArtSetKeys,s=(0,a.Z)(e,I),l=(0,Z.Z)((function(){return p.y.getAll}),[]),o=(0,x.$)(["artifact","artifactNames_gen"]).t;if(!l)return null;var c=Object.entries(p.y.setKeysByRarities(l)).flatMap((function(e){var t=(0,r.Z)(e,2),n=t[0];return t[1].map((function(e){return{key:e,grouper:+n}}))})).sort(U);return(0,w.jsx)(W,(0,i.Z)({allArtifactKeysWithGrouper:c,selectedArtifactKeys:t,setArtifactKeys:n,getName:function(e){return l(e).nameRaw},getImage:function(e){return l(e).defIcon},label:o("artifact:autocompleteLabels.sets"),groupBy:function(e){var t,n;return null!==(t=null===(n=e.grouper)||void 0===n?void 0:n.toString())&&void 0!==t?t:""},renderGroup:function(e){return e.group&&(0,w.jsxs)(u.Z,{component:d.Z,children:[(0,w.jsxs)(f.Z,{sx:{top:"-1em"},children:[e.group," ",(0,w.jsx)(P.q,{stars:+e.group})]},"".concat(e.group,"Header")),e.children]},e.group)}},s))}function N(e){var t=e.mainStatKeys,n=e.setMainStatKeys,r=(0,a.Z)(e,E),s=(0,x.$)("artifact").t;return(0,w.jsx)(W,(0,i.Z)({allArtifactKeysWithGrouper:m.r.map((function(e){return{key:e}})),selectedArtifactKeys:t,setArtifactKeys:n,getName:function(e){return y.ZP.getArtStr(e)},getImage:function(e){return C.Z[e]},label:s("autocompleteLabels.mainStats")},r))}function O(e){var t=e.substatKeys,n=e.setSubstatKeys,r=(0,a.Z)(e,R),s=(0,x.$)("artifact").t;return(0,w.jsx)(W,(0,i.Z)({allArtifactKeysWithGrouper:m._.map((function(e){return{key:e}})),selectedArtifactKeys:t,setArtifactKeys:n,getName:function(e){return y.ZP.getArtStr(e)},getImage:function(e){return C.Z[e]},label:s("autocompleteLabels.substats")},r))}function L(e){var t=e.allArtifactKeysWithGrouper,n=e.selectedArtifactKey,r=e.setArtifactKey,o=e.getName,c=e.getImage,u=e.label,d=e.disable,f=void 0===d?function(){return!1}:d,x=e.showDefault,p=void 0!==x&&x,v=e.defaultText,y=void 0===v?"":v,Z=(e.defaultIcon,(0,a.Z)(e,F)),m=(0,s.Z)(),g=(0,h.useMemo)((function(){return(p?[{key:"",label:y}]:[]).concat(t.map((function(e){var t=e.key,n=e.grouper;return{key:t,label:o(t),grouper:n}})))}),[t,o,y,p]);return(0,w.jsx)(l.Z,(0,i.Z)({autoHighlight:!0,options:g,clearIcon:n?void 0:"",value:{key:n,label:o(n)},onChange:function(e,t,n){return("change"!==e.type||"clear"!==n)&&r(t?t.key:"")},getOptionLabel:function(e){return e.label?e.label:y},isOptionEqualToValue:function(e,t){return e.key===t.key},getOptionDisabled:function(e){return f(e.key)},renderInput:function(e){return(0,w.jsx)(K.Z,(0,i.Z)((0,i.Z)({},e),{},{label:u,startAdornment:c(n),hasValue:!!n}))},renderOption:function(e,t){return(0,w.jsx)(k,{value:t.key,image:c(t.key),text:t.label,theme:m,isSelected:n===t.key,props:e},t.key)}},Z))}function T(e){var t=e.artSetKey,n=e.setArtSetKey,s=e.label,l=void 0===s?"":s,o=(0,a.Z)(e,M),c=(0,Z.Z)((function(){return p.y.getAll}),[]),h=(0,x.$)(["artifact","artifactNames_gen"]).t;if(l=l||h("artifact:autocompleteLabels.set"),!c)return null;var v=Object.entries(p.y.setKeysByRarities(c)).flatMap((function(e){var t=(0,r.Z)(e,2),n=t[0];return t[1].map((function(e){return{key:e,grouper:+n}}))})).sort(U);return(0,w.jsx)(L,(0,i.Z)({allArtifactKeysWithGrouper:v,selectedArtifactKey:t,setArtifactKey:n,getName:function(e){return e&&c(e).nameRaw},getImage:function(e){return e?c(e).defIcon:(0,w.jsx)(w.Fragment,{})},label:l,groupBy:function(e){var t,n;return null!==(t=null===(n=e.grouper)||void 0===n?void 0:n.toString())&&void 0!==t?t:""},renderGroup:function(e){return e.group&&(0,w.jsxs)(u.Z,{component:d.Z,children:[(0,w.jsxs)(f.Z,{sx:{top:"-1em"},children:[e.group," ",(0,w.jsx)(P.q,{stars:+e.group})]},"".concat(e.group,"Header")),e.children]},e.group)}},o))}function U(e,t){if(e.grouper>t.grouper)return-1;if(e.grouper<t.grouper)return 1;var n=v.Z.t("artifactNames_gen:".concat(e.key)),r=v.Z.t("artifactNames_gen:".concat(t.key));return n<r?-1:n>r?1:0}},92443:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(1413),i=n(45987),a=n(66934),s=n(24518),l=n(80184),o=["children","disabled"],c=(0,a.ZP)(s.Z)((function(e){var t=e.theme;return{"&.Mui-disabled":{backgroundColor:t.palette.primary.dark,color:t.palette.text.secondary}}}));function u(e){var t=e.children,n=(e.disabled,(0,i.Z)(e,o));return(0,l.jsx)(c,(0,r.Z)((0,r.Z)({},n),{},{disabled:!0,children:t}))}},66585:function(e,t,n){n.r(t),n.d(t,{default:function(){return gt}});var r,i=n(30168),a=n(93433),s=n(29439),l=n(1413),o=n(53174),c=n(54483),u=n(43245),d=n(98268),f=n(68087),h=n(49670),x=n(54091),p=n(66934),v=n(13967),y=n(95193),Z=n(47047),m=n(9585),g=n(39504),j=n(61889),b=n(68870),S=n(2199),w=n(24518),k=n(20890),K=n(23786),P=n(13239),C=n(94070),A=n(72791),I=n(22020),E=n(76899),R=n(70867),F=n(45987),M=n(24351),W=n(33890),G=n(10157),N=n(80184),O=["rarity","onChange","filter"];function L(e){var t=e.rarity,n=e.onChange,a=e.filter,s=(0,F.Z)(e,O),o=(0,I.$)("artifact").t;return(0,N.jsx)(W.Z,(0,l.Z)((0,l.Z)({},s),{},{title:t?(0,N.jsx)(G.q,{stars:t}):o(r||(r=(0,i.Z)(["editor.rarity"]))),color:t?"success":"primary",children:[5,4,3].map((function(e){return(0,N.jsx)(K.Z,{disabled:!a(e),onClick:function(){return n(e)},children:(0,N.jsx)(G.q,{stars:e})},e)}))}))}var T,U=n(57064),D=n(49900),V=n(94721),z=n(95614),_=["slotKey","onChange","hasUnselect"];function B(e){var t=e.slotKey,n=void 0===t?"":t,r=e.onChange,a=e.hasUnselect,s=void 0!==a&&a,o=(0,F.Z)(e,_),c=(0,I.$)(["artifact","ui"]).t;return(0,N.jsxs)(W.Z,(0,l.Z)((0,l.Z)({title:c(n?"artifact:slotName:".concat(n):"artifact:slot"),color:n?"success":"primary",startIcon:n?(0,z.Ir)(n):void 0},o),{},{children:[s&&(0,N.jsxs)(K.Z,{selected:""===n,disabled:""===n,onClick:function(){return r("")},children:[(0,N.jsx)(U.Z,{children:(0,N.jsx)(h.Z,{})}),(0,N.jsx)(D.Z,{children:c(T||(T=(0,i.Z)(["ui:unselect"])))})]}),s&&(0,N.jsx)(V.Z,{}),M.eV.map((function(e){return(0,N.jsxs)(K.Z,{selected:n===e,disabled:n===e,onClick:function(){return r(e)},children:[(0,N.jsx)(U.Z,{children:(0,z.Ir)(e)}),(0,N.jsx)(D.Z,{children:c("artifact:slotName:".concat(e))})]},e)}))]}))}var q=n(3992),$=n(71310),H=n(68198),Y=n(58165),X=["value","onChange","disabled","float"];function J(e){var t=e.value,n=e.onChange,r=e.disabled,i=void 0!==r&&r,a=e.float,o=void 0!==a&&a,c=(0,F.Z)(e,X),u=(0,A.useState)(""),d=(0,s.Z)(u,2),f=d[0],h=d[1],x=(0,A.useCallback)((function(){if(""===f)return n(0);var e=o?parseFloat:parseInt;n(e(f))}),[n,f,o]);return(0,A.useEffect)((function(){var e;return h(null!==(e=null===t||void 0===t?void 0:t.toString())&&void 0!==e?e:"")}),[t,h]),(0,N.jsx)(Y.Z,(0,l.Z)({value:f,"aria-label":"custom-input",type:"number",onChange:function(e){return h(e.target.value)},onBlur:x,disabled:i,onKeyDown:function(e){return"Enter"===e.key&&x()}},c))}var Q=n(55942),ee=n(9321),te=n(87174),ne=n(75545),re=n(98620),ie=n(31148),ae=n(8508),se=n(31096),le=n(79406),oe=n(68544),ce=n(42320),ue=n(50765),de=JSON.parse('{"5":{"def_":{"24.0":"24.1"},"critRate_":{"8.5":"8.6","19.5":"19.4","23.0":"22.9"}}}');var fe=n(60393),he=n(72838),xe=n(55221),pe=n(901);function ve(e){var t=e.efficiency,n=e.max,r=void 0!==n&&n,i=e.t,a=e.valid,s=r?"maxSubEff":"curSubEff";return(0,N.jsx)($.Z,{sx:{py:1,px:2},children:(0,N.jsxs)(j.ZP,{container:!0,spacing:1,children:[(0,N.jsx)(j.ZP,{item:!0,children:i("editor.".concat(s))}),(0,N.jsx)(j.ZP,{item:!0,flexGrow:1,children:(0,N.jsx)(xe.Z,{title:(0,N.jsxs)("span",{children:[(0,N.jsx)(k.Z,{variant:"h6",children:i("editor.".concat(s))}),(0,N.jsx)(k.Z,{children:(0,N.jsx)(E.c,{t:i,i18nKey:"editor.".concat(s,"Desc")})})]})})}),(0,N.jsx)(j.ZP,{item:!0,xs:"auto",children:(0,N.jsx)(pe.Z,{valid:a,max:900,value:a?t:"ERR"})})]})})}var ye,Ze,me,ge,je,be,Se,we=n(10600),ke=n(25617),Ke=n(92443);function Pe(e){var t,n=e.index,r=e.artifact,s=e.setSubstat,l=(0,I.$)("artifact").t,o=null!==r&&void 0!==r?r:{},c=o.mainStatKey,u=void 0===c?"":c,d=o.rarity,f=void 0===d?5:d,h=null!==(t=null===r||void 0===r?void 0:r.substats[n])&&void 0!==t?t:{},x=h.key,p=void 0===x?"":x,v=h.value,y=void 0===v?0:v,Z=h.rolls,m=void 0===Z?[]:Z,g=h.efficiency,P=void 0===g?0:g,C=m.reduce((function(e,t){return e+t}),0),A=le.ZP.unit(p),R=m.length,F="",M=[],G=0;if(r){var O=r.rarity,L=re.ZP.rollInfo(O),T=L.numUpgrades,V=L.high;G=T+V-3-R,M=p?re.ZP.getSubstatRollData(p,O):[]}var z=7-M.length;return!R&&p&&y&&(F=F||l(ye||(ye=(0,i.Z)(["editor.substat.error.noCalc"])))),G<0&&(F=F||l("editor.substat.error.noOverRoll",{value:G+R})),(0,N.jsxs)($.Z,{children:[(0,N.jsx)(b.Z,{sx:{display:"flex"},children:(0,N.jsxs)(S.Z,{size:"small",sx:{width:"100%",display:"flex"},children:[(0,N.jsxs)(W.Z,{startIcon:p?ne.Z[p]:void 0,title:p?le.ZP.getArtStr(p):l("editor.substat.substatFormat",{value:n+1}),disabled:!r,color:p?"success":"primary",sx:{whiteSpace:"nowrap"},children:[p&&(0,N.jsx)(K.Z,{onClick:function(){return s(n,{key:"",value:0})},children:l(Ze||(Ze=(0,i.Z)(["editor.substat.noSubstat"])))}),ue._.filter((function(e){return u!==e})).map((function(e){return(0,N.jsxs)(K.Z,{selected:p===e,disabled:p===e,onClick:function(){return s(n,{key:e,value:0})},children:[(0,N.jsx)(U.Z,{children:ne.Z[e]}),(0,N.jsx)(D.Z,{children:le.ZP.getArtStr(e)})]},e)}))]}),(0,N.jsx)(we.CC,{sx:{flexBasis:30,flexGrow:1},children:(0,N.jsx)(we.ZP,{float:"%"===A,placeholder:l(me||(me=(0,i.Z)(["editor.substat.selectSub"]))),value:p?y:void 0,onChange:function(e){return s(n,{key:p,value:null!==e&&void 0!==e?e:0})},disabled:!p,error:!!F,sx:{px:1},inputProps:{sx:{textAlign:"right"}}})}),!!M.length&&(0,N.jsx)(Ke.Z,{children:l(ge||(ge=(0,i.Z)(["editor.substat.nextRolls"])))}),M.map((function(e,t){var r,i,a,l=(0,le.qs)(C+e,A);return l=null!==(r=null===(i=de[f])||void 0===i||null===(a=i[p])||void 0===a?void 0:a[l])&&void 0!==r?r:l,(0,N.jsx)(w.Z,{color:"roll".concat((0,fe.uZ)(z+t,1,6)),disabled:y&&!R||G<=0,onClick:function(){return s(n,{key:p,value:parseFloat(l)})},children:l},t)}))]})}),(0,N.jsx)(b.Z,{sx:{p:1},children:F?(0,N.jsx)(ke.Z,{color:"error",children:l(je||(je=(0,i.Z)(["ui:error"])))}):(0,N.jsxs)(j.ZP,{container:!0,children:[(0,N.jsx)(j.ZP,{item:!0,children:(0,N.jsx)(ke.Z,{color:0===R?"secondary":"roll".concat((0,fe.uZ)(R,1,6)),children:R?l("editor.substat.RollCount",{count:R}):l(be||(be=(0,i.Z)(["editor.substat.noRoll"])))})}),(0,N.jsx)(j.ZP,{item:!0,flexGrow:1,children:!!m.length&&(0,a.Z)(m).sort().map((function(e,t){return(0,N.jsx)(k.Z,{component:"span",color:"roll".concat((0,fe.uZ)(z+M.indexOf(e),1,6),".main"),sx:{ml:1},children:(0,le.qs)(e,A)},"".concat(t,".").concat(e))}))}),(0,N.jsx)(j.ZP,{item:!0,xs:"auto",flexShrink:1,children:(0,N.jsx)(k.Z,{children:(0,N.jsxs)(E.c,{t:l,i18nKey:"editor.substat.eff",color:"text.secondary",children:["Efficiency: ",(0,N.jsx)(pe.Z,{valid:!0,max:100*R,value:P||l(Se||(Se=(0,i.Z)(["editor.substat.noStat"])))})]})})})]})})]})}var Ce=n.p+"static/media/scan_art_main.66f01e51a69c518e4278.png",Ae=n.p+"static/media/snippet.d223e79704fd95bcb783.png";function Ie(e){var t=e.modalShow,n=e.hide;return(0,N.jsx)(ee.Z,{open:t,onClose:n,children:(0,N.jsxs)(q.Z,{children:[(0,N.jsx)(g.Z,{sx:{py:1},children:(0,N.jsxs)(j.ZP,{container:!0,children:[(0,N.jsx)(j.ZP,{item:!0,flexGrow:1,children:(0,N.jsx)(k.Z,{variant:"subtitle1",children:"How do Upload Screenshots for parsing"})}),(0,N.jsx)(j.ZP,{item:!0,children:(0,N.jsx)(H.Z,{onClick:n})})]})}),(0,N.jsx)(V.Z,{}),(0,N.jsxs)(g.Z,{children:[(0,N.jsxs)(C.Z,{variant:"outlined",severity:"warning",children:["NOTE: Artifact Scanning currently only work for ",(0,N.jsx)("strong",{children:"ENGLISH"})," artifacts."]}),(0,N.jsxs)(j.ZP,{container:!0,spacing:1,mt:1,children:[(0,N.jsx)(j.ZP,{item:!0,xs:8,md:4,children:(0,N.jsx)(b.Z,{component:"img",alt:"snippet of the screen to take",src:Ae,width:"100%",height:"auto"})}),(0,N.jsxs)(j.ZP,{item:!0,xs:12,md:8,children:[(0,N.jsx)(k.Z,{gutterBottom:!0,children:"Using screenshots can dramatically decrease the amount of time you manually input in stats on the Genshin Optimizer."}),(0,N.jsx)(k.Z,{variant:"h5",children:"Where to snip the screenshot."}),(0,N.jsxs)(k.Z,{gutterBottom:!0,children:["In game, Open your bag, and navigate to the artifacts tab. Select the artifact you want to scan with Genshin Optimizer. ",(0,N.jsx)("b",{children:"Only artifact from this screen can be scanned."})]}),(0,N.jsx)(k.Z,{variant:"h6",children:"Single artifact"}),(0,N.jsxs)(k.Z,{gutterBottom:!0,children:["To take a screenshot, in Windows, the shortcut is ",(0,N.jsx)("strong",{children:"Shift + WindowsKey + S"}),". Once you selected the region, the image is automatically included in your clipboard."]}),(0,N.jsx)(k.Z,{variant:"h6",children:"Multiple artifacts"}),(0,N.jsxs)(k.Z,{gutterBottom:!0,children:["To take advantage of batch uploads, you can use a tool like ",(0,N.jsx)("a",{href:"https://picpick.app/",target:"_blank",rel:"noreferrer",children:"PicPick"})," to create a macro to easily to screenshot a region to screenshot multiple artifacts at once."]}),(0,N.jsx)(k.Z,{variant:"h5",children:"What to include in the screenshot."}),(0,N.jsx)(k.Z,{children:"As shown in the Image, starting from the top with the artifact name, all the way to the set name(the text in green). "})]}),(0,N.jsxs)(j.ZP,{item:!0,xs:12,md:7,children:[(0,N.jsx)(k.Z,{variant:"h5",children:"Adding Screenshot to Genshin Optimizer"}),(0,N.jsx)(k.Z,{children:"At this point, you should have the artifact snippet either saved to your harddrive, or in your clipboard."}),(0,N.jsx)(k.Z,{gutterBottom:!0,children:'You can click on the box next to "Browse" to browse the files in your harddrive for multiple screenshots.'}),(0,N.jsxs)(k.Z,{children:["For single screenshots from the snippets, just press ",(0,N.jsx)("strong",{children:"Ctrl + V"})," to paste from your clipboard."]}),(0,N.jsxs)(k.Z,{gutterBottom:!0,children:["You should be able to see a Preview of your artifact snippet, and after waiting a few seconds, the artifact set and the substats will be filled in in the ",(0,N.jsx)("b",{children:"Artifact Editor"}),"."]}),(0,N.jsx)(k.Z,{variant:"h5",children:"Finishing the Artifact"}),(0,N.jsxs)(k.Z,{children:["Unfortunately, computer vision is not 100%. There will always be cases where something is not scanned properly. You should always double check the scanned artifact values! Once the artifact has been filled, Click on ",(0,N.jsx)("strong",{children:"Add Artifact"})," to finish editing the artifact."]})]}),(0,N.jsx)(j.ZP,{item:!0,xs:8,md:5,children:(0,N.jsx)(b.Z,{component:"img",alt:"main screen after importing stats",src:Ce,width:"100%",height:"auto"})})]})]}),(0,N.jsx)(V.Z,{}),(0,N.jsx)(g.Z,{sx:{py:1},children:(0,N.jsx)(H.Z,{large:!0,onClick:n})})]})})}var Ee=n(37762),Re=n(74165),Fe=n(15861),Me=n(31362),We=n(91702),Ge=n(15671),Ne=n(43144),Oe=function(){function e(t,n){(0,Ge.Z)(this,e),this.data={},this.init=void 0,this.deinit=void 0,this.init=t,this.deinit=n}return(0,Ne.Z)(e,[{key:"borrow",value:function(){var e=(0,Fe.Z)((0,Re.Z)().mark((function e(t,n){var r,i;return(0,Re.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.data[t]||(this.data[t]={value:this.init(t),refCount:0}),(r=this.data[t]).refCount+=1,e.next=5,n(r.value);case 5:return i=e.sent,r.refCount-=1,r.refCount||(delete this.data[t],this.deinit(t,r.value)),e.abrupt("return",i);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),Le={r:255,g:204,b:50},Te=new Oe(function(){var e=(0,Fe.Z)((0,Re.Z)().mark((function e(t){var n,r;return(0,Re.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,Me.createScheduler)(),r=Array(2).fill(0).map(function(){var e=(0,Fe.Z)((0,Re.Z)().mark((function e(r){var i;return(0,Re.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,Me.createWorker)({errorHandler:console.error}),e.next=3,i.load();case 3:return e.next=5,i.loadLanguage(t);case 5:return e.next=7,i.initialize(t);case 7:n.addWorker(i);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=4,Promise.any(r);case 4:return e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e,t){t.then((function(e){return e.terminate()}))})),Ue=function(e,t){switch(t.type){case"upload":return{processed:e.processed,outstanding:[].concat((0,a.Z)(e.outstanding),(0,a.Z)(t.files))};case"processing":return{processed:e.processed,outstanding:(0,a.Z)(e.outstanding)};case"processed":return e.outstanding[0].file===t.file?{processed:[].concat((0,a.Z)(e.processed),[t.result]),outstanding:e.outstanding.slice(1)}:e;case"pop":return{processed:e.processed.slice(1),outstanding:e.outstanding};case"clear":return{processed:[],outstanding:[]}}};function De(e){if(!e.result){var t=e.file,n=e.fileName;e.imageURL=tt(t),e.result=e.imageURL.then(function(){var e=(0,Fe.Z)((0,Re.Z)().mark((function e(r){var i,a,l,o,c,u;return(0,Re.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie.y.getAll;case 2:return i=e.sent,e.next=5,it(r);case 5:return a=e.sent,l=ot(i,a.rarities,ct(a.artifactSetTexts,i),ft(a.whiteTexts),pt(a.substatTexts),ht(a.whiteTexts),xt(a.whiteTexts)),o=(0,s.Z)(l,2),c=o[0],u=o[1],e.abrupt("return",{file:t,result:{fileName:n,imageURL:r,artifact:c,texts:u}});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}var Ve,ze,_e,Be,qe,$e,He,Ye,Xe,Je,Qe,et,tt=function(e){return new Promise((function(t){var n=new FileReader;n.onloadend=function(e){var n=e.target;return t(n.result)},n.readAsDataURL(e)}))},nt=function(e){return new Promise((function(t){var n=new Image;n.onload=function(e){var n=e.target;return t(function(e){var t=document.createElement("canvas"),n=t.getContext("2d");return t.width=e.width,t.height=e.height,n.drawImage(e,0,0,e.width,e.height),n.getImageData(0,0,e.width,e.height)}(n))},n.src=e}))};function rt(e){var t=document.createElement("canvas");return t.width=e.width,t.height=e.height,t.getContext("2d").putImageData(e,0,0),t}function it(e){return at.apply(this,arguments)}function at(){return(at=(0,Fe.Z)((0,Re.Z)().mark((function e(t){var n,r,i,a,l,o,c,u,d,f,h;return(0,Re.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nt(t);case 2:return n=e.sent,r=n.width,i=Math.floor(n.height/2),a={rectangle:{top:i,left:0,width:r,height:i}},l=[st(vt(n,[140,140,140],[255,255,255],{mode:"bw",region:"top"})),st(vt(n,[30,50,80],[160,160,160],{region:"bot"}),a),st(vt(n,[30,160,30],[200,255,200],{mode:"bw",region:"bot"}),a)],o=ut(n.data,n.width,n.height),e.next=9,Promise.all(l);case 9:return c=e.sent,u=(0,s.Z)(c,3),d=u[0],f=u[1],h=u[2],e.abrupt("return",{whiteTexts:d,substatTexts:f,artifactSetTexts:h,rarities:o});case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function st(e){return lt.apply(this,arguments)}function lt(){return lt=(0,Fe.Z)((0,Re.Z)().mark((function e(t){var n,r,i,a=arguments;return(0,Re.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:void 0,r=rt(t),e.next=4,Te.borrow("eng",function(){var e=(0,Fe.Z)((0,Re.Z)().mark((function e(t){return(0,Re.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return e.next=4,e.sent.addJob("recognize",r,n);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:return i=e.sent,e.abrupt("return",i.data.lines.map((function(e){return e.text})));case 6:case"end":return e.stop()}}),e)}))),lt.apply(this,arguments)}function ot(e,t,n,r,i,l,o){var c,u=(0,a.Z)(new Set([].concat((0,a.Z)(n),["EmblemOfSeveredFate"]))),d=-1,f=[{setKey:"EmblemOfSeveredFate",rarity:3,level:0,slotKey:"flower",mainStatKey:"hp",substats:[],location:"",lock:!1,exclude:!1}],h=(0,fe.O)(M.En,(function(t){var r=0;n.size&&(r+=(0,a.Z)(n).reduce((function(n,r){return n+(e(r).rarity.includes(t)?1:0)}),0)/n.size);if(i.length){var s=i.reduce((function(e,n){return e+(re.ZP.getSubstatRolls(n.key,n.value,t).length?1:0)}),0);r+=s/i.length*2}return r})),x=(0,Ee.Z)(M.eV);try{for(x.s();!(c=x.n()).done;){var p,v=c.value,y=(0,Ee.Z)(re.ZP.slotMainStats(v));try{var Z=function(){for(var t=p.value,i=(r.has(v)?1:0)+(l.has(t)?1:0),a=o.filter((function(e){return"%"!==e.unit||"%"===le.ZP.unit(t)})).map((function(e){return e.mainStatValue})),c=function(){var r=(0,s.Z)(y[x],2),l=r[0],o=r[1],c=parseInt(l),h=u.filter((function(t){return e(t).rarity.includes(c)})),p=i+o;if(p+2<d)return"continue";var Z,m=(0,Ee.Z)(a);try{var g=function(){var e,r=Z.value,i=re.ZP.mainStatValues(c,t),a=Math.max(0,i.findIndex((function(e){return e>=r}))),s=i[a],l=p+(s===r?1:0),o=(0,Ee.Z)(h);try{for(o.s();!(e=o.n()).done;){var u=e.value,x=l+(n.has(u)?1:0);x>=d&&(x>d&&(f=[]),d=x,f.push({setKey:u,rarity:c,level:a,slotKey:v,mainStatKey:t,substats:[],location:"",lock:!1,exclude:!1}))}}catch(y){o.e(y)}finally{o.f()}};for(m.s();!(Z=m.n()).done;)g()}catch(k){m.e(k)}finally{m.f()}if(p>=d){var j,b=(0,Ee.Z)(h);try{for(b.s();!(j=b.n()).done;){var S=j.value,w=p+(n.has(S)?1:0);w>d&&(f=[]),d=w,f.push({setKey:S,rarity:c,level:0,slotKey:v,mainStatKey:t,substats:[],location:"",lock:!1,exclude:!1})}}catch(k){b.e(k)}finally{b.f()}}},x=0,y=Object.entries(h);x<y.length;x++)c()};for(y.s();!(p=y.n()).done;)Z()}catch(R){y.e(R)}finally{y.f()}}}catch(R){x.e(R)}finally{x.f()}var m={},g={setKey:new Set,rarity:new Set,level:new Set,slotKey:new Set,mainStatKey:new Set,mainStatVal:new Set},j=f[0],b=re.ZP.mainStatValue(j.mainStatKey,j.rarity,j.level);j.substats=i.filter((function(e,t){return e.key!==j.mainStatKey&&i.slice(0,t).every((function(t){return t.key!==e.key}))}));for(var S=j.substats.length;S<4;S++)j.substats.push({key:"",value:0});for(var w=0,k=f;w<k.length;w++){var K=k[w];g.setKey.add(K.setKey),g.rarity.add(K.rarity),g.level.add(K.level),g.slotKey.add(K.slotKey),g.mainStatKey.add(K.mainStatKey)}function P(e,t,n){return(0,N.jsxs)(N.Fragment,{children:["Unknown ",t," : Set to ",(0,N.jsx)(We.Z,{color:"error",children:n(e)})]})}function C(e,t,n){return(0,N.jsxs)(N.Fragment,{children:["Detected ",t," ",(0,N.jsx)(We.Z,{color:"success",children:n(e)})]})}function A(e,t,n){return(0,N.jsxs)(N.Fragment,{children:["Inferred ",t," ",(0,N.jsx)(We.Z,{color:"warning",children:n(e)})]})}function I(e,t,n,r){var i=new Set((0,a.Z)(g[e]).filter((function(e){return t.has(e)})));i.size>1?m[e]=function(e,t,n,r){return(0,N.jsxs)(N.Fragment,{children:["Ambiguous ",n," ",(0,N.jsx)(We.Z,{color:"error",children:r(e)})," : May also be ",t.filter((function(t){return t!==e})).map((function(e,t){return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("b",{children:t>0?"/":""}),(0,N.jsx)(We.Z,{color:"warning",children:r(e)})]})}))]})}(j[e],(0,a.Z)(t),n,r):1===i.size?m[e]=C(j[e],n,r):g[e].size>1?m[e]=P(j[e],n,r):m[e]=A(j[e],n,r)}I("setKey",n,"Set",(function(t){return e(t).name})),I("rarity",t,"Rarity",(function(e){return(0,N.jsxs)(N.Fragment,{children:[e," ",1!==e?"Stars":"Star"]})})),I("slotKey",r,"Slot",(function(e){return(0,N.jsx)(N.Fragment,{children:re.ZP.slotName(e)})})),I("mainStatKey",l,"Main Stat",(function(e){return(0,N.jsx)(N.Fragment,{children:le.ZP.getStr(e)})})),m.substats=(0,N.jsx)(N.Fragment,{children:j.substats.filter((function(e){return""!==e.key})).map((function(e,t){return(0,N.jsx)("div",{children:C(e,"Sub Stat",(function(e){return(0,N.jsxs)(N.Fragment,{children:[le.ZP.getStr(e.key),"+",(0,le.qs)(e.value,le.ZP.unit(e.key)),le.ZP.unit(e.key)]})}))},t)}))});var E=function(e){return(0,N.jsxs)(N.Fragment,{children:[(0,le.qs)(e,le.ZP.unit(j.mainStatKey)),le.ZP.unit(j.mainStatKey)]})};return o.find((function(e){return e.mainStatValue===b}))?l.has(j.mainStatKey)?(m.level=C(j.level,"Level",(function(e){return"+"+e})),m.mainStatVal=C(b,"Main Stat value",E)):(m.level=A(j.level,"Level",(function(e){return"+"+e})),m.mainStatVal=A(b,"Main Stat value",E)):(m.level=P(j.level,"Level",(function(e){return"+"+e})),m.mainStatVal=P(b,"Main Stat value",E)),[j,m]}function ct(e,t){var n,r=new Set([]),i=(0,Ee.Z)(e);try{for(i.s();!(n=i.n()).done;){var a,s=n.value,l=(0,Ee.Z)(M.q2);try{for(l.s();!(a=l.n()).done;){var o=a.value;(0,fe.UX)(s.replace(/\W/g,""),t(o).nameRaw.replace(/\W/g,""))<=2&&r.add(o)}}catch(c){l.e(c)}finally{l.f()}}}catch(c){i.e(c)}finally{i.f()}return r}function ut(e,t,n){for(var r=e,i=0,a=0,s=new Set([]),l=0;l<n;l++){for(var o=0,c=!1,u=0;u<t;u++){var d=4*(l*t+u);dt({r:r[d],g:r[d+1],b:r[d+2]},Le)?c||(c=!0,o++):c=!1}i!==o?(i=o,a=1):i&&++a>=10&&s.add((0,fe.uZ)(i,3,5))}return s}function dt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,r=function(e,t){return Math.abs(e-t)<=n};return r(e.r,t.r)&&r(e.g,t.g)&&r(e.b,t.b)}function ft(e){var t,n=new Set,r=(0,Ee.Z)(e);try{for(r.s();!(t=r.n()).done;){var i,a=t.value,s=(0,Ee.Z)(M.eV);try{for(s.s();!(i=s.n()).done;){var l=i.value;(0,fe.UX)(a.replace(/\W/g,""),re.ZP.slotName(l).replace(/\W/g,""))<=2&&n.add(l)}}catch(o){s.e(o)}finally{s.f()}}}catch(o){r.e(o)}finally{r.f()}return n}function ht(e){var t,n=new Set([]),r=(0,Ee.Z)(e);try{for(r.s();!(t=r.n()).done;){var i,a=t.value,s=(0,Ee.Z)(ue.r);try{for(s.s();!(i=s.n()).done;){var l,o,c,u=i.value;a.toLowerCase().includes(null!==(l=null===(o=le.ZP.getStr(u))||void 0===o?void 0:o.toLowerCase())&&void 0!==l?l:"")&&n.add(u),u.includes("_bonu")&&(0,fe.UX)(a.replace(/\W/g,""),(null!==(c=le.ZP.getStr(u))&&void 0!==c?c:"").replace(/\W/g,""))<=1&&n.add(u)}}catch(d){s.e(d)}finally{s.f()}}}catch(d){r.e(d)}finally{r.f()}return n}function xt(e){var t,n=[],r=(0,Ee.Z)(e);try{for(r.s();!(t=r.n()).done;){var i=t.value,a=/(\d+[,|\\.]+\d)%/,s=a.exec(i);s&&n.push({mainStatValue:parseFloat(s[1].replace(/,/g,".").replace(/\.{2,}/g,".")),unit:"%"}),(s=(a=/(\d+[,|\\.]\d{3}|\d{2,3})/).exec(i))&&n.push({mainStatValue:parseInt(s[1].replace(/[,|\\.]+/g,""))})}}catch(l){r.e(l)}finally{r.f()}return n}function pt(e){var t,n=[],r=(0,Ee.Z)(e);try{var i=function(){var e=t.value;e=e.replace(/^[\W]+/,"").replace(/\n/,""),ue._.forEach((function(t){var r=le.ZP.getStr(t),i=("%"===le.ZP.unit(t)?new RegExp(r+"\\s*\\+\\s*(\\d+[\\.|,]+\\d)%","im"):new RegExp(r+"\\s*\\+\\s*(\\d+,\\d+|\\d+)($|\\s)","im")).exec(e);i&&n.push({key:t,value:parseFloat(i[1].replace(/,/g,".").replace(/\.{2,}/g,"."))})}))};for(r.s();!(t=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}return n.slice(0,4)}function vt(e,t,n,r){for(var i=r.region,a=void 0===i?"all":i,s=r.mode,l=void 0===s?"color":s,o=Uint8ClampedArray.from(e.data),c="top"===a,u="bot"===a,d="all"===a,f="bw"===l,h="invert"===l,x=Math.floor(e.width*(e.height/2)*4),p=0;p<o.length;p+=4){var v=o[p],y=o[p+1],Z=o[p+2];(d||c&&p<x||u&&p>x)&&v>=t[0]&&v<=n[0]&&y>=t[1]&&y<=n[1]&&Z>=t[2]&&Z<=n[2]?f?o[p]=o[p+1]=o[p+2]=0:h&&(o[p]=255-v,o[p+1]=255-y,o[p+2]=255-Z):o[p]=o[p+1]=o[p+2]=255}return new ImageData(o,e.width,e.height)}var yt=new Set(ue._);function Zt(e,t){switch(t.type){case"reset":return;case"substat":var n=t.index,r=t.substat,i=r.key?e.substats.findIndex((function(e){return e.key===r.key})):-1;if(-1===i||i===n)e.substats[n]=r;else{var a=[e.substats[i],e.substats[n]];e.substats[n]=a[0],e.substats[i]=a[1]}return(0,l.Z)({},e);case"overwrite":return t.artifact;case"update":return(0,l.Z)((0,l.Z)({},e),t.artifact)}}var mt=(0,p.ZP)("input")({display:"none"});function gt(e){var t,n,r=e.artifactIdToEdit,p=void 0===r?"":r,F=e.cancelEdit,G=e.allowUpload,O=void 0!==G&&G,T=e.allowEmpty,U=void 0!==T&&T,D=(0,I.$)("artifact").t,V=(0,ce.Z)((function(){return ie.y.getAll}),[]),z=(0,A.useContext)(se.t).database,_=(0,A.useState)(!1),Y=(0,s.Z)(_,2),X=Y[0],ue=Y[1],de=(0,oe.Z)(),xe=(0,s.Z)(de,2),pe=xe[0],ye=xe[1];(0,A.useEffect)((function(){return z.arts.followAny(ye)}),[z,ye]);var Ze=(0,A.useReducer)(Zt,void 0),me=(0,s.Z)(Ze,2),ge=me[0],je=me[1],be=(0,A.useMemo)((function(){return ge&&(0,ae.BG)(ge)}),[ge]),Se=(0,A.useState)(!1),we=(0,s.Z)(Se,2),ke=we[0],Ke=we[1],Ce=(0,A.useReducer)(Ue,{processed:[],outstanding:[]}),Ae=(0,s.Z)(Ce,2),Ee=Ae[0],Re=Ee.processed,Fe=Ee.outstanding,Me=Ae[1],We=Re[0],Ge=Fe[0],Ne=(0,ce.Z)((function(){return null===Ge||void 0===Ge?void 0:Ge.imageURL}),[null===Ge||void 0===Ge?void 0:Ge.imageURL]),Oe=(0,ce.Z)((function(){return null===Ge||void 0===Ge?void 0:Ge.result}),[null===Ge||void 0===Ge?void 0:Ge.result]),Le=Re.length+Fe.length,Te=null!==(t=null===We||void 0===We?void 0:We.imageURL)&&void 0!==t?t:Ne,tt=null!==We&&void 0!==We?We:{},nt=tt.artifact,rt=tt.texts,it=!(null===be||void 0===be||!be.location);(0,A.useEffect)((function(){!be&&nt&&je({type:"overwrite",artifact:nt})}),[be,nt,je]),(0,A.useEffect)((function(){var e=Math.min(16-Re.length,3,Fe.length),t=e&&!Fe[0].result;Fe.slice(0,e).forEach(De),t&&Me({type:"processing"})}),[Re.length,Fe]),(0,A.useEffect)((function(){Oe&&Me((0,l.Z)({type:"processed"},Oe))}),[Oe,Me]);var at=(0,A.useCallback)((function(e){ue(!0),Me({type:"upload",files:(0,a.Z)(e).map((function(e){return{file:e,fileName:e.name}}))})}),[Me,ue]),st=(0,A.useCallback)((function(){return Me({type:"clear"})}),[Me]);(0,A.useEffect)((function(){var e=function(e){return at(e.clipboardData.files)};return O&&window.addEventListener("paste",e),function(){O&&window.removeEventListener("paste",e)}}),[at,O]);var lt=(0,A.useCallback)((function(e){at(e.target.files),e.target.value=null}),[at]),ot=(0,A.useMemo)((function(){var e,t=pe&&p&&z.arts.get(p);if(t)return{old:t,oldType:"edit"};if(void 0===be)return{old:void 0,oldType:""};var n=pe&&z.arts.findDups(be),r=n.duplicated,i=n.upgraded;return{old:null!==(e=r[0])&&void 0!==e?e:i[0],oldType:0!==r.length?"duplicate":"upgrade"}}),[be,p,z,pe]),ct=ot.old,ut=ot.oldType,dt=(0,A.useMemo)((function(){if(!be)return{artifact:void 0,errors:[]};var e=(0,ae.m1)(be,p);return ct&&(e.artifact.location=ct.location,e.artifact.exclude=ct.exclude),e}),[be,p,ct]),ft=dt.artifact,ht=dt.errors;(0,A.useEffect)((function(){"new"===p&&(ue(!0),je({type:"reset"}));var e=p&&pe&&z.arts.get(p);e&&(ue(!0),je({type:"overwrite",artifact:(0,fe.I8)(e)}))}),[p,z,pe]);var xt=be?null===V||void 0===V?void 0:V(be.setKey):void 0,pt=(0,A.useCallback)((function(){null===F||void 0===F||F(),Me({type:"pop"}),je({type:"reset"})}),[F,je]),vt=(0,A.useCallback)((function(e){var t,n,r=e.setKey?V(e.setKey):xt;function i(e,t,n){return e&&t.includes(e)?e:null!==n&&void 0!==n?n:t[0]}e.setKey&&(e.rarity=i(null===be||void 0===be?void 0:be.rarity,r.rarity,Math.max.apply(Math,(0,a.Z)(r.rarity))),e.slotKey=i(null===be||void 0===be?void 0:be.slotKey,r.slots)),e.rarity&&(e.level=null!==(t=null===be||void 0===be?void 0:be.level)&&void 0!==t?t:0),e.level&&(e.level=(0,fe.uZ)(e.level,0,4*(null!==(n=e.rarity)&&void 0!==n?n:be.rarity))),e.slotKey&&(e.mainStatKey=i(null===be||void 0===be?void 0:be.mainStatKey,re.ZP.slotMainStats(e.slotKey))),e.mainStatKey&&(e.substats=[0,1,2,3].map((function(t){return be&&be.substats[t].key!==e.mainStatKey?be.substats[t]:{key:"",value:0}}))),je({type:"update",artifact:e})}),[be,V,xt,je]),gt=(0,A.useCallback)((function(e,t){je({type:"substat",index:e,substat:t})}),[je]),jt=!ht.length,bt=null!==be&&void 0!==be?be:{},St=bt.rarity,wt=void 0===St?5:St,kt=bt.level,Kt=void 0===kt?0:kt,Pt=bt.slotKey,Ct=void 0===Pt?"flower":Pt,At=ft?re.ZP.getArtifactEfficiency(ft,yt):{},It=At.currentEfficiency,Et=void 0===It?0:It,Rt=At.maxEfficiency,Ft=void 0===Rt?0:Rt,Mt=Re.length||Fe.length,Wt=(0,A.useCallback)((function(e){Mt&&e.preventDefault(),ue(!1),F()}),[Mt,ue,F]),Gt=(0,v.Z)(),Nt=(0,y.Z)(Gt.breakpoints.up("md")),Ot=be?M.Kj.find((function(e){return be.mainStatKey.includes(e)})):void 0,Lt=be?null!==Ot&&void 0!==Ot?Ot:"success":"primary",Tt=(0,A.useCallback)((function(e){return vt({setKey:e})}),[vt]),Ut=(0,A.useCallback)((function(e){return""===e||!(!it||"circlet"===Ct||"PrayersForDestiny"!==e&&"PrayersForIllumination"!==e&&"PrayersForWisdom"!==e&&"PrayersToSpringtime"!==e)}),[it,Ct]);return(0,N.jsx)(ee.Z,{open:X,onClose:Wt,children:(0,N.jsx)(A.Suspense,{fallback:(0,N.jsx)(Z.Z,{variant:"rectangular",sx:{width:"100%",height:X?"100%":64}}),children:(0,N.jsxs)(q.Z,{children:[(0,N.jsx)(Ie,{modalShow:ke,hide:function(){return Ke(!1)}}),(0,N.jsx)(m.Z,{title:(0,N.jsx)(E.c,{t:D,i18nKey:"editor.title",children:"Artifact Editor"}),action:(0,N.jsx)(H.Z,{disabled:!!Mt,onClick:Wt})}),(0,N.jsxs)(g.Z,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,N.jsxs)(j.ZP,{container:!0,spacing:1,columns:{xs:1,md:2},children:[(0,N.jsxs)(j.ZP,{item:!0,xs:1,display:"flex",flexDirection:"column",gap:1,children:[(0,N.jsxs)(b.Z,{sx:{display:"flex",gap:1,mb:1},children:[(0,N.jsx)(R.Y4,{showDefault:!0,disableClearable:!0,size:"small",artSetKey:null!==(n=null===be||void 0===be?void 0:be.setKey)&&void 0!==n?n:"",setArtSetKey:Tt,sx:function(e){return{flexGrow:1,".MuiFilledInput-root":{borderBottomRightRadius:e.shape.borderRadius,borderBottomLeftRadius:e.shape.borderRadius}}},defaultText:D("editor.unknownSetName"),disable:Ut}),(0,N.jsx)(L,{rarity:be?wt:void 0,onChange:function(e){return vt({rarity:e})},filter:function(e){var t,n;return!(null===xt||void 0===xt||null===(t=xt.rarity)||void 0===t||null===(n=t.includes)||void 0===n||!n.call(t,e))},disabled:!xt})]}),(0,N.jsxs)(b.Z,{component:"div",display:"flex",children:[(0,N.jsx)(J,{id:"filled-basic",label:"Level",variant:"filled",sx:{flexShrink:1,flexGrow:1,mr:1,my:0},margin:"dense",size:"small",value:Kt,disabled:!xt,placeholder:"0~".concat(4*wt),onChange:function(e){return vt({level:e})}}),(0,N.jsxs)(S.Z,{children:[(0,N.jsx)(w.Z,{onClick:function(){return vt({level:Kt-1})},disabled:!xt||0===Kt,children:"-"}),wt?(0,a.Z)(Array(wt+1).keys()).map((function(e){return 4*e})).map((function(e){return(0,N.jsx)(w.Z,{onClick:function(){return vt({level:e})},disabled:!xt||Kt===e,children:e},e)})):null,(0,N.jsx)(w.Z,{onClick:function(){return vt({level:Kt+1})},disabled:!xt||Kt===4*wt,children:"+"})]})]}),(0,N.jsxs)(b.Z,{component:"div",display:"flex",children:[(0,N.jsx)(B,{disabled:it||!xt,slotKey:Ct,onChange:function(e){return vt({slotKey:e})}}),(0,N.jsx)($.Z,{sx:{p:1,ml:1,flexGrow:1},children:(0,N.jsx)(A.Suspense,{fallback:(0,N.jsx)(Z.Z,{width:"60%"}),children:(0,N.jsx)(k.Z,{color:"text.secondary",children:null!==xt&&void 0!==xt&&xt.getSlotName(be.slotKey)?(0,N.jsxs)("span",{children:[(0,N.jsx)(Q.Z,{src:xt.slotIcons[be.slotKey]})," ",null===xt||void 0===xt?void 0:xt.getSlotName(be.slotKey)]}):D(ze||(ze=(0,i.Z)(["editor.unknownPieceName"])))})})})]}),(0,N.jsxs)(b.Z,{component:"div",display:"flex",children:[(0,N.jsx)(W.Z,{startIcon:null!==be&&void 0!==be&&be.mainStatKey?ne.Z[be.mainStatKey]:void 0,title:(0,N.jsx)("b",{children:be?le.ZP.getArtStr(be.mainStatKey):D(_e||(_e=(0,i.Z)(["mainStat"])))}),disabled:!xt,color:Lt,children:re.ZP.slotMainStats(Ct).map((function(e){return(0,N.jsx)(K.Z,{selected:(null===be||void 0===be?void 0:be.mainStatKey)===e,disabled:(null===be||void 0===be?void 0:be.mainStatKey)===e,onClick:function(){return vt({mainStatKey:e})},children:(0,N.jsx)(te._,{statKey:e})},e)}))}),(0,N.jsx)($.Z,{sx:{p:1,ml:1,flexGrow:1},children:(0,N.jsx)(k.Z,{color:"text.secondary",children:be?"".concat((0,le.qs)(re.ZP.mainStatValue(be.mainStatKey,wt,Kt),le.ZP.unit(be.mainStatKey))).concat(le.ZP.unit(be.mainStatKey)):D(Be||(Be=(0,i.Z)(["mainStat"])))})})]}),(0,N.jsx)(ve,{valid:jt,efficiency:Et,t:D}),Et!==Ft&&(0,N.jsx)(ve,{max:!0,valid:jt,efficiency:Ft,t:D}),O&&(0,N.jsx)($.Z,{children:(0,N.jsx)(g.Z,{sx:{display:"flex",flexDirection:"column",gap:1},children:(0,N.jsxs)(A.Suspense,{fallback:(0,N.jsx)(Z.Z,{width:"100%",height:"100"}),children:[(0,N.jsxs)(j.ZP,{container:!0,spacing:1,alignItems:"center",children:[(0,N.jsx)(j.ZP,{item:!0,flexGrow:1,children:(0,N.jsxs)("label",{htmlFor:"contained-button-file",children:[(0,N.jsx)(mt,{accept:"image/*",id:"contained-button-file",multiple:!0,type:"file",onChange:lt}),(0,N.jsx)(w.Z,{component:"span",startIcon:(0,N.jsx)(u.Z,{}),children:"Upload Screenshot (or Ctrl-V)"})]})}),(0,N.jsx)(j.ZP,{item:!0,children:(0,N.jsx)(w.Z,{color:"info",sx:{px:2,minWidth:0},onClick:function(){return Ke(!0)},children:(0,N.jsx)(k.Z,{children:(0,N.jsx)(c.G,{icon:o.Fuz})})})})]}),Te&&(0,N.jsx)(b.Z,{display:"flex",justifyContent:"center",children:(0,N.jsx)(b.Z,{component:"img",src:Te,width:"100%",maxWidth:350,height:"auto",alt:"Screenshot to parse for artifact values"})}),Le>0&&(0,N.jsx)(q.Z,{sx:{pl:2},children:(0,N.jsxs)(j.ZP,{container:!0,spacing:1,alignItems:"center",children:[!We&&Ge&&(0,N.jsx)(j.ZP,{item:!0,children:(0,N.jsx)(P.Z,{size:"1em"})}),(0,N.jsx)(j.ZP,{item:!0,flexGrow:1,children:(0,N.jsx)(k.Z,{children:(0,N.jsxs)("span",{children:["Screenshots in file-queue: ",(0,N.jsx)("b",{children:Le})]})})}),(0,N.jsx)(j.ZP,{item:!0,children:(0,N.jsx)(w.Z,{size:"small",color:"error",onClick:st,children:"Clear file-queue"})})]})})]})})})]}),(0,N.jsxs)(j.ZP,{item:!0,xs:1,display:"flex",flexDirection:"column",gap:1,children:[[0,1,2,3].map((function(e){return(0,N.jsx)(Pe,{index:e,artifact:ft,setSubstat:gt},e)})),rt&&(0,N.jsx)($.Z,{children:(0,N.jsxs)(g.Z,{children:[(0,N.jsx)("div",{children:rt.slotKey}),(0,N.jsx)("div",{children:rt.mainStatKey}),(0,N.jsx)("div",{children:rt.mainStatVal}),(0,N.jsx)("div",{children:rt.rarity}),(0,N.jsx)("div",{children:rt.level}),(0,N.jsx)("div",{children:rt.substats}),(0,N.jsx)("div",{children:rt.setKey})]})})]})]}),ct&&(0,N.jsxs)(j.ZP,{container:!0,sx:{justifyContent:"space-around"},spacing:1,children:[(0,N.jsx)(j.ZP,{item:!0,xs:12,md:5.5,lg:4,children:(0,N.jsxs)($.Z,{children:[(0,N.jsx)(k.Z,{sx:{textAlign:"center"},py:1,variant:"h6",color:"text.secondary",children:D("edit"!==ut?"duplicate"===ut?qe||(qe=(0,i.Z)(["editor.dupArt"])):$e||($e=(0,i.Z)(["editor.upArt"])):He||(He=(0,i.Z)(["editor.beforeEdit"])))}),(0,N.jsx)(he.Z,{artifactObj:ct})]})}),Nt&&(0,N.jsx)(j.ZP,{item:!0,md:1,display:"flex",alignItems:"center",justifyContent:"center",children:(0,N.jsx)($.Z,{sx:{display:"flex"},children:(0,N.jsx)(d.Z,{sx:{fontSize:40}})})}),(0,N.jsx)(j.ZP,{item:!0,xs:12,md:5.5,lg:4,children:(0,N.jsxs)($.Z,{children:[(0,N.jsx)(k.Z,{sx:{textAlign:"center"},py:1,variant:"h6",color:"text.secondary",children:D(Ye||(Ye=(0,i.Z)(["editor.preview"])))}),(0,N.jsx)(he.Z,{artifactObj:ft})]})})]}),!jt&&(0,N.jsx)(C.Z,{variant:"filled",severity:"error",children:ht.map((function(e,t){return(0,N.jsx)("div",{children:e},t)}))}),(0,N.jsxs)(j.ZP,{container:!0,spacing:2,children:[(0,N.jsx)(j.ZP,{item:!0,children:"edit"===ut?(0,N.jsx)(w.Z,{startIcon:(0,N.jsx)(f.Z,{}),onClick:function(){z.arts.set(ct.id,ge),U?pt():(ue(!1),F())},disabled:!ge||!jt,color:"primary",children:D(Xe||(Xe=(0,i.Z)(["editor.btnSave"])))}):(0,N.jsx)(w.Z,{startIcon:(0,N.jsx)(f.Z,{}),onClick:function(){z.arts.new(be),U?pt():(ue(!1),F())},disabled:!be||!jt,color:"duplicate"===ut?"warning":"primary",children:D(Je||(Je=(0,i.Z)(["editor.btnAdd"])))})}),(0,N.jsx)(j.ZP,{item:!0,flexGrow:1,children:U&&(0,N.jsx)(w.Z,{startIcon:(0,N.jsx)(h.Z,{}),disabled:!be,onClick:function(){window.confirm(D(Ve||(Ve=(0,i.Z)(["editor.clearPrompt"]))))&&pt()},color:"error",children:D(Qe||(Qe=(0,i.Z)(["editor.btnClear"])))})}),(0,N.jsx)(j.ZP,{item:!0,children:!1}),ct&&"edit"!==ut&&(0,N.jsx)(j.ZP,{item:!0,children:(0,N.jsx)(w.Z,{startIcon:(0,N.jsx)(x.Z,{}),onClick:function(){z.arts.set(ct.id,ge),U?pt():ue(!1)},disabled:!ge||!jt,color:"success",children:D(et||(et=(0,i.Z)(["editor.btnUpdate"])))})})]})]})]})})})}}}]);
//# sourceMappingURL=213.6a2571bf.chunk.js.map