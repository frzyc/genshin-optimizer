{"version":3,"file":"static/js/409.c9fb653a.chunk.js","mappings":"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","sources":["Components/ToggleButton/WeaponToggle.tsx","Components/Weapon/WeaponSelectionModal.tsx"],"sourcesContent":["import { ToggleButton } from \"@mui/material\";\r\nimport Assets from \"../../Assets/Assets\";\r\nimport { allWeaponTypeKeys, WeaponTypeKey } from \"../../Types/consts\";\r\nimport { handleMultiSelect } from \"../../Util/MultiSelect\";\r\nimport ImgIcon from \"../Image/ImgIcon\";\r\nimport SolidToggleButtonGroup, { SolidToggleButtonGroupProps } from \"../SolidToggleButtonGroup\";\r\ntype WeaponToggleProps = Omit<SolidToggleButtonGroupProps, \"onChange\" | \"value\"> & {\r\n  onChange: (value: WeaponTypeKey[]) => void\r\n  value: WeaponTypeKey[]\r\n}\r\nconst weaponTypeHandler = handleMultiSelect([...allWeaponTypeKeys])\r\nexport default function WeaponToggle({ value, onChange, ...props }: WeaponToggleProps) {\r\n  return <SolidToggleButtonGroup exclusive value={value} {...props}>\r\n    {allWeaponTypeKeys.map(wt => <ToggleButton key={wt} value={wt} onClick={() => onChange(weaponTypeHandler(value, wt))}>\r\n      <ImgIcon src={Assets.weaponTypes?.[wt]} size={2} />\r\n    </ToggleButton>)}\r\n  </SolidToggleButtonGroup>\r\n}\r\n","import { Box, CardActionArea, CardContent, Divider, Grid, TextField, ToggleButton, Typography } from \"@mui/material\"\r\nimport { ChangeEvent, useContext, useDeferredValue, useEffect, useState } from \"react\"\r\nimport { useTranslation } from \"react-i18next\"\r\nimport Assets from \"../../Assets/Assets\"\r\nimport WeaponSheet from \"../../Data/Weapons/WeaponSheet\"\r\nimport { DatabaseContext } from \"../../Database/Database\"\r\nimport usePromise from \"../../ReactHooks/usePromise\"\r\nimport { allRarities, allWeaponKeys, allWeaponTypeKeys, WeaponKey, WeaponTypeKey } from \"../../Types/consts\"\r\nimport { handleMultiSelect } from \"../../Util/MultiSelect\"\r\nimport CardDark from \"../Card/CardDark\"\r\nimport CardLight from \"../Card/CardLight\"\r\nimport CloseButton from \"../CloseButton\"\r\nimport ImgIcon from \"../Image/ImgIcon\"\r\nimport ModalWrapper from \"../ModalWrapper\"\r\nimport SolidToggleButtonGroup from \"../SolidToggleButtonGroup\"\r\nimport { StarsDisplay } from \"../StarDisplay\"\r\nimport WeaponToggle from \"../ToggleButton/WeaponToggle\"\r\n\r\ntype WeaponSelectionModalProps = {\r\n  show: boolean,\r\n  ascension?: number,\r\n  onHide: () => void,\r\n  onSelect: (wKey: WeaponKey) => void,\r\n  filter?: (sheet: WeaponSheet) => boolean,\r\n  weaponTypeFilter?: WeaponTypeKey,\r\n}\r\n\r\nconst rarityHandler = handleMultiSelect([...allRarities])\r\nexport default function WeaponSelectionModal({ show, ascension = 0, onHide, onSelect, filter = () => true, weaponTypeFilter }: WeaponSelectionModalProps) {\r\n  const { t } = useTranslation([\"page_weapon\", \"weaponNames_gen\"])\r\n  const weaponSheets = usePromise(() => WeaponSheet.getAll, [])\r\n  const [weaponFilter, setWeaponfilter] = useState<WeaponTypeKey[]>(weaponTypeFilter ? [weaponTypeFilter] : [...allWeaponTypeKeys])\r\n\r\n  const { database } = useContext(DatabaseContext)\r\n  const [state, setState] = useState(database.displayWeapon.get())\r\n  useEffect(() => database.displayWeapon.follow((r, dbMeta) => setState(dbMeta)), [database])\r\n\r\n  useEffect(() => weaponTypeFilter && setWeaponfilter([weaponTypeFilter]), [weaponTypeFilter])\r\n\r\n  const [searchTerm, setSearchTerm] = useState(\"\")\r\n  const deferredSearchTerm = useDeferredValue(searchTerm)\r\n\r\n  const { rarity } = state\r\n  const weaponIdList = !weaponSheets ? [] : allWeaponKeys.filter(wKey => filter(weaponSheets(wKey)))\r\n    .filter(wKey => weaponFilter.includes(weaponSheets(wKey).weaponType))\r\n    .filter(wKey => !deferredSearchTerm || t(`weaponNames_gen:${wKey}`).toLowerCase().includes(deferredSearchTerm.toLowerCase()))\r\n    .filter(wKey => rarity.includes(weaponSheets(wKey).rarity))\r\n    .sort((a, b) => weaponSheets(b).rarity - weaponSheets(a).rarity)\r\n\r\n  if (!weaponSheets) return null\r\n\r\n  return <ModalWrapper open={show} onClose={onHide}>\r\n    <CardDark>\r\n      <CardContent sx={{ py: 1 }}>\r\n        <Grid container spacing={1}>\r\n          <Grid item>\r\n            <WeaponToggle value={weaponFilter} onChange={setWeaponfilter} disabled={!!weaponTypeFilter} size=\"small\" />\r\n          </Grid >\r\n          <Grid item>\r\n            <SolidToggleButtonGroup sx={{ height: \"100%\" }} value={rarity} size=\"small\">\r\n              {allRarities.map(star => <ToggleButton key={star} value={star} onClick={() => database.displayWeapon.set({ rarity: rarityHandler(rarity, star) })}><Box display=\"flex\" gap={1}><strong>{star}</strong><StarsDisplay stars={1} /></Box></ToggleButton>)}\r\n            </SolidToggleButtonGroup>\r\n          </Grid>\r\n          <Grid item flexGrow={1}>\r\n            <TextField\r\n              autoFocus\r\n              size=\"small\"\r\n              value={searchTerm}\r\n              onChange={(e: ChangeEvent<HTMLTextAreaElement>) => setSearchTerm(e.target.value)}\r\n              label={t(\"weaponName\")}\r\n              sx={{ height: \"100%\" }}\r\n              InputProps={{\r\n                sx: { height: \"100%\" }\r\n              }}\r\n            />\r\n          </Grid>\r\n          <Grid item>\r\n            <CloseButton onClick={onHide} />\r\n          </Grid >\r\n        </Grid>\r\n      </CardContent>\r\n      <Divider />\r\n      <CardContent><Grid container spacing={1}>\r\n        {weaponIdList.map(weaponKey => {\r\n          const weaponSheet = weaponSheets(weaponKey)\r\n          return <Grid item key={weaponKey} lg={3} md={4}>\r\n            <CardLight sx={{ height: \"100%\" }} >\r\n              <CardActionArea onClick={() => { onHide(); onSelect(weaponKey) }} sx={{ display: \"flex\" }}>\r\n                <Box component=\"img\" src={weaponSheet.getImg(ascension)} sx={{ width: 100, height: \"auto\" }} className={` grad-${weaponSheet.rarity}star`} />\r\n                <Box sx={{ flexGrow: 1, px: 1 }}>\r\n                  <Typography variant=\"subtitle1\">{weaponSheet.name}</Typography>\r\n                  <Typography><ImgIcon src={Assets.weaponTypes?.[weaponSheet.weaponType]} /> <StarsDisplay stars={weaponSheet.rarity} colored /></Typography>\r\n                </Box>\r\n              </CardActionArea>\r\n            </CardLight>\r\n          </Grid>\r\n        })}\r\n      </Grid></CardContent>\r\n      <Divider />\r\n      <CardContent sx={{ py: 1 }}>\r\n        <CloseButton large onClick={onHide} />\r\n      </CardContent>\r\n    </CardDark>\r\n  </ModalWrapper>\r\n}\r\n"],"names":["weaponTypeHandler","handleMultiSelect","allWeaponTypeKeys","WeaponToggle","value","onChange","props","exclusive","wt","onClick","src","Assets","size","rarityHandler","allRarities","WeaponSelectionModal","show","ascension","onHide","onSelect","filter","weaponTypeFilter","t","useTranslation","weaponSheets","usePromise","WeaponSheet","useState","weaponFilter","setWeaponfilter","database","useContext","DatabaseContext","displayWeapon","get","state","setState","useEffect","follow","r","dbMeta","searchTerm","setSearchTerm","deferredSearchTerm","useDeferredValue","rarity","weaponIdList","allWeaponKeys","wKey","includes","weaponType","toLowerCase","sort","a","b","open","onClose","sx","py","container","spacing","item","disabled","height","star","set","display","gap","stars","flexGrow","autoFocus","e","target","label","InputProps","map","weaponKey","weaponSheet","lg","md","component","getImg","width","className","px","variant","name","colored","large"],"sourceRoot":""}