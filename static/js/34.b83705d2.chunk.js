"use strict";(self.webpackChunkgenshin_optimizer=self.webpackChunkgenshin_optimizer||[]).push([[34],{96034:function(e,n,t){t.r(n),t.d(n,{default:function(){return pe}});var s,r,a,i,o,c,l,d,x,u,h,j,p,Z,g=t(39504),f=t(20890),m=t(94721),v=t(10757),b=t(22020),y=t(76899),C=t(3992),w=t(29439),D=t(30168),k=t(53174),I=t(74223),K=t(80184),P=(0,I.Z)((0,K.jsx)("path",{d:"M9 3 5 6.99h3V14h2V6.99h3L9 3zm7 14.01V10h-2v7.01h-3L15 21l4-3.99h-3z"}),"ImportExport"),z=(0,I.Z)((0,K.jsx)("path",{d:"M5 20h14v-2H5v2zm0-10h4v6h6v-6h4l-7-7-7 7z"}),"Upload"),S=t(72456),M=(0,I.Z)((0,K.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete"),G=t(61889),O=t(24518),B=t(81918),H=t(52791),L=t(72791),V=t(71310),E=t(10600),W=t(82095),T=t(9321),R=t(66101),$=t(24711),F=t(60393),N=t(74165),_=t(15861),A=t(54483),J=(0,I.Z)((0,K.jsx)("path",{d:"M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.89 2 1.99 2H15v-8h5V8l-6-6zm-1 7V3.5L18.5 9H13zm4 12.66V16h5.66v2h-2.24l2.95 2.95-1.41 1.41L19 19.41v2.24h-2z"}),"FileOpen"),U=t(9912),Y=t(72247),q=t(66934),Q=t(68870),X=t(40165),ee=t(23741),ne=(0,q.ZP)("input")({display:"none"});function te(e){var n,t=e.index,d=e.onReplace,x=(0,L.useContext)(R.t).databases[t],u=(0,b.$)("settings").t,h=(0,L.useState)(""),j=(0,w.Z)(h,2),p=j[0],Z=j[1],m=(0,L.useState)(""),v=(0,w.Z)(m,2),I=v[0],P=v[1],z=(0,L.useState)(""),S=(0,w.Z)(z,2),M=S[0],B=S[1],H=(0,L.useState)(!1),E=(0,w.Z)(H,2),W=E[0],T=E[1],$=(0,L.useState)(!1),F=(0,w.Z)($,2),q=F[0],te=F[1],re=null!==(n=(0,L.useMemo)((function(){if(p){var e;try{if("object"!==typeof(e=JSON.parse(p)))return void B("uploadCard.error.jsonParse")}catch(a){return void B("uploadCard.error.jsonParse")}if("GOOD"===e.format){var n=new ee.N;n.copyFrom(x.storage);var s=new R.M(t+1,n),r=s.importGOOD(e,W,q);return r?{importResult:r,importedDatabase:s}:void B("uploadCard.error.goInvalid")}B("uploadCard.error.unknown")}}),[p,x,W,q,t]))&&void 0!==n?n:{},ie=re.importResult,oe=re.importedDatabase,ce=function(){var e=(0,_.Z)((0,N.Z)().mark((function e(n){var t,s;return(0,N.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.target.files[0],n.target.value=null,t&&P(t.name),(s=new FileReader).onload=function(){return Z(s.result)},s.readAsText(t);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,K.jsxs)(V.Z,{children:[(0,K.jsx)(g.Z,{sx:{py:1},children:(0,K.jsx)(y.c,{t:u,i18nKey:"settings:uploadCard.title"})}),(0,K.jsxs)(g.Z,{children:[(0,K.jsxs)(G.ZP,{container:!0,spacing:2,sx:{mb:1},children:[(0,K.jsx)(G.ZP,{item:!0,children:(0,K.jsxs)("label",{htmlFor:"icon-button-file",children:[(0,K.jsx)(ne,{accept:".json",id:"icon-button-file",type:"file",onChange:ce}),(0,K.jsx)(O.Z,{component:"span",color:"info",startIcon:(0,K.jsx)(J,{}),children:u(s||(s=(0,D.Z)(["uploadCard.buttons.open"])))})]})}),(0,K.jsx)(G.ZP,{item:!0,flexGrow:1,children:(0,K.jsx)(C.Z,{sx:{px:2,py:1},children:(0,K.jsx)(f.Z,{children:I?(0,K.jsxs)("span",{children:[(0,K.jsx)(A.G,{icon:k.w49})," ",I]}):(0,K.jsxs)("span",{children:[(0,K.jsx)(A.G,{icon:k.acZ})," ",(0,K.jsx)(y.c,{t:u,i18nKey:"settings:uploadCard.hint"})]})})})})]}),(0,K.jsxs)(Q.Z,{sx:{display:"flex",gap:2,flexWrap:"wrap"},children:[(0,K.jsx)(X.Z,{title:(0,K.jsx)(f.Z,{children:u(q?r||(r=(0,D.Z)(["uploadCard.tooltip.ignoreDup"])):a||(a=(0,D.Z)(["uploadCard.tooltip.detectdup"])))}),placement:"top",arrow:!0,children:(0,K.jsx)(Q.Z,{sx:{flexGrow:1,flexBasis:"10em"},children:(0,K.jsx)(O.Z,{fullWidth:!0,disabled:!p,color:q?"primary":"success",onClick:function(){return te(!q)},startIcon:q?(0,K.jsx)(U.Z,{}):(0,K.jsx)(Y.Z,{}),children:u(i||(i=(0,D.Z)(["uploadCard.buttons.detectDups"])))})})}),(0,K.jsx)(X.Z,{title:(0,K.jsx)(f.Z,{children:u(W?o||(o=(0,D.Z)(["uploadCard.tooltip.keepNotInImport"])):c||(c=(0,D.Z)(["uploadCard.tooltip.delNotInImport"])))}),placement:"top",arrow:!0,children:(0,K.jsx)(Q.Z,{sx:{flexGrow:1,flexBasis:"10em"},children:(0,K.jsx)(O.Z,{fullWidth:!0,disabled:!p,color:W?"primary":"success",onClick:function(){return T(!W)},startIcon:W?(0,K.jsx)(U.Z,{}):(0,K.jsx)(Y.Z,{}),children:u(l||(l=(0,D.Z)(["uploadCard.buttons.delNotInImport"])))})})})]}),(0,K.jsx)(f.Z,{gutterBottom:!0,variant:"caption",children:(0,K.jsx)(y.c,{t:u,i18nKey:"settings:uploadCard.hintPaste"})}),(0,K.jsx)(Q.Z,{component:"textarea",sx:{width:"100%",fontFamily:"monospace",minHeight:"10em",mb:2,resize:"vertical"},value:p,onChange:function(e){return Z(e.target.value)}}),ie&&oe?(0,K.jsx)(se,{importResult:ie,importedDatabase:oe}):u(M)]}),(0,K.jsx)(ae,{index:t,importedDatabase:oe,reset:function(){Z(""),P(""),d()}})]})}function se(e){var n=e.importResult,t=n.source,s=n.artifacts,r=n.characters,a=n.weapons,i=e.importedDatabase,o=(0,b.$)("settings").t;return(0,K.jsxs)(C.Z,{children:[(0,K.jsx)(g.Z,{sx:{py:1},children:(0,K.jsxs)(f.Z,{children:[(0,K.jsx)(y.c,{t:o,i18nKey:"uploadCard.dbSource"}),(0,K.jsxs)("strong",{children:[" ",t]})]})}),(0,K.jsx)(m.Z,{}),(0,K.jsx)(g.Z,{children:(0,K.jsxs)(G.ZP,{container:!0,spacing:2,children:[(0,K.jsx)(G.ZP,{item:!0,flexGrow:1,children:(0,K.jsx)(re,{result:s,dbTotal:i.arts.values.length,type:"arts"})}),(0,K.jsx)(G.ZP,{item:!0,flexGrow:1,children:(0,K.jsx)(re,{result:a,dbTotal:i.weapons.values.length,type:"weapons"})}),(0,K.jsx)(G.ZP,{item:!0,flexGrow:1,children:(0,K.jsx)(re,{result:r,dbTotal:i.chars.values.length,type:"chars"})})]})})]})}function re(e){var n,t=e.result,s=e.dbTotal,r=e.type,a=(0,b.$)("settings").t,i=t.import;return(0,K.jsxs)(V.Z,{children:[(0,K.jsx)(g.Z,{sx:{py:1},children:(0,K.jsxs)(f.Z,{children:[(0,K.jsx)(y.c,{t:a,i18nKey:"count.".concat(r)})," ",i]})}),(0,K.jsx)(m.Z,{}),(0,K.jsxs)(g.Z,{children:[(0,K.jsxs)(f.Z,{children:[(0,K.jsx)(y.c,{t:a,i18nKey:"count.new"})," ",(0,K.jsx)("strong",{children:t.new.length})," / ",i]}),(0,K.jsxs)(f.Z,{children:[(0,K.jsx)(y.c,{t:a,i18nKey:"count.unchanged"})," ",(0,K.jsx)("strong",{children:t.unchanged.length})," / ",i]}),(0,K.jsxs)(f.Z,{children:[(0,K.jsx)(y.c,{t:a,i18nKey:"count.upgraded"})," ",(0,K.jsx)("strong",{children:t.upgraded.length})," / ",i]}),!!t.remove.length&&(0,K.jsxs)(f.Z,{color:"warning.main",children:[(0,K.jsx)(y.c,{t:a,i18nKey:"count.removed"})," ",(0,K.jsx)("strong",{children:t.remove.length})]}),!!t.notInImport&&(0,K.jsxs)(f.Z,{children:[(0,K.jsx)(y.c,{t:a,i18nKey:"count.notInImport"})," ",(0,K.jsx)("strong",{children:t.notInImport})]}),(0,K.jsxs)(f.Z,{children:[(0,K.jsx)(y.c,{t:a,i18nKey:"count.dbTotal"})," ",(0,K.jsx)("strong",{children:t.beforeMerge})," -> ",(0,K.jsx)("strong",{children:s})]}),!(null===(n=t.invalid)||void 0===n||!n.length)&&(0,K.jsxs)("div",{children:[(0,K.jsxs)(f.Z,{color:"error.main",children:[(0,K.jsx)(y.c,{t:a,i18nKey:"count.invalid"})," ",(0,K.jsx)("strong",{children:t.invalid.length})," / ",i]}),(0,K.jsx)(Q.Z,{component:"textarea",sx:{width:"100%",fontFamily:"monospace",minHeight:"10em",resize:"vertical"},value:JSON.stringify(t.invalid,void 0,2),disabled:!0})]})]})]})}function ae(e){var n=e.index,t=e.importedDatabase,s=e.reset,r=(0,L.useContext)(R.t),a=r.databases,i=r.setDatabase,o=a[n],c=(0,b.$)("settings").t,l=(0,L.useCallback)((function(){t&&(t.swapStorage(o),i(n,t),t.toExtraLocalDB(),s())}),[o,n,t,s,i]);return(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(m.Z,{}),(0,K.jsx)(g.Z,{sx:{py:1},children:(0,K.jsx)(O.Z,{color:t?"success":"error",disabled:!t,onClick:l,startIcon:(0,K.jsx)(A.G,{icon:k.Y9i}),children:(0,K.jsx)(y.c,{t:c,i18nKey:"settings:uploadCard.replaceDatabase"})})})]})}function ie(){var e=(0,b.$)(["settings"]).t;return(0,K.jsxs)(V.Z,{children:[(0,K.jsx)(g.Z,{sx:{py:1},children:(0,K.jsx)(f.Z,{variant:"subtitle1",children:e(d||(d=(0,D.Z)(["DatabaseCard.title"])))})}),(0,K.jsx)(m.Z,{}),(0,K.jsx)(g.Z,{sx:{display:"flex",flexDirection:"column",gap:2},children:(0,K.jsx)(G.ZP,{container:!0,spacing:2,columns:{xs:1,md:2},children:(0,F.w6)(0,3).map((function(e){return(0,K.jsx)(G.ZP,{item:!0,xs:1,children:(0,K.jsx)(oe,{index:e})},e)}))})})]})}function oe(e){var n=e.index,t=(0,L.useContext)(R.t),s=t.databases,r=t.database,a=t.setDatabase,i=s[n],o=(0,L.useState)(i.dbMeta.get()),c=(0,w.Z)(o,2),l=c[0],d=l.name,v=l.lastEdit,I=c[1];(0,L.useEffect)((function(){return i.dbMeta.follow((function(e,n){return I(n)}))}),[i]),(0,L.useEffect)((function(){return I(i.dbMeta.get())}),[i]);var V=r===i,F=(0,$.Z)(),N=(0,w.Z)(F,3),_=N[0],A=N[1],J=N[2],U=(0,b.$)(["settings"]).t,Y=i.chars.keys.length,q=i.arts.values.length,Q=i.weapons.values.length,X=Boolean(Y||q||Q),ee=(0,L.useCallback)((function(){return navigator.clipboard.writeText(JSON.stringify(i.exportGOOD())).then((function(){return alert("Copied database to clipboard.")})).catch(console.error)}),[i]),ne=(0,L.useCallback)((function(){window.confirm('Are you sure you want to delete "'.concat(d,'"?'))&&(i.clear(),i.toExtraLocalDB())}),[i,d]),se=(0,L.useCallback)((function(){var e=(new Date).toISOString().split(".")[0].replace("T","_").replaceAll(":","-"),n=JSON.stringify(i.exportGOOD()),t="".concat(d.trim().replaceAll(" ","_"),"_").concat(e,".json"),s=document.createElement("a");s.download=t,s.href="data:".concat("application/json;charset=utf-8",",").concat(encodeURIComponent(n)),s.target="_blank",document.body.appendChild(s),s.click(),document.body.removeChild(s)}),[i,d]),re=(0,L.useCallback)((function(){V||(r.toExtraLocalDB(),i.swapStorage(r),a(n,i))}),[n,a,r,V,i]),ae=(0,L.useState)(d),ie=(0,w.Z)(ae,2),oe=ie[0],ce=ie[1];(0,L.useEffect)((function(){return ce(d)}),[d]);var le=(0,L.useCallback)((function(){i.dbMeta.set({name:oe}),i.toExtraLocalDB()}),[oe,i]),de=(0,L.useCallback)((function(e){return"Enter"===e.key&&le()}),[le]);return(0,K.jsxs)(C.Z,{sx:{height:"100%",boxShadow:V?"0px 0px 0px 2px green inset":void 0},children:[(0,K.jsxs)(g.Z,{sx:{display:"flex",gap:1,justifyContent:"space-between"},children:[(0,K.jsx)(E.el,{value:oe,sx:{borderRadius:1,px:1,flexGrow:1},onChange:function(e){return ce(e.target.value)},onBlur:le,onKeyDown:de}),!V&&(0,K.jsx)(O.Z,{startIcon:(0,K.jsx)(P,{}),onClick:re,color:"warning",children:U(x||(x=(0,D.Z)(["DatabaseCard.button.swap"])))}),(0,K.jsx)(B.Z,{color:V?"success":"secondary",label:V?U(u||(u=(0,D.Z)(["DatabaseCard.currentDB"]))):"".concat(U(h||(h=(0,D.Z)(["DatabaseCard.title"])))," ").concat(i.dbIndex)})]}),(0,K.jsx)(m.Z,{}),(0,K.jsx)(g.Z,{children:(0,K.jsxs)(H.Z,{display:"flex",gap:2,children:[(0,K.jsxs)(H.Z,{flexGrow:1,children:[(0,K.jsxs)(f.Z,{noWrap:!0,children:[(0,K.jsx)(y.c,{t:U,i18nKey:"count.chars"})," ",(0,K.jsx)("strong",{children:Y})]}),(0,K.jsxs)(f.Z,{noWrap:!0,children:[(0,K.jsx)(y.c,{t:U,i18nKey:"count.arts"})," ",(0,K.jsx)("strong",{children:q})]}),(0,K.jsxs)(f.Z,{noWrap:!0,children:[(0,K.jsx)(y.c,{t:U,i18nKey:"count.weapons"})," ",(0,K.jsx)("strong",{children:Q})]}),!!v&&(0,K.jsx)(f.Z,{noWrap:!0,children:(0,K.jsx)("strong",{children:new Date(v).toLocaleString()})})]}),(0,K.jsx)(H.Z,{children:(0,K.jsxs)(G.ZP,{container:!0,spacing:1,columns:{xs:2},children:[(0,K.jsx)(G.ZP,{item:!0,xs:1,children:(0,K.jsx)(O.Z,{fullWidth:!0,disabled:!X,color:"info",onClick:ee,startIcon:(0,K.jsx)(W.Z,{icon:k.Yjj}),children:(0,K.jsx)(y.c,{t:U,i18nKey:"DatabaseCard.button.copy"})})}),(0,K.jsxs)(G.ZP,{item:!0,xs:1,children:[(0,K.jsx)(T.Z,{open:_,onClose:J,children:(0,K.jsx)(te,{index:n,onReplace:J})}),(0,K.jsx)(O.Z,{fullWidth:!0,component:"span",color:"info",startIcon:(0,K.jsx)(z,{}),onClick:A,children:U(j||(j=(0,D.Z)(["DatabaseCard.button.upload"])))})]}),(0,K.jsx)(G.ZP,{item:!0,xs:1,children:(0,K.jsx)(O.Z,{fullWidth:!0,disabled:!X,onClick:se,startIcon:(0,K.jsx)(S.Z,{}),children:U(p||(p=(0,D.Z)(["DatabaseCard.button.download"])))})}),(0,K.jsx)(G.ZP,{item:!0,xs:1,children:(0,K.jsx)(O.Z,{fullWidth:!0,disabled:!X,color:"error",onClick:ne,startIcon:(0,K.jsx)(M,{}),children:U(Z||(Z=(0,D.Z)(["DatabaseCard.button.delete"])))})})]})})]})})]})}var ce=t(23786),le=t(33890),de=t(25617),xe=t(72828);function ue(){var e=(0,b.$)().t;return(0,K.jsxs)(V.Z,{children:[(0,K.jsxs)(g.Z,{sx:{py:1},children:[e("settings:languageCard.selectLanguage")," ",(0,K.jsx)(de.Z,{color:"warning",children:e("ui:underConstruction")})]}),(0,K.jsx)(m.Z,{}),(0,K.jsx)(g.Z,{children:(0,K.jsx)(je,{})})]})}var he={chs:"\u7b80\u4f53\u4e2d\u6587",cht:"\u7e41\u9ad4\u4e2d\u6587",de:"Deutsch",en:"English",es:"espa\xf1ol",fr:"fran\xe7ais",id:"Bahasa Indonesia",ja:"\u65e5\u672c\u8a9e",ko:"\ud55c\uad6d\uc5b4",pt:"Portugu\xeas",ru:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439 \u044f\u0437\u044b\u043a",th:"\u0e20\u0e32\u0e29\u0e32\u0e44\u0e17\u0e22",vi:"Ti\u1ebfng Vi\u1ec7t"};function je(){var e=(0,b.$)(["ui","settings"]),n=e.t,t=e.i18n,s=function(e){return function(){return t.changeLanguage(e)}},r=t.languages[0];return(0,K.jsx)(le.Z,{fullWidth:!0,title:n("settings:languageCard.languageFormat",{language:n("languages:".concat(r))}),children:xe.C.map((function(e){return(0,K.jsxs)(ce.Z,{selected:r===e,disabled:r===e,onClick:s(e),children:[(0,K.jsx)(y.c,{i18nKey:"languages:".concat(e)}),e!==r?" (".concat(he[e],")"):""]},e)}))})}function pe(){var e=(0,b.$)(["settings"]).t;return v.ZP.send({hitType:"pageview",page:"/setting"}),(0,K.jsxs)(C.Z,{sx:{my:1},children:[(0,K.jsx)(g.Z,{sx:{py:1},children:(0,K.jsx)(f.Z,{variant:"subtitle1",children:(0,K.jsx)(y.c,{t:e,i18nKey:"title"})})}),(0,K.jsx)(m.Z,{}),(0,K.jsxs)(g.Z,{sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,K.jsx)(ue,{}),(0,K.jsx)(ie,{})]})]})}},72247:function(e,n,t){var s=t(74223),r=t(80184);n.Z=(0,s.Z)((0,r.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox")},9912:function(e,n,t){var s=t(74223),r=t(80184);n.Z=(0,s.Z)((0,r.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank")},72456:function(e,n,t){var s=t(74223),r=t(80184);n.Z=(0,s.Z)((0,r.jsx)("path",{d:"M5 20h14v-2H5v2zM19 9h-4V3H9v6H5l7 7 7-7z"}),"Download")}}]);
//# sourceMappingURL=34.b83705d2.chunk.js.map