{"version":3,"sources":["Util.js","Artifact/ArtifactData.js","Artifact/Artifact.js","Artifact/ArtifactDatabase.js","Character/CharacterDatabase.js","Components/CustomFormControl.js","Components/SlotIcon.js","Artifact/PercentBadge.js","Artifact/ArtifactCard.js","imgs/scan_art_main.png","imgs/snippet.png","Artifact/UploadDisplay.js","Artifact/ArtifactEditor.js","Artifact/ArtifactDisplay.js","Build/BuildWorker.js","Build/Build.js","Build/BuildStatData.js","Build/BuildDisplay.js","Components/ElementalIcon.js","Character/CharacterCard.js","Character/CharacterEditor.js","Character/CharacterDisplay.js","App.js","reportWebVitals.js","index.js"],"names":["getRandomElementFromArray","array","Math","floor","random","length","getRandomIntInclusive","min","max","ceil","loadFromLocalStorage","key","data","localStorage","getItem","JSON","parse","saveToLocalStorage","obj","setItem","stringify","deepClone","closeEnoughFloat","a","b","abs","closeEnoughInt","clamp","val","clampPercent","ArtifactStatsData","hp","name","hp_","unit","atk","atk_","def","def_","phy_dmg","ele_dmg","ele_mas","ener_rech","crit_rate","crit_dmg","heal_bonu","ArtifactSubStatsData","2","3","4","5","ArtifactSlotsData","flower","stats","plume","sands","goblet","circlet","CharacterSpecializedStatKey","ArtifactSetsData","rarity","pieces","sets","text","anemo_ele_dmg","electro_ele_dmg","pyro_ele_dmg","geo_ele_dmg","1","ArtifactStarsData","subsBaselow","subBaseHigh","numUpgradesOrUnlocks","ArtifactMainStatsData","ElementalData","anemo","geo","electro","hydro","pyro","cryo","dendro","Artifact","value","rollData","float","roll","closeEnoughRoll","maxNumRoll","parseInt","toFixed","rollOption","arr","sum","reduce","accu","v","slice","reverse","forEach","state","substat","valid","parseFloat","isNaN","msg","numStars","isFloat","this","getStatUnit","getSubstatRollData","rolls","getRolls","totalAllowableRolls","efficiency","join","substateValidation","currentEfficiency","maximumEfficiency","substats","map","validateSubStat","some","currentNumOfRolls","cur","rollsRemaining","level","totalPossbleRolls","totalPossibleRolls","totalCurrentEfficiency","totalPossbleUpgrade","isInvalidArtifact","art","setKey","slotKey","mainStatKey","getArtifactSetName","defVal","getArtifactSetsByMaxStarEntries","star","Object","entries","filter","setobj","getArtifactSlotName","getArtifactPieceName","getStatName","includes","element","split","getRarityArr","getStatNameWithPercent","getMainStatValue","elementKey","numberOfSubstatUnlocked","subStatKey","artifactDatabase","artifactIdList","artIdIndex","ArtifactDatabase","Error","updateIdList","keys","saveIdListToStorage","getIdListFromStorage","getArtifactDatabase","getArtifactIdList","populateDatebaseFromLocalStorage","id","removeArtifactById","getArtifact","removeArtifact","addArtifact","updateCacheData","updateArtifact","artId","removeItem","moveToNewLocation","artid","location","swapLocations","artA","artB","locA","locB","swapLocationsById","artAid","artBid","characterDatabase","characterIdList","charIdIndex","CharacterDatabase","isInvalid","char","getCharacterDatabase","getCharacterIdList","addCharacter","updateCharacter","getCharacter","removeCharacter","removeCharacterById","character","equippedArtifacts","values","getArtifactIDFromSlot","charid","equipArtifact","unequipArtifactOnSlot","equipArtifactBuild","characterid","artifactIds","FloatFormControl","props","validateInput","e","target","periodEnd","setState","onValueChange","render","FormControl","onChange","React","Component","IntFormControl","SlotIcon","faBahai","faFeatherAlt","faHourglass","faWineGlass","faCrown","PercentBadge","getBadgeColor","percent","badgeColor","tooltip","OverlayTrigger","placement","overlay","Tooltip","Badge","variant","children","ArtifactCard","artifactData","currentLocation","intendedLocation","artifactToSwapWithid","artifactToSwapWith","forceUpdate","artifactValidation","locationChar","Card","className","border","bg","Header","Row","Col","icon","xs","onEdit","Button","size","onClick","faEdit","onDelete","faTrashAlt","Body","Title","Subtitle","repeat","stat","i","Footer","DropdownButton","title","Dropdown","Item","equipOnChar","disabled","lock","faLock","faLockOpen","UploadDisplay","useState","ocr","setOcr","fileName","setFileName","image","setImage","progress","setProgress","progVariant","setProgVariant","modalShow","setModalShow","reset","parseValues","parsed","matches","entry","match","RegExp","exec","push","index","sort","setSubStat","setObj","setSetKey","slotObj","setSlotKey","worker","createWorker","logger","m","status","doOCR","load","loadLanguage","initialize","recognize","uploadedFile","file","reader","FileReader","onloadend","result","readAsDataURL","explainationModal","Modal","show","onHide","dialogAs","Container","faTimes","md","alt","src","Snippet","scan_art_main","useEffect","pasteFunc","clipboardData","files","window","addEventListener","removeEventListener","img","progPercent","ProgressBar","now","label","lg","Form","Group","as","File","type","custom","ArtifactEditor","setLevel","newlevel","getRemainingSubstats","saveArtifact","uploadDisplayReset","artifactToEdit","getInitialState","setMainStatKey","mainstats","ArtifactDropDown","dropdownitemsForStar","InputGroup","Prepend","ItemText","Divider","MainSelection","Text","placeholder","Append","MainStatInputRow","readOnly","SubStatInput","percentStat","substatprops","substatevalue","onSubstatValueChange","subStatFormControl","remainingSubstats","onSubStatSelected","subStatValidation","newStatValue","randomizeArtifact","numOfInitialSubStats","totRolls","RollStat","componentDidUpdate","substatValidations","Popover","Content","faQuestionCircle","style","cursor","Alert","cancelEdit","initialState","ArtifactDisplay","forceUpdateArtifactDisplay","artToEdit","artIdList","deleteArtifact","splice","indexOf","editArtifact","cancelEditArtifact","initialFilter","artifacts","filterArtSetKey","filterStars","filterLevelLow","filterLevelHigh","filterSlotKey","filterMainStatKey","filterSubstates","filterKey","MainStatDropDownItem","statKey","Toggle","Menu","ToggleButtonGroup","defaultValue","selected","ToggleButton","faCheckSquare","faSquare","ele","substatKey","Worker_fn","Worker","Build","databaseObj","ret","slot","setFilters","num","perm","slotKeys","slotPerm","numArtsPerSet","setFilter","splitArtifacts","setPerms","setsInFilter","splitNumArtsPerSet","artArr","setPerm","permaccu","test","input","artifactDisplaySortKey","explaination","phy_atk","ele_atk","BuildDisplay","forceUpdateBuildDisplay","selectedCharacterKey","every","filterKeys","splitArtifactsBySlot","artifactsSlotsToSelectMainStats","mainStat","changeMainStat","changeSetFilterKey","newkey","setsNumArr","artsAccountedOther","ind","generateBuilds","artifactSetPerms","generatingBuilds","builds","maxBuildsToShow","buildFilterKey","asending","onmessage","postMessage","BuildGeneratorEditorCard","charlist","selectedCharacter","characterName","artsAccounted","generateAllPossibleArtifactSetPerm","totBuildNumber","calculateTotalBuildNumber","buildAlert","maxBuildsToGenerate","sortName","ButtonGroup","setTimeout","faSortAmountDownAlt","faSortAmountUp","ArtifactDisplayItem","build","ListGroup","action","modalBuild","setToSlots","sm","finalStats","BuildModal","weapon_atk","weaponStatKey","weaponStatVal","artifactSetEffect","effects","effect","equipArtifacts","slotarr1","slotarr","savedState","sandsMainKey","gobletMainKey","circletMainkey","maxBuildsToShowList","maxBuildsToGenerateList","BuildModalCharacterCard","statsDisplay","ElementalIcon","faWind","faGem","faBolt","faWater","faFire","faIcicles","faSeedling","CharacterCard","characterData","liElement","mainEles","advEles","weaponAtk","weaponSub","specialized","specialStatKey","specialStatVal","Link","to","pathname","CharacterEditor","StatInput","characterToEdit","percentWeaponStatSelect","percentSpecialStatSlect","weaponprops","weaponSubStatInput","specialStatProps","specialStatInput","faSignature","faTint","faFistRaised","faShieldAlt","faMagic","faDice","faDiceD20","faFirstAid","faSync","faGavel","CharacterDisplay","charToEdit","charIdList","deleteCharacter","editCharacter","cancelEditCharacter","App","Navbar","expand","Brand","Nav","href","process","faPaypal","faPatreon","faDiscord","path","component","version","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.ee62e88d.chunk.js","sourcesContent":["const getRandomElementFromArray = (array) => array[Math.floor(Math.random() * array.length)];\r\nfunction getRandomInt(min, max) {\r\n  min = Math.ceil(min);\r\n  max = Math.floor(max);\r\n  return Math.floor(Math.random() * (max - min) + min); //The maximum is exclusive and the minimum is inclusive\r\n}\r\nfunction getRandomIntInclusive(min, max) {\r\n  min = Math.ceil(min);\r\n  max = Math.floor(max);\r\n  return Math.floor(Math.random() * (max - min + 1) + min); //The maximum is inclusive and the minimum is inclusive \r\n}\r\nfunction getRandomArbitrary(min, max) {\r\n  return Math.random() * (max - min) + min;\r\n}\r\nconst loadFromLocalStorage = (key) => {\r\n  let data = localStorage.getItem(key)\r\n  if (!data) return null\r\n  return JSON.parse(data)\r\n}\r\nconst saveToLocalStorage = (key, obj) =>\r\n  localStorage.setItem(key, JSON.stringify(obj));\r\nconst deepClone = (obj) =>\r\n  JSON.parse(JSON.stringify(obj))\r\n\r\nconst closeEnoughFloat = (a, b) =>\r\n  Math.abs(a - b) < 0.1\r\n\r\nconst closeEnoughInt = (a, b) =>\r\n  Math.abs(a - b) <= 1\r\nconst clamp = (val, a, b) => {\r\n  if (val < a) return a;\r\n  if (val > b) return b;\r\n  return val\r\n}\r\nconst getArrLastElement = (arr) => \r\n  arr.length ? arr[arr.length - 1] : null\r\n\r\nconst clamp01 = (val) => clamp(val, 0, 1)\r\nconst clampPercent = (val) => clamp(val, 0, 100)\r\nexport {\r\n  getRandomInt,\r\n  getRandomIntInclusive,\r\n  getRandomArbitrary,\r\n  getRandomElementFromArray,\r\n  loadFromLocalStorage,\r\n  saveToLocalStorage,\r\n  deepClone,\r\n  closeEnoughFloat,\r\n  closeEnoughInt,\r\n  clamp,\r\n  clamp01,\r\n  clampPercent,\r\n  getArrLastElement\r\n}","\r\nconst ArtifactStatsData = {\r\n  hp: { name: \"HP\", key: \"hp\" },\r\n  hp_: { name: \"HP\", key: \"hp_\", unit: \"%\" },\r\n  atk: { name: \"ATK\", key: \"atk\" },\r\n  atk_: { name: \"ATK\", key: \"atk_\", unit: \"%\" },\r\n  def: { name: \"DEF\", key: \"def\" },\r\n  def_: { name: \"DEF\", key: \"def_\", unit: \"%\" },\r\n  phy_dmg: { name: \"Physical DMG Bonus\", key: \"phy_dmg\", unit: \"%\" },\r\n  ele_dmg: { name: \"Elemental DMG Bonus\", key: \"ele_dmg\", unit: \"%\" },\r\n  ele_mas: { name: \"Elemental Mastery\", key: \"ele_mas\" },\r\n  ener_rech: { name: \"Energy Recharge\", key: \"ener_rech\", unit: \"%\" },\r\n  crit_rate: { name: \"Crit Rate\", key: \"crit_rate\", unit: \"%\" },\r\n  crit_dmg: { name: \"Crit DMG\", key: \"crit_dmg\", unit: \"%\" },\r\n  heal_bonu: { name: \"Healing Bonus\", key: \"heal_bonu\", unit: \"%\" },\r\n};\r\n\r\nconst ArtifactSubStatsData = {\r\n  hp: { 2: [50, 61, 72], 3: [100, 115, 129, 143], 4: [167, 191, 215, 239], 5: [209, 239, 269, 299] },\r\n  hp_: { 2: [1.6, 2, 2.3], 3: [2.5, 2.8, 3.2, 3.5], 4: [3.3, 3.7, 4.2, 4.7], 5: [4.1, 4.7, 5.3, 5.8] },\r\n  atk: { 2: [3, 4, 5], 3: [7, 8, 9], 4: [11, 12, 14, 16], 5: [14, 16, 18, 19] },\r\n  atk_: { 2: [1.6, 2, 2.3], 3: [2.5, 2.8, 3.2, 3.5], 4: [3.3, 3.7, 4.2, 4.7], 5: [4.1, 4.7, 5.3, 5.8] },\r\n  def: { 2: [4, 5, 6], 3: [8, 9, 10, 11], 4: [13, 15, 17, 19], 5: [16, 19, 21, 23] },\r\n  def_: { 2: [2, 2.5, 2.9], 3: [3.1, 3.5, 3.9, 4.4], 4: [4.1, 4.7, 5.3, 5.8], 5: [5.1, 5.8, 6.6, 7.3] },\r\n  ele_mas: { 2: [7, 8, 9], 3: [10, 11, 13, 14], 4: [13, 15, 17, 19], 5: [16, 19, 21, 23] },\r\n  ener_rech: { 2: [1.8, 2.2, 2.6], 3: [2.7, 3.1, 3.5, 3.9], 4: [3.6, 4.1, 4.7, 5.2], 5: [4.5, 5.2, 5.8, 6.5] },\r\n  crit_rate: { 2: [1.1, 1.3, 1.6], 3: [1.6, 1.9, 2.1, 2.3], 4: [2.2, 2.5, 2.8, 3.1], 5: [2.7, 3.1, 3.5, 3.9] },\r\n  crit_dmg: { 2: [2.2, 2.6, 3.1], 3: [3.3, 3.7, 4.2, 4.7], 4: [4.4, 5, 5.6, 6.2], 5: [5.4, 6.2, 7, 7.8] },\r\n}\r\n\r\nconst ArtifactSlotsData = {\r\n  flower: { name: \"Flower of Life\", stats: [\"hp\"] },\r\n  plume: { name: \"Plume of Death\", stats: [\"atk\"] },\r\n  sands: { name: \"Sands of Eon\", stats: [\"hp_\", \"def_\", \"atk_\", \"ele_mas\", \"ener_rech\"] },\r\n  goblet: { name: \"Goblet of Eonothem\", stats: [\"hp_\", \"def_\", \"atk_\", \"ele_mas\", \"phy_dmg\", \"anemo_ele_dmg\", \"geo_ele_dmg\", \"electro_ele_dmg\", \"hydro_ele_dmg\", \"pyro_ele_dmg\", \"cryo_ele_dmg\",] },\r\n  circlet: { name: \"Circlet of Logos\", stats: [\"hp_\", \"def_\", \"atk_\", \"ele_mas\", \"crit_rate\", \"crit_dmg\", \"heal_bonu\"] },\r\n};\r\nconst CharacterSpecializedStatKey = [\"hp_\", \"atk_\", \"def_\", \"ele_mas\", \"ener_rech\", \"heal_bonu\", \"crit_rate\", \"crit_dmg\", \"phy_dmg\", \"anemo_ele_dmg\", \"geo_ele_dmg\", \"electro_ele_dmg\", \"hydro_ele_dmg\", \"pyro_ele_dmg\", \"cryo_ele_dmg\"]\r\nconst ArtifactSetsData = {\r\n  \"Wanderer's Troupe\": {\r\n    name: \"Wanderer's Troupe\", rarity: [4, 5], pieces: {\r\n      flower: \"Troupe's Dawnlight\",\r\n      plume: \"Bard's Arrow Feather\",\r\n      sands: \"Concert's Final Hour\",\r\n      goblet: \"Wanderer's String-Kettle\",\r\n      circlet: \"Conductor's Top Hat\"\r\n    },\r\n    sets: {\r\n      2: {\r\n        text: \"Elemental Mastery +80\",\r\n        stats: {\r\n          ele_mas: 80\r\n        }\r\n      },\r\n      4: {\r\n        text: \"Increases Charged Attack DMG by 35% if the character uses a Catalyst or Bow.\",\r\n        stats: {}\r\n      }\r\n    }\r\n  }, \"Viridescent Venerer\": {\r\n    name: \"Viridescent Venerer\", rarity: [4, 5], pieces: {\r\n      flower: \"In Remembrance of Viridescent Fields\",\r\n      plume: \"Viridescent Arrow Feather\",\r\n      sands: \"Viridescent Venerer's Determination\",\r\n      goblet: \"Viridescent Venerer's Vessel\",\r\n      circlet: \"Viridescent Venerer's Diadem\"\r\n    },\r\n    sets: {\r\n      2: {\r\n        text: \"Anemo DMG Bonus +15%\",\r\n        stats: {\r\n          anemo_ele_dmg: 15\r\n        }\r\n      },\r\n      4: {\r\n        text: \"Increases Swirl DMG by 60%. Decreases opponent's Elemental RES to the element infused in the Swirl by 40% for 10s.\",\r\n        stats: {}\r\n      }\r\n    }\r\n  }, \"Thundersoother\": {\r\n    name: \"Thundersoother\", rarity: [4, 5], pieces: {\r\n      flower: \"Thundersoother's Heart\",\r\n      plume: \"Thundersoother's Plume\",\r\n      sands: \"Hour of Soothing Thunder\",\r\n      goblet: \"Thundersoother's Goblet\",\r\n      circlet: \"Thundersoother's Diadem\"\r\n    },\r\n    sets: {\r\n      2: {\r\n        text: \"Electro RES increased by 40%\",\r\n        stats: {}//TODO ele_res\r\n      },\r\n      4: {\r\n        text: \"Increases DMG against enemies affected by Electro by 35%.\",\r\n        stats: {}\r\n      }\r\n    }\r\n  }, \"Thundering Fury\": {\r\n    name: \"Thundering Fury\", rarity: [4, 5], pieces: {\r\n      flower: \"Thunderbird's Mercy\",\r\n      plume: \"Survivor of Catastrophe\",\r\n      sands: \"Hourglass of Thunder\",\r\n      goblet: \"Omen of Thunderstorm\",\r\n      circlet: \"Thunder Summoner's Crown\"\r\n    },\r\n    sets: {\r\n      2: {\r\n        text: \"Electro DMG Bonus +15%\",\r\n        stats: { electro_ele_dmg: 15 }\r\n      },\r\n      4: {\r\n        text: \"Increases damage caused by Overloaded, Electro-Charged, and Superconduct DMG by 40%. Triggering such effects decreases Elemental Skill CD by 1s. Can only occur once every 0.8s.\",\r\n        stats: {}\r\n      }\r\n    }\r\n  }, \"Retracing Bolide\": {\r\n    name: \"Retracing Bolide\", rarity: [4, 5], pieces: {\r\n      flower: \"Summer Night's Bloom\",\r\n      plume: \"Summer Night's Finale\",\r\n      sands: \"Summer Night's Moment\",\r\n      goblet: \"Summer Night's Waterballoon\",\r\n      circlet: \"Summer Night's Mask\"\r\n    },\r\n    sets: {\r\n      2: {\r\n        text: \"Increases the effectiveness of shields by 35%\",\r\n        stats: {}//TODO shield \r\n      },\r\n      4: {\r\n        text: \"Gain an additional 40% Normal and Charged Attack DMG while under the protection of a shield.\",\r\n        stats: {}\r\n      }\r\n    }\r\n  }, \"Noblesse Oblige\": {\r\n    name: \"Noblesse Oblige\", rarity: [4, 5], pieces: {\r\n      flower: \"Royal Flora\",\r\n      plume: \"Royal Plume\",\r\n      sands: \"Royal Pocket Watch\",\r\n      goblet: \"Royal Silver Urn\",\r\n      circlet: \"Royal Masque\"\r\n    },\r\n    sets: {\r\n      2: {\r\n        text: \"Elemental Burst DMG +20%\",\r\n        stats: {}\r\n      },\r\n      4: {\r\n        text: \"Using an Elemental Burst increase all party members' ATK by 20% for 12s. This effect cannot stack.\",\r\n        stats: {}\r\n      }\r\n    }\r\n  }, \"Maiden Beloved\": {\r\n    name: \"Maiden Beloved\", rarity: [4, 5], pieces: {\r\n      flower: \"Maiden's Distant Love\",\r\n      plume: \"Maiden's Heart-stricken Infatuation\",\r\n      sands: \"Maiden's Passing Youth\",\r\n      goblet: \"Maiden's Fleeting Leisure\",\r\n      circlet: \"Maiden's Fading Beauty\"\r\n    },\r\n    sets: {\r\n      2: {\r\n        text: \"Character Healing Effectiveness +15%\",\r\n        stats: { heal_bonu: 15 }\r\n      },\r\n      4: {\r\n        text: \"Using an Elemental Skill or Burst increases healing received by all party members by 20% for 10s.\",\r\n        stats: {}\r\n      }\r\n    }\r\n  }, \"Lavawalker\": {\r\n    name: \"Lavawalker\", rarity: [4, 5], pieces: {\r\n      flower: \"Lavawalker's Resolution\",\r\n      plume: \"Lavawalker's Salvation\",\r\n      sands: \"Lavawalker's Torment\",\r\n      goblet: \"Lavawalker's Epiphany\",\r\n      circlet: \"Lavawalker's Wisdom\"\r\n    },\r\n    sets: {\r\n      2: {\r\n        text: \"Pyro RES increased by 40%\",\r\n        stats: {}//TODO ele_res\r\n      },\r\n      4: {\r\n        text: \"Increases DMG against enemies that are Burning or affected by Pyro by 35%.\",\r\n        stats: {}\r\n      }\r\n    }\r\n  }, \"Gladiator's Finale\": {\r\n    name: \"Gladiator's Finale\", rarity: [4, 5], pieces: {\r\n      flower: \"Gladiator's Nostalgia\",\r\n      plume: \"Gladiator's Destiny\",\r\n      sands: \"Gladiator's Longing\",\r\n      goblet: \"Gladiator's Intoxication\",\r\n      circlet: \"Gladiator's Triumphus\"\r\n    },\r\n    sets: {\r\n      2: {\r\n        text: \"ATK +18%\",\r\n        stats: { atk_: 18 }\r\n      },\r\n      4: {\r\n        text: \"If the wielder of this artifact set uses a Sword, Claymore or Polearm, increases their Normal Attack DMG by 35%.\",\r\n        stats: {}\r\n      }\r\n    }\r\n  }, \"Crimson Witch of Flames\": {\r\n    name: \"Crimson Witch of Flames\", rarity: [4, 5], pieces: {\r\n      flower: \"Witch's Flower of Blaze\",\r\n      plume: \"Witch's Ever-Burning Plume\",\r\n      sands: \"Witch's End Time\",\r\n      goblet: \"Witch's Heart Flames\",\r\n      circlet: \"Witch's Scorching Hat\"\r\n    },\r\n    sets: {\r\n      2: {\r\n        text: \"Pyro DMG Bonus +15%\",\r\n        stats: { pyro_ele_dmg: 15 }\r\n      },\r\n      4: {\r\n        text: \"Increases Overloaded and Burning DMG by 40%. Increases Vaporize and Melt DMG by 15%. Using an Elemental Skill increases 2-Piece Set effects by 50% for 10s. Max 3 stacks.\",\r\n        stats: {}\r\n      }\r\n    }\r\n  }, \"Bloodstained Chivalry\": {\r\n    name: \"Bloodstained Chivalry\", rarity: [4, 5], pieces: {\r\n      flower: \"Bloodstained Flower of Iron\",\r\n      plume: \"Bloodstained Black Plume\",\r\n      sands: \"Bloodstained Final Hour\",\r\n      goblet: \"Bloodstained Chevalier's Goblet\",\r\n      circlet: \"Bloodstained Iron Mask\"\r\n    },\r\n    sets: {\r\n      2: {\r\n        text: \"Physical DMG +25%\",\r\n        stats: { phy_dmg: 25 }\r\n      },\r\n      4: {\r\n        text: \"After defeating an opponent, increases Charged Attack DMG by 50%, and reduces its Stamina cost to 0 for 10s.\",\r\n        stats: {}\r\n      }\r\n    }\r\n  }, \"Archaic Petra\": {\r\n    name: \"Archaic Petra\", rarity: [4, 5], pieces: {\r\n      flower: \"Flower of Creviced Cliff\",\r\n      plume: \"Feather of Jagged Peaks\",\r\n      sands: \"Sundial of Enduring Jade\",\r\n      goblet: \"Goblet of Chiseled Crag\",\r\n      circlet: \"Mask of Solitude Basalt\"\r\n    },\r\n    sets: {\r\n      2: {\r\n        text: \"\tGain a 15% Geo DMG Bonus\",\r\n        stats: { geo_ele_dmg: 15 }\r\n      },\r\n      4: {\r\n        text: \"Upon obtaining a crystal created through a Geo Elemental Reaction, all party members gain 35% RES to that particular element for 10s. Only one form of Elemental RES can be gained in this manner at any one time. Upon obtaining a crystal created through a Geo Elemental Reaction, all party members gain 35% RES to that particular element for 10s. Only one form of Elemental RES can be gained in this manner at any one time.\",\r\n        stats: {}\r\n      }\r\n    }\r\n  },\r\n  \"Scholar\": {\r\n    name: \"Scholar\", rarity: [3, 4], pieces: {\r\n      flower: \"Scholar's Bookmark\",\r\n      plume: \"Scholar's Quill Pen\",\r\n      sands: \"Scholar's Clock\",\r\n      goblet: \"Scholar's Ink Cup\",\r\n      circlet: \"Scholar's Lens\"\r\n    },\r\n    sets: {\r\n      2: {\r\n        text: \"Energy Recharge +20%\",\r\n        stats: { ener_rech: 20 }\r\n      },\r\n      4: {\r\n        text: \"Gaining Energy gives 3 Energy to all party members who have a bow or a catalyst equipped. Can only occur once every 3s.\",\r\n        stats: {}\r\n      }\r\n    }\r\n  },\r\n  \"Gambler\": {\r\n    name: \"Gambler\", rarity: [3, 4], pieces: {\r\n      flower: \"Gambler's Brooch\",\r\n      plume: \"Gambler's Feathered Accessory\",\r\n      sands: \"Gambler's Pocket Watch\",\r\n      goblet: \"Gambler's Dice Cup\",\r\n      circlet: \"Gambler's Earrings\"\r\n    },\r\n    sets: {\r\n      2: {\r\n        text: \"Elemental Skill DMG increased by 20%\",\r\n        stats: {}\r\n      },\r\n      4: {\r\n        text: \"Defeating an enemy has 100% chance to remove Elemental Skill CD. Can only occur once every 15s.\",\r\n        stats: {}\r\n      }\r\n    }\r\n  },\r\n  \"Brave Heart\": {\r\n    name: \"Brave Heart\", rarity: [3, 4], pieces: {\r\n      flower: \"Medal of the Brave\",\r\n      plume: \"Prospect of the Brave\",\r\n      sands: \"Fortitude of the Brave\",\r\n      goblet: \"Outset of the Brave\",\r\n      circlet: \"Crown of the Brave\"\r\n    },\r\n    sets: {\r\n      2: {\r\n        text: \"2-piece Set Bonus: ATK +18%\",\r\n        stats: { atk_: 18 }\r\n      },\r\n      4: {\r\n        text: \"Increases DMG by 30% against enemies with more than 50% HP.\",\r\n        stats: {}\r\n      }\r\n    }\r\n  },\r\n  \"Tiny Miracle\": {\r\n    name: \"Tiny Miracle\", rarity: [3, 4], pieces: {\r\n      flower: \"Tiny Miracle's Flower\",\r\n      plume: \"Tiny Miracle's Feather\",\r\n      sands: \"Tiny Miracle's Hourglass\",\r\n      goblet: \"Tiny Miracle's Goblet\",\r\n      circlet: \"Tiny Miracle's Earrings\"\r\n    },\r\n    sets: {\r\n      2: {\r\n        text: \"All Elemental RES increased by 20%\",\r\n        stats: {}\r\n      },\r\n      4: {\r\n        text: \"Incoming elemental DMG increases corresponding Elemental RES by 30% for 10s. Can only occur once every 10s.\",\r\n        stats: {}\r\n      }\r\n    }\r\n  },\r\n  \"Defender's Will\": {\r\n    name: \"Defender's Will\", rarity: [3, 4], pieces: {\r\n      flower: \"Guardian's Flower\",\r\n      plume: \"Guardian's Sigil\",\r\n      sands: \"Guardian's Clock\",\r\n      goblet: \"Guardian's Vessel\",\r\n      circlet: \"Guardian's Band\"\r\n    },\r\n    sets: {\r\n      2: {\r\n        text: \"Base DEF +30%\",\r\n        stats: { def_: 30 }\r\n      },\r\n      4: {\r\n        text: \"Increases Elemental RES by 30% for each element present in the party.\",\r\n        stats: {}\r\n      }\r\n    }\r\n  },\r\n  \"Martial Artist\": {\r\n    name: \"Martial Artist\", rarity: [3, 4], pieces: {\r\n      flower: \"Martial Artist's Red Flower\",\r\n      plume: \"Martial Artist's Feathered Accessory\",\r\n      sands: \"Martial Artist's Water Hourglass\",\r\n      goblet: \"Martial Artist's Wine Cup\",\r\n      circlet: \"Martial Artist's Bandana\"\r\n    },\r\n    sets: {\r\n      2: {\r\n        text: \"Increases Normal Attack and Charged Attack DMG by 15%.\",\r\n        stats: {}\r\n      },\r\n      4: {\r\n        text: \"After using Elemental Skill, increases Normal Attack and Charged Attack DMG by 25% for 8s.\",\r\n        stats: {}\r\n      }\r\n    }\r\n  },\r\n  \"Resolution of Sojourner\": {\r\n    name: \"Resolution of Sojourner\", rarity: [3, 4], pieces: {\r\n      flower: \"Heart of Comradeship\",\r\n      plume: \"Feather of Homecoming\",\r\n      sands: \"Sundial of the Sojourner\",\r\n      goblet: \"Goblet of the Sojourner\",\r\n      circlet: \"Crown of Parting\"\r\n    },\r\n    sets: {\r\n      2: {\r\n        text: \"ATK +18%\",\r\n        stats: { atk_: 18 }\r\n      },\r\n      4: {\r\n        text: \"Increases Charged Attack CRIT Rate by 30%.\",\r\n        stats: {}\r\n      }\r\n    }\r\n  },\r\n  \"The Exile\": {\r\n    name: \"The Exile\", rarity: [3, 4], pieces: {\r\n      flower: \"Exile's Flower\",\r\n      plume: \"Exile's Feather\",\r\n      sands: \"Exile's Pocket Watch\",\r\n      goblet: \"Exile's Goblet\",\r\n      circlet: \"Exile's Circlet\"\r\n    },\r\n    sets: {\r\n      2: {\r\n        text: \"Energy Recharge +20%\",\r\n        stats: { ener_rech: 20 }\r\n      },\r\n      4: {\r\n        text: \"Using an Elemental Burst regenerates 2 Energy for other party members every 2s for 6s. This effect cannot stack.\",\r\n        stats: {}\r\n      }\r\n    }\r\n  },\r\n  \"Berserker\": {\r\n    name: \"Berserker\", rarity: [3, 4], pieces: {\r\n      flower: \"Berserker's Rose\",\r\n      plume: \"Berserker's Indigo Feather\",\r\n      sands: \"Berserker's Timepiece\",\r\n      goblet: \"Berserker's Bone Goblet\",\r\n      circlet: \"Berserker's Battle Mask\"\r\n    },\r\n    sets: {\r\n      2: {\r\n        text: \"CRIT Rate +12%\",\r\n        stats: { crit_rate: 12 }\r\n      },\r\n      4: {\r\n        text: \"When HP is below 70%, CRIT Rate increases by an additional 24%.\",\r\n        stats: {}\r\n      }\r\n    }\r\n  },\r\n  \"Instructor\": {\r\n    name: \"Instructor\", rarity: [3, 4], pieces: {\r\n      flower: \"Instructor's Brooch\",\r\n      plume: \"Instructor's Feathered Accessory\",\r\n      sands: \"Instructor's Pocket Watch\",\r\n      goblet: \"Instructor's Tea Cup\",\r\n      circlet: \"Instructor's Cap\"\r\n    },\r\n    sets: {\r\n      2: {\r\n        text: \"Increases Elemental Mastery by 80.\",\r\n        stats: { ele_mas: 80 }\r\n      },\r\n      4: {\r\n        text: \"After using Elemental Skill, increases all party members' Elemental Mastery by 120 for 8s.\",\r\n        stats: {}\r\n      }\r\n    }\r\n  },\r\n  \"Traveling Doctor\": {\r\n    name: \"Traveling Doctor\", rarity: [3], pieces: {\r\n      flower: \"Traveling Doctor's Medicine Pot\",\r\n      plume: \"Traveling Doctor's Handkerchief\",\r\n      sands: \"Traveling Doctor's Pocket Watch\",\r\n      goblet: \"Traveling Doctor's Silver Lotus\",\r\n      circlet: \"Traveling Doctor's Owl Feather\"\r\n    },\r\n    sets: {\r\n      2: {\r\n        text: \"Increases incoming healing by 20%.\",\r\n        stats: {}\r\n      },\r\n      4: {\r\n        text: \"Using Elemental Burst restores 20% HP.\",\r\n        stats: {}\r\n      }\r\n    }\r\n  },\r\n  \"Lucky Dog\": {\r\n    name: \"Lucky Dog\", rarity: [3], pieces: {\r\n      flower: \"Lucky Dog's Clover\",\r\n      plume: \"Lucky Dog's Eagle Feather\",\r\n      sands: \"Lucky Dog's Hourglass\",\r\n      goblet: \"Lucky Dog's Goblet\",\r\n      circlet: \"Lucky Dog's Silver Circlet\"\r\n    },\r\n    sets: {\r\n      2: {\r\n        text: \"DEF increased by 100.\",\r\n        stats: { def: 100 }\r\n      },\r\n      4: {\r\n        text: \"Picking up Mora restores 300 HP.\",\r\n        stats: {}\r\n      }\r\n    }\r\n  },\r\n  \"Adventurer\": {\r\n    name: \"Adventurer\", rarity: [3], pieces: {\r\n      flower: \"Adventurer's Flower\",\r\n      plume: \"Adventurer's Tail Feather\",\r\n      sands: \"Adventurer's Pocket Watch\",\r\n      goblet: \"Adventurer's Golden Goblet\",\r\n      circlet: \"Adventurer's Bandana\"\r\n    },\r\n    sets: {\r\n      2: {\r\n        text: \"Max HP increased by 1,000.\",\r\n        stats: { hp: 1000 }\r\n      },\r\n      4: {\r\n        text: \"Opening chest regenerates 30% Max HP over 5s.\",\r\n        stats: {}\r\n      }\r\n    }\r\n  },\r\n  \"Prayers of Wisdom\": {\r\n    name: \"Prayers of Wisdom\", rarity: [3, 4], pieces: {\r\n      circlet: \"Tiara of Thunder\"\r\n    },\r\n    sets: {\r\n      1: {\r\n        text: \"Affected by Electro for 40% less time.\",\r\n        stats: {}\r\n      }\r\n    }\r\n  },\r\n  \"Prayers of Springtime\": {\r\n    name: \"Prayers of Springtime\", rarity: [3, 4], pieces: {\r\n      circlet: \"Tiara of Frost\"\r\n    },\r\n    sets: {\r\n      1: {\r\n        text: \"Affected by Cryo for 40% less time.\",\r\n        stats: {}\r\n      }\r\n    }\r\n  },\r\n  \"Prayers of Illumination\": {\r\n    name: \"Prayers of Illumination\", rarity: [3, 4], pieces: {\r\n      circlet: \"Tiara of Flame\"\r\n    },\r\n    sets: {\r\n      1: {\r\n        text: \"Affected by Pyro for 40% less time.\",\r\n        stats: {}\r\n      }\r\n    }\r\n  },\r\n  \"Prayers of Destiny\": {\r\n    name: \"Prayers of Destiny\", rarity: [3, 4], pieces: {\r\n      circlet: \"Tiara of Torrents\"\r\n    },\r\n    sets: {\r\n      1: {\r\n        text: \"Affected by Hydro for 40% less time.\",\r\n        stats: {}\r\n      }\r\n    }\r\n  },\r\n  // \"\": {\r\n  //   name: \"\", rarity: [4, 5], pieces: {\r\n  //     flower: \"\",\r\n  //     plume: \"\",\r\n  //     sands: \"\",\r\n  //     goblet: \"\",\r\n  //     circlet: \"\"\r\n  //   },\r\n  //   sets: {\r\n  //     2: {\r\n  //       text: \"\",\r\n  //       stats: {}\r\n  //     },\r\n  //     4: {\r\n  //       text: \"\",\r\n  //       stats: {}\r\n  //     }\r\n  //   }\r\n  // },\r\n}\r\nconst ArtifactStarsData = {\r\n  3: { subsBaselow: 1, subBaseHigh: 2, numUpgradesOrUnlocks: 3 },\r\n  4: { subsBaselow: 2, subBaseHigh: 3, numUpgradesOrUnlocks: 4 },\r\n  5: { subsBaselow: 3, subBaseHigh: 4, numUpgradesOrUnlocks: 5 }\r\n};\r\n\r\nconst ArtifactMainStatsData = {\r\n  3: {\r\n    hp: [430, 552, 674, 796, 918, 1040, 1162, 1283, 1405, 1527, 1649, 1771, 1893],\r\n    atk: [28, 36, 44, 52, 60, 68, 76, 84, 91, 99, 107, 115, 123],\r\n    hp_: [5.2, 6.7, 8.2, 9.7, 11.2, 12.7, 14.2, 15.6, 17.1, 18.6, 20.1, 21.6, 23.1],\r\n    atk_: [5.2, 6.7, 8.2, 9.7, 11.2, 12.7, 14.2, 15.6, 17.1, 18.6, 20.1, 21.6, 23.1],\r\n    def_: [6.6, 8.4, 10.3, 12.1, 14.0, 15.8, 17.7, 19.6, 21.4, 23.3, 25.1, 27.0, 28.8],\r\n    phy_dmg: [6.6, 8.4, 10.3, 12.1, 14.0, 15.8, 17.7, 19.6, 21.4, 23.3, 25.1, 27.0, 28.8],\r\n    ele_dmg: [5.2, 6.7, 8.2, 9.7, 11.2, 12.7, 14.2, 15.6, 17.1, 18.6, 20.1, 21.6, 23.1],\r\n    ele_mas: [21, 27, 33, 39, 45, 51, 57, 63, 69, 75, 80, 86, 92],\r\n    ener_rech: [5.8, 7.5, 9.1, 10.8, 12.4, 14.1, 15.7, 17.4, 19.0, 20.7, 22.3, 24.0, 25.6],\r\n    crit_rate: [3.5, 4.5, 5.5, 6.5, 7.5, 8.4, 9.4, 10.4, 11.4, 12.4, 13.4, 14.4, 15.4],\r\n    crit_dmg: [7.0, 9.0, 11.0, 12.9, 14.9, 16.9, 18.9, 20.9, 22.8, 24.8, 26.8, 28.8, 30.8],\r\n    heal_bonu: [4.0, 5.2, 6.3, 7.5, 8.6, 9.8, 10.9, 12.0, 13.2, 14.3, 15.5, 16.6, 17.8],\r\n  },\r\n  4: {\r\n    hp: [645, 828, 1011, 1194, 1377, 1559, 1742, 1925, 2108, 2291, 2474, 2657, 2839, 3022, 3205, 3388, 3571],\r\n    atk: [42, 54, 66, 78, 90, 102, 113, 125, 137, 149, 161, 173, 185, 197, 209, 221, 232],\r\n    hp_: [6.3, 8.1, 9.9, 11.6, 13.4, 15.2, 17.0, 18.8, 20.6, 22.3, 24.1, 25.9, 27.7, 29.5, 31.3, 33.0, 34.8],\r\n    atk_: [6.3, 8.1, 9.9, 11.6, 13.4, 15.2, 17.0, 18.8, 20.6, 22.3, 24.1, 25.9, 27.7, 29.5, 31.3, 33.0, 34.8],\r\n    def_: [7.9, 10.1, 12.3, 14.6, 16.8, 19.0, 21.2, 23.5, 25.7, 27.9, 30.2, 32.4, 34.6, 36.8, 39.1, 41.3, 43.5],\r\n    phy_dmg: [7.9, 10.1, 12.3, 14.6, 16.8, 19.0, 21.2, 23.5, 25.7, 27.9, 30.2, 32.4, 34.6, 36.8, 39.1, 41.3, 43.5],\r\n    ele_dmg: [6.3, 8.1, 9.9, 11.6, 13.4, 15.2, 17.0, 18.8, 20.6, 22.3, 24.1, 25.9, 27.7, 29.5, 31.3, 33.0, 34.8],\r\n    ele_mas: [25, 32, 39, 47, 54, 61, 68, 75, 82, 89, 97, 104, 111, 118, 125, 132, 139],\r\n    ener_rech: [7.0, 9.0, 11.0, 12.9, 14.9, 16.9, 18.9, 20.9, 22.8, 24.8, 26.8, 28.8, 30.8, 32.8, 34.7, 36.7, 38.7],\r\n    crit_rate: [4.2, 5.4, 6.6, 7.8, 9.0, 10.1, 11.3, 12.5, 13.7, 14.9, 16.1, 17.3, 18.5, 19.7, 20.8, 22.0, 23.2],\r\n    crit_dmg: [8.4, 10.8, 13.1, 15.5, 17.9, 20.3, 22.7, 25.0, 27.4, 29.8, 32.2, 34.5, 36.9, 39.3, 41.7, 44.1, 46.4],\r\n    heal_bonu: [4.8, 6.2, 7.6, 9.0, 10.3, 11.7, 13.1, 14.4, 15.8, 17.2, 18.6, 19.9, 21.3, 22.7, 24.0, 25.4, 26.8],\r\n  },\r\n  5: {\r\n    hp: [717, 920, 1123, 1326, 1530, 1733, 1936, 2139, 2342, 2545, 2749, 2952, 3155, 3358, 3561, 3764, 3967, 4171, 4374, 4577, 4780],\r\n    atk: [47, 60, 73, 86, 100, 113, 126, 139, 152, 166, 179, 192, 205, 219, 232, 245, 258, 272, 285, 298, 311],\r\n    hp_: [7.0, 9.0, 11.0, 12.9, 14.9, 16.9, 18.9, 20.9, 22.8, 24.8, 26.8, 28.8, 30.8, 32.8, 34.7, 36.7, 38.7, 40.7, 42.7, 44.6, 46.6],\r\n    atk_: [7.0, 9.0, 11.0, 12.9, 14.9, 16.9, 18.9, 20.9, 22.8, 24.8, 26.8, 28.8, 30.8, 32.8, 34.7, 36.7, 38.7, 40.7, 42.7, 44.6, 46.6],\r\n    def_: [8.7, 11.2, 13.7, 16.2, 18.6, 21.1, 23.6, 26.1, 28.6, 31, 33.5, 36, 38.5, 40.9, 43.4, 45.9, 48.4, 50.8, 53.3, 55.8, 58.3],\r\n    phy_dmg: [8.7, 11.2, 13.7, 16.2, 18.6, 21.1, 23.6, 26.1, 28.6, 31, 33.5, 36, 38.5, 40.9, 43.4, 45.9, 48.4, 50.8, 53.3, 55.8, 58.3],\r\n    ele_dmg: [7.0, 9.0, 11.0, 12.9, 14.9, 16.9, 18.9, 20.9, 22.8, 24.8, 26.8, 28.8, 30.8, 32.8, 34.7, 36.7, 38.7, 40.7, 42.7, 44.6, 46.6],\r\n    ele_mas: [28, 36, 44, 52, 60, 68, 76, 84, 91, 99, 107, 115, 123, 131, 139, 147, 155, 163, 171, 179, 187],\r\n    ener_rech: [7.8, 10.0, 12.2, 14.4, 16.6, 18.8, 21.0, 23.2, 25.4, 27.6, 29.8, 32.0, 34.2, 36.4, 38.6, 40.8, 43.0, 45.2, 47.4, 49.6, 51.8],\r\n    crit_rate: [4.7, 6.0, 7.4, 8.7, 10.0, 11.4, 12.7, 14.0, 15.4, 16.7, 18.0, 19.3, 20.7, 22.0, 23.3, 24.7, 26.0, 27.3, 28.7, 30.0, 31.3],\r\n    crit_dmg: [9.3, 11.9, 14.6, 17.2, 19.9, 22.5, 25.5, 27.8, 30.5, 33.1, 35.8, 38.4, 41.1, 43.7, 46.3, 49.0, 51.6, 54.3, 56.9, 59.6, 62.2],\r\n    heal_bonu: [5.4, 6.9, 8.4, 10.0, 11.5, 13.0, 14.5, 16.1, 17.6, 19.1, 20.6, 22.2, 23.7, 25.2, 26.7, 28.3, 29.8, 31.3, 32.8, 34.4, 35.9],\r\n  }\r\n}\r\nconst ElementalData = {\r\n  anemo: { name: \"Anemo\" },\r\n  geo: { name: \"Geo\" },\r\n  electro: { name: \"Electro\" },\r\n  hydro: { name: \"Hydro\" },\r\n  pyro: { name: \"Pyro\" },\r\n  cryo: { name: \"Cryo\" },\r\n  dendro: { name: \"Dendro\" }\r\n}\r\nexport {\r\n  ArtifactStatsData,\r\n  ArtifactSlotsData,\r\n  ArtifactSetsData,\r\n  ArtifactSubStatsData,\r\n  ArtifactStarsData,\r\n  ArtifactMainStatsData,\r\n  ElementalData,\r\n  CharacterSpecializedStatKey\r\n}","import { clampPercent, closeEnoughFloat, closeEnoughInt } from '../Util';\r\nimport { ArtifactStatsData, ArtifactStarsData, ArtifactMainStatsData, ArtifactSetsData, ArtifactSubStatsData, ArtifactSlotsData, ElementalData } from './ArtifactData'\r\n\r\nexport default class Artifact {\r\n  static isInvalidArtifact = (art) =>\r\n    !art || !art.setKey || !art.numStars || !art.slotKey || !art.mainStatKey\r\n  static getArtifactSetName = (key, defVal = \"\") =>\r\n    key ? ArtifactSetsData[key].name : defVal;\r\n\r\n  static getArtifactSetsByMaxStarEntries = (star) =>\r\n    Object.entries(ArtifactSetsData).filter(([key, setobj]) => setobj.rarity[(setobj.rarity.length) - 1] === star)\r\n\r\n  static getArtifactSlotName = (slotKey, defVal = \"\") =>\r\n    ArtifactSlotsData[slotKey] ? ArtifactSlotsData[slotKey].name : defVal\r\n\r\n  static getArtifactPieceName = (state) =>\r\n    (state.setKey && state.slotKey && ArtifactSetsData[state.setKey].pieces) ?\r\n      ArtifactSetsData[state.setKey].pieces[state.slotKey] : \"Piece Name\";\r\n  static getStatName = (key, defVal = \"\") => {\r\n    if (key && ArtifactStatsData[key])\r\n      return ArtifactStatsData[key].name;\r\n    else if (key && key.includes(\"_ele_dmg\")) {\r\n      let element = key.split(\"_ele_dmg\")[0]\r\n      if (ElementalData[element])\r\n        return ElementalData[element].name + \" DMG Bonus\"\r\n    }\r\n    return defVal\r\n  }\r\n  static getRarityArr = (setKey) => ArtifactSetsData[setKey] ? ArtifactSetsData[setKey].rarity : []\r\n\r\n  static getStatNameWithPercent = (key, defVal = \"\") => {\r\n    let name = this.getStatName(key, defVal)\r\n    if (name !== defVal && (key === \"hp_\" || key === \"atk_\" || key === \"def_\"))\r\n      name += \"%\"\r\n    return name;\r\n  }\r\n\r\n  static getStatUnit = (key, defVal = \"\") => {\r\n    if (key && ArtifactStatsData[key] && ArtifactStatsData[key].unit)\r\n      return ArtifactStatsData[key].unit\r\n    else if (key && key.includes(\"_ele_dmg\"))\r\n      return this.getStatUnit(\"ele_dmg\")\r\n    else\r\n      return defVal\r\n  }\r\n\r\n  static getMainStatValue = (key, numStars, level, defVal = 0) => {\r\n    if (key && numStars && ArtifactMainStatsData[numStars] && ArtifactMainStatsData[numStars][key] && ArtifactMainStatsData[numStars][key][level])\r\n      return ArtifactMainStatsData[numStars][key][level]\r\n    else {\r\n      if (key.includes(\"_ele_dmg\")) {\r\n        let elementKey = \"ele_dmg\"\r\n        return this.getMainStatValue(elementKey, numStars, level, defVal)\r\n      }\r\n      return defVal\r\n    }\r\n  }\r\n\r\n\r\n  static totalPossibleRolls = (numStars) => ArtifactStarsData[numStars] ?\r\n    (ArtifactStarsData[numStars].subBaseHigh + ArtifactStarsData[numStars].numUpgradesOrUnlocks) : 0;\r\n\r\n  static rollsRemaining = (level, numStars) =>\r\n    Math.ceil((numStars * 4 - level) / 4);\r\n\r\n  static numberOfSubstatUnlocked = (state) =>\r\n    state.substats.reduce((sum, cur) =>\r\n      sum + (cur && cur.value ? 1 : 0), 0);\r\n\r\n  static getSubstatRollData = (subStatKey, numStars) => (subStatKey && numStars) ?\r\n    ArtifactSubStatsData[subStatKey][numStars] : []\r\n\r\n  static getRolls(value, rollData, float = false) {\r\n    let roll = null;\r\n    let closeEnoughRoll = null;\r\n    let maxNumRoll = parseInt((value / rollData[0]).toFixed(0))\r\n    if (!maxNumRoll) return null;\r\n    let rollOption = (val, arr) => {\r\n      if (roll) return;\r\n      if (arr.length) {\r\n        if (arr.length > maxNumRoll) return;\r\n        let sum = arr.reduce((accu, v) => accu + v, 0)\r\n        if (float) {\r\n          if (sum - val > 0.1) return\r\n          if (closeEnoughFloat(sum, val)) {\r\n            roll = arr;\r\n            return;\r\n          }\r\n        } else {\r\n          if (sum - val > 1) return\r\n          if (sum === val) {\r\n            roll = arr;\r\n            return\r\n          } else if (closeEnoughInt(sum, val)) {\r\n            closeEnoughRoll = arr;\r\n          }\r\n        }\r\n      }\r\n      rollData.slice().reverse().forEach(roll => {\r\n        rollOption(value, [...arr, roll])\r\n      })\r\n    }\r\n    rollOption(value, [])\r\n    if (!roll && closeEnoughRoll) roll = closeEnoughRoll;\r\n    return roll;\r\n  }\r\n  static validateSubStat(state, substat) {\r\n    if (!substat || !substat.value) return { valid: true }\r\n    let value = parseFloat(substat.value);\r\n    if (isNaN(value)) return { valid: false, msg: `Invalid Input` }\r\n    let numStars = state.numStars\r\n    if (!numStars) return { valid: false, msg: `Artifact Stars not set.` }\r\n    let isFloat = this.getStatUnit(substat.key) === \"%\"\r\n    let rollData = this.getSubstatRollData(substat.key, numStars);\r\n    let rolls = this.getRolls(value, rollData, isFloat)\r\n\r\n    if (!rolls || rolls.length === 0) return { valid: false, msg: `Substat cannot be rolled 0 times.` };\r\n    let totalAllowableRolls = ArtifactStarsData[numStars].numUpgradesOrUnlocks - (4 - ArtifactStarsData[numStars].subBaseHigh) + 1;//+1 for its base roll\r\n    if (rolls.length > totalAllowableRolls) return { valid: false, msg: `Substat cannot be rolled more than ${totalAllowableRolls} times.` };\r\n\r\n    let min = rollData[0] * rolls.length;\r\n    let max = rollData[rollData.length - 1] * rolls.length;\r\n    return { valid: true, efficiency: clampPercent(((value - min) / (max - min)) * 100), msg: `This substat was rolled ${rolls.length} time(s). Values: [${rolls.join(\", \")}]`, rolls }\r\n  }\r\n  static artifactValidation(state, substateValidation) {\r\n    let currentEfficiency = 0, maximumEfficiency = 0;\r\n    if (!substateValidation) substateValidation = state.substats.map(substat => Artifact.validateSubStat(state, substat));\r\n    for (const substat of substateValidation)\r\n      if (!substat.valid)\r\n        return { substateValidation, valid: false, msg: \"One of the substat is invalid.\", currentEfficiency, maximumEfficiency }\r\n\r\n    //if a substat has >=2 rolls, when not all of them have been unlocked//if a substat has >=2 rolls, when not all of them have been unlocked\r\n    if (substateValidation.some((substat) => substat.rolls && substat.rolls.length > 1) && substateValidation.some((substat) => !substat.rolls))\r\n      return { substateValidation, valid: false, msg: \"One of the substat have >1 rolls, but not all substats are unlocked.\", currentEfficiency, maximumEfficiency }\r\n    let currentNumOfRolls = substateValidation.reduce((sum, cur) => sum + (cur.valid && cur.rolls ? cur.rolls.length : 0), 0);\r\n    let rollsRemaining = Artifact.rollsRemaining(state.level, state.numStars);\r\n    let totalPossbleRolls = Artifact.totalPossibleRolls(state.numStars);\r\n\r\n    if ((currentNumOfRolls + rollsRemaining) > totalPossbleRolls)\r\n      return { substateValidation, valid: false, msg: `Current number of substat rolles(${currentNumOfRolls}) + Rolls remaining from level up (${rollsRemaining}) is greater than the total possible roll of this artifact (${totalPossbleRolls}) `, currentEfficiency, maximumEfficiency }\r\n\r\n    let totalCurrentEfficiency = substateValidation.reduce((sum, cur) => sum + (cur.valid && cur.rolls && cur.efficiency ? (cur.efficiency * cur.rolls.length) : 0), 0);\r\n    currentEfficiency = clampPercent(totalCurrentEfficiency / totalPossbleRolls);\r\n    maximumEfficiency = clampPercent((totalCurrentEfficiency + rollsRemaining * 100) / totalPossbleRolls);\r\n    return { valid: true, substateValidation, currentNumOfRolls, rollsRemaining, totalPossbleUpgrade: totalPossbleRolls, currentEfficiency, maximumEfficiency }\r\n  }\r\n}","import { deepClone, loadFromLocalStorage, saveToLocalStorage } from \"../Util\";\r\nimport Artifact from \"./Artifact\";\r\n\r\nvar artifactDatabase = {};\r\nvar artifactIdList = [];\r\nvar artIdIndex = 1;\r\nexport default class ArtifactDatabase {\r\n  //do not instantiate.\r\n  constructor() {\r\n    if (this instanceof ArtifactDatabase) {\r\n      throw Error('A static class cannot be instantiated.');\r\n    }\r\n  }\r\n  static getIdListFromStorage = () => loadFromLocalStorage(\"artifact_id_list\");\r\n  static saveIdListToStorage = () => saveToLocalStorage(\"artifact_id_list\", artifactIdList);\r\n  static getArtifactDatabase = () => deepClone(artifactDatabase);\r\n  static getArtifactIdList = () => deepClone(artifactIdList);\r\n  static populateDatebaseFromLocalStorage = () => {\r\n    if (artifactIdList.length > 0) return;\r\n    artIdIndex = parseInt(localStorage.getItem(\"artifact_highest_id\"));\r\n    if (isNaN(artIdIndex)) artIdIndex = 0;\r\n    artifactIdList = ArtifactDatabase.getIdListFromStorage();\r\n    if (artifactIdList === null) artifactIdList = []\r\n    for (const id of artifactIdList)\r\n      if (!artifactDatabase[id]) {\r\n        artifactDatabase[id] = loadFromLocalStorage(id);\r\n        if (Artifact.isInvalidArtifact(artifactDatabase[id]))\r\n          this.removeArtifactById(id);\r\n      }\r\n  }\r\n  static getArtifact = (id) => id ? artifactDatabase[id] : null\r\n  static removeArtifact = (art) => {\r\n    this.removeArtifactById(art.id);\r\n  }\r\n  static addArtifact = (art) => {\r\n    if (Artifact.isInvalidArtifact(art)) return;\r\n    //generate id using artIdIndex\r\n    let id = `artifact_${artIdIndex++}`\r\n    localStorage.setItem(\"artifact_highest_id\", artIdIndex)\r\n    art.id = id;\r\n    art = deepClone(art)\r\n    saveToLocalStorage(id, art);\r\n    artifactDatabase[id] = art;\r\n    this.updateCacheData();\r\n    return id;\r\n  }\r\n  static updateArtifact = (art) => {\r\n    if (Artifact.isInvalidArtifact(art)) return;\r\n    let id = art.id;\r\n    art = deepClone(art)\r\n    saveToLocalStorage(id, art);\r\n    artifactDatabase[id] = art;\r\n    this.updateCacheData();\r\n  }\r\n  static removeArtifactById = (artId) => {\r\n    delete artifactDatabase[artId];\r\n    localStorage.removeItem(artId);\r\n    this.updateCacheData();\r\n  }\r\n\r\n  static updateCacheData() {\r\n    this.updateIdList();\r\n  }\r\n  static updateIdList() {\r\n    artifactIdList = Object.keys(artifactDatabase)\r\n    this.saveIdListToStorage();\r\n  }\r\n  static moveToNewLocation = (artid, location) => {\r\n    if (!artid) return;\r\n    let art = this.getArtifact(artid)\r\n    if (!art || art.location === location) return;\r\n    art.location = location;\r\n    this.updateArtifact(art);\r\n  }\r\n  static swapLocations = (artA, artB) => {\r\n    let locA = artA.location\r\n    let locB = artB.location\r\n    this.moveToNewLocation(artA.id, locB)\r\n    this.moveToNewLocation(artB.id, locA)\r\n  }\r\n  static swapLocationsById = (artAid, artBid) =>\r\n    this.swapLocations(this.getArtifact(artAid), this.getArtifact(artBid))\r\n\r\n}\r\n","import ArtifactDatabase from \"../Artifact/ArtifactDatabase\";\r\nimport { deepClone, loadFromLocalStorage, saveToLocalStorage } from \"../Util\";\r\n\r\nvar characterDatabase = {};\r\nvar characterIdList = [];\r\nvar charIdIndex = 1;\r\n\r\nexport default class CharacterDatabase {\r\n  //do not instantiate.\r\n  constructor() {\r\n    if (this instanceof CharacterDatabase) {\r\n      throw Error('A static class cannot be instantiated.');\r\n    }\r\n  }\r\n  static isInvalid = (char) => !char || !char.name\r\n  static getIdListFromStorage = () => loadFromLocalStorage(\"character_id_list\");\r\n  static saveIdListToStorage = () => saveToLocalStorage(\"character_id_list\", characterIdList);\r\n  static getCharacterDatabase = () => deepClone(characterDatabase);\r\n  static getCharacterIdList = () => deepClone(characterIdList);\r\n  static populateDatebaseFromLocalStorage = () => {\r\n    if (characterIdList.length > 0) return;\r\n    charIdIndex = parseInt(localStorage.getItem(\"character_highest_id\"));\r\n    if (isNaN(charIdIndex)) charIdIndex = 0;\r\n    characterIdList = CharacterDatabase.getIdListFromStorage();\r\n    if (characterIdList === null) characterIdList = []\r\n    for (const id of characterIdList)\r\n      if (!characterDatabase[id])\r\n        characterDatabase[id] = loadFromLocalStorage(id);\r\n  }\r\n  static addCharacter = (char) => {\r\n    //generate id using charIdIndex\r\n    let id = `character_${charIdIndex++}`\r\n    localStorage.setItem(\"character_highest_id\", charIdIndex)\r\n    char.id = id;\r\n    char = deepClone(char)\r\n    saveToLocalStorage(id, char);\r\n    characterDatabase[id] = char;\r\n    this.updateCacheData();\r\n    return id;\r\n  }\r\n  static updateCharacter = (char) => {\r\n    let id = char.id;\r\n    char = deepClone(char)\r\n    saveToLocalStorage(id, char);\r\n    characterDatabase[id] = char;\r\n    this.updateCacheData();\r\n  }\r\n  static getCharacter = (id) => id ? characterDatabase[id] : null\r\n  static removeCharacter = (char) => {\r\n    CharacterDatabase.removeCharacterById(char.id);\r\n  }\r\n  static removeCharacterById = (id) => {\r\n    let character = this.getCharacter(id)\r\n    if (character.equippedArtifacts)\r\n      Object.values(character.equippedArtifacts).forEach(artid =>\r\n        ArtifactDatabase.moveToNewLocation(artid, \"\"))\r\n    delete characterDatabase[id];\r\n    localStorage.removeItem(id);\r\n\r\n    this.updateCacheData();\r\n  }\r\n  static updateCacheData() {\r\n    this.updateIdList();\r\n  }\r\n  static updateIdList() {\r\n    characterIdList = Object.keys(characterDatabase)\r\n    this.saveIdListToStorage();\r\n  }\r\n  static getArtifactIDFromSlot = (charid, slotKey) => {\r\n    if (!charid || !slotKey) return null;\r\n    let char = this.getCharacter(charid)\r\n    if (char.equippedArtifacts)\r\n      return char.equippedArtifacts[slotKey]\r\n  }\r\n  static equipArtifact = (charid, art) => {\r\n    let char = this.getCharacter(charid)\r\n    if (!char || !art || !art.slotKey) return\r\n    if (!char.equippedArtifacts)\r\n      char.equippedArtifacts = {};\r\n    char.equippedArtifacts[art.slotKey] = art.id;\r\n    this.updateCharacter(char)\r\n  }\r\n  static unequipArtifactOnSlot = (charid, slotKey) => {\r\n    let char = this.getCharacter(charid)\r\n    if (!char || !slotKey) return\r\n    if (!char.equippedArtifacts || !char.equippedArtifacts[slotKey]) return;\r\n    char.equippedArtifacts[slotKey] = \"\";\r\n    this.updateCharacter(char)\r\n  }\r\n  static equipArtifactBuild = (characterid, artifactIds) => {\r\n    let character = this.getCharacter(characterid)\r\n    if (!character) return;\r\n    character.equippedArtifacts = {}\r\n    Object.entries(artifactIds).forEach(([key, artid]) =>\r\n      character.equippedArtifacts[key] = artid)\r\n    CharacterDatabase.updateCharacter(character);\r\n  }\r\n}\r\n","import React from 'react'\r\nimport { FormControl } from 'react-bootstrap'\r\n\r\nclass FloatFormControl extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      periodEnd: false,\r\n    }\r\n  }\r\n  validateInput = (e) => {\r\n    let value = e.target.value;\r\n    let periodEnd = value[value.length - 1] === \".\";\r\n    value = parseFloat(value)\r\n    if (!isNaN(value)) this.setState({ periodEnd: periodEnd })\r\n    value = value ? value : 0\r\n    this.props.onValueChange && this.props.onValueChange(value);\r\n  }\r\n  render = () => {\r\n    let props = { ...this.props }\r\n    props.value = this.props.value ? (this.props.value + (this.state.periodEnd ? \".\" : \"\")) : \"\";\r\n    delete props.onValueChange\r\n    return <FormControl {...props}\r\n      onChange={(e) => this.validateInput(e)}\r\n    />\r\n  }\r\n}\r\nclass IntFormControl extends React.Component {\r\n  validateInput = (e) => {\r\n    let value = e.target.value;\r\n    value = parseInt(value)\r\n    value = value ? value : 0\r\n    this.props.onValueChange && this.props.onValueChange(value);\r\n  }\r\n  render = () => {\r\n    let props = { ...this.props }\r\n    delete props.onValueChange\r\n    return <FormControl {...props}\r\n      onChange={(e) => this.validateInput(e)}\r\n    />\r\n  }\r\n}\r\nexport {\r\n  FloatFormControl,\r\n  IntFormControl\r\n}","import { faBahai, faFeatherAlt, faHourglass, faWineGlass, faCrown } from '@fortawesome/free-solid-svg-icons'\r\n\r\nconst SlotIcon = {\r\n  flower: faBahai,\r\n  plume: faFeatherAlt,\r\n  sands: faHourglass,\r\n  goblet: faWineGlass,\r\n  circlet: faCrown\r\n}\r\nexport default SlotIcon","import React from 'react';\r\nimport { Badge, OverlayTrigger, Tooltip } from 'react-bootstrap';\r\n\r\nexport default class PercentBadge extends React.Component {\r\n  getBadgeColor = (percent) => {\r\n    let badgeColor = \"secondary\";\r\n    if (percent > 70) {\r\n      badgeColor = \"success\";\r\n    } else if (percent > 40) {\r\n      badgeColor = \"warning\"\r\n    }\r\n    return badgeColor\r\n  }\r\n  render() {\r\n    const renderTooltip = (props) => (\r\n      <Tooltip {...props}>\r\n        {this.props.tooltip}\r\n      </Tooltip>\r\n    );\r\n    let badgeColor = !this.props.valid ? \"danger\" : this.getBadgeColor(this.props.percent);\r\n    if (this.props.tooltip)\r\n      return (\r\n        <OverlayTrigger placement=\"top\" overlay={renderTooltip}>\r\n          <Badge variant={badgeColor}>\r\n            {this.props.children}\r\n          </Badge>\r\n        </OverlayTrigger>)\r\n    else\r\n      return (\r\n        <Badge variant={badgeColor}>{this.props.children}</Badge>)\r\n  }\r\n}\r\n","import React from 'react';\r\nimport Card from 'react-bootstrap/Card'\r\nimport Col from 'react-bootstrap/Col'\r\nimport Row from 'react-bootstrap/Row'\r\nimport Artifact from './Artifact'\r\nimport Button from 'react-bootstrap/Button'\r\nimport PercentBadge from './PercentBadge';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faTrashAlt, faEdit, faLock, faLockOpen } from '@fortawesome/free-solid-svg-icons'\r\nimport SlotIcon from '../Components/SlotIcon';\r\nimport ArtifactDatabase from './ArtifactDatabase';\r\nimport CharacterDatabase from '../Character/CharacterDatabase';\r\nimport { Dropdown, DropdownButton } from 'react-bootstrap';\r\nexport default class ArtifactCard extends React.Component {\r\n  equipOnChar(char) {\r\n    let art = this.props.artifactData;\r\n    let slotKey = art.slotKey\r\n    let currentLocation = art.location;\r\n    let intendedLocation = char ? char.id : \"\"\r\n    let artifactToSwapWithid = CharacterDatabase.getArtifactIDFromSlot(intendedLocation, slotKey)\r\n    let artifactToSwapWith = ArtifactDatabase.getArtifact(artifactToSwapWithid)\r\n\r\n    //update artifact\r\n    if (artifactToSwapWith) ArtifactDatabase.swapLocations(art, artifactToSwapWith)\r\n    else ArtifactDatabase.moveToNewLocation(art.id, intendedLocation)\r\n\r\n    //update Character\r\n    if (intendedLocation)\r\n      CharacterDatabase.equipArtifact(intendedLocation, art)\r\n\r\n    if (currentLocation) {\r\n      if (artifactToSwapWith)\r\n        CharacterDatabase.equipArtifact(currentLocation, artifactToSwapWith)\r\n      else\r\n        CharacterDatabase.unequipArtifactOnSlot(currentLocation, slotKey)\r\n    }\r\n    this.props.forceUpdate && this.props.forceUpdate()\r\n  }\r\n  render() {\r\n    if (!this.props.artifactData) return null;\r\n    let art = this.props.artifactData;\r\n    let artifactValidation = Artifact.artifactValidation(art)\r\n    let locationChar = CharacterDatabase.getCharacter(art.location)\r\n    let location = locationChar ? locationChar.name : \"Inventory\"\r\n    return (<Card className=\"h-100\" border={`${art.numStars}star`} bg=\"darkcontent\" text=\"lightfont\">\r\n      <Card.Header className=\"pr-3\">\r\n        <Row className=\"no-gutters\">\r\n          <Col >\r\n            <h6><b>{`${Artifact.getArtifactPieceName(art)}`}</b></h6>\r\n            <div>{art.slotKey && <FontAwesomeIcon icon={SlotIcon[art.slotKey]} className=\"fa-fw\" />}{` ${Artifact.getArtifactSlotName(art.slotKey)} +${art.level}`}</div>\r\n          </Col>\r\n          <Col xs={\"auto\"}>\r\n            <span className=\"float-right align-top ml-1\">\r\n              {this.props.onEdit && <Button variant=\"primary\" size=\"sm\" className=\"mr-1\"\r\n                onClick={() => this.props.onEdit()}>\r\n                <FontAwesomeIcon icon={faEdit} className=\"fa-fw\" />\r\n              </Button>}\r\n              {this.props.onDelete && <Button variant=\"danger\" size=\"sm\"\r\n                onClick={() => this.props.onDelete()}>\r\n                <FontAwesomeIcon icon={faTrashAlt} className=\"fa-fw\" />\r\n              </Button>}\r\n            </span>\r\n          </Col>\r\n        </Row>\r\n      </Card.Header>\r\n      <Card.Body className=\"d-flex flex-column\">\r\n        <Card.Title>\r\n          <h6>{art.mainStatKey ? `${Artifact.getStatName(art.mainStatKey).split(\"%\")[0]} ${Artifact.getMainStatValue(art.mainStatKey, art.numStars, art.level)}${Artifact.getStatUnit(art.mainStatKey)}` : null}</h6>\r\n        </Card.Title>\r\n        <Card.Subtitle>\r\n          <div>{Artifact.getArtifactSetName(art.setKey, \"Artifact Set\")}</div>\r\n          <div>{\"🟊\".repeat(art.numStars ? art.numStars : 0)}</div>\r\n\r\n        </Card.Subtitle>\r\n        <ul className=\"mb-0\">\r\n          {art.substats ? art.substats.map((stat, i) =>\r\n            (stat && stat.value) ? (<li key={i}>{`${Artifact.getStatName(stat.key).split(\"%\")[0]}+${Artifact.getStatUnit(stat.key) ? stat.value.toFixed(1) : stat.value}${Artifact.getStatUnit(stat.key)}`}</li>) : null\r\n          ) : null}\r\n        </ul>\r\n        <div className=\"mt-auto mb-n2\">\r\n          <span className=\"mb-0 mr-1\">Substat Eff.:</span>\r\n          <PercentBadge tooltip={artifactValidation.msg} valid={artifactValidation.valid} percent={artifactValidation.currentEfficiency}>\r\n            {(artifactValidation.currentEfficiency ? artifactValidation.currentEfficiency : 0).toFixed(2) + \"%\"}\r\n          </PercentBadge>\r\n          <span>{\"<\"}</span>\r\n          <PercentBadge tooltip={artifactValidation.msg} valid={artifactValidation.valid} percent={artifactValidation.maximumEfficiency}>\r\n            {(artifactValidation.maximumEfficiency ? artifactValidation.maximumEfficiency : 0).toFixed(2) + \"%\"}\r\n          </PercentBadge>\r\n        </div>\r\n      </Card.Body>\r\n      <Card.Footer className=\"pr-3\">\r\n        <Row>\r\n          <Col>\r\n            <DropdownButton title={location}>\r\n              <Dropdown.Item onClick={() => this.equipOnChar()}>\r\n                Inventory\r\n              </Dropdown.Item>\r\n              {Object.entries(CharacterDatabase.getCharacterDatabase()).map(([id, char]) =>\r\n                <Dropdown.Item key={id} onClick={() => this.equipOnChar(char)}>\r\n                  {char.name}\r\n                </Dropdown.Item>\r\n              )}\r\n            </DropdownButton>\r\n          </Col>\r\n          <Col xs=\"auto\">\r\n            <Button size=\"sm\"\r\n              disabled={art.location}\r\n              onClick={() => {\r\n                art.lock = !art.lock\r\n                ArtifactDatabase.updateArtifact(art);\r\n                this.forceUpdate();\r\n              }}>\r\n              <FontAwesomeIcon icon={(art.lock || art.location) ? faLock : faLockOpen} className=\"fa-fw\" />\r\n            </Button>\r\n          </Col>\r\n        </Row>\r\n      </Card.Footer>\r\n    </Card>)\r\n  }\r\n}","export default __webpack_public_path__ + \"static/media/scan_art_main.9e3b5389.png\";","export default __webpack_public_path__ + \"static/media/snippet.d223e797.png\";","import { faTimes } from '@fortawesome/free-solid-svg-icons';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { Button, Card, Col, Container, Form, Modal, ProgressBar, Row } from 'react-bootstrap';\r\nimport { createWorker } from 'tesseract.js';\r\nimport scan_art_main from \"../imgs/scan_art_main.png\";\r\nimport Snippet from \"../imgs/snippet.png\";\r\nimport { ArtifactSetsData, ArtifactSlotsData, ArtifactStatsData } from './ArtifactData';\r\n\r\nfunction UploadDisplay(props) {\r\n  const [ocr, setOcr] = useState();\r\n  const [fileName, setFileName] = useState(\"Click here to Upload Artifact Screenshot File\");\r\n  const [image, setImage] = useState('');\r\n  const [progress, setProgress] = useState(0);\r\n  const [progVariant, setProgVariant] = useState(\"\")\r\n  const [modalShow, setModalShow] = useState(false)\r\n\r\n  const reset = () => {\r\n    setOcr(\"\")\r\n    setFileName(\"Click here to Upload Artifact Screenshot File\")\r\n    setImage(\"\")\r\n    setProgress(0)\r\n    setProgVariant(\"\")\r\n    setModalShow(false)\r\n  }\r\n  const parseValues = (parsed) => {\r\n    let matches = []\r\n    //parse substats\r\n    Object.entries(ArtifactStatsData).forEach(([key, entry]) => {\r\n      let regex = null\r\n      if (entry.unit === \"%\") regex = new RegExp(entry.name + \"\\\\s*\\\\+\\\\s*(\\\\d*\\\\.\\\\d)%\", \"im\");\r\n      else regex = new RegExp(entry.name + \"\\\\s*\\\\+\\\\s*(\\\\d*)(?!.)\", \"im\");//use negative lookahead to avoid the period\r\n      let match = regex.exec(parsed)\r\n      match && matches.push({ index: match.index, val: match[1], unit: entry.unit, key })\r\n    })\r\n    matches.sort((a, b) => a.index - b.index)\r\n    matches.forEach((match, i) => {\r\n      if (i >= 4) return;//this shouldn't happen, just in case\r\n      let value = match.unit === \"%\" ? parseFloat(match.val) : parseInt(match.val)\r\n      props.setSubStat && props.setSubStat(i, match.key, value)\r\n    })\r\n    //parse for sets\r\n    for (const [key, setObj] of Object.entries(ArtifactSetsData))\r\n      if (parsed.includes(setObj.name) && props.setSetKey) {\r\n        props.setSetKey(key);\r\n        break;\r\n      }\r\n\r\n    //parse for slot\r\n    for (const [key, slotObj] of Object.entries(ArtifactSlotsData))\r\n      if (parsed.includes(slotObj.name) && props.setSlotKey) {\r\n        props.setSlotKey(key);\r\n        break;\r\n      }\r\n  }\r\n  const worker = createWorker({\r\n    logger: m => {\r\n      m.status === \"loading tesseract core\" && setProgVariant(\"danger\");\r\n      m.status.includes(\"loading language traineddata\") && setProgVariant(\"warning\");\r\n      m.status.includes(\"initializing api\") && setProgVariant(\"info\");\r\n      m.status === \"recognizing text\" && setProgVariant(\"success\");\r\n      setProgress(m.progress);\r\n    },\r\n  });\r\n  const doOCR = async (image) => {\r\n    await worker.load();\r\n    await worker.loadLanguage('eng');\r\n    await worker.initialize('eng');\r\n    const { data: { text } } = await worker.recognize(image);\r\n    setOcr(text);\r\n    parseValues(text);\r\n  };\r\n\r\n  let uploadedFile = (file) => {\r\n    if (!file) return\r\n    let reader = new FileReader();\r\n    reader.onloadend = () =>\r\n      setImage(reader.result)\r\n    reader.readAsDataURL(file)\r\n    doOCR(file)\r\n    setFileName(file.name)\r\n  }\r\n  let explainationModal =\r\n    (<Modal show={modalShow} onHide={() => setModalShow(false)} size=\"xl\" variant=\"success\" dialogAs={Container} className=\"pt-3 pb-3\">\r\n      <Card bg=\"darkcontent\" text=\"lightfont\" >\r\n        <Card.Header>\r\n          <Card.Title>\r\n            <Row>\r\n              <Col><span>How do Upload Screenshots for parsing</span></Col>\r\n              <Col xs=\"auto\">\r\n                <Button variant=\"danger\" onClick={() => setModalShow(false)} >\r\n                  <FontAwesomeIcon icon={faTimes} /></Button>\r\n              </Col>\r\n            </Row>\r\n          </Card.Title>\r\n        </Card.Header>\r\n        <Card.Body>\r\n          <Row>\r\n            <Col xs={8} md={4}>\r\n              <img alt=\"snippet of the screen to take\" src={Snippet} className=\"w-100 h-auto\" />\r\n            </Col>\r\n            <Col xs={12} md={8}>\r\n\r\n              <p>Using screenshots can dramatically decrease the amount of time you manually input in stats on the Genshin Optimizer.</p>\r\n              <h5>What to include in the screenshot.</h5>\r\n              <p>\r\n                In Genshin Impact, Open your bag, and navigate to the artifacts tab. Select the artifact you want to scan with Genshin Optimizer.\r\n                To Take a screenshot, in Windows, the shortcut is <strong>Shift + WindowsKey + S</strong>.\r\n                Once you selected the region, the image is automatically included in your clipboard.\r\n              </p></Col>\r\n          </Row>\r\n\r\n          <Row>\r\n            <Col>\r\n              <h5>Adding Screenshot to Genshin Optimizer</h5>\r\n              <p>\r\n                At this point, you should have the artifact snippet either saved to your harddrive, or in your clipboard.\r\n                You can click on the box next to \"Browse\" to browse the file in your harddrive, or even easier, just press <strong>Ctrl + V</strong> to paste from your clipboard.\r\n                You should be able to see a Preview of your artifact snippet, and after waiting a few seconds, the artifact set and the substats will be filled in in the <b>Artifact Editor</b>.\r\n              </p>\r\n            </Col>\r\n            <Col xs={12}>\r\n              <h5>Finishing the Artifact</h5>\r\n              <p>\r\n                Unfortunately, there isn't a reliable way to parse the <i>number of stars</i>, <i>the main stat</i>, and the <i>level</i> of the artifact right now. So you will have to manually put them in.\r\n                Once the artifact has been filled, Click on <strong>Add Artifact</strong> to finish editing the artifact.\r\n              </p>\r\n              <img alt=\"main screen after importing stats\" src={scan_art_main} className=\"w-75 h-auto\" />\r\n            </Col>\r\n          </Row>\r\n        </Card.Body>\r\n        <Card.Footer>\r\n          <Button variant=\"danger\" onClick={() => setModalShow(false)}>\r\n            <span>Close</span>\r\n          </Button>\r\n        </Card.Footer>\r\n      </Card>\r\n    </Modal>)\r\n  useEffect(() => {\r\n    let pasteFunc = e =>\r\n      uploadedFile(e.clipboardData.files[0])\r\n    window.addEventListener('paste', pasteFunc);\r\n    props.reset(reset);\r\n    return () =>\r\n      window.removeEventListener('paste', pasteFunc)\r\n  })\r\n  let img = image ? <img src={image} className=\"w-100 h-auto\" alt=\"Screenshot to parse for artifact values\" /> : <span>Please Select an Image</span>\r\n  let progPercent = (progress * 100).toFixed(2)\r\n  return (<Row>\r\n    {explainationModal}\r\n    <Col>\r\n      <Row className=\"mb-1\">\r\n        <Col>\r\n          <Row className=\"mb-1\">\r\n            <Col>\r\n              <h5>Parse Substats by Uploading Image</h5>\r\n            </Col>\r\n            <Col xs=\"auto\"><Button variant=\"info\" onClick={() => setModalShow(true)}>Show me How!</Button></Col>\r\n          </Row>\r\n          {progVariant ? <ProgressBar variant={progVariant} now={progPercent} label={`${progPercent}%`} /> : null}\r\n        </Col>\r\n      </Row>\r\n      <Row className=\"mb-1\">\r\n        <Col xs={8} lg={4}>\r\n          {img}\r\n        </Col>\r\n        {ocr && <Col xs={12} lg={8}>\r\n          <p>Parsed Text:</p>\r\n          <p>{ocr}</p>\r\n        </Col>}\r\n      </Row>\r\n      <Row className=\"mb-4\">\r\n        <Col>\r\n          <Form.Group as={Col}>\r\n            <Form.File\r\n              type=\"file\"\r\n              className=\"custom-file-label\"\r\n              id=\"inputGroupFile01\"\r\n              label={fileName}\r\n              onChange={(e) => {\r\n                let file = e.target.files[0]\r\n                uploadedFile(file)\r\n              }}\r\n              custom\r\n            />\r\n          </Form.Group>\r\n        </Col>\r\n      </Row>\r\n    </Col>\r\n  </Row>)\r\n}\r\nexport default UploadDisplay;","import { faQuestionCircle } from '@fortawesome/free-solid-svg-icons';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport React from 'react';\r\nimport { Alert, Button, Card, Col, Dropdown, DropdownButton, FormControl, InputGroup, OverlayTrigger, Popover, Row } from 'react-bootstrap';\r\nimport { FloatFormControl, IntFormControl } from '../Components/CustomFormControl';\r\nimport SlotIcon from '../Components/SlotIcon';\r\nimport { deepClone, getArrLastElement, getRandomElementFromArray, getRandomIntInclusive } from '../Util';\r\nimport Artifact from './Artifact';\r\nimport { ArtifactSetsData, ArtifactSlotsData, ArtifactStarsData, ArtifactStatsData, ArtifactSubStatsData } from './ArtifactData';\r\nimport PercentBadge from './PercentBadge';\r\nimport UploadDisplay from './UploadDisplay';\r\n\r\nexport default class ArtifactEditor extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = ArtifactEditor.getInitialState()\r\n  }\r\n  static initialState = {\r\n    setKey: \"\",\r\n    numStars: 0,\r\n    level: 0,\r\n    slotKey: \"\",//one of flower, plume, sands, globlet, circlet\r\n    mainStatKey: \"\",\r\n    substats: [{ key: \"\", value: 0 }, { key: \"\", value: 0 }, { key: \"\", value: 0 }, { key: \"\", value: 0 }],//{key:\"\",value:_}\r\n  }\r\n  static getInitialState = () => JSON.parse(JSON.stringify(ArtifactEditor.initialState))\r\n  setLevel = (newlevel) => this.setState(state => {\r\n    newlevel = parseInt(newlevel)\r\n    if (isNaN(newlevel)) newlevel = 0\r\n    if (newlevel < 0) newlevel = 0;\r\n    if (newlevel > state.numStars * 4) newlevel = state.numStars * 4;\r\n    return { level: newlevel }\r\n  })\r\n\r\n  getRemainingSubstats = () =>\r\n    Object.keys(ArtifactSubStatsData).filter((key) => {\r\n      //if mainstat has key, not valid\r\n      if (this.state.mainStatKey === key) return false;\r\n      //if any one of the substat has, not valid.\r\n      return !this.state.substats.some((substat, i) =>\r\n        (substat && substat.key ? (substat.key === key) : false))\r\n    });\r\n  saveArtifact = () => {\r\n    this.uploadDisplayReset()\r\n    let saveArtifact = deepClone(this.state)\r\n    if (saveArtifact.artifactToEdit)\r\n      delete saveArtifact.artifactToEdit;\r\n    this.props.addArtifact && this.props.addArtifact(saveArtifact)\r\n    this.setState(ArtifactEditor.getInitialState());\r\n  }\r\n  setSetKey = (setKey) => this.setState(state => {\r\n    let numStars = getArrLastElement(Artifact.getRarityArr(setKey))\r\n    let level = (!state.level || state.level > numStars * 4) ? numStars * 4 : state.level\r\n    return { setKey, numStars, level }\r\n  })\r\n  setSubStat = (index, key = \"\", value = 0) =>\r\n    index < 4 && this.setState(state => {\r\n      let substats = deepClone(state.substats)\r\n      substats[index].key = key\r\n      substats[index].value = value\r\n      return { substats }\r\n    })\r\n\r\n  setMainStatKey = (mainStatKey) => this.setState(state => {\r\n    state.substats.forEach((substat, index) =>\r\n      substat.key && substat.key === mainStatKey && this.setSubStat(index))\r\n    return { mainStatKey }\r\n  })\r\n\r\n  setSlotKey = (slotKey) => this.setState(state => {\r\n    //find a mainstat that isnt taken,\r\n    let mainstats = ArtifactSlotsData[slotKey].stats;\r\n    for (const mainStatKey of mainstats)\r\n      if (!state.substats.some(substat => (substat && substat.key ? (substat.key === mainStatKey) : false)))\r\n        return { slotKey, mainStatKey }\r\n    //if not, then remove one of the substat.\r\n    let mainStatKey = mainstats[0]\r\n    this.setMainStatKey(mainStatKey)\r\n    return { slotKey }\r\n  })\r\n\r\n  ArtifactDropDown = (props) => {\r\n    let dropdownitemsForStar = (star) =>\r\n      Artifact.getArtifactSetsByMaxStarEntries(star).map(([key, setobj]) =>\r\n        (<Dropdown.Item key={key}\r\n          onClick={() => this.setSetKey(key)}\r\n        >\r\n          {setobj.name}\r\n        </Dropdown.Item >))\r\n\r\n    return (<DropdownButton as={InputGroup.Prepend} title={Artifact.getArtifactSetName(this.state.setKey, \"Artifact Set\")}>\r\n      <Dropdown.ItemText>Max Rarity 🟊🟊🟊🟊🟊</Dropdown.ItemText>\r\n      {dropdownitemsForStar(5)}\r\n      <Dropdown.Divider />\r\n      <Dropdown.ItemText>Max Rarity 🟊🟊🟊🟊</Dropdown.ItemText>\r\n      {dropdownitemsForStar(4)}\r\n      <Dropdown.Divider />\r\n      <Dropdown.ItemText>Max Rarity 🟊🟊🟊</Dropdown.ItemText>\r\n      {dropdownitemsForStar(3)}\r\n    </DropdownButton>)\r\n  }\r\n  MainSelection = (props) =>\r\n    <InputGroup>\r\n      {/* Don't know why I can't do <this.ArtifactDropDown />, it has error in production: Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. */}\r\n      {this.ArtifactDropDown()}\r\n      <DropdownButton as={InputGroup.Prepend} title={this.state.numStars > 0 ? \"🟊\".repeat(this.state.numStars) : \"Rarity\"} disabled={!this.state.setKey}>\r\n        {Object.keys(ArtifactStarsData).map((star, index) => {\r\n          star = parseInt(star);\r\n          return <Dropdown.Item key={index} disabled={!this.state.setKey || !ArtifactSetsData[this.state.setKey].rarity.includes(star)} onClick={() => {\r\n            this.setState({ numStars: star, level: 0 });\r\n          }}>\r\n            {\"🟊\".repeat(star)}\r\n          </Dropdown.Item>\r\n        })}\r\n      </DropdownButton>\r\n      <InputGroup.Prepend>\r\n        <InputGroup.Text>Level</InputGroup.Text>\r\n      </InputGroup.Prepend>\r\n      <FormControl\r\n        value={this.state.level}\r\n        disabled={!this.state.setKey}\r\n        placeholder={`0~${this.state.numStars * 4}`}\r\n        onChange={(e => this.setLevel(e.target.value))}\r\n      />\r\n      <InputGroup.Append>\r\n        <Button onClick={() => this.setLevel(0)} disabled={!this.state.setKey || this.state.level === 0}>0</Button>\r\n        <Button onClick={() => this.setLevel(this.state.level - 1)} disabled={!this.state.setKey || this.state.level === 0}>-</Button>\r\n        <Button onClick={() => this.setLevel(this.state.level + 1)} disabled={!this.state.setKey || this.state.level === (this.state.numStars * 4)}>+</Button>\r\n        <Button onClick={() => this.setLevel(this.state.numStars * 4)} disabled={!this.state.setKey || this.state.level === (this.state.numStars * 4)}>{this.state.numStars * 4}</Button>\r\n      </InputGroup.Append>\r\n    </InputGroup>\r\n\r\n  MainStatInputRow = () =>\r\n    <InputGroup>\r\n      <DropdownButton\r\n        title={(<span>\r\n          {this.state.slotKey && <FontAwesomeIcon icon={SlotIcon[this.state.slotKey]} className=\"fa-fw mr-1\" />}\r\n          {Artifact.getArtifactSlotName(this.state.slotKey, \"Slot\")}\r\n        </span>)}\r\n        disabled={!this.state.setKey}\r\n        as={InputGroup.Prepend}\r\n      >\r\n        {this.state.setKey && Object.keys(ArtifactSetsData[this.state.setKey].pieces).map(slotKey =>\r\n          <Dropdown.Item key={slotKey} onClick={() => this.setSlotKey(slotKey)} >\r\n            {SlotIcon[slotKey] && <FontAwesomeIcon icon={SlotIcon[slotKey]} className=\"fa-fw mr-1\" />}\r\n            {ArtifactSlotsData[slotKey].name}\r\n          </Dropdown.Item>)}\r\n      </DropdownButton>\r\n      <FormControl\r\n        value={Artifact.getArtifactPieceName(this.state)}\r\n        disabled\r\n        readOnly\r\n      />\r\n      <DropdownButton\r\n        title={Artifact.getStatNameWithPercent(this.state.mainStatKey, \"Main Stat\")}\r\n        disabled={!this.state.setKey || !this.state.slotKey}\r\n        as={InputGroup.Prepend}\r\n      >\r\n        <Dropdown.ItemText>Select a Main Artifact Stat </Dropdown.ItemText>\r\n        {this.state.slotKey ? ArtifactSlotsData[this.state.slotKey].stats.map((mainStatKey) =>\r\n          <Dropdown.Item key={mainStatKey} onClick={() => this.setMainStatKey(mainStatKey)} >\r\n            {Artifact.getStatNameWithPercent(mainStatKey)}\r\n          </Dropdown.Item>) : <Dropdown.Item />}\r\n      </DropdownButton>\r\n      <FormControl\r\n        value={this.state.mainStatKey ? `${Artifact.getMainStatValue(this.state.mainStatKey, this.state.numStars, this.state.level)}${Artifact.getStatUnit(this.state.mainStatKey)}` : \"Main Stat\"}\r\n        disabled\r\n        readOnly\r\n      />\r\n    </InputGroup>\r\n  SubStatInput = (props) => {\r\n    let percentStat = props.subStatKey && Artifact.getStatUnit(props.subStatKey) === \"%\";\r\n    let substatprops = {\r\n      placeholder: \"Select a Substat.\",\r\n      value: props.substatevalue ? props.substatevalue : \"\",\r\n      onValueChange: (val) => this.onSubstatValueChange(val, props.index),\r\n      disabled: !props.subStatKey\r\n    }\r\n    let subStatFormControl = percentStat ?\r\n      <FloatFormControl {...substatprops} />\r\n      : <IntFormControl {...substatprops} />\r\n    return <InputGroup>\r\n      <DropdownButton\r\n        title={props.subStatKey ? ArtifactStatsData[props.subStatKey].name : `Substat ${props.index + 1}`}\r\n        disabled={!props.remainingSubstats || props.remainingSubstats.length === 0}\r\n        as={InputGroup.Prepend}\r\n      >\r\n        {props.remainingSubstats ? props.remainingSubstats.map((key) =>\r\n          <Dropdown.Item key={key} onClick={() => this.onSubStatSelected(key, props.index)} >\r\n            {Artifact.getStatNameWithPercent(key)}\r\n          </Dropdown.Item>\r\n        ) : <Dropdown.Item />}\r\n      </DropdownButton>\r\n      {subStatFormControl}\r\n      <InputGroup.Append>\r\n        {percentStat && <InputGroup.Text>%</InputGroup.Text>}\r\n        <InputGroup.Text>\r\n          <PercentBadge\r\n            tooltip={props.subStatValidation.msg}\r\n            valid={props.subStatValidation.valid || !props.subStatKey}\r\n            percent={props.subStatValidation.efficiency}>\r\n            {props.subStatKey ? (props.subStatValidation.valid ? `${(props.subStatValidation.efficiency ? props.subStatValidation.efficiency : 0).toFixed(2)}%` : \"ERR\") : \"No Stat\"}\r\n          </PercentBadge>\r\n        </InputGroup.Text>\r\n      </InputGroup.Append>\r\n    </InputGroup>\r\n  }\r\n  onSubStatSelected = (key, index) => {\r\n    this.setState((state) => {\r\n      let substats = JSON.parse(JSON.stringify(state.substats));\r\n      substats[index] = { key: key, value: null }\r\n      return { substats }\r\n    });\r\n  }\r\n  onSubstatValueChange = (newStatValue, index) => {\r\n    this.setState((state) => {\r\n      let substats = JSON.parse(JSON.stringify(state.substats));\r\n      substats[index].value = newStatValue\r\n      return { substats }\r\n    });\r\n  }\r\n  randomizeArtifact = () => {\r\n    let state = ArtifactEditor.getInitialState();\r\n    //randomly choose artifact set\r\n    state.setKey = getRandomElementFromArray(Object.keys(ArtifactSetsData));\r\n    //choose star\r\n    state.numStars = getRandomElementFromArray(ArtifactSetsData[state.setKey].rarity);\r\n    //choose piece\r\n    state.slotKey = getRandomElementFromArray(Object.keys(ArtifactSetsData[state.setKey].pieces));\r\n    //choose mainstat\r\n    state.mainStatKey = getRandomElementFromArray(ArtifactSlotsData[state.slotKey].stats);\r\n\r\n    //choose initial substats from star\r\n    let numOfInitialSubStats = getRandomIntInclusive(ArtifactStarsData[state.numStars].subsBaselow, ArtifactStarsData[state.numStars].subBaseHigh);\r\n\r\n    //choose level\r\n    state.level = getRandomIntInclusive(0, state.numStars * 4)\r\n    let numUpgradesOrUnlocks = Math.floor(state.level / 4);\r\n    let totRolls = numOfInitialSubStats + numUpgradesOrUnlocks\r\n    if (totRolls >= 4) {\r\n      numOfInitialSubStats = 4;\r\n      numUpgradesOrUnlocks = totRolls - 4;\r\n    } else {\r\n      numOfInitialSubStats = totRolls;\r\n      numUpgradesOrUnlocks = 0;\r\n    }\r\n    let RollStat = (subStatKey) =>\r\n      getRandomElementFromArray(Artifact.getSubstatRollData(subStatKey, state.numStars))\r\n\r\n    //set initial substat & value\r\n    for (let i = 0; i < numOfInitialSubStats; i++) {\r\n      let substat = state.substats[i]\r\n      substat.key = getRandomElementFromArray(this.getRemainingSubstats())\r\n      substat.value = RollStat(substat.key)\r\n    }\r\n\r\n    //numUpgradesOrUnlocks should only have upgrades right now. that means all 4 substats have value.\r\n    for (let i = 0; i < numUpgradesOrUnlocks; i++) {\r\n      let substat = getRandomElementFromArray(state.substats)\r\n      substat.value += RollStat(substat.key)\r\n    }\r\n    this.setState(state)\r\n  }\r\n  componentDidUpdate = () => {\r\n    if (this.props.artifactToEdit && this.state.id !== this.props.artifactToEdit.id)\r\n      this.setState(this.props.artifactToEdit)\r\n  }\r\n  render() {\r\n    let remainingSubstats = this.getRemainingSubstats();\r\n    let substatValidations = this.state.substats.map(substat => Artifact.validateSubStat(this.state, substat));\r\n    let artifactValidation = Artifact.artifactValidation(this.state, substatValidations)\r\n    return (\r\n      <Card bg=\"darkcontent\" text=\"lightfont\">\r\n        <Card.Header>\r\n          Artifact Editor\r\n        </Card.Header>\r\n        <Card.Body>\r\n          <Row className=\"mb-2\">\r\n            {/* set, rarity, level selection */}\r\n            <Col xs={12} className=\"mb-2\"><this.MainSelection /></Col>\r\n            {/* slot, main stat selection */}\r\n            <Col xs={12}><this.MainStatInputRow /></Col>\r\n          </Row>\r\n          {/* artifact efficiency display */}\r\n          <Row>\r\n            <Col>\r\n              <h5 className=\"mr-auto\">Substats</h5>\r\n              <span>\r\n                <span className=\"mr-3\">\r\n                  <span>Current Substat Efficiency </span>\r\n                  <PercentBadge tooltip={artifactValidation.msg} valid={artifactValidation.valid} percent={artifactValidation.currentEfficiency}>\r\n                    {(artifactValidation.currentEfficiency ? artifactValidation.currentEfficiency : 0).toFixed(2) + \"%\"}\r\n                  </PercentBadge>\r\n                </span>\r\n\r\n                <span >\r\n                  <span >Maximum Substat Efficiency </span>\r\n                  <PercentBadge tooltip={artifactValidation.msg} valid={artifactValidation.valid} percent={artifactValidation.maximumEfficiency}>\r\n                    {(artifactValidation.maximumEfficiency ? artifactValidation.maximumEfficiency : 0).toFixed(2) + \"%\"}\r\n                  </PercentBadge>\r\n                </span>\r\n                <OverlayTrigger\r\n                  placement=\"left\"\r\n                  overlay={\r\n                    <Popover >\r\n                      <Popover.Title as=\"h5\">Substat Efficiency</Popover.Title>\r\n                      <Popover.Content>\r\n                        <span>Every time 4 artifact upgrades, you get a substat roll. The <strong>substat efficiency</strong> calculates as a percentage how high the substat rolled. The <strong>Maximum Substat Efficiency</strong> of an artifact calculates the efficiency if the remaining upgrades rolled maximum.</span>\r\n                      </Popover.Content>\r\n                    </Popover>\r\n                  }\r\n                >\r\n                  <FontAwesomeIcon icon={faQuestionCircle} className=\"ml-2\" style={{ cursor: \"help\" }} />\r\n                </OverlayTrigger>\r\n              </span>\r\n            </Col>\r\n          </Row>\r\n          {/* substat selections */}\r\n          <Row className=\"mb-2\">\r\n            {this.state.substats.map((substat, index) =>\r\n              <Col key={\"substat\" + index} className=\"mt-1 mb-1\" xs={12} lg={6}>\r\n                <this.SubStatInput\r\n                  numStars={this.state.numStars}\r\n                  remainingSubstats={remainingSubstats}\r\n                  subStatKey={substat ? substat.key : null}\r\n                  substatevalue={substat ? substat.value : null}\r\n                  index={index}\r\n                  subStatValidation={substatValidations[index]}\r\n                />\r\n              </Col>\r\n            )}\r\n          </Row >\r\n          <Row className=\"mb-2\">\r\n            <Col>\r\n              {/* error alert */}\r\n              {artifactValidation.msg ? <Alert variant=\"danger\">{artifactValidation.msg}</Alert> : null}\r\n            </Col>\r\n          </Row>\r\n          <Row>\r\n            {/* Image OCR */}\r\n            <Col xs={12} className=\"mb-2\">\r\n              <UploadDisplay setSetKey={this.setSetKey} setSubStat={this.setSubStat} setSlotKey={this.setSlotKey} reset={reset => this.uploadDisplayReset = reset} />\r\n            </Col>\r\n          </Row>\r\n        </Card.Body>\r\n        <Card.Footer>\r\n          <Button className=\"mr-3\" onClick={this.saveArtifact} disabled={Artifact.isInvalidArtifact(this.state)}>\r\n            {this.props.artifactToEdit ? \"Save Artifact\" : \"Add Artifact\"}\r\n          </Button>\r\n          <Button className=\"mr-3\" variant=\"success\"\r\n            onClick={() => {\r\n              this.props.cancelEdit && this.props.cancelEdit();\r\n              this.setState(ArtifactEditor.getInitialState());\r\n            }}\r\n          >\r\n            Clear\r\n          </Button>\r\n          <Button variant=\"warning\"\r\n            onClick={this.randomizeArtifact}\r\n          >\r\n            Randomize\r\n          </Button>\r\n        </Card.Footer>\r\n      </Card>)\r\n  }\r\n}","import { faCheckSquare, faSquare } from '@fortawesome/free-solid-svg-icons';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport React from 'react';\r\nimport { Card, Dropdown, InputGroup, ToggleButton, ToggleButtonGroup } from 'react-bootstrap';\r\nimport Col from 'react-bootstrap/Col';\r\nimport Container from 'react-bootstrap/Container';\r\nimport Row from 'react-bootstrap/Row';\r\nimport CharacterDatabase from '../Character/CharacterDatabase';\r\nimport { IntFormControl } from '../Components/CustomFormControl';\r\nimport SlotIcon from '../Components/SlotIcon';\r\nimport { deepClone } from '../Util';\r\nimport Artifact from './Artifact';\r\nimport ArtifactCard from './ArtifactCard';\r\nimport { ArtifactSlotsData, ArtifactStarsData, ArtifactStatsData, ArtifactSubStatsData, ElementalData } from './ArtifactData';\r\nimport ArtifactDatabase from './ArtifactDatabase';\r\nimport ArtifactEditor from './ArtifactEditor';\r\n\r\nexport default class ArtifactDisplay extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    ArtifactDatabase.populateDatebaseFromLocalStorage();\r\n    CharacterDatabase.populateDatebaseFromLocalStorage();\r\n    this.state = {\r\n      artIdList: [...ArtifactDatabase.getArtifactIdList()],\r\n      artToEdit: null,\r\n    }\r\n    this.state = { ...this.state, ...ArtifactDisplay.initialFilter }\r\n  }\r\n  static initialFilter = {\r\n    filterArtSetKey: \"\",\r\n    filterStars: [3, 4, 5],\r\n    filterLevelLow: 0,\r\n    filterLevelHigh: 20,\r\n    filterSlotKey: \"\",\r\n    filterMainStatKey: \"\",\r\n    filterSubstates: [\"\", \"\", \"\", \"\"]\r\n  }\r\n  forceUpdateArtifactDisplay = () => this.forceUpdate()\r\n\r\n  addArtifact = (art) => this.setState(state => {\r\n    if (state.artToEdit && state.artToEdit.id === art.id) {\r\n      ArtifactDatabase.updateArtifact(art);\r\n      return { artToEdit: null }\r\n    } else {\r\n      let id = ArtifactDatabase.addArtifact(art)\r\n      if (id === null) return;// some error happened...\r\n      //add the new artifact at the beginning\r\n      return { artIdList: [id, ...state.artIdList,] }\r\n    }\r\n  }, this.forceUpdate)\r\n\r\n  deleteArtifact = (id) => this.setState((state) => {\r\n    let art = ArtifactDatabase.getArtifact(id);\r\n    if (art && art.location)\r\n      CharacterDatabase.unequipArtifactOnSlot(art.location, art.slotKey);\r\n    ArtifactDatabase.removeArtifactById(id)\r\n    let artIdList = [...state.artIdList]\r\n    artIdList.splice(artIdList.indexOf(id), 1)\r\n    return { artIdList }\r\n  });\r\n\r\n  editArtifact = (id) =>\r\n    this.setState({ artToEdit: ArtifactDatabase.getArtifact(id) }, this.forceUpdate)\r\n\r\n  cancelEditArtifact = () =>\r\n    this.setState({ artToEdit: null }, this.forceUpdate)\r\n\r\n  render() {\r\n    let artifacts = this.state.artIdList.map(artid => ArtifactDatabase.getArtifact(artid)).filter((art) => {\r\n      if (this.state.filterArtSetKey && this.state.filterArtSetKey !== art.setKey) return false;\r\n      if (!this.state.filterStars.includes(art.numStars)) return false;\r\n      if (art.level < this.state.filterLevelLow || art.level > this.state.filterLevelHigh) return false;\r\n      if (this.state.filterSlotKey && this.state.filterSlotKey !== art.slotKey) return false\r\n      if (this.state.filterMainStatKey && this.state.filterMainStatKey !== art.mainStatKey) return false\r\n      for (const filterKey of this.state.filterSubstates)\r\n        if (filterKey && !art.substats.some(substat => substat.key === filterKey)) return false;\r\n      return true\r\n    })\r\n    let MainStatDropDownItem = (props) =>\r\n      (<Dropdown.Item key={props.statKey} onClick={() => this.setState({ filterMainStatKey: props.statKey })} >\r\n        {Artifact.getStatNameWithPercent(props.statKey)}\r\n      </Dropdown.Item>)\r\n    let dropdownitemsForStar = (star) =>\r\n      Artifact.getArtifactSetsByMaxStarEntries(star).map(([key, setobj]) =>\r\n        <Dropdown.Item key={key} onClick={() => this.setState({ filterArtSetKey: key })}>\r\n          {setobj.name}\r\n        </Dropdown.Item >)\r\n    return (<Container className=\"mt-3\">\r\n      <Row className=\"mb-2 no-gutters\"><Col>\r\n        <ArtifactEditor\r\n          artifactToEdit={this.state.artToEdit}\r\n          addArtifact={this.addArtifact}\r\n          cancelEdit={this.cancelEditArtifact}\r\n        />\r\n      </Col></Row>\r\n      <Row className=\"mb-2\"><Col>\r\n        <Card bg=\"darkcontent\" text=\"lightfont\">\r\n          <Card.Header>Artifact Filter</Card.Header>\r\n          <Card.Body>\r\n            <Row>\r\n              {/* Artifact set filter */}\r\n              <Col xs={12} lg={6} className=\"mb-2\">\r\n                <Dropdown as={InputGroup.Prepend} className=\"flex-grow-1\">\r\n                  <Dropdown.Toggle className=\"w-100\">\r\n                    {Artifact.getArtifactSetName(this.state.filterArtSetKey, \"Artifact Set\")}\r\n                  </Dropdown.Toggle>\r\n                  <Dropdown.Menu>\r\n                    <Dropdown.Item onClick={() => this.setState({ filterArtSetKey: \"\" })}>Unselect</Dropdown.Item>\r\n                    <Dropdown.Divider />\r\n                    <Dropdown.ItemText>Max Rarity 🟊🟊🟊🟊🟊</Dropdown.ItemText>\r\n                    {dropdownitemsForStar(5)}\r\n                    <Dropdown.Divider />\r\n                    <Dropdown.ItemText>Max Rarity 🟊🟊🟊🟊</Dropdown.ItemText>\r\n                    {dropdownitemsForStar(4)}\r\n                    <Dropdown.Divider />\r\n                    <Dropdown.ItemText>Max Rarity 🟊🟊🟊</Dropdown.ItemText>\r\n                    {dropdownitemsForStar(3)}\r\n                  </Dropdown.Menu>\r\n                </Dropdown>\r\n              </Col>\r\n              {/* Artifact stars filter */}\r\n              <Col xs={12} lg={6} className=\"mb-2\">\r\n                <ToggleButtonGroup className=\"w-100 d-flex\" type=\"checkbox\" as={InputGroup.Append} onChange={(e) => this.setState({ filterStars: e })} defaultValue={this.state.filterStars}>\r\n                  {Object.keys(ArtifactStarsData).map(star => {\r\n                    star = parseInt(star)\r\n                    let selected = this.state.filterStars.includes(star)\r\n                    return <ToggleButton key={star} value={star}><FontAwesomeIcon icon={selected ? faCheckSquare : faSquare} /> {\"🟊\".repeat(star)}</ToggleButton>\r\n                  })}\r\n                </ToggleButtonGroup>\r\n              </Col>\r\n              {/* Artiface level filter */}\r\n              <Col xs={12} lg={6} className=\"mb-2\">\r\n                <InputGroup>\r\n                  <InputGroup.Prepend>\r\n                    <InputGroup.Text>Level Low/High (Inclusive)</InputGroup.Text>\r\n                  </InputGroup.Prepend>\r\n                  <IntFormControl\r\n                    value={this.state.filterLevelLow}\r\n                    placeholder={`Lowest Level to Filter`}\r\n                    onValueChange={(val) => val >= 0 && val <= this.state.filterLevelHigh && this.setState({ filterLevelLow: val })}\r\n                  />\r\n                  <IntFormControl\r\n                    value={this.state.filterLevelHigh}\r\n                    placeholder={`Highest Level to Filter`}\r\n                    onValueChange={(val) => val >= 0 && val >= this.state.filterLevelLow && this.setState({ filterLevelHigh: val })}\r\n                  />\r\n                </InputGroup>\r\n              </Col>\r\n              {/* Artifact Slot & Main Stat filter */}\r\n              <Col xs={12} lg={6} className=\"mb-2\">\r\n                <Row>\r\n                  <Col>\r\n                    <Dropdown className=\"flex-grow-1\">\r\n                      <Dropdown.Toggle className=\"w-100\">\r\n                        {this.state.filterSlotKey ? (<span><FontAwesomeIcon icon={SlotIcon[this.state.filterSlotKey]} className=\"fa-fw mr-1\" />{ArtifactSlotsData[this.state.filterSlotKey].name}</span>) : \"Slot\"}\r\n                      </Dropdown.Toggle>\r\n                      <Dropdown.Menu>\r\n                        <Dropdown.Item onClick={() => this.setState({ filterSlotKey: \"\" })} >\r\n                          Unselect\r\n                        </Dropdown.Item>\r\n                        {Object.keys(ArtifactSlotsData).map(key =>\r\n                          <Dropdown.Item key={key} onClick={() => this.setState({ filterSlotKey: key })} >\r\n                            {SlotIcon[key] && <FontAwesomeIcon icon={SlotIcon[key]} className=\"fa-fw mr-1\" />}\r\n                            {ArtifactSlotsData[key].name}\r\n                          </Dropdown.Item>)}\r\n                      </Dropdown.Menu>\r\n                    </Dropdown>\r\n                  </Col>\r\n                  <Col>\r\n                    <Dropdown className=\"flex-grow-1\">\r\n                      <Dropdown.Toggle className=\"w-100\">\r\n                        {Artifact.getStatNameWithPercent(this.state.filterMainStatKey, \"Main Stat\")}\r\n                      </Dropdown.Toggle>\r\n                      <Dropdown.Menu>\r\n                        <Dropdown.Item onClick={() => this.setState({ filterMainStatKey: \"\" })}>Unselect</Dropdown.Item>\r\n                        {Object.keys(ArtifactStatsData).filter(key => key !== \"ele_dmg\").map((statKey) => <MainStatDropDownItem key={statKey} statKey={statKey} />)}\r\n                        {Object.keys(ElementalData).map((ele) => <MainStatDropDownItem key={ele} statKey={`${ele}_ele_dmg`} />)}\r\n                      </Dropdown.Menu>\r\n                    </Dropdown>\r\n                  </Col>\r\n                </Row>\r\n              </Col>\r\n              {/* substat filter */}\r\n              {this.state.filterSubstates.map((substatKey, index) =>\r\n                <Col key={index} xs={6} lg={3} className=\"mb-2\">\r\n                  <Dropdown >\r\n                    <Dropdown.Toggle id=\"dropdown-basic\" className=\"w-100\">\r\n                      {Artifact.getStatNameWithPercent(substatKey, `Substat ${index + 1}`)}\r\n                    </Dropdown.Toggle>\r\n                    <Dropdown.Menu>\r\n                      <Dropdown.Item\r\n                        onClick={() => {\r\n                          let filterSubstates = deepClone(this.state.filterSubstates)\r\n                          filterSubstates[index] = \"\"\r\n                          this.setState({ filterSubstates })\r\n                        }}\r\n                      >No Substat</Dropdown.Item>\r\n                      {Object.keys(ArtifactSubStatsData).filter(key => !this.state.filterSubstates.includes(key)).map(key =>\r\n                        <Dropdown.Item key={key}\r\n                          onClick={() => {\r\n                            let filterSubstates = deepClone(this.state.filterSubstates)\r\n                            filterSubstates[index] = key\r\n                            this.setState({ filterSubstates })\r\n                          }}\r\n                        >{Artifact.getStatNameWithPercent(key)}</Dropdown.Item>\r\n                      )}\r\n                    </Dropdown.Menu>\r\n                  </Dropdown>\r\n                </Col>\r\n              )}\r\n            </Row>\r\n          </Card.Body>\r\n        </Card>\r\n      </Col></Row>\r\n      <Row className=\"mb-2 no-gutters\">\r\n        {artifacts.map(art =>\r\n          <Col key={art.id} lg={4} md={6} className=\"mb-2 pl-1 pr-1\">\r\n            <ArtifactCard\r\n              artifactData={art}\r\n              onDelete={() => this.deleteArtifact(art.id)}\r\n              onEdit={() => this.editArtifact(art.id)}\r\n              forceUpdate={this.forceUpdateArtifactDisplay}\r\n            />\r\n          </Col>\r\n        )}\r\n      </Row>\r\n    </Container >)\r\n  }\r\n}\r\n\r\n","export default function Worker_fn() {\n  return new Worker(__webpack_public_path__ + \"static/js/BuildWorker.add7cdeb.worker.js\");\n}\n","import { ArtifactSetsData, ArtifactSlotsData } from \"../Artifact/ArtifactData\";\r\n\r\nexport default class Build {\r\n  static test = (input) =>\r\n    input * 2\r\n\r\n  //works with id indexed object for database.\r\n  static splitArtifactsBySlot(databaseObj) {\r\n    let ret = {}\r\n    for (let slot in ArtifactSlotsData)\r\n      ret[slot] = Object.values(databaseObj).filter(art => art.slotKey === slot)\r\n    return ret;\r\n\r\n  }\r\n  /**\r\n   * Calculate all the possible set configuration based on the filters.\r\n   * [{Key:X,num:2},{key:Y,num:2},{key:\"\",num:0}]\r\n   * generates XXYYO,XYXYO,XXOYY..... combinations, where O means other. \r\n   * @param {Object} setFilters From BuildDisplay\r\n   */\r\n  static generateAllPossibleArtifactSetPerm(setFilters) {\r\n    let sets = setFilters.filter(filter => filter.key).map(filter => filter.key);\r\n    let useOther = setFilters.reduce((accu, filter) => filter.key ? accu + filter.num : accu, 0) < 5;\r\n    if (useOther) sets.push(\"Other\");\r\n\r\n    let perm = [];\r\n    let slotKeys = Object.keys(ArtifactSlotsData);\r\n    //recursion function to loop through everything.\r\n    let slotPerm = (index, accu) => {\r\n      if (index >= slotKeys.length) {\r\n        //todo validate accu against filter\r\n        let numArtsPerSet = {}\r\n        Object.values(accu).forEach(setKey => {\r\n          if (numArtsPerSet[setKey]) numArtsPerSet[setKey] += 1\r\n          else numArtsPerSet[setKey] = 1\r\n        })\r\n        let valid = true\r\n        for (const setFilter of setFilters) {\r\n          if (setFilter.key && (!numArtsPerSet[setFilter.key] || numArtsPerSet[setFilter.key] < setFilter.num)) {\r\n            valid = false;\r\n            break;\r\n          }\r\n        }\r\n        if (valid) perm.push(accu)\r\n        return;\r\n      }\r\n      let slotKey = slotKeys[index];\r\n      sets.forEach(setKey => {\r\n        //see if this set is valid at this piece slot. some artifacts dont have artifacts at specific slots.\r\n        if (setKey === \"Other\" || (ArtifactSetsData[setKey] && (ArtifactSetsData[setKey].pieces) && Object.keys(ArtifactSetsData[setKey].pieces).includes(slotKey))) {\r\n          accu[slotKey] = setKey;\r\n          slotPerm(index + 1, { ...accu })\r\n        }\r\n      });\r\n    }\r\n    slotPerm(0, {});\r\n    return perm\r\n  }\r\n  static calculateTotalBuildNumber(splitArtifacts, setPerms, setFilters) {\r\n    let setsInFilter = setFilters.filter(filter => filter.key).map(filter => filter.key)\r\n    let splitNumArtsPerSet = {}\r\n    //count the number of arts in setfilter for each slot\r\n    Object.entries(splitArtifacts).forEach(([key, artArr]) => {\r\n      let numArtsPerSet = {}\r\n      artArr.forEach(art => {\r\n        if (setsInFilter.includes(art.setKey))\r\n          numArtsPerSet[art.setKey] = (numArtsPerSet[art.setKey] || 0) + 1\r\n        else\r\n          numArtsPerSet[\"Other\"] = (numArtsPerSet[\"Other\"] || 0) + 1\r\n      })\r\n      splitNumArtsPerSet[key] = numArtsPerSet\r\n    })\r\n    //calculate!\r\n    return setPerms.reduce((accu, setPerm) =>\r\n      accu + Object.entries(setPerm).reduce((permaccu, [key, setKey]) =>\r\n        (splitNumArtsPerSet[key] && splitNumArtsPerSet[key][setKey]) ? permaccu * splitNumArtsPerSet[key][setKey] : 0\r\n        , 1)\r\n      , 0)\r\n  }\r\n}","const artifactDisplaySortKey = {\r\n  hp: { name: \"HP\", explaination: (<span><b>HP</b> is calculated as <strong>HP Final = (Character HP Base )*(1 + HP% total) + HP Flat</strong>, where the <b>HP%</b> and <b>HP Flat</b> are the sum of total stats from Artifacts and weapon.</span>) },\r\n  atk: { name: \"ATK\", explaination: (<span><b>ATK</b> is calculated as <strong>ATK Final = (Character ATK Base + Weapon ATK Flat ) * (1 + ATK % total) + ATK Flat</strong>, where the <b>ATK%</b> and <b>ATK Flat</b> are the sum of total stats from Artifacts and weapon.</span >) },\r\n  def: { name: \"DEF\", explaination: (<span><b>DEF</b> is calculated as <strong>DEF Final = (Character DEF Base )*(1 + DEF% total) + DEF Flat</strong>, where the <b>DEF%</b> and <b>DEF Flat</b> are the sum of total stats from Artifacts and weapon.</span >) },\r\n  ele_mas: { name: \"Elemental Mastery\", explaination: (<span><b>Elemental Mastery</b> is calculated as <strong>Elemental Mastery Final = (Character Elemental Mastery Base ) + Elemental Mastery Bonus</strong>, where the <b>Elemental Mastery Bonus</b> is the sum of total stats from Artifacts and weapon.</span >) },\r\n  crit_rate: { name: \"Crit Rate\", unit: \"%\", explaination: (<span><b>Crit Rate</b> is calculated as <strong>Crit Rate = Character Crit Rate Base + Crit Rate Bonus</strong> where <b>Crit Rate Bonus</b> is the sum of all values from weapons and artifacts. Every character has 5% base Crit rate.</span>) },\r\n  crit_dmg: { name: \"Crit DMG\", unit: \"%\", explaination: (<span><b>Crit DMG</b> is calculated as <strong>Crit DMG = Character DMG Rate Base + Crit DMG Bonus</strong> where <b>Crit DMG Bonus</b> is the sum of all values from weapons and artifacts. Every character has 50% base Crit DMG.</span>) },\r\n  heal_bonu: { name: \"Healing Bonux\", unit: \"%\", explaination: (<span><b>Healing Bonus</b> is calculated as <strong>Healing Bonus = Character Healing Bonus Base + Healing Bonus Bonus</strong> where <b>Healing Bonus Bonus</b> is the sum of all values from weapons and artifacts.</span>) },\r\n  ener_rech: { name: \"Energy Recharge\", unit: \"%\", explaination: (<span><b>Energy Recharge</b> is calculated as <strong>Energy Recharge = Character Energy Recharge Base + Energy Recharge Bonus</strong> where <b>Energy Recharge Bonus</b> is the sum of all values from weapons and artifacts. Every character has 100% base Energy Recharge.</span>) },\r\n  phy_dmg: { name: \"Physical DMG Bonus\", unit: \"%\", explaination: (<span><b>Physical Damage Bonus</b> is the sum of all values from weapons and artifacts.</span>) },\r\n  ele_dmg: { name: \" DMG Bonus\", unit: \"%\", explaination: (<span><b>Elemental Damage Bonus</b> is calculated as the sum of all values from weapons and artifacts. Note: only the corresponding Elemental damage Bonus to the character's element is applicable.</span>) },\r\n  phy_atk: {name: \"Physical ATK Total\", explaination: (<span><strong>Physical ATK Total = ATK * (1 + Physical Damage Bonus %) * (1 + Crit Rate * (1 + Crit Dmg))</strong></span>)},\r\n  ele_atk: {name: \" ATK Total\", explaination: (<span><strong>Elemental ATK Total = ATK * (1 + Elemental Damage Bonus %) * (1 + Crit Rate * (1 + Crit Dmg))</strong></span>)},\r\n\r\n}\r\n\r\nexport default artifactDisplaySortKey","import { faSortAmountDownAlt, faSortAmountUp, faTimes } from '@fortawesome/free-solid-svg-icons';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport React from 'react';\r\nimport { Alert, Badge, Button, ButtonGroup, Card, Col, Container, Dropdown, DropdownButton, ListGroup, Modal, OverlayTrigger, Popover, Row } from 'react-bootstrap';\r\n// eslint-disable-next-line\r\nimport Worker from \"worker-loader!./BuildWorker.js\";\r\nimport Artifact from '../Artifact/Artifact';\r\nimport ArtifactCard from '../Artifact/ArtifactCard';\r\nimport { ArtifactMainStatsData, ArtifactSetsData, ArtifactSlotsData, ArtifactStatsData, ElementalData } from '../Artifact/ArtifactData';\r\nimport ArtifactDatabase from '../Artifact/ArtifactDatabase';\r\nimport CharacterDatabase from '../Character/CharacterDatabase';\r\nimport SlotIcon from '../Components/SlotIcon';\r\nimport { deepClone, loadFromLocalStorage, saveToLocalStorage } from '../Util';\r\nimport Build from './Build';\r\nimport artifactDisplaySortKey from './BuildStatData';\r\n\r\nexport default class BuildDisplay extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    CharacterDatabase.populateDatebaseFromLocalStorage();\r\n    ArtifactDatabase.populateDatebaseFromLocalStorage();\r\n    this.state = BuildDisplay.getInitialState();\r\n    if (props.location.selectedCharacterKey) {\r\n      this.state = BuildDisplay.getInitialState();\r\n      props.location.selectedCharacterKey && (this.state.selectedCharacterKey = props.location.selectedCharacterKey)\r\n    } else {\r\n      let savedState = loadFromLocalStorage(\"BuildsDisplay.state\")\r\n      if (savedState) {\r\n        let character = CharacterDatabase.getCharacter(savedState.selectedCharacterKey)\r\n        if (savedState && character) this.state = savedState\r\n      }\r\n    }\r\n  }\r\n  static initialState = {\r\n    builds: [],\r\n    generatingBuilds: false,\r\n    selectedCharacterKey: \"\",\r\n    sandsMainKey: \"\",\r\n    gobletMainKey: \"\",\r\n    circletMainkey: \"\",\r\n    setFilters: [{ key: \"\", num: 0 }, { key: \"\", num: 0 }, { key: \"\", num: 0 }],\r\n    mainStat: [\"\", \"\", \"\"],\r\n    buildFilterKey: \"atk\",\r\n    asending: false,\r\n    modalBuild: null,\r\n    maxBuildsToShow: 100,\r\n    maxBuildsToGenerate: 500000\r\n  }\r\n  static maxBuildsToShowList = [100, 50, 25, 5]\r\n  static maxBuildsToGenerateList = [50000, 10000, 5000, 1000, 500, 100]\r\n  static getInitialState = () => JSON.parse(JSON.stringify(BuildDisplay.initialState))\r\n  static artifactsSlotsToSelectMainStats = [\"sands\", \"goblet\", \"circlet\"]\r\n  forceUpdateBuildDisplay = () => this.forceUpdate()\r\n  splitArtifacts = () => {\r\n    if (!this.state.selectedCharacterKey) return {};\r\n    let artifactDatabase = ArtifactDatabase.getArtifactDatabase();\r\n    //do not use artifacts that are locked.\r\n    Object.entries(artifactDatabase).forEach(([key, val]) => {\r\n      if (val.lock) delete artifactDatabase[key]\r\n      if (this.state.selectedCharacterKey && val.location && val.location !== this.state.selectedCharacterKey)\r\n        delete artifactDatabase[key]\r\n    })\r\n    if (this.state.setFilters.every(filter => filter.key)) {\r\n      let filterKeys = this.state.setFilters.map(filter => filter.key)\r\n      //filter database to only filtered artifacts, if all 3 sets are specified\r\n      Object.entries(artifactDatabase).forEach(([key, val]) => {\r\n        if (filterKeys.includes(val.setKey))\r\n          delete artifactDatabase[key]\r\n      })\r\n    }\r\n    let split = Build.splitArtifactsBySlot(artifactDatabase);\r\n    //filter the split slots on the mainstats selected.\r\n    BuildDisplay.artifactsSlotsToSelectMainStats.forEach((slotKey, index) =>\r\n      this.state.mainStat[index] && (split[slotKey] = split[slotKey].filter((art) => art.mainStatKey === this.state.mainStat[index])))\r\n    return split\r\n  }\r\n  changeMainStat = (index, mainStatKey) => {\r\n    this.setState(state => {\r\n      let mainStat = deepClone(state.mainStat);\r\n      mainStat[index] = mainStatKey;\r\n      return { mainStat }\r\n    })\r\n  }\r\n  changeSetFilterKey = (index, newkey, setsNumArr) => {\r\n    if (this.state.setFilters[index].key === newkey) return\r\n    this.setState((state) => {\r\n      let setFilters = deepClone(state.setFilters);\r\n      let num = 0\r\n      if (setsNumArr && setsNumArr[0])\r\n        num = parseInt(setsNumArr[0])\r\n      setFilters[index] = { key: newkey, num }\r\n      return { setFilters }\r\n    })\r\n  }\r\n  dropdownitemsForStar = (star, index) =>\r\n    Artifact.getArtifactSetsByMaxStarEntries(star).map(([key, setobj]) => {\r\n      if (this.state.setFilters.some(filter => filter.key === key)) return false;\r\n      let setsNumArr = Object.keys(ArtifactSetsData[key].sets)\r\n      let artsAccountedOther = this.state.setFilters.reduce((accu, cur, ind) => (cur.key && ind !== index) ? accu + cur.num : accu, 0)\r\n      if (setsNumArr.every(num => parseInt(num) + artsAccountedOther > 5)) return false;\r\n      return (<Dropdown.Item key={key}\r\n        onClick={() => this.changeSetFilterKey(index, key, setsNumArr)}\r\n      >\r\n        {setobj.name}\r\n      </Dropdown.Item>)\r\n    })\r\n\r\n  generateBuilds = (split, artifactSetPerms) => {\r\n    this.setState({ generatingBuilds: true, builds: [] })\r\n    let character = CharacterDatabase.getCharacter(this.state.selectedCharacterKey)\r\n    let data = {\r\n      split, artifactSetPerms, setFilters: this.state.setFilters, character, ArtifactStatsData,\r\n      ArtifactSlotsData, ArtifactMainStatsData, ArtifactSetsData, maxBuildsToShow: this.state.maxBuildsToShow,\r\n      buildFilterKey: this.state.buildFilterKey, asending: this.state.asending\r\n    }\r\n\r\n    // let worker = new Worker('BuildWorker.js');\r\n    let worker = new Worker();\r\n    worker.onmessage = (e) =>\r\n      this.setState({ builds: e.data, generatingBuilds: false })\r\n    worker.postMessage(data)\r\n  }\r\n\r\n  BuildGeneratorEditorCard = (props) => {\r\n    let charlist = CharacterDatabase.getCharacterDatabase();\r\n    let selectedCharacter = CharacterDatabase.getCharacter(this.state.selectedCharacterKey)\r\n    let characterName = selectedCharacter ? selectedCharacter.name : \"Character Name\"\r\n    let artsAccounted = this.state.setFilters.reduce((accu, cur) => cur.key ? accu + cur.num : accu, 0)\r\n    let split = this.splitArtifacts();\r\n    let artifactSetPerms = Build.generateAllPossibleArtifactSetPerm(this.state.setFilters)\r\n    let totBuildNumber = Build.calculateTotalBuildNumber(split, artifactSetPerms, this.state.setFilters)\r\n    let buildAlert = totBuildNumber === 0 ?\r\n      <Alert variant=\"warning\" className=\"mb-0\"><span>Current configuration will not generate any builds for <b>{characterName}</b>. Please change your Artifact configurations, or add/unlock more Artifacts.</span></Alert>\r\n      : (totBuildNumber > this.state.maxBuildsToGenerate ?\r\n        <Alert variant=\"danger\" className=\"mb-0\"><span>Current configuration will generate <b>{totBuildNumber}</b> builds for <b>{characterName}</b>. Please restrict artifact configuration to reduce builds to less than {this.state.maxBuildsToGenerate}, or your browser might crash.</span></Alert> :\r\n        <Alert variant=\"success\" className=\"mb-0\"><span>Current configuration will generate <b>{totBuildNumber}</b> builds for <b>{characterName}</b>.</span></Alert>)\r\n    let sortName = artifactDisplaySortKey[this.state.buildFilterKey] ? artifactDisplaySortKey[this.state.buildFilterKey].name : \"\"\r\n    if (this.state.buildFilterKey === \"ele_atk\" && selectedCharacter)\r\n      sortName = `${ElementalData[selectedCharacter.element].name} ${artifactDisplaySortKey.ele_atk.name}`\r\n    if (!sortName && selectedCharacter && this.state.buildFilterKey.includes(\"ele_dmg\"))\r\n      sortName = `${ElementalData[selectedCharacter.element].name} ${artifactDisplaySortKey.ele_dmg.name}`\r\n\r\n    return <Card bg=\"darkcontent\" text=\"lightfont\">\r\n      <Card.Header>Build Generator</Card.Header>\r\n      <Card.Body>\r\n        <Row>\r\n          <Col>\r\n            {/* Character picker */}\r\n            <div className=\"mb-2\">\r\n              <DropdownButton title={this.state.selectedCharacterKey ? characterName : \"Select Character\"}>\r\n                <Dropdown.Item onClick={() => this.setState({ selectedCharacterKey: \"\" })}>\r\n                  No Character\r\n              </Dropdown.Item>\r\n                {Object.values(charlist).map((char, i) =>\r\n                  <Dropdown.Item key={char.name + i}\r\n                    onClick={() => this.setState({ selectedCharacterKey: char.id })}\r\n                  >\r\n                    {char.name}\r\n                  </Dropdown.Item>)}\r\n              </DropdownButton>\r\n            </div>\r\n            {/* Artifact set picker */}\r\n            {this.state.setFilters.map((setFilter, index) =>\r\n              <div className=\"mb-2\" key={index}>\r\n                <ButtonGroup>\r\n                  {/* Artifact set */}\r\n                  <DropdownButton as={ButtonGroup} title={setFilter.key ? ArtifactSetsData[setFilter.key].name : \"Set (Optional)\"} >\r\n                    <Dropdown.Item onClick={() => this.changeSetFilterKey(index, \"\")}>\r\n                      Unselect Artifact\r\n                  </Dropdown.Item>\r\n                    <Dropdown.ItemText>Max Rarity 🟊🟊🟊🟊🟊</Dropdown.ItemText>\r\n                    {this.dropdownitemsForStar(5, index)}\r\n                    <Dropdown.Divider />\r\n                    <Dropdown.ItemText>Max Rarity 🟊🟊🟊🟊</Dropdown.ItemText>\r\n                    {this.dropdownitemsForStar(4, index)}\r\n                    <Dropdown.Divider />\r\n                    <Dropdown.ItemText>Max Rarity 🟊🟊🟊</Dropdown.ItemText>\r\n                    {this.dropdownitemsForStar(3, index)}\r\n                  </DropdownButton>\r\n                  {/* set number */}\r\n                  <DropdownButton as={ButtonGroup} title={`${setFilter.num}-set`}\r\n                    disabled={!setFilter.key || artsAccounted >= 5}\r\n                  >\r\n                    {setFilter.key && Object.keys(ArtifactSetsData[setFilter.key].sets).map(num => {\r\n                      let artsAccountedOther = this.state.setFilters.reduce((accu, cur) => (cur.key && cur.key !== setFilter.key) ? accu + cur.num : accu, 0)\r\n                      return (parseInt(num) + artsAccountedOther <= 5) &&\r\n                        (<Dropdown.Item key={num}\r\n                          onClick={() => this.setState((state) => {\r\n                            let setFilters = deepClone(state.setFilters);\r\n                            setFilters[index].num = parseInt(num)\r\n                            return { setFilters }\r\n                          })}\r\n                        >\r\n                          {`${num}-set`}\r\n                        </Dropdown.Item>)\r\n                    })}\r\n                  </DropdownButton>\r\n                </ButtonGroup>\r\n              </div>\r\n            )}\r\n          </Col>\r\n          <Col>\r\n            <h5>Artifact Main Stat (Optional)</h5>\r\n            {BuildDisplay.artifactsSlotsToSelectMainStats.map((slotKey, index) =>\r\n              (<div className=\"text-inline mb-1 d-flex justify-content-between\" key={slotKey}>\r\n                <h6 className=\"d-inline mr-2\">\r\n                  {SlotIcon[slotKey] && <FontAwesomeIcon icon={SlotIcon[slotKey]} className=\"mr-2 fa-fw\" />}\r\n                  {ArtifactSlotsData[slotKey].name}\r\n                </h6>\r\n                <DropdownButton\r\n                  title={this.state.mainStat[index] ? Artifact.getStatNameWithPercent(this.state.mainStat[index]) : \"Select a mainstat\"}\r\n                  className=\"d-inline\">\r\n                  <Dropdown.Item onClick={() => this.changeMainStat(index, \"\")} >No MainStat</Dropdown.Item>\r\n                  {ArtifactSlotsData[slotKey].stats.map(mainStatKey =>\r\n                    <Dropdown.Item onClick={() => this.changeMainStat(index, mainStatKey)} key={mainStatKey}>\r\n                      {Artifact.getStatNameWithPercent(mainStatKey)}\r\n                    </Dropdown.Item>\r\n                  )}\r\n                </DropdownButton>\r\n              </div>))}\r\n          </Col>\r\n        </Row>\r\n        <Row className=\"d-flex justify-content-between mb-2\">\r\n          <Col xs=\"auto\" >\r\n            <Button\r\n              className=\"h-100\"\r\n              disabled={!this.state.selectedCharacterKey || totBuildNumber > this.state.maxBuildsToGenerate || this.state.generatingBuilds}\r\n              variant={(this.state.selectedCharacterKey && totBuildNumber <= this.state.maxBuildsToGenerate) ? \"success\" : \"danger\"}\r\n              onClick={() => setTimeout(() => {\r\n                this.generateBuilds(split, artifactSetPerms)\r\n              }, 0)}\r\n            ><span>Generate Builds</span></Button>\r\n          </Col>\r\n          <Col xs=\"auto\">\r\n            {/* Dropdown to select sorting value */}\r\n            <ButtonGroup>\r\n              <DropdownButton disabled={!this.state.selectedCharacterKey} title={`Sort by ${sortName}`} as={ButtonGroup}>\r\n                {this.state.selectedCharacterKey && Object.entries(artifactDisplaySortKey).map(([key, val]) => {\r\n                  let name = val.name\r\n                  let character = CharacterDatabase.getCharacter(this.state.selectedCharacterKey)\r\n                  if (key === \"ele_dmg\" || key === \"ele_atk\") {\r\n                    let eleName = ElementalData[character.element].name\r\n                    name = eleName + name\r\n                    key === \"ele_dmg\" && (key = `${character.element}_${key}`)\r\n                  }\r\n                  return <Dropdown.Item key={key} onClick={() => this.setState({ buildFilterKey: key })}>\r\n                    {name}\r\n                  </Dropdown.Item>\r\n                })}\r\n              </DropdownButton>\r\n              <Button onClick={() => this.setState(state => ({ asending: !state.asending }))}>\r\n                <FontAwesomeIcon icon={this.state.asending ? faSortAmountDownAlt : faSortAmountUp} className=\"fa-fw\" />\r\n              </Button>\r\n            </ButtonGroup>\r\n          </Col>\r\n        </Row>\r\n        <Row>\r\n          <Col>{this.state.selectedCharacterKey && buildAlert}</Col>\r\n        </Row>\r\n      </Card.Body>\r\n    </Card>\r\n  }\r\n  ArtifactDisplayItem = (props) => {\r\n    let build = props.build\r\n    let character = props.character\r\n    return (<div>\r\n      {/* <this.BuildModal build={build} />  */}\r\n      <ListGroup.Item\r\n        variant={props.index % 2 ? \"customdark\" : \"customdarker\"} className=\"text-white\" action\r\n        onClick={() => this.setState({ modalBuild: build })}\r\n      >\r\n        <Row>\r\n          <Col>{this.ArtifactDisplay(build.setToSlots)}</Col>\r\n        </Row>\r\n        <Row>\r\n          {Object.entries(artifactDisplaySortKey).map(([key, val]) => {\r\n            let name = val.name\r\n            let unit = val.unit ? val.unit : \"\"\r\n            if (key === \"ele_dmg\" || key === \"ele_atk\") {\r\n              let eleName = ElementalData[character.element].name\r\n              name = eleName + name\r\n              key === \"ele_dmg\" && (key = `${character.element}_${key}`)\r\n            }\r\n            return <Col className=\"text-nowrap\" key={key} xs={12} sm={6} md={4} lg={3}>\r\n              <span>{name}: <span className=\"text-warning\">{build.finalStats[key]}{unit}</span></span>\r\n            </Col>\r\n          })}\r\n        </Row>\r\n      </ListGroup.Item>\r\n    </div>)\r\n  }\r\n  BuildModal = (props) => {\r\n    let build = props.build\r\n    let character = props.character\r\n    return build ? (<Modal show={this.state.modalBuild !== null} onHide={() => this.setState({ modalBuild: null })} size=\"xl\" dialogAs={Container} className=\"pt-3 pb-3\">\r\n      <Card bg=\"darkcontent\" text=\"lightfont\" >\r\n        <Card.Header>\r\n          <Card.Title>\r\n            <Row>\r\n              <Col><span>{character.name} Build</span></Col>\r\n              <Col xs=\"auto\">\r\n                <Button variant=\"danger\" onClick={() => this.setState({ modalBuild: null })}>\r\n                  <FontAwesomeIcon icon={faTimes} /></Button>\r\n              </Col>\r\n            </Row>\r\n          </Card.Title>\r\n        </Card.Header>\r\n        <Card.Body>\r\n          <Row>\r\n            <Col className=\"mb-3\">\r\n              <BuildModalCharacterCard build={build} character={character} />\r\n            </Col>\r\n          </Row>\r\n          <Row>\r\n            <Col>\r\n              <Row>\r\n                <Col sm={6} className=\"mb-3\">\r\n                  <Row className=\"h-100\">\r\n                    <Col xs={12} className=\"d-flex flex-column\">\r\n                      <Card className=\"flex-grow-1 mb-2\" border=\"light\" bg=\"darkcontent\" text=\"lightfont\">\r\n                        <Card.Header>Weapon</Card.Header>\r\n                        <Card.Body>\r\n                          <Row>\r\n                            <Col>\r\n                              <h6>Base ATK {character.weapon_atk}</h6>\r\n                            </Col>\r\n                            <Col>\r\n                              {character.weaponStatKey && <h6>{Artifact.getStatName(character.weaponStatKey)} {character.weaponStatVal}{Artifact.getStatUnit(character.weaponStatKey)}</h6>}\r\n                            </Col>\r\n                          </Row>\r\n                        </Card.Body>\r\n                      </Card>\r\n                      <Card className=\"flex-grow-1\" border=\"light\" bg=\"darkcontent\" text=\"lightfont\">\r\n                        <Card.Header>Artifact Set Effects</Card.Header>\r\n                        <Card.Body>\r\n                          <Row>\r\n                            {Object.entries(build.artifactSetEffect).map(([setKey, effects]) =>\r\n                              <Col key={setKey} xs={12} className=\"mb-3\">\r\n                                <h6>{Artifact.getArtifactSetName(setKey)}</h6>\r\n                                <Row>\r\n                                  {Object.entries(effects).map(([num, effect]) => {\r\n                                    return <Col key=\"num\" xs={12}><Badge variant=\"success\">{num}-Set</Badge> <span>{effect.text}</span></Col>\r\n                                  })}\r\n                                </Row>\r\n                              </Col>\r\n                            )}\r\n                          </Row>\r\n                        </Card.Body>\r\n                      </Card>\r\n                    </Col >\r\n                  </Row>\r\n                </Col>\r\n                {Object.values(build.artifactIds).map(artid =>\r\n                  <Col sm={6} key={artid} className=\"mb-3\">\r\n                    <ArtifactCard artifactData={ArtifactDatabase.getArtifact(artid)} forceUpdate={this.forceUpdateBuildDisplay} />\r\n                  </Col>)}\r\n              </Row>\r\n            </Col>\r\n          </Row>\r\n        </Card.Body>\r\n        <Card.Footer>\r\n          <Row className=\"d-flex justify-content-between\">\r\n            <Col xs=\"auto\">\r\n              <Button variant=\"primary\" onClick={() => this.equipArtifacts(build, character)}>\r\n                <span>Equip Artifacts on Character</span>\r\n              </Button>\r\n            </Col>\r\n            <Col xs=\"auto\">\r\n              <Button variant=\"danger\" onClick={() => this.setState({ modalBuild: null })}>\r\n                <span>Close</span>\r\n              </Button>\r\n            </Col>\r\n          </Row>\r\n        </Card.Footer>\r\n      </Card>\r\n    </Modal>) : null\r\n  }\r\n  ArtifactDisplay = (setToSlots) =>\r\n    Object.entries(setToSlots).sort(([key1, slotarr1], [key2, slotarr2]) => slotarr2.length - slotarr1.length).map(([key, slotarr]) =>\r\n      <Badge key={key} variant=\"primary\" className=\"mr-2\">\r\n        {slotarr.map(slotKey =>\r\n          SlotIcon[slotKey] && <FontAwesomeIcon icon={SlotIcon[slotKey]} key={slotKey} className=\"fa-fw\" />)}\r\n        {ArtifactSetsData[key].name}\r\n      </Badge>\r\n    )\r\n\r\n  equipArtifacts = (build, character) => {\r\n    let artifactIds = build.artifactIds;\r\n    //move all the equipped artifacts to the inventory.\r\n    if (character.equippedArtifacts)\r\n      Object.values(character.equippedArtifacts).forEach(artid =>\r\n        ArtifactDatabase.moveToNewLocation(artid, \"\"))\r\n\r\n    CharacterDatabase.equipArtifactBuild(character.id, artifactIds);\r\n\r\n    //move all the current build artifacts to the character.\r\n    Object.values(artifactIds).forEach(artid =>\r\n      ArtifactDatabase.moveToNewLocation(artid, character.id))\r\n\r\n    this.forceUpdate();\r\n  }\r\n  componentDidUpdate() {\r\n    let state = deepClone(this.state)\r\n    state.builds = [];\r\n    delete state.generatingBuilds\r\n    delete state.modalBuild\r\n    saveToLocalStorage(\"BuildsDisplay.state\", state)\r\n  }\r\n  render() {\r\n    let selectedCharacter = CharacterDatabase.getCharacter(this.state.selectedCharacterKey)\r\n    let characterName = selectedCharacter ? selectedCharacter.name : \"Character Name\"\r\n    return (<Container>\r\n      <this.BuildModal build={this.state.modalBuild} character={selectedCharacter} />\r\n      <Row className=\"mt-2 mb-2\">\r\n        <Col>\r\n          {/* Build Generator Editor */}\r\n          <this.BuildGeneratorEditorCard />\r\n        </Col>\r\n      </Row>\r\n      <Row className=\"mb-2\">\r\n        <Col>\r\n          <Card bg=\"darkcontent\" text=\"lightfont\">\r\n            <Card.Header>{this.state.selectedCharacterKey ? `Showing first ${this.state.builds.length} Builds generated for ${characterName}` : \"Select a character to generate builds.\"}</Card.Header>\r\n            {/* Build List */}\r\n            <ListGroup>\r\n              {this.state.builds.map((build, index) =>\r\n                (index < this.state.maxBuildsToShow) && <this.ArtifactDisplayItem build={build} character={selectedCharacter} index={index} key={Object.values(build.artifactIds).join(\"_\")} />\r\n              )}\r\n            </ListGroup>\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n    </Container>)\r\n  }\r\n}\r\n\r\nconst BuildModalCharacterCard = (props) => {\r\n  let build = props.build;\r\n  let character = props.character;\r\n  return (<Card className=\"h-100\" border=\"success\" bg=\"darkcontent\" text=\"lightfont\">\r\n    <Card.Header>Character Stats</Card.Header>\r\n    <Card.Body>\r\n      <Row>\r\n        {Object.entries(artifactDisplaySortKey).map(([key, val]) => {\r\n          let name = val.name\r\n          let unit = val.unit ? val.unit : \"\"\r\n          if (key === \"ele_dmg\" || key === \"ele_atk\") {\r\n            let eleName = ElementalData[character.element].name\r\n            name = eleName + name\r\n            key === \"ele_dmg\" && (key = `${character.element}_${key}`)\r\n          }\r\n          let statsDisplay = (key in character) ?\r\n            <span>{name}: <span className=\"text-warning\">{character[key]}{unit}</span> <span className=\"text-success\">+ {(build.finalStats[key] - character[key]).toFixed(unit === \"%\" ? 1 : 0)}{unit}</span></span> :\r\n            <span>{name}: <span className=\"text-warning\">{build.finalStats[key]}{unit}</span></span>\r\n          return <Col className=\"text-nowrap\" key={key} xs={12} sm={6} lg={4}>\r\n            <OverlayTrigger\r\n              placement=\"top\"\r\n              overlay={\r\n                <Popover>\r\n                  <Popover.Title as=\"h3\">\r\n                    {(key in character) ?\r\n                      <span>{name}: {character[key]}{unit} <span className=\"text-success\">+ {(build.finalStats[key] - character[key]).toFixed(1)}{unit}</span></span> :\r\n                      <span>{name}: {build.finalStats[key]}{unit}</span>\r\n                    }\r\n                  </Popover.Title>\r\n                  <Popover.Content>\r\n                    {key.includes(\"ele_dmg\") ? artifactDisplaySortKey[\"ele_dmg\"].explaination : artifactDisplaySortKey[key].explaination}\r\n                  </Popover.Content>\r\n                </Popover>\r\n              }\r\n            >\r\n              {statsDisplay}\r\n            </OverlayTrigger>\r\n          </Col>\r\n        })}\r\n      </Row>\r\n    </Card.Body>\r\n  </Card>)\r\n}","import { faBolt, faFire, faGem, faIcicles, faSeedling, faWater, faWind } from '@fortawesome/free-solid-svg-icons'\r\n\r\nconst ElementalIcon = {\r\n  anemo: faWind,\r\n  geo: faGem,\r\n  electro: faBolt,\r\n  hydro: faWater,\r\n  pyro: faFire,\r\n  cryo: faIcicles,\r\n  dendro: faSeedling\r\n}\r\nexport default ElementalIcon","import React from 'react';\r\nimport Card from 'react-bootstrap/Card'\r\nimport Col from 'react-bootstrap/Col'\r\nimport Row from 'react-bootstrap/Row'\r\nimport Button from 'react-bootstrap/Button'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faTrashAlt, faEdit } from '@fortawesome/free-solid-svg-icons'\r\nimport Artifact from '../Artifact/Artifact';\r\nimport { Link } from 'react-router-dom';\r\nimport { ElementalData } from '../Artifact/ArtifactData';\r\nimport ElementalIcon from '../Components/ElementalIcon';\r\nexport default class CharacterCard extends React.Component {\r\n  render() {\r\n    if (!this.props.characterData) return null;\r\n    let char = this.props.characterData;\r\n\r\n    const liElement = (key) =>\r\n      (<li key={key}>\r\n        <span>{Artifact.getStatName(key)}</span>\r\n        <span className=\"float-right\">{char[key] + Artifact.getStatUnit(key)}</span>\r\n      </li>)\r\n    let mainArr = [\"hp\", \"atk\", \"def\", \"ele_mas\"]\r\n    let mainEles = mainArr.map(liElement);\r\n    let advArr = [\"crit_rate\", \"crit_dmg\", \"heal_bonu\", \"ener_rech\"]\r\n    let advEles = advArr.map(liElement);\r\n    let weaponAtk = (<li>\r\n      <span>Weapon ATK</span>\r\n      <span className=\"float-right\">{char.weapon_atk}</span>\r\n    </li>)\r\n    let weaponSub = (<li>\r\n      <span>{Artifact.getStatName(char.weaponStatKey)}</span>\r\n      <span className=\"float-right\">{char.weaponStatVal + Artifact.getStatUnit(char.weaponStatKey)}</span>\r\n    </li>)\r\n    let specialized = (<li>\r\n      <span>{Artifact.getStatName(char.specialStatKey)}</span>\r\n      <span className=\"float-right\">{char.specialStatVal + Artifact.getStatUnit(char.specialStatKey)}</span>\r\n    </li>)\r\n    return (<Card className=\"h-100\" border={`${char.numStars}star`} bg=\"darkcontent\" text=\"lightfont\">\r\n      <Card.Header className=\"pr-2\">\r\n        <Row className=\"no-gutters\">\r\n          <Col >\r\n            <h6><b>{char.name}</b></h6>\r\n          </Col>\r\n          <Col xs={\"auto\"}>\r\n            <span className=\"float-right align-top ml-1\">\r\n              <Button variant=\"primary\" size=\"sm\" className=\"mr-1\"\r\n                onClick={() => this.props.onEdit && this.props.onEdit()}>\r\n                <FontAwesomeIcon icon={faEdit} />\r\n              </Button>\r\n              <Button variant=\"danger\" size=\"sm\"\r\n                onClick={() => this.props.onDelete && this.props.onDelete()}>\r\n                <FontAwesomeIcon icon={faTrashAlt} />\r\n              </Button>\r\n            </span>\r\n          </Col>\r\n        </Row>\r\n      </Card.Header>\r\n      <Card.Body>\r\n        <h6><FontAwesomeIcon icon={ElementalIcon[char.element]} className=\"fa-fw\" /> {ElementalData[char.element].name}</h6>\r\n        <h5>Weapon</h5>\r\n        <ul>{weaponAtk}{weaponSub}</ul>\r\n        <h5>Main Stats</h5>\r\n        <ul>{mainEles} </ul>\r\n        <h5>Specialized Stat</h5>\r\n        <ul>{specialized}</ul>\r\n        <h5>Advanced Stats</h5>\r\n        <ul>{advEles}</ul>\r\n      </Card.Body>\r\n      <Card.Footer>\r\n        <Button as={Link} to={{\r\n          pathname: \"/build\",\r\n          selectedCharacterKey: this.props.characterData.id\r\n        }}>\r\n          Generate Builds\r\n        </Button>\r\n      </Card.Footer>\r\n    </Card>)\r\n  }\r\n}","import React from 'react';\r\nimport { Button, Card, Col, Dropdown, DropdownButton, FormControl, InputGroup, Row } from 'react-bootstrap';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faSignature, faTint, faFistRaised, faShieldAlt, faMagic, faDice, faDiceD20, faFirstAid, faSync, faGavel } from '@fortawesome/free-solid-svg-icons'\r\nimport { ArtifactStatsData, CharacterSpecializedStatKey, ElementalData } from '../Artifact/ArtifactData';\r\nimport Artifact from '../Artifact/Artifact';\r\nimport { FloatFormControl, IntFormControl } from '../Components/CustomFormControl';\r\nimport ElementalIcon from '../Components/ElementalIcon';\r\nimport CharacterDatabase from './CharacterDatabase';\r\nexport default class CharacterEditor extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = CharacterEditor.getInitialState();\r\n  }\r\n  static initialState = {\r\n    name: \"\",\r\n    element: Object.keys(ElementalData)[0],\r\n    hp: 0,\r\n    atk: 0,\r\n    def: 0,\r\n    ele_mas: 0,\r\n    crit_rate: 5,\r\n    crit_dmg: 50,\r\n    heal_bonu: 0,\r\n    ener_rech: 100,\r\n    weapon_atk: 0,\r\n    weaponStatKey: \"\",\r\n    weaponStatVal: 0,\r\n    specialStatKey: \"\",\r\n    specialStatVal: 0,\r\n  }\r\n  static getInitialState = () => JSON.parse(JSON.stringify(CharacterEditor.initialState))\r\n\r\n  StatInput = (props) => {\r\n    const onValueChange = (v) =>\r\n      props.onValueChange && props.onValueChange(v)\r\n    return (<InputGroup className=\"mb-3\">\r\n      <InputGroup.Prepend>\r\n        <InputGroup.Text>{props.name}</InputGroup.Text>\r\n      </InputGroup.Prepend>\r\n      {props.percent ? (\r\n        <FloatFormControl\r\n          placeholder={props.placeholder}\r\n          value={props.value ? props.value : \"\"}\r\n          onValueChange={onValueChange}\r\n        />\r\n      ) : (\r\n          <IntFormControl\r\n            placeholder={props.placeholder}\r\n            value={props.value ? props.value : \"\"}\r\n            onValueChange={onValueChange}\r\n          />\r\n        )}\r\n      {props.percent && (<InputGroup.Append>\r\n        <InputGroup.Text>%</InputGroup.Text>\r\n      </InputGroup.Append>)}\r\n    </InputGroup>)\r\n\r\n  }\r\n  componentDidUpdate = () => {\r\n    if (this.props.characterToEdit && this.state.id !== this.props.characterToEdit.id)\r\n      this.setState(this.props.characterToEdit)\r\n  }\r\n  render() {\r\n    let percentWeaponStatSelect = Artifact.getStatUnit(this.state.weaponStatKey) === \"%\";\r\n    let percentSpecialStatSlect = Artifact.getStatUnit(this.state.specialStatKey) === \"%\"\r\n    let weaponprops = {\r\n      placeholder: \"Weapon 2nd Stat\",\r\n      value: this.state.weaponStatVal ? this.state.weaponStatVal : \"\",\r\n      onValueChange: (val) => this.setState({ weaponStatVal: val }),\r\n      disabled: !this.state.weaponStatKey\r\n    }\r\n    let weaponSubStatInput = percentWeaponStatSelect ?\r\n      <FloatFormControl {...weaponprops} />\r\n      : <IntFormControl {...weaponprops} />\r\n\r\n    let specialStatProps = {\r\n      placeholder: \"Character Special Stat\",\r\n      value: this.state.specialStatVal ? this.state.specialStatVal : \"\",\r\n      onValueChange: (val) => this.setState({ specialStatVal: val }),\r\n      disabled: !this.state.specialStatKey\r\n    }\r\n    let specialStatInput = percentSpecialStatSlect ?\r\n      <FloatFormControl {...specialStatProps} />\r\n      : <IntFormControl {...specialStatProps} />\r\n\r\n    return (<Card bg=\"darkcontent\" text=\"lightfont\">\r\n      <Card.Header>Character Editor</Card.Header>\r\n      <Card.Body>\r\n        <InputGroup className=\"mb-3\">\r\n          <InputGroup.Prepend>\r\n            <InputGroup.Text><FontAwesomeIcon icon={faSignature} className=\"mr-2\" /> Character Name</InputGroup.Text>\r\n          </InputGroup.Prepend>\r\n          <FormControl placeholder=\"Name\"\r\n            value={this.state.name}\r\n            onChange={(e) => this.setState({ name: e.target.value })}\r\n          />\r\n          <InputGroup.Append>\r\n            <InputGroup.Text>Character Element</InputGroup.Text>\r\n          </InputGroup.Append>\r\n          <DropdownButton\r\n            title={this.state.element ?\r\n              (<span>\r\n                <FontAwesomeIcon icon={ElementalIcon[this.state.element]} className=\"fa-fw\" />\r\n                <span> {ElementalData[this.state.element].name}</span>\r\n              </span>) : \"Element\"}\r\n            as={InputGroup.Append}\r\n          >\r\n            <Dropdown.ItemText>Select Element </Dropdown.ItemText>\r\n            {Object.entries(ElementalData).map(([key, val]) =>\r\n              (<Dropdown.Item key={key} onClick={() =>\r\n                (key !== this.state.element) && this.setState({ element: key })\r\n              } >\r\n                <span>\r\n                  <FontAwesomeIcon icon={ElementalIcon[key]} className=\"fa-fw\" />\r\n                  <span> {val.name}</span>\r\n                </span>\r\n              </Dropdown.Item>)\r\n            )}\r\n          </DropdownButton>\r\n        </InputGroup>\r\n        <h5>Base Stats</h5>\r\n        <Row className=\"mb-2\">\r\n          <Col lg={6} xs={12}>\r\n            <this.StatInput\r\n              name={<span><FontAwesomeIcon icon={faTint} className=\"mr-2\" /> Base HP</span>}\r\n              placeholder=\"Base Health\"\r\n              value={this.state.hp}\r\n              percent={false}\r\n              onValueChange={(value) => this.setState({ hp: value })}\r\n            />\r\n          </Col>\r\n          <Col lg={6} xs={12}>\r\n            <this.StatInput\r\n              name={<span><FontAwesomeIcon icon={faFistRaised} className=\"mr-2\" /> Base ATK</span>}\r\n              placeholder=\"Base Attack\"\r\n              value={this.state.atk}\r\n              percent={false}\r\n              onValueChange={(value) => this.setState({ atk: value })}\r\n            />\r\n          </Col>\r\n          <Col lg={6} xs={12}>\r\n            <this.StatInput\r\n              name={<span><FontAwesomeIcon icon={faShieldAlt} className=\"mr-2\" /> Base DEF</span>}\r\n              placeholder=\"Base Defence\"\r\n              value={this.state.def}\r\n              percent={false}\r\n              onValueChange={(value) => this.setState({ def: value })}\r\n            />\r\n          </Col>\r\n          <Col lg={6} xs={12}>\r\n            <this.StatInput\r\n              name={<span><FontAwesomeIcon icon={faMagic} className=\"mr-2\" /> Base Elemental Mastery</span>}\r\n              placeholder=\"Elemental Mastery\"\r\n              value={this.state.ele_mas}\r\n              percent={false}\r\n              onValueChange={(value) => this.setState({ ele_mas: value })}\r\n            />\r\n          </Col>\r\n          <Col lg={6} xs={12}>\r\n            <InputGroup>\r\n              <DropdownButton\r\n                title={Artifact.getStatNameWithPercent(this.state.specialStatKey, \"Specialized Stat\")}\r\n                as={InputGroup.Prepend}\r\n              >\r\n                <Dropdown.ItemText>Select Specialized Stat </Dropdown.ItemText>\r\n                {CharacterSpecializedStatKey.map(key =>\r\n                  <Dropdown.Item key={key} onClick={() => {\r\n                    this.setState({ specialStatKey: key, specialStatVal: 0 })\r\n                  }} >\r\n                    {Artifact.getStatNameWithPercent(key)}\r\n                  </Dropdown.Item>)}\r\n              </DropdownButton>\r\n              {specialStatInput}\r\n              {percentSpecialStatSlect && (<InputGroup.Append>\r\n                <InputGroup.Text>%</InputGroup.Text>\r\n              </InputGroup.Append>)}\r\n            </InputGroup>\r\n          </Col>\r\n        </Row>\r\n        <h5>Advanced Stats</h5>\r\n        <Row>\r\n          <Col lg={6} xs={12}>\r\n            <this.StatInput\r\n              name={<span><FontAwesomeIcon icon={faDice} className=\"mr-2\" /> Base Crit Rate</span>}\r\n              placeholder=\"Crit Rate\"\r\n              value={this.state.crit_rate}\r\n              percent={true}\r\n              onValueChange={(value) => this.setState({ crit_rate: value })}\r\n            />\r\n          </Col>\r\n          <Col lg={6} xs={12}>\r\n            <this.StatInput\r\n              name={<span><FontAwesomeIcon icon={faDiceD20} className=\"mr-2\" /> Base Crit Damage</span>}\r\n              placeholder=\"Crit Damage\"\r\n              value={this.state.crit_dmg}\r\n              percent={true}\r\n              onValueChange={(value) => this.setState({ crit_dmg: value })}\r\n            />\r\n          </Col>\r\n          <Col lg={6} xs={12}>\r\n            <this.StatInput\r\n              name={<span><FontAwesomeIcon icon={faFirstAid} className=\"mr-2\" /> Base Healing Bonus</span>}\r\n              placeholder=\"Healing Bonus\"\r\n              value={this.state.heal_bonu}\r\n              percent={true}\r\n              onValueChange={(value) => this.setState({ heal_bonu: value })}\r\n            />\r\n          </Col>\r\n          <Col lg={6} xs={12}>\r\n            <this.StatInput\r\n              name={<span><FontAwesomeIcon icon={faSync} className=\"mr-2\" /> Base Energy Recharge</span>}\r\n              placeholder=\"Energy Recharge\"\r\n              value={this.state.ener_rech}\r\n              percent={true}\r\n              onValueChange={(value) => this.setState({ ener_rech: value })}\r\n            />\r\n          </Col>\r\n        </Row>\r\n        <h5>Weapon Stats</h5>\r\n        <Row>\r\n          <Col lg={6} xs={12}>\r\n            <this.StatInput\r\n              name={<span><FontAwesomeIcon icon={faGavel} className=\"mr-2\" /> Weapon ATK</span>}\r\n              placeholder=\"Weapon Attack\"\r\n              value={this.state.weapon_atk}\r\n              percent={false}\r\n              onValueChange={(value) => this.setState({ weapon_atk: value })}\r\n            />\r\n          </Col>\r\n          <Col lg={6} xs={12}>\r\n            <InputGroup>\r\n              <DropdownButton\r\n                title={Artifact.getStatNameWithPercent(this.state.weaponStatKey, \"Weapon Stat\")}\r\n                as={InputGroup.Prepend}\r\n              >\r\n                <Dropdown.ItemText>Select a weapon secondary stat </Dropdown.ItemText>\r\n                {Object.entries(ArtifactStatsData).map(([key, value]) =>\r\n                  <Dropdown.Item key={key} onClick={() => {\r\n                    this.setState({ weaponStatKey: key, weaponStatVal: null })\r\n                  }} >\r\n                    {Artifact.getStatNameWithPercent(key)}\r\n                  </Dropdown.Item>)}\r\n              </DropdownButton>\r\n              {weaponSubStatInput}\r\n              {percentWeaponStatSelect && (<InputGroup.Append>\r\n                <InputGroup.Text>%</InputGroup.Text>\r\n              </InputGroup.Append>)}\r\n            </InputGroup>\r\n          </Col>\r\n        </Row>\r\n      </Card.Body>\r\n      <Card.Footer>\r\n        <Button className=\"mr-3\" disabled={CharacterDatabase.isInvalid(this.state)} onClick={() => {\r\n          this.props.addCharacter && this.props.addCharacter(this.state)\r\n          this.setState(CharacterEditor.getInitialState());\r\n        }}>\r\n          {this.props.characterToEdit ? \"Save Character\" : \"Add Character\"}\r\n        </Button>\r\n        <Button className=\"mr-3\" variant=\"success\"\r\n          onClick={() => {\r\n            this.props.cancelEdit && this.props.cancelEdit();\r\n            this.setState(CharacterEditor.getInitialState());\r\n          }}\r\n        >\r\n          Clear\r\n          </Button>\r\n      </Card.Footer>\r\n    </Card>)\r\n  }\r\n}\r\n","import React from 'react';\r\nimport { Container, Row, Col } from 'react-bootstrap';\r\nimport CharacterCard from './CharacterCard';\r\nimport CharacterDatabase from './CharacterDatabase';\r\nimport CharacterEditor from './CharacterEditor';\r\nexport default class CharacterDisplay extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    CharacterDatabase.populateDatebaseFromLocalStorage();\r\n    this.state = {\r\n      charIdList: [...CharacterDatabase.getCharacterIdList()],\r\n      charToEdit: null\r\n    }\r\n  }\r\n  addCharacter = (art) => {\r\n    if (this.state.charToEdit && this.state.charToEdit.id === art.id) {\r\n      CharacterDatabase.updateCharacter(art);\r\n      this.setState({ charToEdit: null }, this.forceUpdate)\r\n    } else {\r\n      let id = CharacterDatabase.addCharacter(art)\r\n      //add the new Character at the beginning\r\n      this.setState((state) => ({ charIdList: [...state.charIdList, id] }))\r\n    }\r\n  }\r\n\r\n  deleteCharacter = (index) => {\r\n    CharacterDatabase.removeCharacterById(this.state.charIdList[index])\r\n    this.setState((state) => {\r\n      let charIdList = [...state.charIdList]\r\n      charIdList.splice(index, 1)\r\n      return { charIdList }\r\n    });\r\n  }\r\n  editCharacter = (index) =>\r\n    this.setState({ charToEdit: CharacterDatabase.getCharacter(this.state.charIdList[index]) })\r\n\r\n  cancelEditCharacter = () =>\r\n    this.setState({ charToEdit: null })\r\n\r\n  render() {\r\n    return (<Container>\r\n      <Row className=\"mb-2 no-gutters\"><Col>\r\n        <CharacterEditor\r\n          characterToEdit={this.state.charToEdit}\r\n          addCharacter={this.addCharacter}\r\n          cancelEdit={this.cancelEditCharacter}\r\n        />\r\n      </Col></Row>\r\n\r\n      <Row className=\"mb-2\">\r\n        {this.state.charIdList.map((id, index) =>\r\n          <Col key={id} lg={4} md={6} className=\"mb-2\">\r\n            <CharacterCard\r\n              characterData={CharacterDatabase.getCharacter(id)}\r\n              onDelete={() => this.deleteCharacter(index)}\r\n              onEdit={() => this.editCharacter(index)}\r\n            />\r\n          </Col>\r\n        )}\r\n      </Row>\r\n    </Container>)\r\n\r\n  }\r\n}","import { faDiscord, faPatreon, faPaypal } from '@fortawesome/free-brands-svg-icons';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport React from 'react';\r\nimport { Col, Row } from 'react-bootstrap';\r\nimport Nav from 'react-bootstrap/Nav';\r\nimport Navbar from 'react-bootstrap/Navbar';\r\nimport {\r\n  Link, Route, Switch\r\n} from \"react-router-dom\";\r\nimport './App.scss';\r\nimport ArtifactDisplay from './Artifact/ArtifactDisplay';\r\nimport BuildDisplay from './Build/BuildDisplay';\r\nimport CharacterDisplay from './Character/CharacterDisplay';\r\nimport { version } from \"../package.json\"\r\n\r\nfunction App() {\r\n  return (\r\n    <div className=\"h-100 d-flex flex-column\">\r\n      <div id=\"content\" className=\"flex-grow-1\">\r\n        <Navbar bg=\"dark\" variant=\"dark\" expand=\"md\">\r\n          <Navbar.Brand as={Link} to=\"/\">Genshin Optimizer</Navbar.Brand>\r\n          <Nav className=\"mr-auto\">\r\n            <Nav.Link as={Link} to=\"/artifact\">\r\n              Artifacts</Nav.Link>\r\n            <Nav.Link as={Link} to=\"/character\">Characters</Nav.Link>\r\n            <Nav.Link as={Link} to=\"/build\">Builds</Nav.Link>\r\n          </Nav>\r\n          <Nav>\r\n            <Nav.Link href={process.env.REACT_APP_PAYPAL_LINK} target=\"_blank\" ><FontAwesomeIcon icon={faPaypal} className=\"fa-fw\" /> PayPal</Nav.Link>\r\n            <Nav.Link href={process.env.REACT_APP_PATREON_LINK} target=\"_blank\" ><FontAwesomeIcon icon={faPatreon} className=\"fa-fw\" /> Patreon</Nav.Link>\r\n            <Nav.Link href={process.env.REACT_APP_DISCORD_LINK} target=\"_blank\" ><FontAwesomeIcon icon={faDiscord} className=\"fa-fw\" /> Discord</Nav.Link>\r\n          </Nav>\r\n        </Navbar>\r\n\r\n        <Switch>\r\n          <Route path=\"/artifact\" component={ArtifactDisplay} />\r\n          <Route path=\"/character\" component={CharacterDisplay} />\r\n          <Route path=\"/build\" component={BuildDisplay} />\r\n          <Route path=\"/\" component={ArtifactDisplay} />\r\n          {/* <Route exact path=\"/\" component={Home} /> */}\r\n        </Switch>\r\n\r\n      </div>\r\n      <Nav id=\"footer\" className=\"bg-dark\">\r\n        <Row className=\"w-100 ml-0 mr-0 mb-2 text-light d-flex justify-content-between\">\r\n          <Col xs={\"auto\"}>\r\n            <span > <small>Genshin Optimizer is not affiliated with or endorsed by miHoYo. </small></span>\r\n          </Col>\r\n          <Col xs={\"auto\"}>\r\n            <span  ><small > Genshin Optimizer Ver:{version} </small></span>\r\n          </Col>\r\n        </Row>\r\n      </Nav>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport { HashRouter } from 'react-router-dom';\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <HashRouter>\r\n      <App />\r\n    </HashRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}