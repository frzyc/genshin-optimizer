!function(){"use strict";var e={71184:function(e,n,r){var t=r(37762),a=r(93433),o=r(1413),i=r(74165),u=r(29439);function s(e,n){if(e&&n)return!Array.isArray(n)&&console.error(n),n.reduce((function(e,n){return null===e||void 0===e?void 0:e[n]}),e)}function c(e,n){return Object.fromEntries(e.map((function(e,r){return[e,n(e,r)]})))}function l(e,n){return Object.fromEntries(Object.entries(e).map((function(e,r){var t=(0,u.Z)(e,2),a=t[0],o=t[1];return[a,n(o,a,r)]})))}var f=(0,i.Z)().mark((function e(n,r){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n;case 1:if(!(t<=r)){e.next=7;break}return e.next=4,t;case 4:t++,e.next=1;break;case 7:case"end":return e.stop()}}),e)}));function d(e,n){return(0,a.Z)(f(e,n))}function p(e){throw new Error("Should not reach this with value ".concat(e))}h(NaN,{key:"TODO"}),v(1),v(0),h("none");function h(e,n){return{operation:"const",operands:[],value:e,info:n}}function v(e,n){return e>=Number.MAX_VALUE/100&&(e=1/0),e<=-Number.MAX_VALUE/100&&(e=-1/0),h(e,(0,o.Z)({key:"_"},n))}function m(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return{operation:"min",operands:k(n)}}function b(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return{operation:"max",operands:k(n)}}function g(e,n){return{operation:"read",operands:[],path:e,info:n,type:"number"}}function k(e){return e.map((function(e){return"object"===typeof e?e:h(e)}))}function w(e,n,r){var t=new Set,a=new Set;e.forEach((function e(o){a.has(o)||(t.has(o)?console.error("Found cyclical dependency during formula traversal"):(t.add(o),n(o),o.operands.forEach(e),r(o),t.delete(o),a.add(o)))}))}function y(e,n,r){var t=new Set,a=new Map,i=new Map;function u(e){var s=a.get(e);if(s)return s;s=n(e);var c=i.get(s);return c||(t.has(s)?(console.error("Found cyclical dependency during formula mapping"),h(NaN)):(t.add(s),c=r(function(e){var n=e.operands.map(u);return Z(n,e.operands)?e:(0,o.Z)((0,o.Z)({},e),{},{operands:n})}(s),e),t.delete(s),a.set(e,c),i.set(s,c),c))}var s=e.map(u);return Z(s,e)?e:s}function Z(e,n){return void 0===e?void 0===n:void 0!==n&&(e.length===n.length&&e.every((function(e,r){return e===n[r]})))}var x={min:function(e){return Math.min.apply(Math,(0,a.Z)(e))},max:function(e){return Math.max.apply(Math,(0,a.Z)(e))},add:function(e){return e.reduce((function(e,n){return e+n}),0)},mul:function(e){return e.reduce((function(e,n){return e*n}),1)}},S=(0,o.Z)((0,o.Z)({},x),{},{res:function(e){var n=(0,u.Z)(e,1)[0];return n<0?1-n/2:n>=.75?1/(4*n+1):1-n},sum_frac:function(e){return e[0]/e.reduce((function(e,n){return e+n}))},threshold:function(e){var n=(0,u.Z)(e,4),r=n[0],t=n[1],a=n[2],o=n[3];return r>=t?a:o}}),M=new Set(Object.keys(x));function O(e){return y(e,(function(e){return e}),(function(e){var n=e;if(M.has(e.operation)){var r=e,t=r.operation,a=!1,i=r.operands.flatMap((function(e){return e.operation===t?(a=!0,e.operands):[e]}));n=a?(0,o.Z)((0,o.Z)({},r),{},{operands:i}):r}return n}))}function E(e){function n(e){var n,r=new Map,a=(0,t.Z)(e);try{for(a.s();!(n=a.n()).done;){var o,i=n.value;r.set(i,(null!==(o=r.get(i))&&void 0!==o?o:0)+1)}}catch(u){a.e(u)}finally{a.f()}return r}for(var r={common:{counts:new Map,formulas:new Set,operation:"add"}},i=function(){for(var i,s=void 0,c={operation:r.common.operation,operands:(i=r.common.counts,(0,a.Z)(i).flatMap((function(e){var n=(0,u.Z)(e,2),r=n[0],t=n[1];return Array(t).fill(r)})))},l=new Map,f=0,d=Object.keys(x);f<d.length;f++){var p=d[f];l.set(p,[])}if(e=y(e,(function(e){if(r.common.formulas.has(e)){var n=e,t=new Map(r.common.counts),a=n.operands.filter((function(e){var n=t.get(e);return!n||(t.set(e,n-1),!1)}));return a.length?(a.push(c),(0,o.Z)((0,o.Z)({},n),{},{operands:a})):c}return e}),(function(e){if(!M.has(e.operation))return e;var r=e;if(s){if(s.operation===r.operation){var a,o=n(r.operands),i=new Map,c=s.counts,f=0,d=(0,t.Z)(o.entries());try{for(d.s();!(a=d.n()).done;){var p,h=(0,u.Z)(a.value,2),v=h[0],m=h[1],b=Math.min(m,null!==(p=c.get(v))&&void 0!==p?p:0);b?(i.set(v,b),f+=b):i.delete(v)}}catch(P){d.e(P)}finally{d.f()}f>1&&(s.counts=i,s.formulas.add(r))}}else{var g,k=l.get(r.operation),w=n(r.operands),y=(0,t.Z)(k);try{for(y.s();!(g=y.n()).done;){var Z,x=(0,u.Z)(g.value,2),S=x[0],O=x[1],E=0,T=new Map,j=(0,t.Z)(O.entries());try{for(j.s();!(Z=j.n()).done;){var F,A=(0,u.Z)(Z.value,2),B=A[0],R=A[1],D=Math.min(R,null!==(F=w.get(B))&&void 0!==F?F:0);D&&(T.set(B,D),E+=D)}}catch(P){j.e(P)}finally{j.f()}if(E>1){s={counts:T,formulas:new Set([r,S]),operation:r.operation},l.clear();break}}}catch(P){y.e(P)}finally{y.f()}s||k.push([r,w])}return r})),!s)return"break";r.common=s};;){if("break"===i())break}return e}function T(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return!1},i={data:[],processed:new Map},c=new Map([[i,new Map]]);function l(e,n){var f,d=n.processed.get(e);if(d)return d;var v,m=e.operation;switch(m){case"const":return e;case"add":case"mul":case"max":case"min":var b=S[m],g=[],k=e.operands.filter((function(e){var r=l(e,n);return"const"!==r.operation||(g.push(r.value),!1)})).map((function(e){return l(e,n)})),w=b(g);if(isFinite(w)){if("mul"===m&&0===w){v=h(w);break}}else if("mul"!==m&&("max"!==m||w>0)&&("min"!==m||w<0)){v=h(w);break}w!==b([])&&k.push(h(w)),v=k.length<=1?null!==(f=k[0])&&void 0!==f?f:h(b([])):{operation:m,operands:k};break;case"res":case"sum_frac":var y=e.operands.map((function(e){return l(e,n)})),Z=S[m];v=y.every((function(e){return"const"===e.operation}))?h(Z(y.map((function(e){return e.value})))):(0,o.Z)((0,o.Z)({},e),{},{operands:y});break;case"lookup":var x=l(e.operands[0],n);if("const"===x.operation){var M,O=null!==(M=e.table[x.value])&&void 0!==M?M:e.operands[1];if(O){v=l(O,n);break}}throw new Error("Unsupported ".concat(m," node while folding"));case"prio":var E=e.operands.find((function(e){var r=l(e,n);if("const"!==r.operation)throw new Error("Unsupported ".concat(m," node while folding"));return void 0!==r.value}));v=E?l(E,n):h(void 0);break;case"small":var T,j,F=void 0,A=(0,t.Z)(e.operands);try{for(A.s();!(j=A.n()).done;){var B,R=l(j.value,n);if("const"!==R.operation)throw new Error("Unsupported ".concat(m," node while folding"));(void 0===(null===(B=F)||void 0===B?void 0:B.value)||void 0!==R.value&&R.value<F.value)&&(F=R)}}catch(Q){A.e(Q)}finally{A.f()}v=null!==(T=F)&&void 0!==T?T:h(void 0);break;case"match":var D=e.operands.map((function(e){return l(e,n)})),P=(0,u.Z)(D,4),N=P[0],C=P[1],z=P[2],G=P[3];if("const"!==N.operation||"const"!==C.operation)throw new Error("Unsupported ".concat(m," node while folding"));v=N.value===C.value?z:G;break;case"threshold":var K=e.operands.map((function(e){return l(e,n)})),H=(0,u.Z)(K,4),L=H[0],W=H[1],q=H[2],V=H[3];v="const"===q.operation&&"const"===V.operation&&q.value===V.value?q:"const"===L.operation&&"const"===W.operation?L.value>=W.value?q:V:(0,o.Z)((0,o.Z)({},e),{},{operands:[L,W,q,V]});break;case"subscript":var Y=e.operands.map((function(e){return l(e,n)})),_=(0,u.Z)(Y,1)[0];v="const"===_.operation?h(e.list[_.value]):(0,o.Z)((0,o.Z)({},e),{},{operands:[_]});break;case"read":var U=n.data.map((function(n){return s(n,e.path)})).filter((function(e){return e}));if(0===U.length)if(r(e)){var I=e.accu;v=void 0===I||"small"===I?"string"===e.type?h(void 0):h(NaN):h(S[I]([]))}else v=e;else v=void 0===e.accu||1===U.length?l(U[U.length-1],n):l({operation:e.accu,operands:U},n);break;case"data":e.reset&&(n=i);var X=c.get(n),J=X.get(e.data);J||(J={data:[].concat((0,a.Z)(n.data),[e.data]),processed:new Map},c.set(J,new Map),X.set(e.data,J)),v=l(e.operands[0],J);break;default:p(m)}return n.processed.set(e,v),v}var f={data:[n],processed:new Map};return c.set(f,new Map),c.get(i).set(n,f),e.map((function(e){return l(e,f)}))}var j=["flower","plume","sands","goblet","circlet"],F=(["physical"].concat(["anemo","geo","electro","hydro","pyro","cryo","dendro"]),["Albedo","Amber","Barbara","Beidou","Bennett","Chongyun","Diluc","Diona","Fischl","Ganyu","HuTao","Jean","Kaeya","Keqing","Klee","KujouSara","KukiShinobu","Lisa","Mona","Ningguang","Noelle","Qiqi","Razor","Sucrose","Tartaglia","RaidenShogun","Venti","Xiangling","Xiao","Xingqiu","Xinyan","Rosaria","Yanfei","Eula","KaedeharaKazuha","KamisatoAyaka","Sayu","Shenhe","Yoimiya","Aloy","SangonomiyaKokomi","Thoma","Gorou","AratakiItto","YaeMiko","YunJin","Zhongli","KamisatoAyato","Yelan","ShikanoinHeizou","Collei","Dori","Tighnari"]),A=([].concat(F,["Traveler"]),["TravelerAnemo","TravelerGeo","TravelerElectro","TravelerDendro"]);[].concat(F,A),[].concat(F,["TravelerAnemoF","TravelerGeoF","TravelerElectroF","TravelerDendroF"],["TravelerAnemoM","TravelerGeoM","TravelerElectroM","TravelerDendroM"]),[].concat(["AmenomaKageuchi","AquilaFavonia","BlackcliffLongsword","CinnabarSpindle","CoolSteel","KagotsurubeIsshin","DarkIronSword","DullBlade","FavoniusSword","FesteringDesire","FilletBlade","FreedomSworn","HaranGeppakuFutsu","HarbingerOfDawn","IronSting","LionsRoar","MistsplitterReforged","PrimordialJadeCutter","PrototypeRancour","RoyalLongsword","SacrificialSword","SapwoodBlade","SilverSword","SkyriderSword","SkywardBlade","SummitShaper","SwordOfDescension","TheAlleyFlash","TheBlackSword","TheFlute","TravelersHandySword"],["Akuoumaru","BlackcliffSlasher","BloodtaintedGreatsword","DebateClub","FavoniusGreatsword","FerrousShadow","ForestRegalia","KatsuragikiriNagamasa","LithicBlade","LuxuriousSeaLord","OldMercsPal","PrototypeArchaic","Rainslasher","RedhornStonethresher","RoyalGreatsword","SacrificialGreatsword","SerpentSpine","SkyriderGreatsword","SkywardPride","SnowTombedStarsilver","SongOfBrokenPines","TheBell","TheUnforged","WasterGreatsword","Whiteblind","WhiteIronGreatsword","WolfsGravestone"],["BeginnersProtector","BlackcliffPole","BlackTassel","CalamityQueller","CrescentPike","Deathmatch","DragonsBane","DragonspineSpear","EngulfingLightning","FavoniusLance","Halberd","IronPoint","KitainCrossSpear","LithicSpear","Moonpiercer","PrimordialJadeWingedSpear","PrototypeStarglitter","RoyalSpear","SkywardSpine","StaffOfHoma","TheCatch","VortexVanquisher","WavebreakersFin","WhiteTassel"],["AlleyHunter","AmosBow","AquaSimulacra","BlackcliffWarbow","CompoundBow","ElegyForTheEnd","FadingTwilight","FavoniusWarbow","Hamayumi","HuntersBow","HuntersPath","KingsSquire","Messenger","MitternachtsWaltz","MouunsMoon","PolarStar","Predator","PrototypeCrescent","RavenBow","RecurveBow","RoyalBow","Rust","SacrificialBow","SeasonedHuntersBow","SharpshootersOath","SkywardHarp","Slingshot","TheStringless","TheViridescentHunt","ThunderingPulse","EndOfTheLine","WindblumeOde"],["ApprenticesNotes","BlackcliffAgate","DodocoTales","EmeraldOrb","EverlastingMoonglow","EyeOfPerception","FavoniusCodex","Frostbearer","FruitOfFulfillment","HakushinRing","KagurasVerity","LostPrayerToTheSacredWinds","MagicGuide","MappaMare","MemoryOfDust","OathswornEye","OtherworldlyStory","PocketGrimoire","PrototypeAmber","RoyalGrimoire","SacrificialFragments","SkywardAtlas","SolarPearl","TheWidsith","ThrillingTalesOfDragonSlayers","TwinNephrite","WineAndSong"]);var B=(0,i.Z)().mark(q),R=(0,i.Z)().mark(Y);function D(e,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=new Set,s=new Set;function f(e,n){n?i.add(e):e.operands.forEach((function(e){var n=e;i.has(n)&&s.add(n)}))}var d=new Set;if(w(e,(function(e){}),(function(e){var n=e.operation;switch(n){case"read":if("number"!==e.type||"dyn"!==e.path[0]||"add"!==e.accu)throw new Error("Found unsupported ".concat(n," node at path ").concat(e.path," when computing affine nodes"));d.add(e.path[1]),f(e,!0);break;case"add":f(e,e.operands.every((function(e){return i.has(e)})));break;case"mul":var r=e.operands.filter((function(e){return"const"!==e.operation}));f(e,0===r.length||1===r.length&&i.has(r[0]));break;case"const":if("string"===typeof e.value||void 0===e.value)throw new Error("Found constant ".concat(e.value," while compacting"));f(e,!0);break;case"res":case"threshold":case"sum_frac":case"max":case"min":f(e,!1);break;case"data":case"subscript":case"lookup":case"match":case"prio":case"small":throw new Error("Found unsupported ".concat(n," node when computing affine nodes"));default:p(n)}})),(0,a.Z)(s).every((function(e){var n=e.operation;return"read"===n||"const"===n}))&&Object.keys(n.base).length===d.size)return{nodes:e,arts:n};var v=-1;function m(){for(;d.has("".concat(++v)););return"".concat(v)}e.forEach((function(e){return i.has(e)&&s.add(e)}));var b=(0,a.Z)(s).filter((function(e){return"const"!==e.operation})),k=new Map(b.map((function(e){return[e,r||"read"!==e.operation||"dyn"!==e.path[0]?(0,o.Z)((0,o.Z)({},g(["dyn","".concat(m())])),{},{accu:"add"}):e]})));function Z(e){var n=T((0,a.Z)(k.keys()),{dyn:l(e,(function(e){return h(e)}))},(function(e){return!0}));return Object.fromEntries((0,a.Z)(k.values()).map((function(e,r){return[e.path[1],n[r].value]})))}for(var x={nodes:e=y(e,(function(e){var n;return null!==(n=k.get(e))&&void 0!==n?n:e}),(function(e){return e})),arts:{base:Z(n.base),values:c(j,(function(e){return n.values[e].map((function(e){return{id:e.id,set:e.set,values:Z(e.values)}}))}))}},S=Object.entries(Z({})),M=0,O=Object.values(x.arts.values);M<O.length;M++){var E,F=O[M],A=(0,t.Z)(F);try{for(A.s();!(E=A.n()).done;){var B,R=E.value.values,D=(0,t.Z)(S);try{for(D.s();!(B=D.n()).done;){var P=(0,u.Z)(B.value,2),N=P[0],C=P[1];R[N]-=C}}catch(z){D.e(z)}finally{D.f()}}}catch(z){A.e(z)}finally{A.f()}}return x}function P(e,n,r){var t,a=!1,o=!(null!==(t=r.rainbow)&&void 0!==t&&t.length),i=new Set(Object.entries(r).filter((function(e){var n=(0,u.Z)(e,2);n[0];return n[1].length})).map((function(e){return(0,u.Z)(e,1)[0]}))),s=new Set(Object.entries(r).filter((function(e){var n=(0,u.Z)(e,2),r=(n[0],n[1]);return r.includes(2)&&!r.includes(4)})).map((function(e){return(0,u.Z)(e,1)[0]}))),l=c(j,(function(r){var t=e.values[r],c=t.filter((function(e){var r=0;return t.every((function(t){var a=Object.entries(t.values).every((function(n){var r=(0,u.Z)(n,2),t=r[0];return r[1]>=e.values[t]})),c=Object.entries(t.values).some((function(n){var r=(0,u.Z)(n,2),t=r[0];return r[1]>e.values[t]}));return a&&(c||t.id>e.id)&&(o&&!i.has(t.set)&&!s.has(e.set)||e.set===t.set)&&r++,r<n}))}));return c.length!==t.length&&(a=!0),c}));return a?{base:e.base,values:l}:e}function N(e,n,r){for(var t=Object.fromEntries(Object.entries(n.base).map((function(e){var n=(0,u.Z)(e,2),r=n[0],t=n[1];return[r,{min:t,max:t}]}))),a={arts:n},o=function(){var n=c(j,(function(e){return G(a.arts.values[e])})),o=c(j,(function(e){return z(Object.entries(n).map((function(n){return n[0]===e?t:n[1]})).filter((function(e){return e})))})),i=!1,u=c(j,(function(n){var t=a.arts.values[n].filter((function(t){var a=z([G([t]),o[n]]),i=K(e,a);return e.every((function(e,n){var t;return i.get(e).max>=(null!==(t=r[n])&&void 0!==t?t:-1/0)}))}));return t.length!==a.arts.values[n].length&&(i=!0),t}));if(!i)return"break";a.arts={base:a.arts.base,values:u}};;){if("break"===o())break}return a.arts}function C(e,n){var r=K(e,z([Object.fromEntries(Object.entries(n.base).map((function(e){var n=(0,u.Z)(e,2),r=n[0],t=n[1];return[r,{min:t,max:t}]})))].concat((0,a.Z)(Object.values(n.values).map((function(e){return G(e)}))))));return y(e,(function(e){var n=e.operation,t=e.operands.map((function(e){return r.get(e)}));switch(n){case"threshold":var o=(0,u.Z)(t,4),i=o[0],s=o[1],c=o[2],l=o[3];if(i.min>=s.max)return e.operands[2];if(i.max<s.min)return e.operands[3];if(c.max===c.min&&l.max===l.min&&c.min===l.min&&isFinite(c.min))return h(c.max);break;case"min":var f=e.operands.filter((function(e,n){var r=t[n];return t.every((function(e,n){return r.min<=e.max}))}));if(f.length<t.length)return m.apply(void 0,(0,a.Z)(f));break;case"max":var d=e.operands.filter((function(e,n){var r=t[n];return t.every((function(e){return r.max>=e.min}))}));if(d.length<t.length)return b.apply(void 0,(0,a.Z)(d))}return e}),(function(e){return e}))}function z(e){var n={};return e.forEach((function(e){Object.entries(e).forEach((function(e){var r=(0,u.Z)(e,2),t=r[0],a=r[1];n[t]?(n[t].min+=a.min,n[t].max+=a.max):n[t]=(0,o.Z)({},a)}))})),n}function G(e){var n={};return e.length&&(Object.keys(e[0].values).filter((function(n){return e.every((function(e){return e.values[n]}))})).forEach((function(r){return n[r]={min:e[0].values[r],max:e[0].values[r]}})),e.forEach((function(e){for(var r=e.values,t=0,a=Object.entries(r);t<a.length;t++){var o=(0,u.Z)(a[t],2),i=o[0],s=o[1];n[i]?(n[i].max<s&&(n[i].max=s),n[i].min>s&&(n[i].min=s)):n[i]={min:0,max:s}}}))),n}function K(e,n){var r=new Map;return w(e,(function(e){}),(function(e){var t,a,o=e,i=o.operation,s=o.operands.map((function(e){return r.get(e)}));switch(i){case"read":if("dyn"!==o.path[0])throw new Error("Found non-dyn path ".concat(o.path," while computing range"));a=null!==(t=n[o.path[1]])&&void 0!==t?t:{min:0,max:0};break;case"const":a=H([o.value]);break;case"subscript":a=H(o.list);break;case"add":case"min":case"max":a={min:S[i](s.map((function(e){return e.min}))),max:S[i](s.map((function(e){return e.max})))};break;case"res":a={min:S[i]([s[0].max]),max:S[i]([s[0].min])};break;case"mul":a=s.reduce((function(e,n){return H([e.min*n.min,e.min*n.max,e.max*n.min,e.max*n.max])}));break;case"threshold":a=s[0].min>=s[1].max?s[2]:s[0].max<s[1].min?s[3]:H([],[s[2],s[3]]);break;case"sum_frac":var c=(0,u.Z)(s,2),l=c[0],f=c[1],d={min:l.min+f.min,max:l.max+f.max};a=d.min<=0&&d.max>=0?l.min<=0&&l.max>=0?{min:NaN,max:NaN}:{min:-1/0,max:1/0}:H([l.min/d.min,l.min/d.max,l.max/d.min,l.max/d.max]);break;case"data":case"lookup":case"match":throw new Error("Unsupported ".concat(i," node"));default:p(i)}r.set(o,a)})),r}function H(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=Math.max.apply(Math,(0,a.Z)(e).concat((0,a.Z)(n.map((function(e){return e.max}))))),t=Math.min.apply(Math,(0,a.Z)(e).concat((0,a.Z)(n.map((function(e){return e.min})))));return{min:t,max:r}}function L(e,n){return{base:e.base,values:c(j,(function(r){var t=n[r];switch(t.kind){case"id":return e.values[r].filter((function(e){return t.ids.has(e.id)}));case"exclude":return e.values[r].filter((function(e){return!t.sets.has(e.set)}));case"required":return e.values[r].filter((function(e){return t.sets.has(e.set)}))}}))}}function W(e){return j.reduce((function(n,r){return n*e.values[r].length}),1)}function q(e,n){var r,o,s,c,f,d,p;return(0,i.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:r=l(n.values,(function(e){return new Set(e.map((function(e){return e.set})))})),o=(0,t.Z)(e),i.prev=2,o.s();case 4:if((s=o.n()).done){i.next=19;break}c=s.value,f=function(){var e=(0,u.Z)(p[d],2),n=e[0],t=e[1],o=r[n];switch(t.kind){case"required":if((0,a.Z)(t.sets).every((function(e){return!o.has(e)})))return"continue|filter_loop";break;case"exclude":if((0,a.Z)(o).every((function(e){return t.sets.has(e)})))return"continue|filter_loop"}},d=0,p=Object.entries(c);case 8:if(!(d<p.length)){i.next=15;break}if("continue|filter_loop"!==f()){i.next=12;break}return i.abrupt("continue",17);case 12:d++,i.next=8;break;case 15:return i.next=17,c;case 17:i.next=4;break;case 19:i.next=24;break;case 21:i.prev=21,i.t0=i.catch(2),o.e(i.t0);case 24:return i.prev=24,o.f(),i.finish(24);case 27:case"end":return i.stop()}}),B,null,[[2,21,24,27]])}function V(e){return new Set(null!==e&&void 0!==e&&e.includes(2)?e.includes(4)?[0,1]:[0,1,4,5]:null!==e&&void 0!==e&&e.includes(4)?[0,1,2,3]:[0,1,2,3,4,5])}function Y(e,n){var r,s,f,p,h,v,m,b,g,k,w,y,Z,x,S,M;return(0,i.Z)().wrap((function(O){for(;;)switch(O.prev=O.next){case 0:for(Z=function(e){var n,u,c,l,f,p,h,v,m,b,g;return(0,i.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:g=function(e){var n,r,c,l,p,h,v,m,b,Z,x,S,M,O;return(0,i.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:n=f.length-e,r=[],c=[],l=[],p=0,h=(0,t.Z)(s),i.prev=3,m=function(){var e=v.value,t=y[e],o=w[e];if(!t)return"continue";d(1,n).every((function(e){return!t.has(o+e)}))?l.push(e):t.has(o)?d(0,n).some((function(e){return!t.has(o+e)}))&&r.push(e):(p+=(0,a.Z)(t).find((function(e){return e>o}))-o,c.push(e))},h.s();case 6:if((v=h.n()).done){i.next=12;break}if("continue"!==m()){i.next=10;break}return i.abrupt("continue",10);case 10:i.next=6;break;case 12:i.next=17;break;case 14:i.prev=14,i.t0=i.catch(3),h.e(i.t0);case 17:return i.prev=17,h.f(),i.finish(17);case 20:if(!(p>n)){i.next=22;break}return i.abrupt("return");case 22:if(e!==f.length){i.next=26;break}return i.next=25,(0,o.Z)({},k);case 25:return i.abrupt("return");case 26:if(p!==n){i.next=47;break}b=(0,t.Z)(c),i.prev=28,b.s();case 30:if((Z=b.n()).done){i.next=38;break}return x=Z.value,w[x]++,k[j[f[e]]]={kind:"required",sets:new Set([x])},i.delegateYield(g(e+1),"t1",35);case 35:w[x]--;case 36:i.next=30;break;case 38:i.next=43;break;case 40:i.prev=40,i.t2=i.catch(28),b.e(i.t2);case 43:return i.prev=43,b.f(),i.finish(43);case 46:return i.abrupt("return");case 47:S=0,M=[].concat(r,c);case 48:if(!(S<M.length)){i.next=57;break}return O=M[S],w[O]++,k[j[f[e]]]={kind:"required",sets:new Set([O])},i.delegateYield(g(e+1),"t3",53);case 53:w[O]--;case 54:S++,i.next=48;break;case 57:return k[j[f[e]]]={kind:"exclude",sets:new Set([].concat(c,l,r))},i.delegateYield(g(e+1),"t4",59);case 59:case"end":return i.stop()}}),u,null,[[3,14,17,20],[28,40,43,46]])},b=function(e){var r,a,o;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e!==l.length){n.next=3;break}return n.delegateYield(g(0),"t0",2);case 2:return n.abrupt("return",n.t0);case 3:r=(0,t.Z)(s),n.prev=4,o=(0,i.Z)().mark((function n(){var r,t,o,u,s;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=a.value,!c.has(r)){n.next=3;break}return n.abrupt("return","continue");case 3:if(t=l[e].length,o=y[r],u=0,!o||o.has(t)){n.next=9;break}if(!((u=(null!==(s=d(t+1,5).find((function(e){return o.has(e)})))&&void 0!==s?s:6)-t)>m)){n.next=9;break}return n.abrupt("return","continue");case 9:return c.add(r),w[r]=l[e].length,l[e].forEach((function(e){return k[j[e]]={kind:"required",sets:new Set([r])}})),m-=u,n.delegateYield(b(e+1),"t0",14);case 14:m+=u,w[r]=0,c.delete(r);case 17:case"end":return n.stop()}}),n)})),r.s();case 7:if((a=r.n()).done){n.next=14;break}return n.delegateYield(o(),"t1",9);case 9:if("continue"!==n.t1){n.next=12;break}return n.abrupt("continue",12);case 12:n.next=7;break;case 14:n.next=19;break;case 16:n.prev=16,n.t2=n.catch(4),r.e(n.t2);case 19:return n.prev=19,r.f(),n.finish(19);case 22:case"end":return n.stop()}}),n,null,[[4,16,19,22]])},n=(0,i.Z)().mark(b),u=(0,i.Z)().mark(g),c=new Set,l=[],f=[],p=(0,t.Z)(e);try{for(p.s();!(h=p.n()).done;)v=h.value,l.push([]),5===v?f.push(l.length-1):l[v].push(l.length-1)}catch(Z){p.e(Z)}finally{p.f()}return l=l.filter((function(e){return e.length})).sort((function(e,n){return n.length-e.length})),m=f.length,r.delegateYield(b(0),"t0",10);case 10:case"end":return r.stop()}}),r)},v=function(e,n){if(!d(n+1,4).some((function(n){return 5!==e[n]})))return(e=(0,a.Z)(e))[n]=5,e.reduce((function(e,n){return 6*e+n}),0)},h=function(e,n,r){if(5!==e.length){var o,i=(0,t.Z)(n);try{var u=function(){var t=o.value;h([].concat((0,a.Z)(e),[t]),n,r.filter((function(e){return e!==t})))};for(i.s();!(o=i.n()).done;)u()}catch(s){i.e(s)}finally{i.f()}h([].concat((0,a.Z)(e),[e.length]),new Set([].concat((0,a.Z)(n),[e.length])),[].concat((0,a.Z)(r),[e.length]))}else f.has(r.length)&&p.push(e)},r=(0,i.Z)().mark(Z),s=(0,a.Z)(new Set(n)),f=V(e.rainbow),p=[],h([0],new Set([0]),[0]),m=function(e){var n,r=new Map,o=(0,t.Z)(p);try{for(o.s();!(n=o.n()).done;){var i,s=n.value,c=v(s,e);void 0!==c&&r.set(c,(null!==(i=r.get(c))&&void 0!==i?i:new Set(s.slice(0,e)).size+1)-1)}}catch(h){o.e(h)}finally{o.f()}var l,f=(0,t.Z)(r.entries());try{var d=function(){var n=(0,u.Z)(l.value,2),r=n[0];if(0===n[1]){var t=(0,a.Z)(p.find((function(n){return v(n,e)===r})));t[e]=5,p=p.filter((function(n){return v(n,e)!==r})),p.push(t)}};for(f.s();!(l=f.n()).done;)d()}catch(h){f.e(h)}finally{f.f()}},b=4;b>=0;b--)m(b);g={kind:"exclude",sets:new Set},k=c(j,(function(e){return g})),w=(0,o.Z)((0,o.Z)({},l(e,(function(e){return 0}))),c(s,(function(e){return 0}))),y=l(e,V),x=(0,t.Z)(p),O.prev=14,x.s();case 16:if((S=x.n()).done){O.next=21;break}return M=S.value,O.delegateYield(Z(M),"t0",19);case 19:O.next=16;break;case 21:O.next=26;break;case 23:O.prev=23,O.t1=O.catch(14),x.e(O.t1);case 26:return O.prev=26,x.f(),O.finish(26);case 29:case"end":return O.stop()}}),R,null,[[14,23,26,29]])}var _,U,I,X=r(15671),J=r(43144),Q=function(){function e(n,r){var t=this,a=n.arts,i=n.optimizationTarget,u=n.filters,s=n.plotBase,c=n.maxBuilds;(0,X.Z)(this,e),this.builds=[],this.buildValues=void 0,this.plotData=void 0,this.threshold=-1/0,this.maxBuilds=void 0,this.min=void 0,this.arts=void 0,this.nodes=void 0,this.callback=void 0,this.interimReport=function(e){t.refresh(!1),t.callback((0,o.Z)({command:"interim",buildValues:t.buildValues},e)),t.buildValues=void 0,e.tested=0,e.failed=0,e.skipped=0},this.arts=a,this.min=u.map((function(e){return e.min})),this.maxBuilds=c,this.callback=r,this.nodes=u.map((function(e){return e.value})),this.nodes.push(i),s&&(this.plotData={},this.nodes.push(s)),this.nodes=function(e,n){return E(e=O(e=T(e,n,arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return!1})))}(this.nodes,{},(function(e){return!1}))}return(0,J.Z)(e,[{key:"compute",value:function(e,n){this.threshold>e&&(this.threshold=e);var r=this.min,t=this.interimReport,i=this,s=L(this.arts,n),c=W(s),l=this.nodes,f=function(e,n,r,t,a,i){for(var u=i,s={pruneNodeRange:!0},c={pruneNodeRange:!0},l={reaffine:!0},f={pruneOrder:!0,pruneArtRange:!0,pruneNodeRange:!0},d=0;Object.values(u).some((function(e){return e}))&&d++<20;){if(u.pruneOrder){delete u.pruneOrder;var p=P(r,t,a);r!==p&&(r=p,u=(0,o.Z)((0,o.Z)({},u),s))}if(u.pruneArtRange){delete u.pruneArtRange;var h=N(e,r,n);r!==h&&(r=h,u=(0,o.Z)((0,o.Z)({},u),c))}if(u.pruneNodeRange){delete u.pruneNodeRange;var v=C(e,r);e!==v&&(e=v,u=(0,o.Z)((0,o.Z)({},u),l))}if(u.reaffine){delete u.reaffine;var m=D(e,r),b=m.nodes,g=m.arts;e===b&&r===g||(e=b,r=g,u=(0,o.Z)((0,o.Z)({},u),f))}}return{nodes:e,arts:r}}(l,r,s,this.maxBuilds,{},{pruneArtRange:!0,pruneNodeRange:!0});l=f.nodes,s=f.arts;var d=Object.values(s.values).sort((function(e,n){return e.length-n.length})),h=function(e,n,r,t){var o='\n"use strict";\n// copied from the code above\nfunction res(res) {\n  if (res < 0) return 1 - res / 2\n  else if (res >= 0.75) return 1 / (res * 4 + 1)\n  return 1 - res\n}\nconst x0=0',i=1,s=new Map;return w(e,(function(e){}),(function(e){var c=e.operation,l=e.operands,f="x".concat(i++),d=l.map((function(e){return s.get(e)}));switch(s.set(e,f),c){case"read":var h=r(e),v=new Array(t).fill(null).map((function(e,n){return"(b[".concat(n,'].values["').concat(h,'"] ?? 0)')}));n[h]&&0!==n[h]&&(v=[n[h].toString()].concat((0,a.Z)(v))),o+=",".concat(f,"=").concat(v.join("+"));break;case"const":s.set(e,"(".concat(e.value,")"));break;case"add":case"mul":o+=",".concat(f,"=").concat(d.join("add"===c?"+":"*"));break;case"min":case"max":o+=",".concat(f,"=Math.").concat(c,"(").concat(d,")");break;case"threshold":var m=(0,u.Z)(d,4),b=m[0],g=m[1],k=m[2],w=m[3];o+=",".concat(f,"=(").concat(b,">=").concat(g,")?").concat(k,":").concat(w);break;case"res":o+=",".concat(f,"=res(").concat(d[0],")");break;case"sum_frac":o+=",".concat(f,"=").concat(d[0],"/(").concat(d[0],"+").concat(d[1],")");break;case"match":case"lookup":case"subscript":case"prio":case"small":case"data":throw new Error("Unsupported ".concat(c," node in precompute"));default:p(c)}})),o+=";\nreturn [".concat(e.map((function(e){return s.get(e)})),"]"),new Function("b",o)}(l,s.base,(function(e){return e.path[1]}),d.length),v=Array(d.length),m={tested:0,failed:0,skipped:c-W(s)};!function e(n){if(n<0){var a=h(v);if(r.every((function(e,n){return e<=a[n]}))){var o,u=a[r.length],s=i.builds,c=i.plotData;if(u>=i.threshold&&(o={value:u,artifactIds:v.map((function(e){return e.id}))},s.push(o)),c){var l=a[r.length+1];(!c[l]||c[l].value<u)&&(o||(o={value:u,artifactIds:v.map((function(e){return e.id}))}),o.plot=l,c[l]=o)}}else m.failed+=1}else d[n].forEach((function(r){v[n]=r,e(n-1)})),0===n&&(m.tested+=d[0].length,m.tested>65536&&t(m))}(d.length-1),this.interimReport(m)}},{key:"refresh",value:function(e){var n,r,o=this.maxBuilds;(Object.keys(null!==(n=this.plotData)&&void 0!==n?n:{}).length>=1e5&&(this.plotData=function(e){for(var n=.01,r=new Set(e.flatMap((function(e){return Object.values(e).map((function(e){return Math.round(e.plot/n)}))})));r.size>1500;)n*=2,r=new Set((0,a.Z)(r).map((function(e){return Math.round(e/2)})));var o,i={},u=(0,t.Z)(e);try{for(u.s();!(o=u.n()).done;)for(var s=o.value,c=0,l=Object.values(s);c<l.length;c++){var f=l[c],d=Math.round(f.plot/n)*n;(!i[d]||i[d].value<f.value)&&(i[d]=f)}}catch(p){u.e(p)}finally{u.f()}return i}([this.plotData])),this.builds.length>=1e3||e)&&(this.builds=this.builds.sort((function(e,n){return n.value-e.value})).slice(0,o),this.buildValues=this.builds.map((function(e){return e.value})),this.threshold=Math.max(this.threshold,null!==(r=this.buildValues[o-1])&&void 0!==r?r:-1/0))}}]),e}(),$=r(4942),ee=function(){function e(n,r){var t=n.arts,a=n.optimizationTarget,o=n.filters;(0,X.Z)(this,e),this.min=void 0,this.arts=void 0,this.nodes=void 0,this.filters=[],this.callback=void 0,this.arts=t,this.min=o.map((function(e){return e.min})),this.nodes=o.map((function(e){return e.value})),this.callback=r,this.min.push(-1/0),this.nodes.push(a)}return(0,J.Z)(e,[{key:"addFilter",value:function(e){var n=W(L(this.arts,e));this.filters.push({count:n,filter:e})}},{key:"split",value:function(e,n){var r=this;for(this.min[this.min.length-1]>e&&(this.min[this.min.length-1]=e);this.filters.length;){var t=this.filters.pop(),a=t.count,o=t.filter;if(a<=n)return{count:a,filter:o};ne(this.arts,o,n).forEach((function(e){return r.addFilter(e)}))}}}]),e}();function ne(e,n,r){var t=L(e,n),i=j.map((function(e){return{slot:e,sets:new Set(t.values[e].map((function(e){return e.set})))}})).filter((function(e){return e.sets.size>1}));if(!i.length)return function(e,n,r){var t=L(e,n),a=W(t),i=j.map((function(e){return{slot:e,length:t.values[e].length}})).filter((function(e){return e.length>1})),u=i.reduce((function(e,n){return e.length<n.length?e:n})),s=u.slot,c=u.length,l=Math.ceil(a/r),f=Math.min(l,c),d=Array(f).fill(0).map((function(e){return new Set}));return t.values[s].forEach((function(e,n){var r=e.id;return d[n%f].add(r)})),d.map((function(e){return(0,o.Z)((0,o.Z)({},n),{},(0,$.Z)({},s,{kind:"id",ids:e}))}))}(t,n,r);var u=i.reduce((function(e,n){return e.sets.size<n.sets.size?e:n})),s=u.sets,c=u.slot;return(0,a.Z)(s).map((function(e){return(0,o.Z)((0,o.Z)({},n),{},(0,$.Z)({},c,{kind:"required",sets:new Set([e])}))}))}onmessage=function(e){var n,r,i=e.data,u=i.command;switch(u){case"setup":_=i.id;var s="split".concat(_),c="compute".concat(_);U=new ee(i,(function(e){return postMessage((0,o.Z)({id:_,source:s},e))})),I=new Q(i,(function(e){return postMessage((0,o.Z)({id:_,source:c},e))})),r={command:"iterate"};break;case"split":i.filter&&U.addFilter(i.filter);for(var l=0,f=U.split(i.threshold,i.minCount);f&&f.count<=5e4&&l<=5e5;)l+=f.count,I.compute(-1/0,f.filter),f=U.split(-1/0,i.minCount);r={command:"split",filter:null===(n=f)||void 0===n?void 0:n.filter};break;case"iterate":var d=i.threshold,h=i.filter;I.compute(d,h),r={command:"iterate"};break;case"finalize":I.refresh(!0);var v=I,m=v.builds,b=v.plotData;r={command:"finalize",builds:m,plotData:b};break;case"count":if("break"===function(){var e,n=i.exclusion,o=I.arts,u=q(Y(n,(0,a.Z)(new Set(Object.values(o.values).flatMap((function(e){return e.map((function(e){return e.set}))}))))),o),s=i.arts.map((function(e){return 0})),c=(0,t.Z)(u);try{var l=function(){var n=e.value;i.arts.forEach((function(e,r){return s[r]+=W(L(e,n))}))};for(c.s();!(e=c.n()).done;)l()}catch(f){c.e(f)}finally{c.f()}return r={command:"count",counts:s},"break"}())break;default:p(u)}postMessage((0,o.Z)({id:_},r))}}},n={};function r(t){var a=n[t];if(void 0!==a)return a.exports;var o=n[t]={exports:{}};return e[t](o,o.exports,r),o.exports}r.m=e,r.x=function(){var e=r.O(void 0,[221],(function(){return r(71184)}));return e=r.O(e)},function(){var e=[];r.O=function(n,t,a,o){if(!t){var i=1/0;for(l=0;l<e.length;l++){t=e[l][0],a=e[l][1],o=e[l][2];for(var u=!0,s=0;s<t.length;s++)(!1&o||i>=o)&&Object.keys(r.O).every((function(e){return r.O[e](t[s])}))?t.splice(s--,1):(u=!1,o<i&&(i=o));if(u){e.splice(l--,1);var c=a();void 0!==c&&(n=c)}}return n}o=o||0;for(var l=e.length;l>0&&e[l-1][2]>o;l--)e[l]=e[l-1];e[l]=[t,a,o]}}(),r.d=function(e,n){for(var t in n)r.o(n,t)&&!r.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},r.f={},r.e=function(e){return Promise.all(Object.keys(r.f).reduce((function(n,t){return r.f[t](e,n),n}),[]))},r.u=function(e){return"static/js/"+e+".45b11d4b.chunk.js"},r.miniCssF=function(e){},r.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},r.p="/genshin-optimizer/",function(){var e={184:1};r.f.i=function(n,t){e[n]||importScripts(r.p+r.u(n))};var n=self.webpackChunkgenshin_optimizer=self.webpackChunkgenshin_optimizer||[],t=n.push.bind(n);n.push=function(n){var a=n[0],o=n[1],i=n[2];for(var u in o)r.o(o,u)&&(r.m[u]=o[u]);for(i&&i(r);a.length;)e[a.pop()]=1;t(n)}}(),function(){var e=r.x;r.x=function(){return r.e(221).then(e)}}();r.x()}();
//# sourceMappingURL=184.f5adb655.chunk.js.map