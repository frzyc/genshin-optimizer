"use strict";(self.webpackChunkgenshin_optimizer=self.webpackChunkgenshin_optimizer||[]).push([[348],{31038:function(e,n,t){t.d(n,{Z:function(){return S}});var r=t(93433),i=t(1413),o=t(45987),a=t(53174),u=t(54483),l=t(63204),s=t(14361),c=t(13967),d=t(47047),p=t(94198),f=t(20890),h=t(68870),x=t(72791),v=t(22020),Z=t(947),g=t(25074),m=t(42320),j=t(12759),y=t(24351),w=t(50921),b=t(46956),k=t(610),C=t(68244),I=t(2380),T=t(80184),P=["value","onChange","defaultText","defaultIcon","placeholderText","labelText","showDefault","showInventory","showEquipped","filter","disable"];function S(e){var n=e.value,t=e.onChange,S=e.defaultText,W=void 0===S?"":S,M=e.defaultIcon,N=void 0===M?"":M,E=e.placeholderText,_=void 0===E?"":E,A=e.labelText,L=void 0===A?"":A,G=e.showDefault,V=void 0!==G&&G,q=e.showInventory,z=void 0!==q&&q,B=e.showEquipped,D=void 0!==B&&B,K=e.filter,F=void 0===K?function(){return!0}:K,O=e.disable,H=void 0===O?function(){return!1}:O,R=(0,o.Z)(e,P),$=(0,v.$)(["ui","artifact","charNames_gen"]).t,X=(0,c.Z)(),U=(0,x.useContext)(g.t).database,J=(0,m.Z)((function(){return Z.Z.getAll}),[]),Q=(0,x.useMemo)((function(){return J&&(0,w.zU)(U,J)}),[U,J]),Y=U.chars.keys.filter((function(e){return(null===J||void 0===J?void 0:J[e])&&F(J[e],e)})).sort(),ee=(0,x.useCallback)((function(e){switch(e){case"Equipped":return $("artifact:filterLocation.currentlyEquipped");case"Inventory":return $("artifact:filterLocation.inventory");case"":return W;default:return $("charNames_gen:".concat(e))}}),[W,$]),ne=(0,x.useCallback)((function(e){var n;switch(e){case"Equipped":return(0,T.jsx)(u.G,{icon:a.caW});case"Inventory":return(0,T.jsx)(l.Z,{});case"":return N;default:return(0,T.jsx)(I.Z,{src:null===(n=J[e])||void 0===n?void 0:n.thumbImgSide,sx:{pr:1}})}}),[N,J]),te=(0,x.useMemo)((function(){return Q&&function(e,n,t,i,o,a){if(!n)return[];var u=[];i&&u.push({value:"",label:t("")});o&&u.push({value:"Inventory",label:t("Inventory")});a&&u.push({value:"Equipped",label:t("Equipped")});var l=e.filter((0,b.C)({element:(0,r.Z)(y.N),weaponType:(0,r.Z)(y.yd),favorite:"yes",name:""},n)).map((function(e){return{value:e,label:t(e)}})),s=e.filter((0,b.C)({element:(0,r.Z)(y.N),weaponType:(0,r.Z)(y.yd),favorite:"no",name:""},n)).map((function(e){return{value:e,label:t(e)}}));return u.concat(l).concat(s)}(Y,Q,ee,V,z,D)}),[Q,Y,V,z,D,ee]);return J&&te?(0,T.jsx)(p.Z,(0,i.Z)({autoHighlight:!0,options:te,clearIcon:n?void 0:"",getOptionLabel:function(e){return e.label},onChange:function(e,n,r){return("change"!==e.type||"clear"!==r)&&t(n?n.value:"")},isOptionEqualToValue:function(e,n){return e.value===n.value},getOptionDisabled:function(e){return H(e.value)},value:{value:n,label:ee(n)},renderInput:function(e){return(0,T.jsx)(C.Z,(0,i.Z)((0,i.Z)({},e),{},{label:L,placeholder:_,startAdornment:ne(n),hasValue:!!n}))},renderOption:function(e,t){var r="Equipped"!==t.value&&"Inventory"!==t.value&&""!==t.value&&U.states.getWithInit("charMeta_".concat(t.value),j.B).favorite;return(0,T.jsx)(k.Z,{value:t.value?t.value:"default",image:ne(t.value),text:(0,T.jsx)(x.Suspense,{fallback:(0,T.jsx)(d.Z,{variant:"text",width:100}),children:(0,T.jsx)(f.Z,{variant:"inherit",noWrap:!0,children:ee(t.value)})}),theme:X,isSelected:n===t.value,addlElement:(0,T.jsxs)(T.Fragment,{children:[r&&(0,T.jsx)(h.Z,{display:"flex",flexGrow:1}),r&&(0,T.jsx)(s.Z,{sx:{ml:1,mr:-.5}})]}),props:e},t.value?t.value:"default")}},R)):(0,T.jsx)(d.Z,{height:50})}},40020:function(e,n,t){t.d(n,{Z:function(){return s}});var r=t(63204),i=t(20890),o=t(22020),a=t(947),u=t(42320),l=t(80184);function s(e){var n=e.location,t=(0,o.$)("ui").t,s=(0,u.Z)((function(){return a.Z.get(null!==n&&void 0!==n?n:"")}),[n]);return(0,l.jsx)(i.Z,{component:"span",children:null!==s&&void 0!==s&&s.name?s.nameWIthIcon:(0,l.jsxs)("span",{children:[(0,l.jsx)(r.Z,{sx:{verticalAlign:"text-bottom"}})," ",t("inventory")]})})}},2380:function(e,n,t){var r=(0,t(93457).Z)("img")((function(e){var n=e.theme;return{display:"inline-block",width:"auto",height:"2.3em",lineHeight:1,verticalAlign:"text-bottom",marginTop:n.spacing(-3),marginLeft:n.spacing(-1.25),marginRight:n.spacing(-1),marginBottom:n.spacing(-1)}}));n.Z=r},20005:function(e,n,t){function r(e){var n=e.condition,t=e.wrapper,r=e.falseWrapper,i=e.children;return n?t(i):r?r(i):i}t.d(n,{Z:function(){return r}})},610:function(e,n,t){t.d(n,{Z:function(){return l}});var r=t(1413),i=t(23786),o=t(57064),a=t(49900),u=t(80184);function l(e){var n=e.value,t=e.image,l=void 0===t?"":t,s=e.text,c=e.theme,d=e.isSelected,p=e.addlElement,f=e.props;return(0,u.jsxs)(i.Z,(0,r.Z)((0,r.Z)({value:n},f),{},{children:[(0,u.jsx)(o.Z,{children:l}),(0,u.jsx)(a.Z,{primaryTypographyProps:{style:{fontWeight:d?c.typography.fontWeightMedium:c.typography.fontWeightRegular}},children:s}),p&&p]}),n)}},68244:function(e,n,t){t.d(n,{Z:function(){return s}});var r=t(1413),i=t(45987),o=t(13967),a=t(58165),u=t(80184),l=["hasValue","startAdornment","InputProps","sx"];function s(e){var n=e.hasValue,t=e.startAdornment,s=e.InputProps,c=e.sx,d=(0,i.Z)(e,l),p=(0,o.Z)();return(0,u.jsx)(a.Z,(0,r.Z)((0,r.Z)({},d),{},{variant:"filled",color:n?"success":"primary",hiddenLabel:!d.label,type:"search",InputProps:(0,r.Z)((0,r.Z)({},s),{},{startAdornment:t}),InputLabelProps:{style:{color:p.palette.text.primary}},sx:(0,r.Z)((0,r.Z)({},c),{},{"& .MuiFilledInput-root":{backgroundColor:n?p.palette.success.main:p.palette.primary.main,paddingTop:d.label?void 0:0,paddingBottom:0},"& .MuiFilledInput-root.Mui-focused":{backgroundColor:n?p.palette.success.light:p.palette.primary.light},"& .MuiFilledInput-root:hover":{backgroundColor:n?p.palette.success.dark:p.palette.primary.dark},"& .MuiFilledInput-root:before":{border:"none"},"& .MuiFilledInput-root.Mui-disabled:before":{border:"none"},"& .MuiFilledInput-root:after":{border:"none"},"& .MuiFilledInput-root:hover:not(.Mui-disabled):before":{border:"none"},"& input[type=search]::-ms-clear":{display:"none",width:0,height:0},"& input[type=search]::-ms-reveal":{display:"none",width:0,height:0},"& input[type=search]::-webkit-search-decoration":{display:"none"},"& input[type=search]::-webkit-search-cancel-button":{display:"none"},"& input[type=search]::-webkit-search-results-button":{display:"none"},"& input[type=search]::-webkit-search-results-decoration":{display:"none"}})}))}},59215:function(e,n,t){t.d(n,{Z:function(){return v}});var r=t(1413),i=t(45987),o=t(53174),a=t(54483),u=t(2199),l=t(23786),s=t(24518),c=t(52791),d=t(22020),p=t(76899),f=t(33890),h=t(80184),x=["sortKeys","value","onChange","ascending","onChangeAsc"];function v(e){var n=e.sortKeys,t=e.value,v=e.onChange,Z=e.ascending,g=e.onChangeAsc,m=(0,i.Z)(e,x),j=(0,d.$)("ui").t;return(0,h.jsxs)(c.Z,{display:"flex",alignItems:"center",gap:1,children:[(0,h.jsx)(p.c,{t:j,i18nKey:j("sortBy"),children:"Sort by: "}),(0,h.jsxs)(u.Z,(0,r.Z)((0,r.Z)({},m),{},{children:[(0,h.jsx)(f.Z,{title:(0,h.jsx)(p.c,{t:j,i18nKey:j("sortMap.".concat(t)),children:{value:j("sortMap.".concat(t))}}),children:n.map((function(e){return(0,h.jsx)(l.Z,{selected:t===e,disabled:t===e,onClick:function(){return v(e)},children:j("sortMap.".concat(e))},e)}))}),(0,h.jsx)(s.Z,{onClick:function(){return g(!Z)},startIcon:(0,h.jsx)(a.G,{icon:Z?o.Pa6:o.xrW,className:"fa-fw"}),children:Z?(0,h.jsx)(p.c,{t:j,i18nKey:"ascending",children:"Ascending"}):(0,h.jsx)(p.c,{t:j,i18nKey:"descending",children:"Descending"})})]}))]})}},10157:function(e,n,t){t.d(n,{q:function(){return s}});var r=t(93433),i=t(53174),o=t(54483),a=t(20890),u=t(80184),l=function(){return(0,u.jsx)(o.G,{icon:i.Tab})},s=function(e){var n=e.stars,t=e.colored,i=void 0!==t&&t;return(0,u.jsx)(a.Z,{color:i?"warning.main":void 0,component:"span",children:n?(0,r.Z)(Array(n).keys()).map((function(e,n){return(0,u.jsx)(l,{},n)})):null})}},73578:function(e,n,t){t.d(n,{Z:function(){return x}});var r=t(1413),i=t(45987),o=t(93433),a=t(90388),u=t(10658),l=t(24351),s=t(75308),c=t(55942),d=t(91839),p=t(80184),f=["value","onChange"],h=(0,s.X)((0,o.Z)(l.yd));function x(e){var n=e.value,t=e.onChange,o=(0,i.Z)(e,f);return(0,p.jsx)(d.Z,(0,r.Z)((0,r.Z)({exclusive:!0,value:n},o),{},{children:l.yd.map((function(e){var r;return(0,p.jsx)(a.Z,{value:e,onClick:function(){return t(h(n,e))},children:(0,p.jsx)(c.Z,{src:null===(r=u.Z.weaponTypes)||void 0===r?void 0:r[e],size:2})},e)}))}))}},44361:function(e,n,t){t.d(n,{Z:function(){return I}});var r=t(93433),i=t(29439),o=t(39504),a=t(61889),u=t(58165),l=t(94721),s=t(66647),c=t(68870),d=t(20890),p=t(72791),f=t(22020),h=t(10658),x=t(66218),v=t(42320),Z=t(24351),g=t(3992),m=t(71310),j=t(68198),y=t(55942),w=t(9321),b=t(10157),k=t(73578),C=t(80184);function I(e){var n=e.show,t=e.ascension,I=void 0===t?0:t,T=e.onHide,P=e.onSelect,S=e.filter,W=void 0===S?function(){return!0}:S,M=e.weaponTypeFilter,N=(0,f.$)(["page_weapon","weaponNames_gen"]).t,E=(0,v.Z)((function(){return x.Z.getAll}),[]),_=(0,p.useState)(M?[M]:(0,r.Z)(Z.yd)),A=(0,i.Z)(_,2),L=A[0],G=A[1];(0,p.useEffect)((function(){return M&&G([M])}),[M]);var V=(0,p.useState)(""),q=(0,i.Z)(V,2),z=q[0],B=q[1],D=(0,p.useDeferredValue)(z),K=E?Z.fG.filter((function(e){return W(E[e])})).filter((function(e){var n;return L.includes(null===E||void 0===E||null===(n=E[e])||void 0===n?void 0:n.weaponType)})).filter((function(e){return!D||N("weaponNames_gen:".concat(e)).toLowerCase().includes(D.toLowerCase())})).sort((function(e,n){var t,r,i,o;return(null!==(t=null===E||void 0===E||null===(r=E[n])||void 0===r?void 0:r.rarity)&&void 0!==t?t:0)-(null!==(i=null===E||void 0===E||null===(o=E[e])||void 0===o?void 0:o.rarity)&&void 0!==i?i:0)})):[];return E?(0,C.jsx)(w.Z,{open:n,onClose:T,children:(0,C.jsxs)(g.Z,{children:[(0,C.jsx)(o.Z,{sx:{py:1},children:(0,C.jsxs)(a.ZP,{container:!0,spacing:1,children:[(0,C.jsx)(a.ZP,{item:!0,children:(0,C.jsx)(k.Z,{value:L,onChange:G,disabled:!!M,size:"small"})}),(0,C.jsx)(a.ZP,{item:!0,flexGrow:1,children:(0,C.jsx)(u.Z,{autoFocus:!0,size:"small",value:z,onChange:function(e){return B(e.target.value)},label:N("weaponName"),sx:{height:"100%"},InputProps:{sx:{height:"100%"}}})}),(0,C.jsx)(a.ZP,{item:!0,children:(0,C.jsx)(j.Z,{onClick:T})})]})}),(0,C.jsx)(l.Z,{}),(0,C.jsx)(o.Z,{children:(0,C.jsx)(a.ZP,{container:!0,spacing:1,children:K.map((function(e){var n,t=E[e];return(0,C.jsx)(a.ZP,{item:!0,lg:3,md:4,children:(0,C.jsx)(m.Z,{sx:{height:"100%"},children:(0,C.jsxs)(s.Z,{onClick:function(){T(),P(e)},sx:{display:"flex"},children:[(0,C.jsx)(c.Z,{component:"img",src:t.getImg(I),sx:{width:100,height:"auto"},className:" grad-".concat(t.rarity,"star")}),(0,C.jsxs)(c.Z,{sx:{flexGrow:1,px:1},children:[(0,C.jsx)(d.Z,{variant:"subtitle1",children:t.name}),(0,C.jsxs)(d.Z,{children:[(0,C.jsx)(y.Z,{src:null===(n=h.Z.weaponTypes)||void 0===n?void 0:n[t.weaponType]})," ",(0,C.jsx)(b.q,{stars:t.rarity,colored:!0})]})]})]})})},e)}))})}),(0,C.jsx)(l.Z,{}),(0,C.jsx)(o.Z,{sx:{py:1},children:(0,C.jsx)(j.Z,{large:!0,onClick:T})})]})}):null}},90543:function(e,n,t){t.d(n,{Z:function(){return V}});var r,i=t(30168),o=t(53174),a=t(54483),u=t(40117),l=t(62002),s=t(63204),c=t(66647),d=t(68870),p=t(47047),f=t(13400),h=t(20890),x=t(39504),v=t(2199),Z=t(40165),g=t(24518),m=t(72791),j=t(22020),y=t(10658),w=t(71310),b=t(31038),k=t(40020),C=t(20005),I=t(55942),T=t(10157),P=t(75545),S=t(2139),W=t(66218),M=t(25074),N=t(26138),E=t(73036),_=t(79406),A=t(42320),L=t(74480),G=t(80184);function V(e){var n,t=e.weaponId,V=e.onClick,q=e.onEdit,z=e.onDelete,B=e.canEquip,D=void 0!==B&&B,K=e.extraButtons,F=(0,j.$)(["page_weapon","ui"]).t,O=(0,m.useContext)(M.t).database,H=(0,L.Z)(t),R=(0,A.Z)((function(){return null!==H&&void 0!==H&&H.key?W.Z.get(H.key):void 0}),[null===H||void 0===H?void 0:H.key]),$=(0,m.useCallback)((function(e){return e.weaponTypeKey===(null===R||void 0===R?void 0:R.weaponType)}),[R]),X=(0,m.useCallback)((function(e){return(0,G.jsx)(c.Z,{onClick:function(){return null===V||void 0===V?void 0:V(t)},children:e})}),[V,t]),U=(0,m.useCallback)((function(e){return(0,G.jsx)(d.Z,{children:e})}),[]),J=(0,m.useCallback)((function(e){return O.weapons.set(t,{location:e})}),[O,t]),Q=(0,m.useMemo)((function(){return R&&H&&(0,E.mP)([R.data,(0,E.v0)(H)])}),[R,H]);if(!H||!R||!Q)return null;var Y=H.level,ee=H.ascension,ne=H.refinement,te=H.id,re=H.location,ie=void 0===re?"":re,oe=H.lock,ae=Q.get(N.ri.weapon.type).value,ue=[N.ri.weapon.main,N.ri.weapon.sub,N.ri.weapon.sub2].map((function(e){return Q.get(e)})),le=R.getImg(ee);return(0,G.jsx)(m.Suspense,{fallback:(0,G.jsx)(p.Z,{variant:"rectangular",sx:{width:"100%",height:"100%",minHeight:300}}),children:(0,G.jsxs)(w.Z,{sx:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[(0,G.jsxs)(C.Z,{condition:!!V,wrapper:X,falseWrapper:U,children:[(0,G.jsxs)(d.Z,{className:"grad-".concat(R.rarity,"star"),sx:{position:"relative",pt:2,px:2},children:[!V&&(0,G.jsx)(f.Z,{color:"primary",onClick:function(){return O.weapons.set(te,{lock:!oe})},sx:{position:"absolute",right:0,bottom:0,zIndex:2},children:oe?(0,G.jsx)(u.Z,{}):(0,G.jsx)(l.Z,{})}),(0,G.jsxs)(d.Z,{sx:{position:"relative",zIndex:1},children:[(0,G.jsxs)(d.Z,{component:"div",sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[(0,G.jsx)(I.Z,{sx:{fontSize:"1.5em"},src:null===(n=y.Z.weaponTypes)||void 0===n?void 0:n[ae]}),(0,G.jsx)(h.Z,{noWrap:!0,sx:{textAlign:"center",backgroundColor:"rgba(100,100,100,0.35)",borderRadius:"1em",px:1},children:(0,G.jsx)("strong",{children:R.name})})]}),(0,G.jsxs)(h.Z,{component:"span",variant:"h5",children:["Lv. ",Y]}),(0,G.jsxs)(h.Z,{component:"span",variant:"h5",color:"text.secondary",children:["/",S.SJ[ee]]}),(0,G.jsxs)(h.Z,{variant:"h6",children:["Refinement ",(0,G.jsx)("strong",{children:ne})]}),(0,G.jsx)(h.Z,{children:(0,G.jsx)(T.q,{stars:R.rarity,colored:!0})})]}),(0,G.jsx)(d.Z,{sx:{height:"100%",position:"absolute",right:0,top:0},children:(0,G.jsx)(d.Z,{component:"img",src:null!==le&&void 0!==le?le:"",width:"auto",height:"100%",sx:{float:"right"}})})]}),(0,G.jsx)(x.Z,{children:ue.map((function(e){if(!e.info.key)return null;var n=(0,_.EC)(e.value,e.unit,e.unit?void 0:0);return(0,G.jsxs)(d.Z,{sx:{display:"flex"},children:[(0,G.jsxs)(h.Z,{flexGrow:1,children:[P.Z[e.info.key]," ",_.ZP.get(e.info.key)]}),(0,G.jsx)(h.Z,{children:n})]},e.info.key)}))})]}),(0,G.jsxs)(d.Z,{sx:{p:1,display:"flex",gap:1,justifyContent:"space-between",alignItems:"center"},children:[D?(0,G.jsx)(b.Z,{size:"small",sx:{flexGrow:1},disable:function(e){return""===e},showDefault:!0,defaultIcon:(0,G.jsx)(s.Z,{}),defaultText:F("ui:inventory"),value:ie,onChange:J,filter:$,disableClearable:!0}):(0,G.jsx)(k.Z,{location:ie}),(0,G.jsxs)(v.Z,{children:[!!q&&(0,G.jsx)(Z.Z,{title:(0,G.jsx)(h.Z,{children:F(r||(r=(0,i.Z)(["page_weapon:edit"])))}),placement:"top",arrow:!0,children:(0,G.jsx)(g.Z,{color:"info",onClick:function(){return q(te)},children:(0,G.jsx)(a.G,{icon:o.Xcf,className:"fa-fw"})})}),!!z&&(0,G.jsx)(g.Z,{color:"error",onClick:function(){return z(te)},disabled:!!ie||oe,children:(0,G.jsx)(a.G,{icon:o.I7k,className:"fa-fw"})}),K]})]})]})})}},70348:function(e,n,t){t.r(n),t.d(n,{default:function(){return O}});var r=t(74165),i=t(15861),o=t(29439),a=t(93433),u=t(53174),l=t(54483),s=t(68870),c=t(61889),d=t(90388),p=t(58165),f=t(57246),h=t(47047),x=t(39504),v=t(20890),Z=t(24518),g=t(72791),m=t(10757),j=t(22020),y=t(76899),w=t(3992),b=t(91839),k=t(59215),C=t(10157),I=t(73578),T=t(44361),P=t(66218),S=t(25074),W=t(17278),M=t(68544),N=t(70645),E=t(42320),_=t(24351),A=t(46956),L=t(60393),G=t(66045),V=t(11400),q=t(90543),z=t(80184),B=(0,g.lazy)((function(){return Promise.all([t.e(913),t.e(476)]).then(t.bind(t,74476))})),D={xs:1,sm:2,md:3,lg:3,xl:4},K={xs:9,sm:11,md:23,lg:23,xl:23},F=function(){return{editWeaponId:"",sortType:G.Ol[0],ascending:!1,rarity:(0,a.Z)(_.wC),weaponType:(0,a.Z)(_.yd)}};function O(){var e=(0,j.$)(["page_weapon","ui","weaponNames_gen"]).t,n=(0,g.useContext)(S.t).database,t=(0,W.Z)("WeaponDisplay",F),a=(0,o.Z)(t,2),y=a[0],O=a[1],R=(0,g.useState)(!1),$=(0,o.Z)(R,2),X=$[0],U=$[1],J=(0,M.Z)(),Q=(0,o.Z)(J,2),Y=Q[0],ee=Q[1],ne=(0,g.useRef)(null),te=(0,g.useState)(0),re=(0,o.Z)(te,2),ie=re[0],oe=re[1];(0,g.useEffect)((function(){return m.ZP.send({hitType:"pageview",page:"/weapon"}),n.weapons.followAny((function(e,n){return("new"===n||"remove"===n)&&ee()}))}),[ee,n]);var ae=(0,N.Z)(),ue=K[ae],le=(0,E.Z)((function(){return P.Z.getAll}),[]),se=(0,g.useCallback)(function(){var t=(0,i.Z)((0,r.Z)().mark((function t(i){var o,a;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=n.weapons.get(i)){t.next=3;break}return t.abrupt("return");case 3:if(a=e("weaponNames_gen:".concat(o.key)),window.confirm(e("removeWeapon",{value:a}))){t.next=6;break}return t.abrupt("return");case 6:n.weapons.remove(i),y.editWeaponId===i&&O({editWeaponId:""});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[y.editWeaponId,O,n,e]),ce=(0,g.useCallback)((function(e){O({editWeaponId:e})}),[O]),de=(0,g.useCallback)((function(e){ce(n.weapons.new((0,V.xg)(e)))}),[n,ce]),pe=(0,g.useState)(""),fe=(0,o.Z)(pe,2),he=fe[0],xe=fe[1],ve=(0,g.useDeferredValue)(he),Ze=y.sortType,ge=y.ascending,me=y.weaponType,je=y.rarity,ye=(0,g.useMemo)((function(){return le&&(0,G.Sn)(le)}),[le]),we=(0,g.useMemo)((function(){return le&&(0,G.Xg)(le)}),[le]),be=(0,g.useMemo)((function(){var e=n.weapons.values,t=e.length;if(!ye||!we)return{weaponIdList:[],totalWeaponNum:t};var r=e.filter((0,A.C)({weaponType:me,rarity:je,name:ve},we)).sort((0,A.e)(Ze,ge,ye)).map((function(e){return e.id}));return Y&&{weaponIdList:r,totalWeaponNum:t}}),[Y,n,ye,we,Ze,ge,je,me,ve]),ke=be.weaponIdList,Ce=be.totalWeaponNum,Ie=(0,g.useMemo)((function(){var e=Math.ceil(ke.length/ue),n=(0,L.uZ)(ie,0,e-1);return{weaponIdsToShow:ke.slice(n*ue,(n+1)*ue),numPages:e,currentPageIndex:n}}),[ke,ie,ue]),Te=Ie.weaponIdsToShow,Pe=Ie.numPages,Se=Ie.currentPageIndex,We=ke.length!==Ce?"".concat(ke.length,"/").concat(Ce):"".concat(Ce),Me=(0,g.useCallback)((function(e,n){var t;null===(t=ne.current)||void 0===t||t.scrollIntoView({behavior:"smooth"}),oe(n-1)}),[oe,ne]),Ne=(0,g.useCallback)((function(){return O({editWeaponId:""})}),[O]),Ee=y.editWeaponId;return(0,g.useEffect)((function(){Ee&&(n.weapons.get(Ee)||Ne())}),[n,Ee,Ne]),(0,z.jsxs)(s.Z,{my:1,display:"flex",flexDirection:"column",gap:1,children:[(0,z.jsx)(g.Suspense,{fallback:!1,children:(0,z.jsx)(B,{weaponId:Ee,footer:!0,onClose:Ne})}),(0,z.jsxs)(w.Z,{ref:ne,sx:{p:2,pb:1},children:[(0,z.jsxs)(c.ZP,{container:!0,spacing:1,sx:{mb:1},children:[(0,z.jsx)(c.ZP,{item:!0,children:(0,z.jsx)(I.Z,{sx:{height:"100%"},onChange:function(e){return O({weaponType:e})},value:me,size:"small"})}),(0,z.jsx)(c.ZP,{item:!0,children:(0,z.jsx)(b.Z,{sx:{height:"100%"},onChange:function(e,n){return O({rarity:n})},value:je,size:"small",children:_.wC.map((function(e){return(0,z.jsx)(d.Z,{value:e,children:(0,z.jsxs)(s.Z,{display:"flex",gap:1,children:[(0,z.jsx)("strong",{children:e}),(0,z.jsx)(C.q,{stars:1})]})},e)}))})}),(0,z.jsx)(c.ZP,{item:!0,flexGrow:1,children:(0,z.jsx)(p.Z,{autoFocus:!0,size:"small",value:he,onChange:function(e){return xe(e.target.value)},label:e("weaponName"),sx:{height:"100%"},InputProps:{sx:{height:"100%"}}})}),(0,z.jsx)(c.ZP,{item:!0,children:(0,z.jsx)(k.Z,{sx:{height:"100%"},sortKeys:G.Ol,value:Ze,onChange:function(e){return O({sortType:e})},ascending:ge,onChangeAsc:function(e){return O({ascending:e})}})})]}),(0,z.jsxs)(c.ZP,{container:!0,alignItems:"flex-end",children:[(0,z.jsx)(c.ZP,{item:!0,flexGrow:1,children:(0,z.jsx)(f.Z,{count:Pe,page:Se+1,onChange:Me})}),(0,z.jsx)(c.ZP,{item:!0,children:(0,z.jsx)(H,{numShowing:Te.length,total:We,t:e})})]})]}),(0,z.jsx)(g.Suspense,{fallback:(0,z.jsx)(h.Z,{variant:"rectangular",sx:{width:"100%",height:"100%",minHeight:500}}),children:(0,z.jsxs)(c.ZP,{container:!0,spacing:1,columns:D,children:[(0,z.jsx)(c.ZP,{item:!0,xs:1,children:(0,z.jsxs)(w.Z,{sx:{height:"100%",width:"100%",minHeight:300,display:"flex",flexDirection:"column"},children:[(0,z.jsx)(x.Z,{children:(0,z.jsx)(v.Z,{sx:{textAlign:"center"},children:e("page_weapon:addWeapon")})}),(0,z.jsx)(T.Z,{show:X,onHide:function(){return U(!1)},onSelect:de}),(0,z.jsx)(s.Z,{sx:{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center"},children:(0,z.jsx)(Z.Z,{onClick:function(){return U(!0)},color:"info",sx:{borderRadius:"1em"},children:(0,z.jsx)(v.Z,{variant:"h1",children:(0,z.jsx)(l.G,{icon:u.r8p,className:"fa-fw"})})})})]})}),Te.map((function(e){return(0,z.jsx)(c.ZP,{item:!0,xs:1,children:(0,z.jsx)(q.Z,{weaponId:e,onDelete:se,onEdit:ce,canEquip:!0})},e)}))]})}),Pe>1&&(0,z.jsx)(w.Z,{children:(0,z.jsx)(x.Z,{children:(0,z.jsxs)(c.ZP,{container:!0,alignItems:"flex-end",children:[(0,z.jsx)(c.ZP,{item:!0,flexGrow:1,children:(0,z.jsx)(f.Z,{count:Pe,page:Se+1,onChange:Me})}),(0,z.jsx)(c.ZP,{item:!0,children:(0,z.jsx)(H,{numShowing:Te.length,total:We,t:e})})]})})})]})}function H(e){var n=e.numShowing,t=e.total,r=e.t;return(0,z.jsx)(v.Z,{color:"text.secondary",children:(0,z.jsxs)(y.c,{t:r,i18nKey:"showingNum",count:n,value:t,children:["Showing ",(0,z.jsx)("b",{children:{count:n}})," out of ",{value:t}," Weapons"]})})}},68544:function(e,n,t){t.d(n,{Z:function(){return o}});var r=t(29439),i=t(72791);function o(){var e=(0,i.useState)({}),n=(0,r.Z)(e,2),t=n[0],o=n[1];return[t,(0,i.useCallback)((function(){return o({})}),[])]}},70645:function(e,n,t){t.d(n,{Z:function(){return o}});var r=t(13967),i=t(95193);function o(){var e=(0,r.Z)(),n=(0,i.Z)(e.breakpoints.up("sm")),t=(0,i.Z)(e.breakpoints.up("md")),o=(0,i.Z)(e.breakpoints.up("lg"));return(0,i.Z)(e.breakpoints.up("xl"))?"xl":o?"lg":t?"md":n?"sm":"xs"}},74480:function(e,n,t){t.d(n,{Z:function(){return a}});var r=t(29439),i=t(72791),o=t(25074);function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=(0,i.useContext)(o.t),t=n.database,a=(0,i.useState)(t.weapons.get(e)),u=(0,r.Z)(a,2),l=u[0],s=u[1];return(0,i.useEffect)((function(){return s(t.weapons.get(e))}),[t,e]),(0,i.useEffect)((function(){return e?t.weapons.follow(e,(function(e,n,t){return"update"===n&&s(t)})):void 0}),[e,s,t]),l}},50921:function(e,n,t){t.d(n,{_L:function(){return a},vV:function(){return o},zU:function(){return u}});var r=t(72828),i=t(12759),o=["new","level","rarity","name"];function a(e,n){return{new:{getValue:function(n){return e.chars.get(n)?0:1},tieBreaker:"name"},name:{getValue:function(e){return r.Z.t('charNames_gen"'.concat(e)).toString()}},level:{getValue:function(n){var t=e.chars.get(n);return t?t.level*t.ascension:0},tieBreaker:"rarity"},rarity:{getValue:function(e){var t;return null===n||void 0===n||null===(t=n[e])||void 0===t?void 0:t.rarity},tieBreaker:"level"}}}function u(e,n){return{element:function(t,r){var i,o;return r.includes(null===n||void 0===n||null===(i=n[t])||void 0===i?void 0:i.elementKey)||"Traveler"===t&&!e.chars.get(t)&&r.some((function(e){return n.Traveler.elementKeys.includes(e)}))||"Traveler"===t&&r.includes(null===(o=e.chars.get(t))||void 0===o?void 0:o.elementKey)},weaponType:function(e,t){var r;return t.includes(null===n||void 0===n||null===(r=n[e])||void 0===r?void 0:r.weaponTypeKey)},favorite:function(n,t){return!t||t===(e.states.getWithInit("charMeta_".concat(n),i.B).favorite?"yes":"no")},name:function(e,n){return!n||r.Z.t("charNames_gen:".concat(e)).toLowerCase().includes(n.toLowerCase())}}}},75308:function(e,n,t){t.d(n,{X:function(){return o}});var r=t(93433),i=t(60393);function o(e){return function(n,t){var o=n.length;return o===e.length?[t]:1===o&&n[0]===t?(0,r.Z)(e):(0,r.Z)(new Set((0,i.nh)(n,t)))}}},46956:function(e,n,t){t.d(n,{C:function(){return o},e:function(){return i}});var r=t(29439);function i(e,n,t){function r(e,n,t,r){var i=r.getValue(e),o=r.getValue(n);return(t?-1:1)*("string"===typeof i&&"string"===typeof o?i.localeCompare(o):o-i)}return function(i,o){if(!t[e])return 0;var a=t[e],u=r(i,o,n,a);return!u&&a.tieBreaker&&t[a.tieBreaker]&&(u=r(i,o,n,t[a.tieBreaker])),u}}function o(e,n){return function(t){return Object.entries(e).every((function(e){var i=(0,r.Z)(e,2),o=i[0],a=i[1];return n[o]&&n[o](t,a)}))}}},66045:function(e,n,t){t.d(n,{Ol:function(){return i},Sn:function(){return o},Xg:function(){return a}});var r=t(72828),i=["level","rarity"];function o(e){return{level:{getValue:function(e){var n;return null!==(n=e.level*e.ascension)&&void 0!==n?n:0},tieBreaker:"rarity"},rarity:{getValue:function(n){var t;return null===e||void 0===e||null===(t=e[n.key])||void 0===t?void 0:t.rarity},tieBreaker:"level"}}}function a(e){return{rarity:function(n,t){var r;return t.includes(null===e||void 0===e||null===(r=e[n.key])||void 0===r?void 0:r.rarity)},weaponType:function(n,t){var r;return t.includes(null===e||void 0===e||null===(r=e[n.key])||void 0===r?void 0:r.weaponType)},name:function(e,n){return r.Z.t("weaponNames_gen:".concat(e.key)).toLowerCase().includes(n.toLowerCase())}}}},12759:function(e,n,t){t.d(n,{B:function(){return a},c:function(){return o}});var r=t(93433),i=t(50765);function o(){return{tcMode:!1}}function a(){return{rvFilter:(0,r.Z)(i._),favorite:!1}}}}]);
//# sourceMappingURL=348.899b37e9.chunk.js.map