"use strict";(self.webpackChunkgenshin_optimizer=self.webpackChunkgenshin_optimizer||[]).push([[846],{20005:function(n,e,t){function r(n){var e=n.condition,t=n.wrapper,r=n.falseWrapper,i=n.children;return e?t(i):r?r(i):i}t.d(e,{Z:function(){return r}})},59215:function(n,e,t){t.d(e,{Z:function(){return Z}});var r=t(1413),i=t(45987),s=t(53174),c=t(54483),o=t(64554),a=t(2199),l=t(23786),u=t(24518),d=t(22020),f=t(76899),x=t(33890),h=t(80184),j=["sortKeys","value","onChange","ascending","onChangeAsc"];function Z(n){var e=n.sortKeys,t=n.value,Z=n.onChange,m=n.ascending,p=n.onChangeAsc,y=(0,i.Z)(n,j),g=(0,d.$)("ui").t;return(0,h.jsxs)(o.Z,{display:"flex",alignItems:"center",gap:1,children:[(0,h.jsx)(f.c,{t:g,i18nKey:g("sortBy"),children:"Sort by: "}),(0,h.jsxs)(a.Z,(0,r.Z)((0,r.Z)({},y),{},{children:[(0,h.jsx)(x.Z,{title:(0,h.jsx)(f.c,{t:g,i18nKey:g("sortMap.".concat(t)),children:{value:g("sortMap.".concat(t))}}),children:e.map((function(n){return(0,h.jsx)(l.Z,{selected:t===n,disabled:t===n,onClick:function(){return Z(n)},children:g("sortMap.".concat(n))},n)}))}),(0,h.jsx)(u.Z,{onClick:function(){return p(!m)},startIcon:(0,h.jsx)(c.G,{icon:m?s.Pa6:s.xrW,className:"fa-fw"}),children:m?(0,h.jsx)(f.c,{t:g,i18nKey:"ascending",children:"Ascending"}):(0,h.jsx)(f.c,{t:g,i18nKey:"descending",children:"Descending"})})]}))]})}},10157:function(n,e,t){t.d(e,{q:function(){return l}});var r=t(93433),i=t(53174),s=t(54483),c=t(91702),o=t(80184),a=function(){return(0,o.jsx)(s.G,{icon:i.Tab})},l=function(n){var e=n.stars,t=n.colored,i=void 0!==t&&t;return(0,o.jsx)(c.Z,{color:i?"warning":void 0,children:e?(0,r.Z)(Array(e).keys()).map((function(n,e){return(0,o.jsx)(a,{},e)})):null})}},22945:function(n,e,t){t.r(e),t.d(e,{default:function(){return ln}});var r=t(93433),i=t(30168),s=t(1413),c=t(29439),o=t(49670),a=t(68087),l=t(64554),u=t(94070),d=t(23060),f=t(39504),x=t(61889),h=t(24518),j=t(57246),Z=t(47047),m=t(20890),p=t(72791),y=t(10757),g=t(22020),b=t(76899),v=t(43504),w=t(15678),P=t(3992),k=t(53174),C=t(54483),A=t(94721),I=t(24711),S=t(60393),K=t(68198),F=t(9321),G=t(66624),E=t(80184);function M(n){var e=n.pageKey,t=n.text,r=void 0===t?"":t,i=n.modalTitle,s=void 0===i?"":i,o=n.children,a=(0,I.Z)("true"!==localStorage.getItem("infoShown_".concat(e))),l=(0,c.Z)(a,3),u=l[0],d=l[1],j=l[2],y=(0,p.useState)(Array.isArray(r)?(0,S.F_)(r):r),g=(0,c.Z)(y,1)[0],b=(0,p.useCallback)((function(){j(),localStorage.setItem("infoShown_".concat(e),"true")}),[j,e]);return(0,E.jsxs)(P.Z,{children:[(0,E.jsxs)(x.ZP,{container:!0,children:[(0,E.jsx)(x.ZP,{item:!0,flexGrow:1,children:(0,E.jsx)(m.Z,{variant:"caption",pl:1,children:g})}),(0,E.jsx)(x.ZP,{item:!0,xs:"auto",children:(0,E.jsx)(h.Z,{size:"small",color:"info",variant:"contained",onClick:d,startIcon:(0,E.jsx)(C.G,{icon:k.Fuz}),children:(0,E.jsx)(G.v,{ns:"ui",key18:"info"})})})]}),(0,E.jsx)(F.Z,{containerProps:{maxWidth:"xl"},open:u,onClose:b,children:(0,E.jsxs)(P.Z,{children:[(0,E.jsx)(f.Z,{sx:{py:1},children:(0,E.jsxs)(x.ZP,{container:!0,children:[(0,E.jsx)(x.ZP,{item:!0,flexGrow:1,children:(0,E.jsx)(m.Z,{variant:"h6",children:s})}),(0,E.jsx)(x.ZP,{item:!0,children:(0,E.jsx)(K.Z,{onClick:b})})]})}),(0,E.jsx)(A.Z,{}),(0,E.jsx)(f.Z,{children:(0,E.jsx)(p.Suspense,{fallback:(0,E.jsx)(Z.Z,{variant:"rectangular",width:"100%",height:500}),children:o})}),(0,E.jsx)(A.Z,{}),(0,E.jsx)(f.Z,{sx:{py:1},children:(0,E.jsx)(K.Z,{large:!0,onClick:b})})]})})]})}var T=t(59215),D=t(66101);function O(){var n=(0,p.useContext)(D.t).database,e=(0,p.useState)(n.displayArtifact.get()),t=(0,c.Z)(e,2),r=t[0],i=t[1];return(0,p.useEffect)((function(){return n.displayArtifact.follow((function(n,e){return i(e)}))}),[n]),r}var W=t(68544),U=t(70645),z=t(50765),q=t(46956),_=t(72838),N=t(62002),$=t(40117),L=t(25617),Q=(0,p.lazy)((function(){return Promise.all([t.e(889),t.e(673)]).then(t.bind(t,37673))}));function V(n){var e=n.numShowing,t=n.total,r=(0,g.$)(["artifact","ui"]).t,i=(0,p.useContext)(D.t).database,c=O().filterOption,a=(0,p.useCallback)((function(n){return i.displayArtifact.set({filterOption:(0,s.Z)((0,s.Z)({},c),n)})}),[i,c]);return(0,E.jsx)(p.Suspense,{fallback:(0,E.jsx)(Z.Z,{variant:"rectangular",width:"100%",height:300}),children:(0,E.jsx)(P.Z,{children:(0,E.jsxs)(f.Z,{children:[(0,E.jsxs)(x.ZP,{container:!0,children:[(0,E.jsx)(x.ZP,{item:!0,children:(0,E.jsx)(m.Z,{variant:"h6",children:(0,E.jsx)(b.c,{t:r,i18nKey:"artifactFilter",children:"Artifact Filter"})})}),(0,E.jsx)(x.ZP,{item:!0,flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center",children:e!==t&&(0,E.jsxs)(m.Z,{children:["Filtered ",e," / ",t]})}),(0,E.jsx)(x.ZP,{item:!0,children:(0,E.jsx)(h.Z,{size:"small",color:"error",onClick:function(){return i.displayArtifact.set({action:"reset"})},startIcon:(0,E.jsx)(o.Z,{}),children:(0,E.jsx)(b.c,{t:r,i18nKey:"ui:reset"})})})]}),(0,E.jsx)(p.Suspense,{fallback:(0,E.jsx)(Z.Z,{variant:"rectangular",width:"100%",height:200}),children:(0,E.jsx)(Q,{filterOption:c,filterOptionDispatch:a})})]})})})}function B(n){var e=n.artifactIds,t=(0,g.$)(["artifact","ui"]).t,r=(0,p.useContext)(D.t).database,i=(0,p.useMemo)((function(){var n=e.map((function(n){return r.arts.get(n)})),t=n.reduce((function(n,e){return n+(e.lock?0:1)}),0),i=n.length-t,s=t,c=n.reduce((function(n,e){return n+(e.location?1:0)}),0),o=n.reduce((function(n,e){return n+(e.exclude?1:0)}),0);return{numDelete:s,numUnequip:c,numExclude:o,numInclude:n.length-o,numUnlock:t,numLock:i}}),[e,r]),s=i.numDelete,c=i.numUnequip,o=i.numExclude,a=i.numInclude,l=i.numUnlock,u=i.numLock;return(0,E.jsxs)(x.ZP,{container:!0,spacing:1,alignItems:"center",children:[(0,E.jsx)(x.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,E.jsxs)(h.Z,{fullWidth:!0,color:"error",disabled:!c,onClick:function(){return window.confirm("Are you sure you want to unequip ".concat(c," artifacts currently equipped on characters?"))&&e.map((function(n){return r.arts.set(n,{location:""})}))},startIcon:(0,E.jsx)(C.G,{icon:k.wOQ}),children:[(0,E.jsx)(b.c,{t:t,i18nKey:"button.unequipArtifacts",children:"Unequip Artifacts"}),(0,E.jsx)(L.Z,{sx:{ml:1},color:c?"success":"secondary",children:c})]})}),(0,E.jsx)(x.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,E.jsxs)(h.Z,{fullWidth:!0,color:"error",disabled:!s,onClick:function(){return window.confirm("Are you sure you want to delete ".concat(s," artifacts?"))&&e.map((function(n){var e;return!(null!==(e=r.arts.get(n))&&void 0!==e&&e.lock)&&r.arts.remove(n)}))},startIcon:(0,E.jsx)(C.G,{icon:k.$aW}),children:[(0,E.jsx)(b.c,{t:t,i18nKey:"button.deleteArtifacts",children:"Delete Artifacts"}),(0,E.jsx)(L.Z,{sx:{ml:1},color:s?"success":"secondary",children:s})]})}),(0,E.jsx)(x.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,E.jsxs)(h.Z,{fullWidth:!0,color:"error",disabled:!a,onClick:function(){return window.confirm("Are you sure you want to exclude ".concat(a," artifacts from build generations?"))&&e.map((function(n){return r.arts.set(n,{exclude:!0})}))},startIcon:(0,E.jsx)(C.G,{icon:k.gPx}),children:[(0,E.jsx)(b.c,{t:t,i18nKey:"button.excludeArtifacts",children:"Exclude Artifacts"}),(0,E.jsx)(L.Z,{sx:{ml:1},color:a?"success":"secondary",children:a})]})}),(0,E.jsx)(x.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,E.jsxs)(h.Z,{fullWidth:!0,color:"error",disabled:!o,onClick:function(){return window.confirm("Are you sure you want to include ".concat(o," artifacts in build generations?"))&&e.map((function(n){return r.arts.set(n,{exclude:!1})}))},startIcon:(0,E.jsx)(C.G,{icon:k.Stf}),children:[(0,E.jsx)(b.c,{t:t,i18nKey:"button.includeArtifacts",children:"Include Artifacts"}),(0,E.jsx)(L.Z,{sx:{ml:1},color:o?"success":"secondary",children:o})]})}),(0,E.jsx)(x.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,E.jsxs)(h.Z,{fullWidth:!0,color:"error",disabled:!u,onClick:function(){return window.confirm("Are you sure you want to unlock ".concat(u," artifacts?"))&&e.map((function(n){return r.arts.set(n,{lock:!1})}))},startIcon:(0,E.jsx)(N.Z,{}),children:[(0,E.jsx)(b.c,{t:t,i18nKey:"button.unlockrtifacts",children:"Unlock Artifacts"}),(0,E.jsx)(L.Z,{sx:{ml:1},color:u?"success":"secondary",children:u})]})}),(0,E.jsx)(x.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,E.jsxs)(h.Z,{fullWidth:!0,color:"error",disabled:!l,onClick:function(){return window.confirm("Are you sure you want to lock ".concat(l," artifacts?"))&&e.map((function(n){return r.arts.set(n,{lock:!0})}))},startIcon:(0,E.jsx)($.Z,{}),children:[(0,E.jsx)(b.c,{t:t,i18nKey:"button.lockArtifacts",children:"Lock Artifacts"}),(0,E.jsx)(L.Z,{sx:{ml:1},color:l?"success":"secondary",children:l})]})}),(0,E.jsx)(x.ZP,{item:!0,xs:12,sm:12,md:6,display:"flex",justifyContent:"space-around",children:(0,E.jsx)(m.Z,{variant:"caption",color:"text.secondary",children:(0,E.jsxs)(b.c,{t:t,i18nKey:"buttonHint",children:["Note: the red buttons above only applies to ",(0,E.jsx)("b",{children:"currently filtered artifacts"})]})})})]})}var H=t(44824),R=t(71310),J=t(91702),X=t(43696),Y=(0,r.Z)(z._);function nn(n){var e=n.probabilityFilter,t=void 0===e?{}:e,r=n.setProbabilityFilter,i=n.disabled,s=void 0!==i&&i;return(0,E.jsxs)(P.Z,{children:[(0,E.jsx)(f.Z,{sx:{py:1},children:(0,E.jsx)(m.Z,{variant:"h6",children:"Roll Probability Calculator"})}),(0,E.jsx)(A.Z,{}),(0,E.jsx)(f.Z,{children:(0,E.jsxs)(x.ZP,{container:!0,spacing:1,children:[(0,E.jsx)(x.ZP,{item:!0,xs:12,md:6,children:(0,E.jsx)(R.Z,{children:(0,E.jsx)(f.Z,{children:(0,E.jsxs)(m.Z,{children:['This UI only pops up when "Sort by" ',(0,E.jsx)("strong",{children:"Probability"}),". In conjunction with the Artifact Filters above, this UI allows you to set a criteria for substats values, and it will sort the artifacts by those with the highest probability to roll into those criteria values.",(0,E.jsx)(J.Z,{color:"warning",children:" Artifacts that already reach the criteria(100%) or are at 0% are hidden."})]})})})}),(0,E.jsx)(x.ZP,{item:!0,xs:12,md:6,spacing:1,sx:{display:"flex",flexDirection:"column",gap:1},children:(0,E.jsx)(X.Z,{statKeys:Y,statFilters:t,setStatFilters:r,disabled:s})})]})})]})}var en,tn,rn=t(44217),sn=p.lazy((function(){return Promise.all([t.e(219),t.e(213)]).then(t.bind(t,66585))})),cn=p.lazy((function(){return t.e(383).then(t.bind(t,66311))})),on={xs:1,sm:2,md:3,lg:3,xl:4},an={xs:10,sm:12,md:24,lg:24,xl:24};function ln(){var n=(0,g.$)(["artifact","ui"]).t,e=(0,p.useContext)(D.t).database,t=O(),m=(0,I.Z)(!1),k=(0,c.Z)(m,3),C=k[0],A=k[1],K=k[2],F=(0,U.Z)(),G=an[F],N=t.sortType,$=t.effFilter,L=t.ascending,Q=t.probabilityFilter,R="probability"===N,J=(0,p.useState)(0),X=(0,c.Z)(J,2),Y=X[0],ln=X[1],dn=(0,p.useRef)(null),fn=(0,W.Z)(),xn=(0,c.Z)(fn,2),hn=xn[0],jn=xn[1],Zn=(0,p.useMemo)((function(){return new Set($)}),[$]),mn=(0,p.useCallback)((function(n){return e.arts.remove(n)}),[e]);(0,p.useEffect)((function(){return y.ZP.send({hitType:"pageview",page:"/artifact"}),e.arts.followAny((function(){return jn()}))}),[e,jn]);var pn=(0,p.useCallback)((function(n){return e.displayArtifact.set({probabilityFilter:n})}),[e]),yn=(0,p.useMemo)((function(){return!e.arts.values.length}),[e]),gn=(0,p.useMemo)((function(){return(0,H.x3)(Zn,Q)}),[Zn,Q]),bn=(0,p.useMemo)((function(){return(0,H.EM)(Zn)}),[Zn]),vn=(0,p.useDeferredValue)(t),wn=(0,p.useDeferredValue)(Q);(0,p.useEffect)((function(){if(R)return e.arts.values.forEach((function(n){return e.arts.setProbability(n.id,(0,rn.B)(n,wn))})),function(){return e.arts.values.forEach((function(n){return e.arts.setProbability(n.id,-1)}))}}),[e,R,wn]);var Pn=(0,p.useMemo)((function(){var n,t=vn.sortType,r=void 0===t?H.OQ[0]:t,i=vn.ascending,c=void 0!==i&&i,o=vn.filterOption,a=e.arts.values;R&&(a=a.filter((function(n){return n.probability&&1!==n.probability})));var l=a.filter((0,q.C)(o,bn)).sort((0,q.e)(null!==(n=H.t$[r])&&void 0!==n?n:[],c,gn)).map((function(n){return n.id}));return(0,s.Z)({artifactIds:l,totalArtNum:a.length},hn)}),[vn,hn,e,gn,bn,R]),kn=Pn.artifactIds,Cn=Pn.totalArtNum,An=(0,p.useMemo)((function(){var n=Math.ceil(kn.length/G),e=(0,S.uZ)(Y,0,n-1);return{artifactIdsToShow:kn.slice(e*G,(e+1)*G),numPages:n,currentPageIndex:e}}),[kn,Y,G]),In=An.artifactIdsToShow,Sn=An.numPages,Kn=An.currentPageIndex,Fn=kn.length!==Cn?"".concat(kn.length,"/").concat(Cn):"".concat(Cn),Gn=(0,p.useCallback)((function(n,e){var t;null===(t=dn.current)||void 0===t||t.scrollIntoView({behavior:"smooth"}),ln(e-1)}),[ln,dn]);return(0,E.jsxs)(l.Z,{display:"flex",flexDirection:"column",gap:1,my:1,children:[(0,E.jsx)(p.Suspense,{fallback:!1,children:(0,E.jsx)(sn,{artifactIdToEdit:C?"new":"",cancelEdit:K,allowUpload:!0,allowEmpty:!0})}),(0,E.jsx)(M,{pageKey:"artifactPage",modalTitle:n(en||(en=(0,i.Z)(["info.title"]))),text:n("tipsOfTheDay",{returnObjects:!0}),children:(0,E.jsx)(cn,{})}),yn&&(0,E.jsxs)(u.Z,{severity:"info",variant:"filled",children:["Looks like you haven't added any artifacts yet. If you want, there are ",(0,E.jsx)(d.Z,{color:"warning.main",component:v.rU,to:"/scanner",children:"automatic scanners"})," that can speed up the import process!"]}),(0,E.jsx)(V,{numShowing:kn.length,total:Cn}),(0,E.jsx)(P.Z,{ref:dn,children:(0,E.jsxs)(f.Z,{children:[(0,E.jsxs)(x.ZP,{container:!0,sx:{mb:1},children:[(0,E.jsx)(x.ZP,{item:!0,flexGrow:1,children:(0,E.jsx)("span",{children:(0,E.jsx)(b.c,{t:n,i18nKey:"efficiencyFilter.title",children:"Substats to use in efficiency calculation"})})}),(0,E.jsx)(x.ZP,{item:!0,children:(0,E.jsx)(h.Z,{size:"small",color:"error",onClick:function(){return e.displayArtifact.set({effFilter:(0,r.Z)(z._)})},startIcon:(0,E.jsx)(o.Z,{}),children:(0,E.jsx)(b.c,{t:n,i18nKey:"ui:reset"})})})]}),(0,E.jsx)(w.Z,{selectedKeys:$,onChange:function(n){return e.displayArtifact.set({effFilter:n})}})]})}),(0,E.jsx)(P.Z,{children:(0,E.jsxs)(f.Z,{children:[(0,E.jsxs)(x.ZP,{container:!0,alignItems:"center",sx:{pb:2},children:[(0,E.jsx)(x.ZP,{item:!0,flexGrow:1,children:(0,E.jsx)(j.Z,{count:Sn,page:Kn+1,onChange:Gn})}),(0,E.jsx)(x.ZP,{item:!0,flexGrow:1,children:(0,E.jsx)(un,{numShowing:In.length,total:Fn,t:n})}),(0,E.jsxs)(x.ZP,{item:!0,xs:12,sm:6,md:4,lg:4,xl:3,display:"flex",children:[(0,E.jsx)(l.Z,{flexGrow:1}),(0,E.jsx)(T.Z,{sortKeys:(0,r.Z)(H.OQ),value:N,onChange:function(n){return e.displayArtifact.set({sortType:n})},ascending:L,onChangeAsc:function(n){return e.displayArtifact.set({ascending:n})}})]})]}),(0,E.jsx)(B,{artifactIds:kn})]})}),R&&(0,E.jsx)(nn,{probabilityFilter:Q,setProbabilityFilter:pn}),(0,E.jsx)(h.Z,{fullWidth:!0,onClick:A,color:"info",startIcon:(0,E.jsx)(a.Z,{}),children:n(tn||(tn=(0,i.Z)(["addNew"])))}),(0,E.jsx)(p.Suspense,{fallback:(0,E.jsx)(Z.Z,{variant:"rectangular",sx:{width:"100%",height:"100%",minHeight:5e3}}),children:(0,E.jsx)(x.ZP,{container:!0,spacing:1,columns:on,children:In.map((function(n){return(0,E.jsx)(x.ZP,{item:!0,xs:1,children:(0,E.jsx)(_.Z,{artifactId:n,effFilter:Zn,onDelete:mn,editorProps:{},canExclude:!0,canEquip:!0})},n)}))})}),Sn>1&&(0,E.jsx)(P.Z,{children:(0,E.jsx)(f.Z,{children:(0,E.jsxs)(x.ZP,{container:!0,children:[(0,E.jsx)(x.ZP,{item:!0,flexGrow:1,children:(0,E.jsx)(j.Z,{count:Sn,page:Kn+1,onChange:Gn})}),(0,E.jsx)(x.ZP,{item:!0,children:(0,E.jsx)(un,{numShowing:In.length,total:Fn,t:n})})]})})})]})}function un(n){var e=n.numShowing,t=n.total,r=n.t;return(0,E.jsx)(m.Z,{color:"text.secondary",children:(0,E.jsxs)(b.c,{t:r,i18nKey:"showingNum",count:e,value:t,children:["Showing ",(0,E.jsx)("b",{children:{count:e}})," out of ",{value:t}," Artifacts"]})})}},70645:function(n,e,t){t.d(e,{Z:function(){return s}});var r=t(13967),i=t(95193);function s(){var n=(0,r.Z)(),e=(0,i.Z)(n.breakpoints.up("sm")),t=(0,i.Z)(n.breakpoints.up("md")),s=(0,i.Z)(n.breakpoints.up("lg"));return(0,i.Z)(n.breakpoints.up("xl"))?"xl":s?"lg":t?"md":e?"sm":"xs"}},46956:function(n,e,t){t.d(e,{C:function(){return c},e:function(){return s}});var r=t(29439),i=t(37762);function s(n,e,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return function(s,c){var o,a=(0,i.Z)(n);try{for(a.s();!(o=a.n()).done;){var l=o.value,u=0,d=t[l],f=d(s),x=d(c);if(0!==(u="string"===typeof f&&"string"===typeof x?f.localeCompare(x):x-f))return r.includes(l)?u:(e?-1:1)*u}}catch(h){a.e(h)}finally{a.f()}return 0}}function c(n,e){return function(t){return Object.entries(n).every((function(n){var i=(0,r.Z)(n,2),s=i[0],c=i[1];return e[s]&&e[s](t,c)}))}}}}]);
//# sourceMappingURL=846.99a8360b.chunk.js.map