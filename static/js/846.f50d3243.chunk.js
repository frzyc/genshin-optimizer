"use strict";(self.webpackChunkgenshin_optimizer=self.webpackChunkgenshin_optimizer||[]).push([[846],{20005:function(e,n,t){function r(e){var n=e.condition,t=e.wrapper,r=e.falseWrapper,i=e.children;return n?t(i):r?r(i):i}t.d(n,{Z:function(){return r}})},59215:function(e,n,t){t.d(n,{Z:function(){return Z}});var r=t(1413),i=t(45987),s=t(53174),c=t(54483),a=t(2199),o=t(23786),l=t(24518),u=t(52791),d=t(22020),f=t(76899),x=t(33890),h=t(80184),j=["sortKeys","value","onChange","ascending","onChangeAsc"];function Z(e){var n=e.sortKeys,t=e.value,Z=e.onChange,m=e.ascending,p=e.onChangeAsc,y=(0,i.Z)(e,j),g=(0,d.$)("ui").t;return(0,h.jsxs)(u.Z,{display:"flex",alignItems:"center",gap:1,children:[(0,h.jsx)(f.c,{t:g,i18nKey:g("sortBy"),children:"Sort by: "}),(0,h.jsxs)(a.Z,(0,r.Z)((0,r.Z)({},y),{},{children:[(0,h.jsx)(x.Z,{title:(0,h.jsx)(f.c,{t:g,i18nKey:g("sortMap.".concat(t)),children:{value:g("sortMap.".concat(t))}}),children:n.map((function(e){return(0,h.jsx)(o.Z,{selected:t===e,disabled:t===e,onClick:function(){return Z(e)},children:g("sortMap.".concat(e))},e)}))}),(0,h.jsx)(l.Z,{onClick:function(){return p(!m)},startIcon:(0,h.jsx)(c.G,{icon:m?s.Pa6:s.xrW,className:"fa-fw"}),children:m?(0,h.jsx)(f.c,{t:g,i18nKey:"ascending",children:"Ascending"}):(0,h.jsx)(f.c,{t:g,i18nKey:"descending",children:"Descending"})})]}))]})}},10157:function(e,n,t){t.d(n,{q:function(){return l}});var r=t(93433),i=t(53174),s=t(54483),c=t(91702),a=t(80184),o=function(){return(0,a.jsx)(s.G,{icon:i.Tab})},l=function(e){var n=e.stars,t=e.colored,i=void 0!==t&&t;return(0,a.jsx)(c.Z,{color:i?"warning":void 0,children:n?(0,r.Z)(Array(n).keys()).map((function(e,n){return(0,a.jsx)(o,{},n)})):null})}},22945:function(e,n,t){t.r(n),t.d(n,{default:function(){return ce}});var r=t(93433),i=t(30168),s=t(1413),c=t(29439),a=t(53174),o=t(54483),l=t(49670),u=t(68870),d=t(94070),f=t(23060),x=t(39504),h=t(61889),j=t(24518),Z=t(57246),m=t(47047),p=t(20890),y=t(72791),g=t(10757),b=t(22020),v=t(76899),w=t(43504),k=t(15678),P=t(3992),C=t(94721),A=t(24711),I=t(60393),S=t(68198),K=t(9321),F=t(66624),G=t(80184);function E(e){var n=e.pageKey,t=e.text,r=void 0===t?"":t,i=e.modalTitle,s=void 0===i?"":i,l=e.children,u=(0,A.Z)("true"!==localStorage.getItem("infoShown_".concat(n))),d=(0,c.Z)(u,3),f=d[0],Z=d[1],g=d[2],b=(0,y.useState)(Array.isArray(r)?(0,I.F_)(r):r),v=(0,c.Z)(b,1)[0],w=(0,y.useCallback)((function(){g(),localStorage.setItem("infoShown_".concat(n),"true")}),[g,n]);return(0,G.jsxs)(P.Z,{children:[(0,G.jsxs)(h.ZP,{container:!0,children:[(0,G.jsx)(h.ZP,{item:!0,flexGrow:1,children:(0,G.jsx)(p.Z,{variant:"caption",pl:1,children:v})}),(0,G.jsx)(h.ZP,{item:!0,xs:"auto",children:(0,G.jsx)(j.Z,{size:"small",color:"info",variant:"contained",onClick:Z,startIcon:(0,G.jsx)(o.G,{icon:a.Fuz}),children:(0,G.jsx)(F.v,{ns:"ui",key18:"info"})})})]}),(0,G.jsx)(K.Z,{containerProps:{maxWidth:"xl"},open:f,onClose:w,children:(0,G.jsxs)(P.Z,{children:[(0,G.jsx)(x.Z,{sx:{py:1},children:(0,G.jsxs)(h.ZP,{container:!0,children:[(0,G.jsx)(h.ZP,{item:!0,flexGrow:1,children:(0,G.jsx)(p.Z,{variant:"h6",children:s})}),(0,G.jsx)(h.ZP,{item:!0,children:(0,G.jsx)(S.Z,{onClick:w})})]})}),(0,G.jsx)(C.Z,{}),(0,G.jsx)(x.Z,{children:(0,G.jsx)(y.Suspense,{fallback:(0,G.jsx)(m.Z,{variant:"rectangular",width:"100%",height:500}),children:l})}),(0,G.jsx)(C.Z,{}),(0,G.jsx)(x.Z,{sx:{py:1},children:(0,G.jsx)(S.Z,{large:!0,onClick:w})})]})})]})}var D=t(59215),M=t(1614);function T(){var e=(0,y.useContext)(M.t).database,n=(0,y.useState)(e.displayArtifact.get()),t=(0,c.Z)(n,2),r=t[0],i=t[1];return(0,y.useEffect)((function(){return e.displayArtifact.follow((function(e,n){return i(n)}))}),[e]),r}var O=t(68544),U=t(70645),W=t(50765),z=t(46956),q=t(72838),N=t(62002),_=t(40117),$=t(25617),L=(0,y.lazy)((function(){return Promise.all([t.e(889),t.e(673)]).then(t.bind(t,37673))}));function H(e){var n=e.numShowing,t=e.total,r=(0,b.$)(["artifact","ui"]).t,i=(0,y.useContext)(M.t).database,c=T().filterOption,a=(0,y.useCallback)((function(e){return i.displayArtifact.set({filterOption:(0,s.Z)((0,s.Z)({},c),e)})}),[i,c]);return(0,G.jsx)(y.Suspense,{fallback:(0,G.jsx)(m.Z,{variant:"rectangular",width:"100%",height:300}),children:(0,G.jsx)(P.Z,{children:(0,G.jsxs)(x.Z,{children:[(0,G.jsxs)(h.ZP,{container:!0,children:[(0,G.jsx)(h.ZP,{item:!0,children:(0,G.jsx)(p.Z,{variant:"h6",children:(0,G.jsx)(v.c,{t:r,i18nKey:"artifactFilter",children:"Artifact Filter"})})}),(0,G.jsx)(h.ZP,{item:!0,flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center",children:n!==t&&(0,G.jsxs)(p.Z,{children:["Filtered ",n," / ",t]})}),(0,G.jsx)(h.ZP,{item:!0,children:(0,G.jsx)(j.Z,{size:"small",color:"error",onClick:function(){return i.displayArtifact.set({action:"reset"})},startIcon:(0,G.jsx)(l.Z,{}),children:(0,G.jsx)(v.c,{t:r,i18nKey:"ui:reset"})})})]}),(0,G.jsx)(y.Suspense,{fallback:(0,G.jsx)(m.Z,{variant:"rectangular",width:"100%",height:200}),children:(0,G.jsx)(L,{filterOption:c,filterOptionDispatch:a})})]})})})}function Q(e){var n=e.artifactIds,t=(0,b.$)(["artifact","ui"]).t,r=(0,y.useContext)(M.t).database,i=(0,y.useMemo)((function(){var e=n.map((function(e){return r.arts.get(e)})),t=e.reduce((function(e,n){return e+(n.lock?0:1)}),0),i=e.length-t,s=t,c=e.reduce((function(e,n){return e+(n.location?1:0)}),0),a=e.reduce((function(e,n){return e+(n.exclude?1:0)}),0);return{numDelete:s,numUnequip:c,numExclude:a,numInclude:e.length-a,numUnlock:t,numLock:i}}),[n,r]),s=i.numDelete,c=i.numUnequip,l=i.numExclude,u=i.numInclude,d=i.numUnlock,f=i.numLock;return(0,G.jsxs)(h.ZP,{container:!0,spacing:1,alignItems:"center",children:[(0,G.jsx)(h.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,G.jsxs)(j.Z,{fullWidth:!0,color:"error",disabled:!c,onClick:function(){return window.confirm("Are you sure you want to unequip ".concat(c," artifacts currently equipped on characters?"))&&n.map((function(e){return r.arts.set(e,{location:""})}))},startIcon:(0,G.jsx)(o.G,{icon:a.wOQ}),children:[(0,G.jsx)(v.c,{t:t,i18nKey:"button.unequipArtifacts",children:"Unequip Artifacts"}),(0,G.jsx)($.Z,{sx:{ml:1},color:c?"success":"secondary",children:c})]})}),(0,G.jsx)(h.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,G.jsxs)(j.Z,{fullWidth:!0,color:"error",disabled:!s,onClick:function(){return window.confirm("Are you sure you want to delete ".concat(s," artifacts?"))&&n.map((function(e){var n;return!(null!==(n=r.arts.get(e))&&void 0!==n&&n.lock)&&r.arts.remove(e)}))},startIcon:(0,G.jsx)(o.G,{icon:a.$aW}),children:[(0,G.jsx)(v.c,{t:t,i18nKey:"button.deleteArtifacts",children:"Delete Artifacts"}),(0,G.jsx)($.Z,{sx:{ml:1},color:s?"success":"secondary",children:s})]})}),(0,G.jsx)(h.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,G.jsxs)(j.Z,{fullWidth:!0,color:"error",disabled:!u,onClick:function(){return window.confirm("Are you sure you want to exclude ".concat(u," artifacts from build generations?"))&&n.map((function(e){return r.arts.set(e,{exclude:!0})}))},startIcon:(0,G.jsx)(o.G,{icon:a.gPx}),children:[(0,G.jsx)(v.c,{t:t,i18nKey:"button.excludeArtifacts",children:"Exclude Artifacts"}),(0,G.jsx)($.Z,{sx:{ml:1},color:u?"success":"secondary",children:u})]})}),(0,G.jsx)(h.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,G.jsxs)(j.Z,{fullWidth:!0,color:"error",disabled:!l,onClick:function(){return window.confirm("Are you sure you want to include ".concat(l," artifacts in build generations?"))&&n.map((function(e){return r.arts.set(e,{exclude:!1})}))},startIcon:(0,G.jsx)(o.G,{icon:a.Stf}),children:[(0,G.jsx)(v.c,{t:t,i18nKey:"button.includeArtifacts",children:"Include Artifacts"}),(0,G.jsx)($.Z,{sx:{ml:1},color:l?"success":"secondary",children:l})]})}),(0,G.jsx)(h.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,G.jsxs)(j.Z,{fullWidth:!0,color:"error",disabled:!f,onClick:function(){return window.confirm("Are you sure you want to unlock ".concat(f," artifacts?"))&&n.map((function(e){return r.arts.set(e,{lock:!1})}))},startIcon:(0,G.jsx)(N.Z,{}),children:[(0,G.jsx)(v.c,{t:t,i18nKey:"button.unlockrtifacts",children:"Unlock Artifacts"}),(0,G.jsx)($.Z,{sx:{ml:1},color:f?"success":"secondary",children:f})]})}),(0,G.jsx)(h.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,G.jsxs)(j.Z,{fullWidth:!0,color:"error",disabled:!d,onClick:function(){return window.confirm("Are you sure you want to lock ".concat(d," artifacts?"))&&n.map((function(e){return r.arts.set(e,{lock:!0})}))},startIcon:(0,G.jsx)(_.Z,{}),children:[(0,G.jsx)(v.c,{t:t,i18nKey:"button.lockArtifacts",children:"Lock Artifacts"}),(0,G.jsx)($.Z,{sx:{ml:1},color:d?"success":"secondary",children:d})]})}),(0,G.jsx)(h.ZP,{item:!0,xs:12,sm:12,md:6,display:"flex",justifyContent:"space-around",children:(0,G.jsx)(p.Z,{variant:"caption",color:"text.secondary",children:(0,G.jsxs)(v.c,{t:t,i18nKey:"buttonHint",children:["Note: the red buttons above only applies to ",(0,G.jsx)("b",{children:"currently filtered artifacts"})]})})})]})}var R=t(44824),V=t(71310),B=t(91702),J=t(43696),X=(0,r.Z)(W._);function Y(e){var n=e.probabilityFilter,t=void 0===n?{}:n,r=e.setProbabilityFilter,i=e.disabled,s=void 0!==i&&i;return(0,G.jsxs)(P.Z,{children:[(0,G.jsx)(x.Z,{sx:{py:1},children:(0,G.jsx)(p.Z,{variant:"h6",children:"Roll Probability Calculator"})}),(0,G.jsx)(C.Z,{}),(0,G.jsx)(x.Z,{children:(0,G.jsxs)(h.ZP,{container:!0,spacing:1,children:[(0,G.jsx)(h.ZP,{item:!0,xs:12,md:6,children:(0,G.jsx)(V.Z,{children:(0,G.jsx)(x.Z,{children:(0,G.jsxs)(p.Z,{children:['This UI only pops up when "Sort by" ',(0,G.jsx)("strong",{children:"Probability"}),". In conjunction with the Artifact Filters above, this UI allows you to set a criteria for substats values, and it will sort the artifacts by those with the highest probability to roll into those criteria values.",(0,G.jsx)(B.Z,{color:"warning",children:" Artifacts that already reach the criteria(100%) or are at 0% are hidden."})]})})})}),(0,G.jsx)(h.ZP,{item:!0,xs:12,md:6,spacing:1,sx:{display:"flex",flexDirection:"column",gap:1},children:(0,G.jsx)(J.Z,{statKeys:X,statFilters:t,setStatFilters:r,disabled:s})})]})})]})}var ee,ne=t(44217),te=y.lazy((function(){return Promise.all([t.e(219),t.e(213)]).then(t.bind(t,66585))})),re=y.lazy((function(){return t.e(383).then(t.bind(t,66311))})),ie={xs:1,sm:2,md:3,lg:3,xl:4},se={xs:9,sm:11,md:23,lg:23,xl:23};function ce(){var e=(0,b.$)(["artifact","ui"]).t,n=(0,y.useContext)(M.t).database,t=T(),a=(0,U.Z)(),o=se[a],p=t.sortType,C=t.effFilter,A=t.ascending,S=t.probabilityFilter,K="probability"===p,F=(0,y.useState)(0),N=(0,c.Z)(F,2),_=N[0],$=N[1],L=(0,y.useRef)(null),V=(0,O.Z)(),B=(0,c.Z)(V,2),J=B[0],X=B[1],te=(0,y.useMemo)((function(){return new Set(C)}),[C]),ce=(0,y.useCallback)((function(e){return n.arts.remove(e)}),[n]);(0,y.useEffect)((function(){return g.ZP.send({hitType:"pageview",page:"/artifact"}),n.arts.followAny((function(){return X()}))}),[n,X]);var le=(0,y.useCallback)((function(e){return n.displayArtifact.set({probabilityFilter:e})}),[n]),ue=(0,y.useMemo)((function(){return!n.arts.values.length}),[n]),de=(0,y.useMemo)((function(){return(0,R.x3)(te,S)}),[te,S]),fe=(0,y.useMemo)((function(){return(0,R.EM)(te)}),[te]),xe=(0,y.useDeferredValue)(t),he=(0,y.useDeferredValue)(S);(0,y.useEffect)((function(){if(K)return n.arts.values.forEach((function(e){return n.arts.setProbability(e.id,(0,ne.B)(e,he))})),function(){return n.arts.values.forEach((function(e){return n.arts.setProbability(e.id,-1)}))}}),[n,K,he]);var je=(0,y.useMemo)((function(){var e,t=xe.sortType,r=void 0===t?R.OQ[0]:t,i=xe.ascending,c=void 0!==i&&i,a=xe.filterOption,o=n.arts.values;K&&(o=o.filter((function(e){return e.probability&&1!==e.probability})));var l=o.filter((0,z.C)(a,fe)).sort((0,z.e)(null!==(e=R.t$[r])&&void 0!==e?e:[],c,de)).map((function(e){return e.id}));return(0,s.Z)({artifactIds:l,totalArtNum:o.length},J)}),[xe,J,n,de,fe,K]),Ze=je.artifactIds,me=je.totalArtNum,pe=(0,y.useMemo)((function(){var e=Math.ceil(Ze.length/o),n=(0,I.uZ)(_,0,e-1);return{artifactIdsToShow:Ze.slice(n*o,(n+1)*o),numPages:e,currentPageIndex:n}}),[Ze,_,o]),ye=pe.artifactIdsToShow,ge=pe.numPages,be=pe.currentPageIndex,ve=Ze.length!==me?"".concat(Ze.length,"/").concat(me):"".concat(me),we=(0,y.useCallback)((function(e,n){var t;null===(t=L.current)||void 0===t||t.scrollIntoView({behavior:"smooth"}),$(n-1)}),[$,L]);return(0,G.jsxs)(u.Z,{display:"flex",flexDirection:"column",gap:1,my:1,children:[(0,G.jsx)(E,{pageKey:"artifactPage",modalTitle:e(ee||(ee=(0,i.Z)(["info.title"]))),text:e("tipsOfTheDay",{returnObjects:!0}),children:(0,G.jsx)(re,{})}),ue&&(0,G.jsxs)(d.Z,{severity:"info",variant:"filled",children:["Looks like you haven't added any artifacts yet. If you want, there are ",(0,G.jsx)(f.Z,{color:"warning.main",component:w.rU,to:"/scanner",children:"automatic scanners"})," that can speed up the import process!"]}),(0,G.jsx)(H,{numShowing:Ze.length,total:me}),(0,G.jsx)(P.Z,{ref:L,children:(0,G.jsxs)(x.Z,{children:[(0,G.jsxs)(h.ZP,{container:!0,sx:{mb:1},children:[(0,G.jsx)(h.ZP,{item:!0,flexGrow:1,children:(0,G.jsx)("span",{children:(0,G.jsx)(v.c,{t:e,i18nKey:"efficiencyFilter.title",children:"Substats to use in efficiency calculation"})})}),(0,G.jsx)(h.ZP,{item:!0,children:(0,G.jsx)(j.Z,{size:"small",color:"error",onClick:function(){return n.displayArtifact.set({effFilter:(0,r.Z)(W._)})},startIcon:(0,G.jsx)(l.Z,{}),children:(0,G.jsx)(v.c,{t:e,i18nKey:"ui:reset"})})})]}),(0,G.jsx)(k.Z,{selectedKeys:C,onChange:function(e){return n.displayArtifact.set({effFilter:e})}})]})}),(0,G.jsx)(P.Z,{children:(0,G.jsxs)(x.Z,{children:[(0,G.jsxs)(h.ZP,{container:!0,alignItems:"center",sx:{pb:2},children:[(0,G.jsx)(h.ZP,{item:!0,flexGrow:1,children:(0,G.jsx)(Z.Z,{count:ge,page:be+1,onChange:we})}),(0,G.jsx)(h.ZP,{item:!0,flexGrow:1,children:(0,G.jsx)(oe,{numShowing:ye.length,total:ve,t:e})}),(0,G.jsxs)(h.ZP,{item:!0,xs:12,sm:6,md:4,lg:4,xl:3,display:"flex",children:[(0,G.jsx)(u.Z,{flexGrow:1}),(0,G.jsx)(D.Z,{sortKeys:(0,r.Z)(R.OQ),value:p,onChange:function(e){return n.displayArtifact.set({sortType:e})},ascending:A,onChangeAsc:function(e){return n.displayArtifact.set({ascending:e})}})]})]}),(0,G.jsx)(Q,{artifactIds:Ze})]})}),K&&(0,G.jsx)(Y,{probabilityFilter:S,setProbabilityFilter:le}),(0,G.jsx)(y.Suspense,{fallback:(0,G.jsx)(m.Z,{variant:"rectangular",sx:{width:"100%",height:"100%",minHeight:5e3}}),children:(0,G.jsxs)(h.ZP,{container:!0,spacing:1,columns:ie,children:[(0,G.jsx)(h.ZP,{item:!0,xs:1,children:(0,G.jsx)(ae,{})}),ye.map((function(e){return(0,G.jsx)(h.ZP,{item:!0,xs:1,children:(0,G.jsx)(q.Z,{artifactId:e,effFilter:te,onDelete:ce,editorProps:{},canExclude:!0,canEquip:!0})},e)}))]})}),ge>1&&(0,G.jsx)(P.Z,{children:(0,G.jsx)(x.Z,{children:(0,G.jsxs)(h.ZP,{container:!0,children:[(0,G.jsx)(h.ZP,{item:!0,flexGrow:1,children:(0,G.jsx)(Z.Z,{count:ge,page:be+1,onChange:we})}),(0,G.jsx)(h.ZP,{item:!0,children:(0,G.jsx)(oe,{numShowing:ye.length,total:ve,t:e})})]})})})]})}function ae(){var e=(0,y.useState)(!1),n=(0,c.Z)(e,2),t=n[0],r=n[1],i=(0,y.useCallback)((function(){return r(!0)}),[r]),s=(0,y.useCallback)((function(){return r(!1)}),[r]);return(0,G.jsxs)(P.Z,{sx:{height:"100%",width:"100%",minHeight:300,display:"flex",flexDirection:"column"},children:[(0,G.jsx)(y.Suspense,{fallback:!1,children:(0,G.jsx)(te,{artifactIdToEdit:t?"new":"",cancelEdit:s,allowUpload:!0,allowEmpty:!0})}),(0,G.jsx)(x.Z,{children:(0,G.jsx)(p.Z,{sx:{textAlign:"center"},children:"Add New Artifact"})}),(0,G.jsx)(u.Z,{sx:{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center"},children:(0,G.jsx)(j.Z,{onClick:i,color:"info",sx:{borderRadius:"1em"},children:(0,G.jsx)(p.Z,{variant:"h1",children:(0,G.jsx)(o.G,{icon:a.r8p,className:"fa-fw"})})})})]})}function oe(e){var n=e.numShowing,t=e.total,r=e.t;return(0,G.jsx)(p.Z,{color:"text.secondary",children:(0,G.jsxs)(v.c,{t:r,i18nKey:"showingNum",count:n,value:t,children:["Showing ",(0,G.jsx)("b",{children:{count:n}})," out of ",{value:t}," Artifacts"]})})}},68544:function(e,n,t){t.d(n,{Z:function(){return s}});var r=t(29439),i=t(72791);function s(){var e=(0,i.useState)({}),n=(0,r.Z)(e,2),t=n[0],s=n[1];return[t,(0,i.useCallback)((function(){return s({})}),[])]}},70645:function(e,n,t){t.d(n,{Z:function(){return s}});var r=t(13967),i=t(95193);function s(){var e=(0,r.Z)(),n=(0,i.Z)(e.breakpoints.up("sm")),t=(0,i.Z)(e.breakpoints.up("md")),s=(0,i.Z)(e.breakpoints.up("lg"));return(0,i.Z)(e.breakpoints.up("xl"))?"xl":s?"lg":t?"md":n?"sm":"xs"}},46956:function(e,n,t){t.d(n,{C:function(){return c},e:function(){return s}});var r=t(29439),i=t(37762);function s(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return function(s,c){var a,o=(0,i.Z)(e);try{for(o.s();!(a=o.n()).done;){var l=a.value,u=0,d=t[l],f=d(s),x=d(c);if(0!==(u="string"===typeof f&&"string"===typeof x?f.localeCompare(x):x-f))return r.includes(l)?u:(n?-1:1)*u}}catch(h){o.e(h)}finally{o.f()}return 0}}function c(e,n){return function(t){return Object.entries(e).every((function(e){var i=(0,r.Z)(e,2),s=i[0],c=i[1];return n[s]&&n[s](t,c)}))}}}}]);
//# sourceMappingURL=846.f50d3243.chunk.js.map