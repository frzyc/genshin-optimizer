{"version":3,"file":"static/js/409.10fb87f8.chunk.js","mappings":"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","sources":["Components/ToggleButton/WeaponToggle.tsx","Components/Weapon/WeaponSelectionModal.tsx"],"sourcesContent":["import { ToggleButton } from \"@mui/material\";\r\nimport Assets from \"../../Assets/Assets\";\r\nimport { allWeaponTypeKeys, WeaponTypeKey } from \"../../Types/consts\";\r\nimport { handleMultiSelect } from \"../../Util/MultiSelect\";\r\nimport ImgIcon from \"../Image/ImgIcon\";\r\nimport SolidToggleButtonGroup, { SolidToggleButtonGroupProps } from \"../SolidToggleButtonGroup\";\r\ntype WeaponToggleProps = Omit<SolidToggleButtonGroupProps, \"onChange\" | \"value\"> & {\r\n  onChange: (value: WeaponTypeKey[]) => void\r\n  value: WeaponTypeKey[]\r\n}\r\nconst weaponTypeHandler = handleMultiSelect([...allWeaponTypeKeys])\r\nexport default function WeaponToggle({ value, onChange, ...props }: WeaponToggleProps) {\r\n  return <SolidToggleButtonGroup exclusive value={value} {...props}>\r\n    {allWeaponTypeKeys.map(wt => <ToggleButton key={wt} value={wt} onClick={() => onChange(weaponTypeHandler(value, wt))}>\r\n      <ImgIcon src={Assets.weaponTypes?.[wt]} size={2} />\r\n    </ToggleButton>)}\r\n  </SolidToggleButtonGroup>\r\n}\r\n","import { Box, CardActionArea, CardContent, Divider, Grid, TextField, Typography } from \"@mui/material\"\r\nimport { ChangeEvent, useDeferredValue, useEffect, useState } from \"react\"\r\nimport { useTranslation } from \"react-i18next\"\r\nimport Assets from \"../../Assets/Assets\"\r\nimport WeaponSheet from \"../../Data/Weapons/WeaponSheet\"\r\nimport usePromise from \"../../ReactHooks/usePromise\"\r\nimport { allWeaponKeys, allWeaponTypeKeys, WeaponKey, WeaponTypeKey } from \"../../Types/consts\"\r\nimport CardDark from \"../Card/CardDark\"\r\nimport CardLight from \"../Card/CardLight\"\r\nimport CloseButton from \"../CloseButton\"\r\nimport ImgIcon from \"../Image/ImgIcon\"\r\nimport ModalWrapper from \"../ModalWrapper\"\r\nimport { StarsDisplay } from \"../StarDisplay\"\r\nimport WeaponToggle from \"../ToggleButton/WeaponToggle\"\r\n\r\ntype WeaponSelectionModalProps = {\r\n  show: boolean,\r\n  ascension?: number,\r\n  onHide: () => void,\r\n  onSelect: (wKey: WeaponKey) => void,\r\n  filter?: (sheet: WeaponSheet) => boolean,\r\n  weaponTypeFilter?: WeaponTypeKey,\r\n}\r\n\r\nexport default function WeaponSelectionModal({ show, ascension = 0, onHide, onSelect, filter = () => true, weaponTypeFilter }: WeaponSelectionModalProps) {\r\n  const { t } = useTranslation([\"page_weapon\", \"weaponNames_gen\"])\r\n  const weaponSheets = usePromise(() => WeaponSheet.getAll, [])\r\n  const [weaponFilter, setWeaponfilter] = useState<WeaponTypeKey[]>(weaponTypeFilter ? [weaponTypeFilter] : [...allWeaponTypeKeys])\r\n\r\n  useEffect(() => weaponTypeFilter && setWeaponfilter([weaponTypeFilter]), [weaponTypeFilter])\r\n\r\n  const [searchTerm, setSearchTerm] = useState(\"\")\r\n  const deferredSearchTerm = useDeferredValue(searchTerm)\r\n\r\n  const weaponIdList = !weaponSheets ? [] : allWeaponKeys.filter(wKey => filter(weaponSheets(wKey)))\r\n    .filter(wKey => weaponFilter.includes(weaponSheets(wKey).weaponType))\r\n    .filter(wKey => !deferredSearchTerm || t(`weaponNames_gen:${wKey}`).toLowerCase().includes(deferredSearchTerm.toLowerCase()))\r\n    .sort((a, b) => weaponSheets(b).rarity - weaponSheets(a).rarity)\r\n\r\n  if (!weaponSheets) return null\r\n\r\n  return <ModalWrapper open={show} onClose={onHide}>\r\n    <CardDark>\r\n      <CardContent sx={{ py: 1 }}>\r\n        <Grid container spacing={1}>\r\n          <Grid item>\r\n            <WeaponToggle value={weaponFilter} onChange={setWeaponfilter} disabled={!!weaponTypeFilter} size=\"small\" />\r\n          </Grid >\r\n          <Grid item flexGrow={1}>\r\n            <TextField\r\n              autoFocus\r\n              size=\"small\"\r\n              value={searchTerm}\r\n              onChange={(e: ChangeEvent<HTMLTextAreaElement>) => setSearchTerm(e.target.value)}\r\n              label={t(\"weaponName\")}\r\n              sx={{ height: \"100%\" }}\r\n              InputProps={{\r\n                sx: { height: \"100%\" }\r\n              }}\r\n            />\r\n          </Grid>\r\n          <Grid item>\r\n            <CloseButton onClick={onHide} />\r\n          </Grid >\r\n        </Grid>\r\n      </CardContent>\r\n      <Divider />\r\n      <CardContent><Grid container spacing={1}>\r\n        {weaponIdList.map(weaponKey => {\r\n          const weaponSheet = weaponSheets(weaponKey)\r\n          return <Grid item key={weaponKey} lg={3} md={4}>\r\n            <CardLight sx={{ height: \"100%\" }} >\r\n              <CardActionArea onClick={() => { onHide(); onSelect(weaponKey) }} sx={{ display: \"flex\" }}>\r\n                <Box component=\"img\" src={weaponSheet.getImg(ascension)} sx={{ width: 100, height: \"auto\" }} className={` grad-${weaponSheet.rarity}star`} />\r\n                <Box sx={{ flexGrow: 1, px: 1 }}>\r\n                  <Typography variant=\"subtitle1\">{weaponSheet.name}</Typography>\r\n                  <Typography><ImgIcon src={Assets.weaponTypes?.[weaponSheet.weaponType]} /> <StarsDisplay stars={weaponSheet.rarity} colored /></Typography>\r\n                </Box>\r\n              </CardActionArea>\r\n            </CardLight>\r\n          </Grid>\r\n        })}\r\n      </Grid></CardContent>\r\n      <Divider />\r\n      <CardContent sx={{ py: 1 }}>\r\n        <CloseButton large onClick={onHide} />\r\n      </CardContent>\r\n    </CardDark>\r\n  </ModalWrapper>\r\n}\r\n"],"names":["weaponTypeHandler","handleMultiSelect","allWeaponTypeKeys","WeaponToggle","value","onChange","props","exclusive","wt","onClick","src","Assets","size","WeaponSelectionModal","show","ascension","onHide","onSelect","filter","weaponTypeFilter","t","useTranslation","weaponSheets","usePromise","WeaponSheet","useState","weaponFilter","setWeaponfilter","useEffect","searchTerm","setSearchTerm","deferredSearchTerm","useDeferredValue","weaponIdList","allWeaponKeys","wKey","includes","weaponType","toLowerCase","sort","a","b","rarity","open","onClose","sx","py","container","spacing","item","disabled","flexGrow","autoFocus","e","target","label","height","InputProps","map","weaponKey","weaponSheet","lg","md","display","component","getImg","width","className","px","variant","name","stars","colored","large"],"sourceRoot":""}