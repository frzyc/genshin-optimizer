(this["webpackJsonpgenshin-optimizer"]=this["webpackJsonpgenshin-optimizer"]||[]).push([[9],{203:function(t,e,a){"use strict";a.r(e),a.d(e,"default",(function(){return xt}));var n=a(3),s=a(79),i=a(96),r=a(84),c=a(100),l=a(81),o=a(85),u=a(95),d=a(94),j=a(83),b=a(22),f=a(0),h=a.n(f),O=a(188),x=a(31),m=a(195),S=a(197),g=a(187),v=a(29),y=a(55),p=a(41),w=a(88),K=a(86),N=a(106),k=a(101),A=a(99),I=a(102),C=a(87),E=a(89),L=a(93),M=a(127),T=a(90),R=a(194),D=a(153),U=a(103),P=a(206),F=a(207),V=a(196),W=a(128),z=a(98),H=a.n(z),B=a(155),G=a(201),J=a(193),_=a(202),Y=a(156),q=a.p+"static/media/scan_art_main.f06ea3ed.png",$=a.p+"static/media/snippet.d223e797.png",Q=a(17),X={r:250,g:250,b:250},Z={r:80,g:90,b:105},tt={r:92,g:178,b:86},et={r:255,g:204,b:50};var at=function(t){var e=Object(f.useState)("Click here to Upload Artifact Screenshot File"),a=Object(s.a)(e,2),i=a[0],r=a[1],c=Object(f.useState)(""),l=Object(s.a)(c,2),o=l[0],u=l[1],d=Object(f.useState)(!1),h=Object(s.a)(d,2),O=h[0],m=h[1],S=Object(f.useState)(0),g=Object(s.a)(S,2),w=g[0],K=g[1],N=Object(f.useState)(""),k=Object(s.a)(N,2),I=k[0],E=k[1],M=Object(f.useState)(0),T=Object(s.a)(M,2),R=T[0],D=T[1],P=Object(f.useState)(""),F=Object(s.a)(P,2),V=F[0],W=F[1],z=Object(f.useState)(0),et=Object(s.a)(z,2),at=et[0],ot=et[1],Ot=Object(f.useState)(""),xt=Object(s.a)(Ot,2),mt=xt[0],St=xt[1],gt=Object(f.useState)(0),vt=Object(s.a)(gt,2),yt=vt[0],pt=vt[1],wt=Object(f.useState)(""),Kt=Object(s.a)(wt,2),Nt=Kt[0],kt=Kt[1],At=Object(f.useState)(!1),It=Object(s.a)(At,2),Ct=It[0],Et=It[1],Lt=function(){r("Click here to Upload Artifact Screenshot File"),u(""),Et(!1),m(!1),K(0),E(""),D(0),W(""),ot(0),St(""),pt(0),kt("")},Mt=function(){var t=Object(B.a)(H.a.mark((function t(e,a,n){var s,i,r;return H.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=Object(Y.createWorker)({logger:function(t){"loading tesseract core"===t.status&&n("danger"),t.status.includes("loading language traineddata")&&n("warning"),t.status.includes("initializing api")&&n("info"),"recognizing text"===t.status&&n("success"),a(t.progress)}}),t.next=3,s.load();case 3:return t.next=5,s.loadLanguage("eng");case 5:return t.next=7,s.initialize("eng");case 7:return t.next=9,s.recognize(e);case 9:return i=t.sent,r=i.data.text,t.abrupt("return",r);case 12:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),Tt=function(){var e=Object(B.a)(H.a.mark((function e(a){var n,i,c,l,o,d,j,b,f,h,O,x,S,g,v,y,p,w,N,k,I,M;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:return m(!0),r(a.name),e.next=6,nt(a);case 6:return i=e.sent,u(i),e.next=10,st(i);case 10:return c=e.sent,l=rt(c.data,c.width,c.height),o=[Mt(it(ct(c,X)),K,E),Mt(it(ct(c,Z,15)),D,W),Mt(it(ct(c,tt)),ot,St),Mt(it(lt(c,{r:150,g:150,b:160},{r:215,g:200,b:220})),pt,kt)],e.next=15,Promise.all(o);case 15:d=e.sent,j=Object(s.a)(d,4),b=j[0],f=j[1],h=j[2],O=j[3],x=jt(h),S=bt(b),g=ut(f),v=ft(b),y=dt(O),p=ht(b),w=p.mainStatValue,N=p.unit,"%"!==(k=void 0===N?"":N)||"hp"!==y&&"def"!==y&&"atk"!==y||(y+="_"),x&&l&&(L.a.getRarityArr(x).includes(l)||(l=0)),l&&!isNaN(v)&&v>4*l&&(v=NaN),S&&!y&&(1===(I=A.d[S].stats).length||(I=I.filter((function(t){return(!w||k===C.a.getStatUnit(t))&&((!g||!g.some((function(e){return e.key===t})))&&!(w&&l&&v&&L.a.getMainStatValue(t,l,v)!==w))}))).length>0)&&(y=I[0]),M={},isNaN(v)||(M.level=v),x&&(M.setKey=x),S&&(M.slotKey=S),g&&(M.substats=g),l&&(M.numStars=l),y&&(M.mainStatKey=y),null===(n=t.setState)||void 0===n||n.call(t,M);case 39:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Rt=Object(n.jsx)(G.a,{show:Ct,onHide:function(){return Et(!1)},size:"xl",variant:"success",dialogAs:y.a,className:"pt-3 pb-3",children:Object(n.jsxs)(x.a,{bg:"darkcontent",text:"lightfont",children:[Object(n.jsx)(x.a.Header,{children:Object(n.jsx)(x.a.Title,{children:Object(n.jsxs)(p.a,{children:[Object(n.jsx)(v.a,{children:Object(n.jsx)("span",{children:"How do Upload Screenshots for parsing"})}),Object(n.jsx)(v.a,{xs:"auto",children:Object(n.jsx)(U.a,{variant:"danger",onClick:function(){return Et(!1)},children:Object(n.jsx)(b.a,{icon:j.z})})})]})})}),Object(n.jsxs)(x.a.Body,{children:[Object(n.jsxs)(p.a,{children:[Object(n.jsx)(v.a,{xs:8,md:4,children:Object(n.jsx)("img",{alt:"snippet of the screen to take",src:$,className:"w-100 h-auto"})}),Object(n.jsxs)(v.a,{xs:12,md:8,children:[Object(n.jsx)("p",{children:"Using screenshots can dramatically decrease the amount of time you manually input in stats on the Genshin Optimizer."}),Object(n.jsx)("h5",{children:"What to include in the screenshot."}),Object(n.jsxs)("p",{children:["In Genshin Impact, Open your bag, and navigate to the artifacts tab. Select the artifact you want to scan with Genshin Optimizer. To Take a screenshot, in Windows, the shortcut is ",Object(n.jsx)("strong",{children:"Shift + WindowsKey + S"}),". Once you selected the region, the image is automatically included in your clipboard."]})]})]}),Object(n.jsxs)(p.a,{children:[Object(n.jsxs)(v.a,{children:[Object(n.jsx)("h5",{children:"Adding Screenshot to Genshin Optimizer"}),Object(n.jsxs)("p",{children:['At this point, you should have the artifact snippet either saved to your harddrive, or in your clipboard. You can click on the box next to "Browse" to browse the file in your harddrive, or even easier, just press ',Object(n.jsx)("strong",{children:"Ctrl + V"})," to paste from your clipboard. You should be able to see a Preview of your artifact snippet, and after waiting a few seconds, the artifact set and the substats will be filled in in the ",Object(n.jsx)("b",{children:"Artifact Editor"}),"."]})]}),Object(n.jsxs)(v.a,{xs:12,children:[Object(n.jsx)("h5",{children:"Finishing the Artifact"}),Object(n.jsxs)("p",{children:["Unfortunately, computer vision is not 100%. There will always be cases where something is not scanned properly. You should always double check the scanned artifact values! Once the artifact has been filled, Click on ",Object(n.jsx)("strong",{children:"Add Artifact"})," to finish editing the artifact."]}),Object(n.jsx)("img",{alt:"main screen after importing stats",src:q,className:"w-75 h-auto"})]})]})]}),Object(n.jsx)(x.a.Footer,{children:Object(n.jsx)(U.a,{variant:"danger",onClick:function(){return Et(!1)},children:Object(n.jsx)("span",{children:"Close"})})})]})});Object(f.useEffect)((function(){var e=function(t){return Tt(t.clipboardData.files[0])};return window.addEventListener("paste",e),t.reset(Lt),function(){return window.removeEventListener("paste",e)}}));var Dt=o?Object(n.jsx)("img",{src:o,className:"w-100 h-auto",alt:"Screenshot to parse for artifact values"}):Object(n.jsx)("span",{children:"Please Select an Image"}),Ut=(100*at).toFixed(1),Pt=(100*yt).toFixed(1),Ft=(100*R).toFixed(1),Vt=(100*w).toFixed(1);return Object(n.jsxs)(p.a,{children:[Rt,Object(n.jsxs)(v.a,{children:[Object(n.jsx)(p.a,{className:"mb-1",children:Object(n.jsx)(v.a,{children:Object(n.jsxs)(p.a,{className:"mb-1",children:[Object(n.jsx)(v.a,{children:Object(n.jsx)("h5",{children:"Parse Substats by Uploading Image"})}),Object(n.jsx)(v.a,{xs:"auto",children:Object(n.jsx)(U.a,{variant:"info",onClick:function(){Et(!0),Q.a.modalview("/artifact/how-to-upload")},children:"Show me How!"})})]})})}),Object(n.jsxs)(p.a,{className:"mb-1",children:[Object(n.jsx)(v.a,{xs:8,lg:4,children:Dt}),O?Object(n.jsxs)(v.a,{xs:12,lg:8,children:[Object(n.jsx)("h6",{children:"Scan".concat(Ut<100?"ning":"ned"," Artifact Set")}),Object(n.jsx)(J.a,{variant:mt,now:Ut,label:"".concat(Ut,"%"),className:"mb-3"}),Object(n.jsx)("h6",{children:"Scan".concat(Pt<100?"ning":"ned"," Artifact Main Stat")}),Object(n.jsx)(J.a,{variant:Nt,now:Pt,label:"".concat(Pt,"%"),className:"mb-3"}),Object(n.jsx)("h6",{children:"Scan".concat(Ft<100?"ning":"ned"," Artifact Substat")}),Object(n.jsx)(J.a,{variant:V,now:Ft,label:"".concat(Ft,"%"),className:"mb-3"}),Object(n.jsx)("h6",{children:"Scan".concat(Vt<100?"ning":"ned"," Other")}),Object(n.jsx)(J.a,{variant:I,now:Vt,label:"".concat(Vt,"%"),className:"mb-3"})]}):null]}),Object(n.jsx)(p.a,{className:"mb-4",children:Object(n.jsx)(v.a,{children:Object(n.jsx)(_.a.Group,{as:v.a,children:Object(n.jsx)(_.a.File,{type:"file",className:"custom-file-label",id:"inputGroupFile01",label:i,onChange:function(t){var e=t.target.files[0];Tt(e)},custom:!0})})})})]})]})};function nt(t){return new Promise((function(e){var a=new FileReader;a.onloadend=function(){e(a.result)},a.readAsDataURL(t)}))}function st(t){return new Promise((function(e){var a=new Image;a.onload=function(){return e(function(t){var e=document.createElement("canvas"),a=e.getContext("2d");return e.width=t.width,e.height=t.height,a.drawImage(t,0,0,t.width,t.height),a.getImageData(0,0,t.width,t.height)}(a))},a.src=t}))}function it(t){var e=document.createElement("canvas"),a=e.getContext("2d");e.width=t.width,e.height=t.height;var n=a.createImageData(t.width,t.height);return n.data.set(t.data),a.putImageData(n,0,0),e.toDataURL()}function rt(t,e,a){for(var n=t,s=0,i=0,r=0;r<a;r++){for(var c=0,l=!1,o=0;o<e;o++){var u=4*(r*e+o);ot({r:n[u],g:n[u+1],b:n[u+2]},et)?l||(l=!0,c++):l=!1}if(s!==c)s=c,i=1;else if(s&&++i>=20)return s}return 0}function ct(t,e){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,n=Uint8ClampedArray.from(t.data),s=0;s<n.length;s+=4){var i=!0,r=n[s],c=n[s+1],l=n[s+2],o={r:r,g:c,b:l};ot(o,e,a)&&(i=!1),n[s]=n[s+1]=n[s+2]=i?255:0}return new ImageData(n,t.width,t.height)}function lt(t,e,a){for(var n=Uint8ClampedArray.from(t.data),s=Math.floor(t.width*(t.height/2)*4),i=0;i<n.length;i+=4){var r=!0,c=n[i],l=n[i+1],o=n[i+2];i<s&&c>e.r&&c<a.r&&l>e.g&&l<a.g&&o>e.b&&o<a.b&&(r=!1),n[i]=n[i+1]=n[i+2]=r?255:0}return new ImageData(n,t.width,t.height)}function ot(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,n=function(t,e){return Math.abs(t-e)<=a};return!!(n(t.r,e.r)&&n(t.g,e.g)&&n(t.b,e.b))}function ut(t){var e=[];L.a.getSubStatKeys().forEach((function(a){var n=C.a.getStatUnit(a),s=C.a.getStatName(a),i=("%"===n?new RegExp(s+"\\s*\\+\\s*(\\d+\\.\\d)%","im"):new RegExp(s+"\\s*\\+\\s*(\\d+,\\d+|\\d+)($|\\s)","im")).exec(t);i&&e.push({index:i.index,value:i[1],unit:n,key:a})})),e.sort((function(t,e){return t.index-e.index})),e.forEach((function(t,e){e>=4||(t.value="%"===t.unit?parseFloat(t.value):parseInt(t.value))}));for(var a=[],n=0;n<4;n++)e[n]?a.push({key:e[n].key,value:e[n].value}):a.push({key:"",value:0});return a}function dt(t){var e,a=Object(i.a)(L.a.getMainStatKeys());try{for(a.s();!(e=a.n()).done;){var n=e.value;if(t.toLowerCase().includes(C.a.getStatName(n).toLowerCase()))return n}}catch(s){a.e(s)}finally{a.f()}}function jt(t){for(var e=0,a=Object.entries(A.c);e<a.length;e++){var n=Object(s.a)(a[e],2),i=n[0],r=n[1];if(t.toLowerCase().includes(r.name.toLowerCase()))return i}}function bt(t){for(var e=0,a=Object.entries(A.d);e<a.length;e++){var n=Object(s.a)(a[e],2),i=n[0],r=n[1];if(t.toLowerCase().includes(r.name.toLowerCase()))return i}}function ft(t){var e=/\+(\d{1,2})/.exec(t);return e?parseInt(e[1]):NaN}function ht(t){var e=t.split("+")[0],a=/(\d+\.\d+)%/,n=a.exec(e);return n?{mainStatValue:parseFloat(n[1]),unit:"%"}:(n=(a=/(\d+,\d+|\d{2,3})/).exec(e))?{mainStatValue:parseInt(n[1])}:{mainStatValue:NaN}}var Ot=function(t){Object(u.a)(a,t);var e=Object(d.a)(a);function a(t){var c;return Object(l.a)(this,a),(c=e.call(this,t)).setLevel=function(t){return c.setState((function(e){return t=parseInt(t),isNaN(t)&&(t=0),t<0&&(t=0),t>4*e.numStars&&(t=4*e.numStars),{level:t}}))},c.getRemainingSubstats=function(){return Object.keys(A.f).filter((function(t){return c.state.mainStatKey!==t&&!c.state.substats.some((function(e,a){return!(!e||!e.key)&&e.key===t}))}))},c.saveArtifact=function(){var t,e;c.uploadDisplayReset();var n=Object(E.e)(c.state);n.artifactToEdit&&delete n.artifactToEdit,null===(t=(e=c.props).addArtifact)||void 0===t||t.call(e,n),c.setState(a.getInitialState())},c.setSetKey=function(t){return c.setState((function(e){var a=Object(E.f)(L.a.getRarityArr(t)),n=!e.level||e.level>4*a?4*a:e.level;return{setKey:t,numStars:a,level:n}}))},c.setSubStat=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return t<4&&c.setState((function(n){var s=Object(E.e)(n.substats);return s[t].key=e,s[t].value=a,{substats:s}}))},c.setMainStatKey=function(t){return c.setState((function(e){return e.substats.forEach((function(e,a){return e.key&&e.key===t&&c.setSubStat(a)})),{mainStatKey:t}}))},c.setSlotKey=function(t){return c.setState((function(e){var a,n=A.d[t].stats,s=Object(i.a)(n);try{var r=function(){var n=a.value;if(!e.substats.some((function(t){return!(!t||!t.key)&&t.key===n})))return{v:{slotKey:t,mainStatKey:n}}};for(s.s();!(a=s.n()).done;){var l=r();if("object"===typeof l)return l.v}}catch(u){s.e(u)}finally{s.f()}var o=n[0];return c.setMainStatKey(o),{slotKey:t}}))},c.ArtifactDropDown=function(t){var e=function(t){return L.a.getArtifactSetsByMaxStarEntries(t).map((function(t){var e=Object(s.a)(t,2),a=e[0],i=e[1];return Object(n.jsx)(O.a.Item,{onClick:function(){return c.setSetKey(a)},children:i.name},a)}))};return Object(n.jsxs)(R.a,{as:m.a.Prepend,title:L.a.getArtifactSetName(c.state.setKey,"Artifact Set"),children:[Object(n.jsxs)(O.a.ItemText,{children:["Max Rarity ",Object(n.jsx)(k.a,{stars:5})]}),e(5),Object(n.jsx)(O.a.Divider,{}),Object(n.jsxs)(O.a.ItemText,{children:["Max Rarity ",Object(n.jsx)(k.a,{stars:4})]}),e(4),Object(n.jsx)(O.a.Divider,{}),Object(n.jsxs)(O.a.ItemText,{children:["Max Rarity ",Object(n.jsx)(k.a,{stars:3})]}),e(3)]})},c.MainSelection=function(t){return Object(n.jsxs)(m.a,{children:[c.ArtifactDropDown(),Object(n.jsx)(R.a,{as:m.a.Prepend,title:c.state.numStars>0?"\ud83d\udfca".repeat(c.state.numStars):"Rarity",disabled:!c.state.setKey,children:Object.keys(A.e).map((function(t,e){return t=parseInt(t),Object(n.jsx)(O.a.Item,{disabled:!c.state.setKey||!A.c[c.state.setKey].rarity.includes(t),onClick:function(){c.setState({numStars:t,level:0})},children:Object(n.jsx)(k.a,{stars:t})},e)}))}),Object(n.jsx)(m.a.Prepend,{children:Object(n.jsx)(m.a.Text,{children:"Level"})}),Object(n.jsx)(D.a,{value:c.state.level,disabled:!c.state.setKey,placeholder:"0~".concat(4*c.state.numStars),onChange:function(t){return c.setLevel(t.target.value)}}),Object(n.jsxs)(m.a.Append,{children:[Object(n.jsx)(U.a,{onClick:function(){return c.setLevel(0)},disabled:!c.state.setKey||0===c.state.level,children:"0"}),Object(n.jsx)(U.a,{onClick:function(){return c.setLevel(c.state.level-1)},disabled:!c.state.setKey||0===c.state.level,children:"-"}),Object(n.jsx)(U.a,{onClick:function(){return c.setLevel(c.state.level+1)},disabled:!c.state.setKey||c.state.level===4*c.state.numStars,children:"+"}),Object(n.jsx)(U.a,{onClick:function(){return c.setLevel(4*c.state.numStars)},disabled:!c.state.setKey||c.state.level===4*c.state.numStars,children:4*c.state.numStars})]})]})},c.MainStatInputRow=function(){return Object(n.jsxs)(m.a,{children:[Object(n.jsx)(R.a,{title:L.a.getArtifactSlotNameWithIcon(c.state.slotKey,"Slot"),disabled:!c.state.setKey,as:m.a.Prepend,children:c.state.setKey&&Object.keys(A.c[c.state.setKey].pieces).map((function(t){return Object(n.jsx)(O.a.Item,{onClick:function(){return c.setSlotKey(t)},children:L.a.getArtifactSlotNameWithIcon(t,"Slot")},t)}))}),Object(n.jsx)(D.a,{value:L.a.getArtifactPieceName(c.state.setKey,c.state.slotKey,"Unknown Piece Name"),disabled:!0,readOnly:!0}),Object(n.jsxs)(R.a,{title:C.a.getStatNameWithPercent(c.state.mainStatKey,"Main Stat"),disabled:!c.state.setKey||!c.state.slotKey,as:m.a.Prepend,children:[Object(n.jsx)(O.a.ItemText,{children:"Select a Main Artifact Stat "}),c.state.slotKey?A.d[c.state.slotKey].stats.map((function(t){return Object(n.jsx)(O.a.Item,{onClick:function(){return c.setMainStatKey(t)},children:C.a.getStatNameWithPercent(t)},t)})):Object(n.jsx)(O.a.Item,{})]}),Object(n.jsx)(D.a,{value:c.state.mainStatKey?"".concat(L.a.getMainStatValue(c.state.mainStatKey,c.state.numStars,c.state.level)).concat(C.a.getStatUnit(c.state.mainStatKey)):"Main Stat",disabled:!0,readOnly:!0})]})},c.SubStatInput=function(t){var e=t.subStatKey&&"%"===C.a.getStatUnit(t.subStatKey),a={placeholder:"Select a Substat.",value:t.substatevalue?t.substatevalue:"",onValueChange:function(e){return c.onSubstatValueChange(e,t.index)},disabled:!t.subStatKey},s=e?Object(n.jsx)(N.a,Object(r.a)({},a)):Object(n.jsx)(N.b,Object(r.a)({},a));return Object(n.jsxs)(m.a,{children:[Object(n.jsx)(R.a,{title:C.a.getStatName(t.subStatKey,"Substat ".concat(t.index+1)),disabled:!t.remainingSubstats||0===t.remainingSubstats.length,as:m.a.Prepend,children:t.remainingSubstats?t.remainingSubstats.map((function(e){return Object(n.jsx)(O.a.Item,{onClick:function(){return c.onSubStatSelected(e,t.index)},children:C.a.getStatNameWithPercent(e)},e)})):Object(n.jsx)(O.a.Item,{})}),s,Object(n.jsxs)(m.a.Append,{children:[e&&Object(n.jsx)(m.a.Text,{children:"%"}),Object(n.jsx)(m.a.Text,{children:Object(n.jsx)(W.a,{tooltip:t.subStatValidation.msg,valid:t.subStatValidation.valid||!t.subStatKey,percent:t.subStatValidation.efficiency,children:t.subStatKey?t.subStatValidation.valid?"".concat((t.subStatValidation.efficiency?t.subStatValidation.efficiency:0).toFixed(2),"%"):"ERR":"No Stat"})})]})]})},c.onSubStatSelected=function(t,e){c.setState((function(a){var n=JSON.parse(JSON.stringify(a.substats));return n[e]={key:t,value:null},{substats:n}}))},c.onSubstatValueChange=function(t,e){c.setState((function(a){var n=JSON.parse(JSON.stringify(a.substats));return n[e].value=t,{substats:n}}))},c.randomizeArtifact=function(){var t=a.getInitialState();t.setKey=Object(E.g)(Object.keys(A.c)),t.numStars=Object(E.g)(A.c[t.setKey].rarity),t.slotKey=Object(E.g)(Object.keys(A.c[t.setKey].pieces)),t.mainStatKey=Object(E.g)(A.d[t.slotKey].stats);var e=Object(E.h)(A.e[t.numStars].subsBaselow,A.e[t.numStars].subBaseHigh);t.level=Object(E.h)(0,4*t.numStars);var n=Math.floor(t.level/4),s=e+n;s>=4?(e=4,n=s-4):(e=s,n=0);for(var i=function(e){return Object(E.g)(L.a.getSubstatRollData(e,t.numStars))},r=0;r<e;r++){var l=t.substats[r];l.key=Object(E.g)(c.getRemainingSubstats()),l.value=i(l.key)}for(var o=0;o<n;o++){var u=Object(E.g)(t.substats);u.value+=i(u.key)}c.setState(t)},c.componentDidUpdate=function(){c.props.artifactToEdit&&c.state.id!==c.props.artifactToEdit.id&&c.setState(c.props.artifactToEdit)},c.state=a.getInitialState(),c}return Object(o.a)(a,[{key:"render",value:function(){var t=this,e=this.getRemainingSubstats(),s=this.state.substats.map((function(e){return L.a.validateSubStat(t.state,e)})),i=L.a.artifactValidation(this.state,s);return Object(n.jsxs)(x.a,{bg:"darkcontent",text:"lightfont",children:[Object(n.jsx)(x.a.Header,{children:"Artifact Editor"}),Object(n.jsxs)(x.a.Body,{children:[Object(n.jsxs)(p.a,{className:"mb-2",children:[Object(n.jsx)(v.a,{xs:12,className:"mb-2",children:Object(n.jsx)(this.MainSelection,{})}),Object(n.jsx)(v.a,{xs:12,children:Object(n.jsx)(this.MainStatInputRow,{})})]}),Object(n.jsx)(p.a,{children:Object(n.jsxs)(v.a,{children:[Object(n.jsx)("h5",{className:"mr-auto",children:"Substats"}),Object(n.jsxs)("span",{children:[Object(n.jsxs)("span",{className:"mr-3",children:[Object(n.jsx)("span",{children:"Current Substat Efficiency "}),Object(n.jsx)(W.a,{tooltip:i.msg,valid:i.valid,percent:i.currentEfficiency,children:(i.currentEfficiency?i.currentEfficiency:0).toFixed(2)+"%"})]}),Object(n.jsxs)("span",{children:[Object(n.jsx)("span",{children:"Maximum Substat Efficiency "}),Object(n.jsx)(W.a,{tooltip:i.msg,valid:i.valid,percent:i.maximumEfficiency,children:(i.maximumEfficiency?i.maximumEfficiency:0).toFixed(2)+"%"})]}),Object(n.jsx)(P.a,{placement:"left",overlay:Object(n.jsxs)(F.a,{children:[Object(n.jsx)(F.a.Title,{as:"h5",children:"Substat Efficiency"}),Object(n.jsx)(F.a.Content,{children:Object(n.jsxs)("span",{children:["Every time 4 artifact upgrades, you get a substat roll. The ",Object(n.jsx)("strong",{children:"substat efficiency"})," calculates as a percentage how high the substat rolled. The ",Object(n.jsx)("strong",{children:"Maximum Substat Efficiency"})," of an artifact calculates the efficiency if the remaining upgrades rolled maximum."]})})]}),children:Object(n.jsx)(b.a,{icon:j.p,className:"ml-2",style:{cursor:"help"}})})]})]})}),Object(n.jsx)(p.a,{className:"mb-2",children:this.state.substats.map((function(a,i){return Object(n.jsx)(v.a,{className:"mt-1 mb-1",xs:12,lg:6,children:Object(n.jsx)(t.SubStatInput,{numStars:t.state.numStars,remainingSubstats:e,subStatKey:a?a.key:null,substatevalue:a?a.value:null,index:i,subStatValidation:s[i]})},"substat"+i)}))}),Object(n.jsx)(p.a,{className:"mb-2",children:Object(n.jsx)(v.a,{children:i.msg?Object(n.jsx)(V.a,{variant:"danger",children:i.msg}):null})}),Object(n.jsx)(p.a,{children:Object(n.jsx)(v.a,{xs:12,className:"mb-2",children:Object(n.jsx)(at,{setState:function(e){return t.setState(e)},reset:function(e){return t.uploadDisplayReset=e}})})})]}),Object(n.jsxs)(x.a.Footer,{children:[Object(n.jsx)(U.a,{className:"mr-3",onClick:this.saveArtifact,disabled:T.a.isInvalid(this.state),children:this.props.artifactToEdit?"Save Artifact":"Add Artifact"}),Object(n.jsx)(U.a,{className:"mr-3",variant:"success",onClick:function(){t.props.cancelEdit&&t.props.cancelEdit(),t.setState(a.getInitialState())},children:"Clear"}),Object(n.jsx)(U.a,{variant:"warning",onClick:this.randomizeArtifact,children:"Randomize"})]})]})}}]),a}(h.a.Component);Ot.initialState={setKey:"",numStars:0,level:0,slotKey:"",mainStatKey:"",substats:[{key:"",value:0},{key:"",value:0},{key:"",value:0},{key:"",value:0}]},Ot.getInitialState=function(){return Object(E.e)(Ot.initialState)};var xt=function(t){Object(u.a)(a,t);var e=Object(d.a)(a);function a(t){var n;return Object(l.a)(this,a),(n=e.call(this,t)).forceUpdateArtifactDisplay=function(){return n.forceUpdate()},n.addArtifact=function(t){if(n.state.artToEdit&&n.state.artToEdit.id===t.id)T.a.updateArtifact(t),n.setState({artToEdit:null});else{var e=T.a.addArtifact(t);if(null===e)return;n.setState((function(t){return{artIdList:[e].concat(Object(c.a)(t.artIdList))}}))}},n.deleteArtifact=function(t){return n.setState((function(e){var a=T.a.getArtifact(t);a&&a.location&&K.a.unequipArtifactOnSlot(a.location,a.slotKey),T.a.removeArtifactById(t);var n=Object(c.a)(e.artIdList);return n.splice(n.indexOf(t),1),{artIdList:n}}))},n.editArtifact=function(t){return n.setState({artToEdit:T.a.getArtifact(t)},(function(){n.scrollRef.current.scrollIntoView({behavior:"smooth"}),n.forceUpdate()}))},n.cancelEditArtifact=function(){return n.setState({artToEdit:null},n.forceUpdate)},n.state=Object(r.a)({artIdList:[],artToEdit:null},a.initialFilter),Q.a.pageview("/artifact"),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.scrollRef=h.a.createRef(),Object(I.a)(),this.setState({artIdList:T.a.getArtifactIdList()})}},{key:"render",value:function(){var t=this,e=this.state.artIdList.map((function(t){return T.a.getArtifact(t)})).filter((function(e){if(t.state.filterArtSetKey&&t.state.filterArtSetKey!==e.setKey)return!1;if(!t.state.filterStars.includes(e.numStars))return!1;if(e.level<t.state.filterLevelLow||e.level>t.state.filterLevelHigh)return!1;if(t.state.filterSlotKey&&t.state.filterSlotKey!==e.slotKey)return!1;if(t.state.filterMainStatKey&&t.state.filterMainStatKey!==e.mainStatKey)return!1;var a,n=Object(i.a)(t.state.filterSubstates);try{var s=function(){var t=a.value;if(t&&!e.substats.some((function(e){return e.key===t})))return{v:!1}};for(n.s();!(a=n.n()).done;){var r=s();if("object"===typeof r)return r.v}}catch(c){n.e(c)}finally{n.f()}return!0})),a=function(e){return Object(n.jsx)(O.a.Item,{onClick:function(){return t.setState({filterMainStatKey:e.statKey})},children:C.a.getStatNameWithPercent(e.statKey)},e.statKey)},r=function(e){return L.a.getArtifactSetsByMaxStarEntries(e).map((function(e){var a=Object(s.a)(e,2),i=a[0],r=a[1];return Object(n.jsx)(O.a.Item,{onClick:function(){return t.setState({filterArtSetKey:i})},children:r.name},i)}))};return Object(n.jsxs)(y.a,{className:"mt-2",ref:this.scrollRef,children:[Object(n.jsx)(p.a,{className:"mb-2 no-gutters",children:Object(n.jsx)(v.a,{children:Object(n.jsx)(Ot,{artifactToEdit:this.state.artToEdit,addArtifact:this.addArtifact,cancelEdit:this.cancelEditArtifact})})}),Object(n.jsx)(p.a,{className:"mb-2",children:Object(n.jsx)(v.a,{children:Object(n.jsxs)(x.a,{bg:"darkcontent",text:"lightfont",children:[Object(n.jsx)(x.a.Header,{children:"Artifact Filter"}),Object(n.jsx)(x.a.Body,{children:Object(n.jsxs)(p.a,{children:[Object(n.jsx)(v.a,{xs:12,lg:6,className:"mb-2",children:Object(n.jsxs)(O.a,{as:m.a.Prepend,className:"flex-grow-1",children:[Object(n.jsx)(O.a.Toggle,{className:"w-100",children:L.a.getArtifactSetName(this.state.filterArtSetKey,"Artifact Set")}),Object(n.jsxs)(O.a.Menu,{children:[Object(n.jsx)(O.a.Item,{onClick:function(){return t.setState({filterArtSetKey:""})},children:"Unselect"}),Object(n.jsx)(O.a.Divider,{}),Object(n.jsx)(O.a.ItemText,{children:"Max Rarity \ud83d\udfca\ud83d\udfca\ud83d\udfca\ud83d\udfca\ud83d\udfca"}),r(5),Object(n.jsx)(O.a.Divider,{}),Object(n.jsx)(O.a.ItemText,{children:"Max Rarity \ud83d\udfca\ud83d\udfca\ud83d\udfca\ud83d\udfca"}),r(4),Object(n.jsx)(O.a.Divider,{}),Object(n.jsx)(O.a.ItemText,{children:"Max Rarity \ud83d\udfca\ud83d\udfca\ud83d\udfca"}),r(3)]})]})}),Object(n.jsx)(v.a,{xs:12,lg:6,className:"mb-2",children:Object(n.jsx)(S.a,{className:"w-100 d-flex",type:"checkbox",as:m.a.Append,onChange:function(e){return t.setState({filterStars:e})},defaultValue:this.state.filterStars,children:Object.keys(A.e).map((function(e){e=parseInt(e);var a=t.state.filterStars.includes(e);return Object(n.jsxs)(g.a,{value:e,children:[Object(n.jsx)(b.a,{icon:a?j.b:j.w})," ",Object(n.jsx)(k.a,{stars:e})]},e)}))})}),Object(n.jsx)(v.a,{xs:12,lg:6,className:"mb-2",children:Object(n.jsxs)(m.a,{children:[Object(n.jsx)(m.a.Prepend,{children:Object(n.jsx)(m.a.Text,{children:"Level Low/High (Inclusive)"})}),Object(n.jsx)(N.b,{value:this.state.filterLevelLow,placeholder:"Lowest Level to Filter",onValueChange:function(e){return e>=0&&e<=t.state.filterLevelHigh&&t.setState({filterLevelLow:e})}}),Object(n.jsx)(N.b,{value:this.state.filterLevelHigh,placeholder:"Highest Level to Filter",onValueChange:function(e){return e>=0&&e>=t.state.filterLevelLow&&t.setState({filterLevelHigh:e})}})]})}),Object(n.jsx)(v.a,{xs:12,lg:6,className:"mb-2",children:Object(n.jsxs)(p.a,{children:[Object(n.jsx)(v.a,{children:Object(n.jsxs)(O.a,{className:"flex-grow-1",children:[Object(n.jsx)(O.a.Toggle,{className:"w-100",children:L.a.getArtifactSlotNameWithIcon(this.state.filterSlotKey,"Slot")}),Object(n.jsxs)(O.a.Menu,{children:[Object(n.jsx)(O.a.Item,{onClick:function(){return t.setState({filterSlotKey:""})},children:"Unselect"}),L.a.getArtifactSlotKeys().map((function(e){return Object(n.jsx)(O.a.Item,{onClick:function(){return t.setState({filterSlotKey:e})},children:L.a.getArtifactSlotNameWithIcon(e)},e)}))]})]})}),Object(n.jsx)(v.a,{children:Object(n.jsxs)(O.a,{className:"flex-grow-1",children:[Object(n.jsx)(O.a.Toggle,{className:"w-100",children:C.a.getStatNameWithPercent(this.state.filterMainStatKey,"Main Stat")}),Object(n.jsxs)(O.a.Menu,{children:[Object(n.jsx)(O.a.Item,{onClick:function(){return t.setState({filterMainStatKey:""})},children:"Unselect"}),L.a.getMainStatKeys().filter((function(t){return"ele_dmg"!==t})).map((function(t){return Object(n.jsx)(a,{statKey:t},t)})),w.a.getElementalKeys().map((function(t){return Object(n.jsx)(a,{statKey:"".concat(t,"_ele_dmg")},t)}))]})]})})]})}),this.state.filterSubstates.map((function(e,a){return Object(n.jsx)(v.a,{xs:6,lg:3,className:"mb-2",children:Object(n.jsxs)(O.a,{children:[Object(n.jsx)(O.a.Toggle,{id:"dropdown-basic",className:"w-100",children:C.a.getStatNameWithPercent(e,"Substat ".concat(a+1))}),Object(n.jsxs)(O.a.Menu,{children:[Object(n.jsx)(O.a.Item,{onClick:function(){var e=Object(E.e)(t.state.filterSubstates);e[a]="",t.setState({filterSubstates:e})},children:"No Substat"}),Object.keys(A.f).filter((function(e){return!t.state.filterSubstates.includes(e)})).map((function(e){return Object(n.jsx)(O.a.Item,{onClick:function(){var n=Object(E.e)(t.state.filterSubstates);n[a]=e,t.setState({filterSubstates:n})},children:C.a.getStatNameWithPercent(e)},e)}))]})]})},a)}))]})})]})})}),Object(n.jsx)(p.a,{className:"mb-2 no-gutters",children:e.map((function(e){return Object(n.jsx)(v.a,{lg:4,md:6,className:"mb-2 pl-1 pr-1",children:Object(n.jsx)(M.a,{artifactId:e.id,onDelete:function(){return t.deleteArtifact(e.id)},onEdit:function(){return t.editArtifact(e.id)},forceUpdate:t.forceUpdateArtifactDisplay})},e.id)}))})]})}}]),a}(h.a.Component);xt.initialFilter={filterArtSetKey:"",filterStars:[3,4,5],filterLevelLow:0,filterLevelHigh:20,filterSlotKey:"",filterMainStatKey:"",filterSubstates:["","","",""]}}}]);
//# sourceMappingURL=9.a52ffe2c.chunk.js.map