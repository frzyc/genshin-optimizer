(this["webpackJsonpgenshin-optimizer"]=this["webpackJsonpgenshin-optimizer"]||[]).push([[11],{209:function(t,e,a){"use strict";a.r(e),a.d(e,"default",(function(){return mt}));var n=a(2),s=a(81),c=a(95),i=a(90),r=a(94),l=a(82),o=a(87),u=a(99),j=a(98),d=a(83),b=a(23),h=a(0),f=a.n(h),x=a(193),O=a(31),m=a(199),S=a(202),g=a(192),v=a(30),p=a(55),y=a(40),N=a(88),w=a(85),K=a(108),A=a(100),k=a(103),I=a(104),C=a(86),E=a(89),L=a(132),M=a(96),T=a(200),R=a(158),D=a(101),U=a(157),F=a(212),P=a(213),V=a(201),W=a(91),z=a(133),H=a(102),B=a.n(H),G=a(160),J=a(207),_=a(198),Y=a(208),q=a(161),$=a.p+"static/media/scan_art_main.c5b573ce.png",Q=a.p+"static/media/snippet.d223e797.png",X=a(17),Z={r:250,g:250,b:250},tt={r:80,g:90,b:105},et={r:92,g:178,b:86},at={r:255,g:204,b:50};var nt=function(t){var e=Object(h.useState)("Click here to Upload Artifact Screenshot File"),a=Object(s.a)(e,2),c=a[0],i=a[1],r=Object(h.useState)(""),l=Object(s.a)(r,2),o=l[0],u=l[1],j=Object(h.useState)(!1),f=Object(s.a)(j,2),x=f[0],m=f[1],S=Object(h.useState)(0),g=Object(s.a)(S,2),N=g[0],w=g[1],K=Object(h.useState)(""),A=Object(s.a)(K,2),I=A[0],L=A[1],M=Object(h.useState)(0),T=Object(s.a)(M,2),R=T[0],U=T[1],F=Object(h.useState)(""),P=Object(s.a)(F,2),V=P[0],W=P[1],z=Object(h.useState)(0),H=Object(s.a)(z,2),at=H[0],nt=H[1],ut=Object(h.useState)(""),Ot=Object(s.a)(ut,2),mt=Ot[0],St=Ot[1],gt=Object(h.useState)(0),vt=Object(s.a)(gt,2),pt=vt[0],yt=vt[1],Nt=Object(h.useState)(""),wt=Object(s.a)(Nt,2),Kt=wt[0],At=wt[1],kt=Object(h.useState)(!1),It=Object(s.a)(kt,2),Ct=It[0],Et=It[1],Lt=function(){i("Click here to Upload Artifact Screenshot File"),u(""),Et(!1),m(!1),w(0),L(""),U(0),W(""),nt(0),St(""),yt(0),At("")},Mt=function(){var t=Object(G.a)(B.a.mark((function t(e,a,n){var s,c,i;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=Object(q.createWorker)({logger:function(t){"loading tesseract core"===t.status&&n("danger"),t.status.includes("loading language traineddata")&&n("warning"),t.status.includes("initializing api")&&n("info"),"recognizing text"===t.status&&n("success"),a(t.progress)}}),t.next=3,s.load();case 3:return t.next=5,s.loadLanguage("eng");case 5:return t.next=7,s.initialize("eng");case 7:return t.next=9,s.recognize(e);case 9:return c=t.sent,i=c.data.text,t.abrupt("return",i);case 12:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),Tt=function(){var e=Object(G.a)(B.a.mark((function e(a){var n,c,r,l,o,j,d,b,h,f,x,O,S,g,v,p,y,N,K,A,I,M;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:return m(!0),i(a.name),e.next=6,st(a);case 6:return c=e.sent,u(c),e.next=10,ct(c);case 10:return r=e.sent,l=rt(r.data,r.width,r.height),o=[Mt(it(lt(r,Z)),w,L),Mt(it(lt(r,tt,15)),U,W),Mt(it(lt(r,et)),nt,St),Mt(it(ot(r,{r:150,g:150,b:160},{r:215,g:200,b:220})),yt,At)],e.next=15,Promise.all(o);case 15:j=e.sent,d=Object(s.a)(j,4),b=d[0],h=d[1],f=d[2],x=d[3],O=bt(f),S=ht(b),g=jt(h),v=ft(b),p=dt(x),y=xt(b),N=y.mainStatValue,K=y.unit,"%"!==(A=void 0===K?"":K)||"hp"!==p&&"def"!==p&&"atk"!==p||(p+="_"),O&&l&&(E.a.getRarityArr(O).includes(l)||(l=0)),l&&!isNaN(v)&&v>4*l&&(v=NaN),S&&!p&&(1===(I=k.d[S].stats).length||(I=I.filter((function(t){return(!N||A===C.a.getStatUnit(t))&&((!g||!g.some((function(e){return e.key===t})))&&!(N&&l&&v&&E.a.getMainStatValue(t,l,v)!==N))}))).length>0)&&(p=I[0]),M={},isNaN(v)||(M.level=v),O&&(M.setKey=O),S&&(M.slotKey=S),g&&(M.substats=g),l&&(M.numStars=l),p&&(M.mainStatKey=p),null===(n=t.setState)||void 0===n||n.call(t,M);case 39:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Rt=Object(n.jsx)(J.a,{show:Ct,onHide:function(){return Et(!1)},size:"xl",variant:"success",dialogAs:p.a,className:"pt-3 pb-3",children:Object(n.jsxs)(O.a,{bg:"darkcontent",text:"lightfont",children:[Object(n.jsx)(O.a.Header,{children:Object(n.jsx)(O.a.Title,{children:Object(n.jsxs)(y.a,{children:[Object(n.jsx)(v.a,{children:Object(n.jsx)("span",{children:"How do Upload Screenshots for parsing"})}),Object(n.jsx)(v.a,{xs:"auto",children:Object(n.jsx)(D.a,{variant:"danger",onClick:function(){return Et(!1)},children:Object(n.jsx)(b.a,{icon:d.z})})})]})})}),Object(n.jsxs)(O.a.Body,{children:[Object(n.jsxs)(y.a,{children:[Object(n.jsx)(v.a,{xs:8,md:4,children:Object(n.jsx)("img",{alt:"snippet of the screen to take",src:Q,className:"w-100 h-auto"})}),Object(n.jsxs)(v.a,{xs:12,md:8,children:[Object(n.jsx)("p",{children:"Using screenshots can dramatically decrease the amount of time you manually input in stats on the Genshin Optimizer."}),Object(n.jsx)("h5",{children:"What to include in the screenshot."}),Object(n.jsxs)("p",{children:["In Genshin Impact, Open your bag, and navigate to the artifacts tab. Select the artifact you want to scan with Genshin Optimizer. To Take a screenshot, in Windows, the shortcut is ",Object(n.jsx)("strong",{children:"Shift + WindowsKey + S"}),". Once you selected the region, the image is automatically included in your clipboard."]})]})]}),Object(n.jsxs)(y.a,{children:[Object(n.jsxs)(v.a,{children:[Object(n.jsx)("h5",{children:"Adding Screenshot to Genshin Optimizer"}),Object(n.jsxs)("p",{children:['At this point, you should have the artifact snippet either saved to your harddrive, or in your clipboard. You can click on the box next to "Browse" to browse the file in your harddrive, or even easier, just press ',Object(n.jsx)("strong",{children:"Ctrl + V"})," to paste from your clipboard. You should be able to see a Preview of your artifact snippet, and after waiting a few seconds, the artifact set and the substats will be filled in in the ",Object(n.jsx)("b",{children:"Artifact Editor"}),"."]})]}),Object(n.jsxs)(v.a,{xs:12,children:[Object(n.jsx)("h5",{children:"Finishing the Artifact"}),Object(n.jsxs)("p",{children:["Unfortunately, computer vision is not 100%. There will always be cases where something is not scanned properly. You should always double check the scanned artifact values! Once the artifact has been filled, Click on ",Object(n.jsx)("strong",{children:"Add Artifact"})," to finish editing the artifact."]}),Object(n.jsx)("img",{alt:"main screen after importing stats",src:$,className:"w-75 h-auto"})]})]})]}),Object(n.jsx)(O.a.Footer,{children:Object(n.jsx)(D.a,{variant:"danger",onClick:function(){return Et(!1)},children:Object(n.jsx)("span",{children:"Close"})})})]})});Object(h.useEffect)((function(){var e=function(t){return Tt(t.clipboardData.files[0])};return window.addEventListener("paste",e),t.reset(Lt),function(){return window.removeEventListener("paste",e)}}));var Dt=o?Object(n.jsx)("img",{src:o,className:"w-100 h-auto",alt:"Screenshot to parse for artifact values"}):Object(n.jsx)("span",{children:"Please Select an Image"}),Ut=(100*at).toFixed(1),Ft=(100*pt).toFixed(1),Pt=(100*R).toFixed(1),Vt=(100*N).toFixed(1);return Object(n.jsxs)(y.a,{children:[Rt,Object(n.jsxs)(v.a,{children:[Object(n.jsx)(y.a,{className:"mb-1",children:Object(n.jsx)(v.a,{children:Object(n.jsxs)(y.a,{className:"mb-1",children:[Object(n.jsx)(v.a,{children:Object(n.jsx)("h5",{children:"Parse Substats by Uploading Image"})}),Object(n.jsx)(v.a,{xs:"auto",children:Object(n.jsx)(D.a,{variant:"info",onClick:function(){Et(!0),X.a.modalview("/artifact/how-to-upload")},children:"Show me How!"})})]})})}),Object(n.jsxs)(y.a,{className:"mb-1",children:[Object(n.jsx)(v.a,{xs:8,lg:4,children:Dt}),x?Object(n.jsxs)(v.a,{xs:12,lg:8,children:[Object(n.jsx)("h6",{children:"Scan".concat(Ut<100?"ning":"ned"," Artifact Set")}),Object(n.jsx)(_.a,{variant:mt,now:Ut,label:"".concat(Ut,"%"),className:"mb-3"}),Object(n.jsx)("h6",{children:"Scan".concat(Ft<100?"ning":"ned"," Artifact Main Stat")}),Object(n.jsx)(_.a,{variant:Kt,now:Ft,label:"".concat(Ft,"%"),className:"mb-3"}),Object(n.jsx)("h6",{children:"Scan".concat(Pt<100?"ning":"ned"," Artifact Substat")}),Object(n.jsx)(_.a,{variant:V,now:Pt,label:"".concat(Pt,"%"),className:"mb-3"}),Object(n.jsx)("h6",{children:"Scan".concat(Vt<100?"ning":"ned"," Other")}),Object(n.jsx)(_.a,{variant:I,now:Vt,label:"".concat(Vt,"%"),className:"mb-3"})]}):null]}),Object(n.jsx)(y.a,{className:"mb-4",children:Object(n.jsx)(v.a,{children:Object(n.jsx)(Y.a.Group,{as:v.a,children:Object(n.jsx)(Y.a.File,{type:"file",className:"custom-file-label",id:"inputGroupFile01",label:c,onChange:function(t){var e=t.target.files[0];Tt(e)},custom:!0})})})})]})]})};function st(t){return new Promise((function(e){var a=new FileReader;a.onloadend=function(){e(a.result)},a.readAsDataURL(t)}))}function ct(t){return new Promise((function(e){var a=new Image;a.onload=function(){return e(function(t){var e=document.createElement("canvas"),a=e.getContext("2d");return e.width=t.width,e.height=t.height,a.drawImage(t,0,0,t.width,t.height),a.getImageData(0,0,t.width,t.height)}(a))},a.src=t}))}function it(t){var e=document.createElement("canvas"),a=e.getContext("2d");e.width=t.width,e.height=t.height;var n=a.createImageData(t.width,t.height);return n.data.set(t.data),a.putImageData(n,0,0),e.toDataURL()}function rt(t,e,a){for(var n=t,s=0,c=0,i=0;i<a;i++){for(var r=0,l=!1,o=0;o<e;o++){var u=4*(i*e+o);ut({r:n[u],g:n[u+1],b:n[u+2]},at)?l||(l=!0,r++):l=!1}if(s!==r)s=r,c=1;else if(s&&++c>=20)return s}return 0}function lt(t,e){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,n=Uint8ClampedArray.from(t.data),s=0;s<n.length;s+=4){var c=!0,i=n[s],r=n[s+1],l=n[s+2],o={r:i,g:r,b:l};ut(o,e,a)&&(c=!1),n[s]=n[s+1]=n[s+2]=c?255:0}return new ImageData(n,t.width,t.height)}function ot(t,e,a){for(var n=Uint8ClampedArray.from(t.data),s=Math.floor(t.width*(t.height/2)*4),c=0;c<n.length;c+=4){var i=!0,r=n[c],l=n[c+1],o=n[c+2];c<s&&r>e.r&&r<a.r&&l>e.g&&l<a.g&&o>e.b&&o<a.b&&(i=!1),n[c]=n[c+1]=n[c+2]=i?255:0}return new ImageData(n,t.width,t.height)}function ut(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,n=function(t,e){return Math.abs(t-e)<=a};return!!(n(t.r,e.r)&&n(t.g,e.g)&&n(t.b,e.b))}function jt(t){var e=[];E.a.getSubStatKeys().forEach((function(a){var n=C.a.getStatUnit(a),s=C.a.getStatName(a),c=("%"===n?new RegExp(s+"\\s*\\+\\s*(\\d+\\.\\d)%","im"):new RegExp(s+"\\s*\\+\\s*(\\d+,\\d+|\\d+)($|\\s)","im")).exec(t);c&&e.push({index:c.index,value:c[1],unit:n,key:a})})),e.sort((function(t,e){return t.index-e.index})),e.forEach((function(t,e){e>=4||(t.value="%"===t.unit?parseFloat(t.value):parseInt(t.value))}));for(var a=[],n=0;n<4;n++)e[n]?a.push({key:e[n].key,value:e[n].value}):a.push({key:"",value:0});return a}function dt(t){var e,a=Object(c.a)(E.a.getMainStatKeys());try{for(a.s();!(e=a.n()).done;){var n=e.value;if(t.toLowerCase().includes(C.a.getStatName(n).toLowerCase()))return n}}catch(s){a.e(s)}finally{a.f()}}function bt(t){for(var e=0,a=Object.entries(k.c);e<a.length;e++){var n=Object(s.a)(a[e],2),c=n[0],i=n[1];if(t.toLowerCase().includes(i.name.toLowerCase()))return c}}function ht(t){for(var e=0,a=Object.entries(k.d);e<a.length;e++){var n=Object(s.a)(a[e],2),c=n[0],i=n[1];if(t.toLowerCase().includes(i.name.toLowerCase()))return c}}function ft(t){var e=/\+(\d{1,2})/.exec(t);return e?parseInt(e[1]):NaN}function xt(t){var e=t.split("+")[0],a=/(\d+\.\d+)%/,n=a.exec(e);return n?{mainStatValue:parseFloat(n[1]),unit:"%"}:(n=(a=/(\d+,\d+|\d{2,3})/).exec(e))?{mainStatValue:parseInt(n[1])}:{mainStatValue:NaN}}var Ot=function(t){Object(u.a)(a,t);var e=Object(j.a)(a);function a(t){var r;return Object(l.a)(this,a),(r=e.call(this,t)).setLevel=function(t){return r.setState((function(e){return t=parseInt(t),isNaN(t)&&(t=0),t<0&&(t=0),t>4*e.numStars&&(t=4*e.numStars),{level:t}}))},r.getRemainingSubstats=function(){return Object.keys(k.f).filter((function(t){return r.state.mainStatKey!==t&&!r.state.substats.some((function(e){return(null===e||void 0===e?void 0:e.key)===t}))}))},r.saveArtifact=function(){var t,e;r.uploadDisplayReset();var n=Object(W.e)(r.state);n.artifactToEdit&&delete n.artifactToEdit,null===(t=(e=r.props).addArtifact)||void 0===t||t.call(e,n),r.setState(a.getInitialState())},r.setSetKey=function(t){return r.setState((function(e){var a=Object(W.f)(E.a.getRarityArr(t)),n=!e.level||e.level>4*a?4*a:e.level;return{setKey:t,numStars:a,level:n}}))},r.setSubStat=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return r.setState((function(n){if(!(t>=4)){var s=n.substats;return s[t].key=e,s[t].value=a,{substats:s}}}))},r.setMainStatKey=function(t){return r.setState((function(e){return e.substats.forEach((function(e,a){return e.key&&e.key===t&&r.setSubStat(a)})),{mainStatKey:t}}))},r.setSlotKey=function(t){return r.setState((function(e){var a,n=k.d[t].stats,s=Object(c.a)(n);try{var i=function(){var n=a.value;if(!e.substats.some((function(t){return!(!t||!t.key)&&t.key===n})))return{v:{slotKey:t,mainStatKey:n}}};for(s.s();!(a=s.n()).done;){var l=i();if("object"===typeof l)return l.v}}catch(u){s.e(u)}finally{s.f()}var o=n[0];return r.setMainStatKey(o),{slotKey:t}}))},r.ArtifactDropDown=function(t){var e=function(t){return E.a.getArtifactSetsByMaxStarEntries(t).map((function(t){var e=Object(s.a)(t,2),a=e[0],c=e[1];return Object(n.jsx)(x.a.Item,{onClick:function(){return r.setSetKey(a)},children:c.name},a)}))};return Object(n.jsxs)(x.a,{as:m.a.Prepend,className:"flex-grow-1",children:[Object(n.jsx)(x.a.Toggle,{className:"w-100",children:E.a.getArtifactSetName(r.state.setKey,"Artifact Set")}),Object(n.jsxs)(x.a.Menu,{children:[Object(n.jsxs)(x.a.ItemText,{children:["Max Rarity ",Object(n.jsx)(A.a,{stars:5})]}),e(5),Object(n.jsx)(x.a.Divider,{}),Object(n.jsxs)(x.a.ItemText,{children:["Max Rarity ",Object(n.jsx)(A.a,{stars:4})]}),e(4),Object(n.jsx)(x.a.Divider,{}),Object(n.jsxs)(x.a.ItemText,{children:["Max Rarity ",Object(n.jsx)(A.a,{stars:3})]}),e(3)]})]})},r.MainSelection=function(t){return Object(n.jsxs)(y.a,{children:[Object(n.jsx)(v.a,{xs:12,lg:6,className:"mb-2",children:Object(n.jsxs)(m.a,{className:"w-100 d-flex",children:[r.ArtifactDropDown(),Object(n.jsx)(T.a,{as:m.a.Append,title:r.state.numStars>0?"\ud83d\udfca".repeat(r.state.numStars):"Rarity",disabled:!r.state.setKey,children:Object.keys(k.e).map((function(t,e){return t=parseInt(t),Object(n.jsx)(x.a.Item,{disabled:!r.state.setKey||!k.c[r.state.setKey].rarity.includes(t),onClick:function(){r.setState({numStars:t,level:0})},children:Object(n.jsx)(A.a,{stars:t})},e)}))})]})}),Object(n.jsx)(v.a,{xs:12,lg:6,className:"mb-2",children:Object(n.jsxs)(m.a,{children:[Object(n.jsx)(m.a.Prepend,{children:Object(n.jsx)(m.a.Text,{children:"Level"})}),Object(n.jsx)(R.a,{value:r.state.level,disabled:!r.state.setKey,placeholder:"0~".concat(4*r.state.numStars),onChange:function(t){return r.setLevel(t.target.value)}}),Object(n.jsxs)(m.a.Append,{children:[Object(n.jsx)(D.a,{onClick:function(){return r.setLevel(0)},disabled:!r.state.setKey||0===r.state.level,children:"0"}),Object(n.jsx)(D.a,{onClick:function(){return r.setLevel(r.state.level-1)},disabled:!r.state.setKey||0===r.state.level,children:"-"}),Object(n.jsx)(D.a,{onClick:function(){return r.setLevel(r.state.level+1)},disabled:!r.state.setKey||r.state.level===4*r.state.numStars,children:"+"}),Object(n.jsx)(D.a,{onClick:function(){return r.setLevel(4*r.state.numStars)},disabled:!r.state.setKey||r.state.level===4*r.state.numStars,children:4*r.state.numStars})]})]})})]})},r.MainStatInputRow=function(){return Object(n.jsxs)(y.a,{children:[Object(n.jsx)(v.a,{xs:12,lg:6,className:"mb-2",children:Object(n.jsxs)(m.a,{children:[Object(n.jsx)(T.a,{title:E.a.getArtifactSlotNameWithIcon(r.state.slotKey,"Slot"),disabled:!r.state.setKey,as:m.a.Prepend,children:r.state.setKey&&Object.keys(k.c[r.state.setKey].pieces).map((function(t){return Object(n.jsx)(x.a.Item,{onClick:function(){return r.setSlotKey(t)},children:E.a.getArtifactSlotNameWithIcon(t,"Slot")},t)}))}),Object(n.jsx)(R.a,{value:E.a.getArtifactPieceName(r.state.setKey,r.state.slotKey,"Unknown Piece Name"),disabled:!0,readOnly:!0})]})}),Object(n.jsx)(v.a,{xs:12,lg:6,className:"mb-2",children:Object(n.jsxs)(m.a,{children:[Object(n.jsxs)(T.a,{title:C.a.getStatNameWithPercent(r.state.mainStatKey,"Main Stat"),disabled:!r.state.setKey||!r.state.slotKey,as:m.a.Prepend,children:[Object(n.jsx)(x.a.ItemText,{children:"Select a Main Artifact Stat "}),r.state.slotKey?k.d[r.state.slotKey].stats.map((function(t){return Object(n.jsx)(x.a.Item,{onClick:function(){return r.setMainStatKey(t)},children:C.a.getStatNameWithPercent(t)},t)})):Object(n.jsx)(x.a.Item,{})]}),Object(n.jsx)(R.a,{value:r.state.mainStatKey?"".concat(E.a.getMainStatValue(r.state.mainStatKey,r.state.numStars,r.state.level)).concat(C.a.getStatUnit(r.state.mainStatKey)):"Main Stat",disabled:!0,readOnly:!0})]})})]})},r.SubStatInput=function(t){var e=t.subStatValidation,a=t.numStars,s=t.subStatKey,c=t.subStatKey&&"%"===C.a.getStatUnit(t.subStatKey),l={placeholder:"Select a Substat.",value:t.substatevalue?t.substatevalue:"",onValueChange:function(e){return r.onSubstatValueChange(e,t.index)},disabled:!t.subStatKey},o=c?Object(n.jsx)(K.a,Object(i.a)({},l)):Object(n.jsx)(K.b,Object(i.a)({},l)),u=E.a.getSubstatRollData(s,a),j=(null===e||void 0===e?void 0:e.rolls)||[],d=(null===j||void 0===j?void 0:j.length)||0,b=Object(n.jsxs)(U.a,{variant:0===d?"secondary":"".concat(d,"roll"),className:"text-darkcontent",children:[d||"No"," Roll",(d>1||0===d)&&"s"]}),h=j.map((function(t,e){var a=u.indexOf(t),s=6-(u.length-a-1);return Object(n.jsx)("span",{className:"mr-2 text-".concat(s,"roll"),children:t},e)})),f=u.length?Object(n.jsxs)("span",{className:"float-right",children:[Object(n.jsx)("small",{children:"Possible Rolls:"})," ",u.map((function(t,e,a){var s=6-(a.length-e-1);return Object(n.jsx)("span",{className:"text-".concat(s,"roll mr-1"),children:t},e)}))]}):null;return Object(n.jsxs)(O.a,{bg:"lightcontent",text:"lightfont",children:[Object(n.jsxs)(m.a,{children:[Object(n.jsx)(T.a,{title:C.a.getStatName(t.subStatKey,"Substat ".concat(t.index+1)),disabled:!t.remainingSubstats||0===t.remainingSubstats.length,as:m.a.Prepend,children:t.remainingSubstats?t.remainingSubstats.map((function(e){return Object(n.jsx)(x.a.Item,{onClick:function(){return r.onSubStatSelected(e,t.index)},children:C.a.getStatNameWithPercent(e)},e)})):Object(n.jsx)(x.a.Item,{})}),o,Object(n.jsxs)(m.a.Append,{children:[c&&Object(n.jsx)(m.a.Text,{children:"%"}),Object(n.jsx)(m.a.Text,{children:Object(n.jsx)(z.a,{valid:e.valid||!t.subStatKey,percent:e.efficiency,children:t.subStatKey?e.valid?"".concat((e.efficiency?e.efficiency:0).toFixed(2),"%"):"ERR":"No Stat"})})]})]}),e.valid?Object(n.jsxs)("label",{className:"w-100 mb-0 p-1",children:[b," ",h,f]}):Object(n.jsxs)("label",{className:"w-100 mb-0 p-1",children:[Object(n.jsx)(U.a,{variant:"danger",children:"ERR"})," ",e.msg]})]})},r.onSubStatSelected=function(t,e){r.setState((function(a){var n=JSON.parse(JSON.stringify(a.substats));return n[e]={key:t,value:null},{substats:n}}))},r.onSubstatValueChange=function(t,e){r.setState((function(a){var n=JSON.parse(JSON.stringify(a.substats));return n[e].value=t,{substats:n}}))},r.randomizeArtifact=function(){var t=a.getInitialState();t.setKey=Object(W.g)(Object.keys(k.c)),t.numStars=Object(W.g)(k.c[t.setKey].rarity),t.slotKey=Object(W.g)(Object.keys(k.c[t.setKey].pieces)),t.mainStatKey=Object(W.g)(k.d[t.slotKey].stats);var e=Object(W.h)(k.e[t.numStars].subsBaselow,k.e[t.numStars].subBaseHigh);t.level=Object(W.h)(0,4*t.numStars);var n=Math.floor(t.level/4),s=e+n;s>=4?(e=4,n=s-4):(e=s,n=0);for(var c=function(e){return Object(W.g)(E.a.getSubstatRollData(e,t.numStars))},i=r.getRemainingSubstats(),l=function(e){var a=t.substats[e];a.key=Object(W.g)(i),i=i.filter((function(t){return t!==a.key})),a.value=c(a.key)},o=0;o<e;o++)l(o);for(var u=0;u<n;u++){var j=Object(W.g)(t.substats);j.value+=c(j.key),Number.isInteger(j.value)||(j.value=parseFloat(j.value.toFixed(1)))}r.setState(t)},r.componentDidUpdate=function(){r.props.artifactToEdit&&r.state.id!==r.props.artifactToEdit.id&&r.setState(r.props.artifactToEdit)},r.state=a.getInitialState(),r}return Object(o.a)(a,[{key:"render",value:function(){var t=this,e=this.getRemainingSubstats(),s=E.a.artifactValidation(this.state),c=s.subStatValidations;return Object(n.jsxs)(O.a,{bg:"darkcontent",text:"lightfont",children:[Object(n.jsx)(O.a.Header,{children:"Artifact Editor"}),Object(n.jsxs)(O.a.Body,{children:[Object(n.jsxs)(y.a,{className:"mb-2",children:[Object(n.jsx)(v.a,{xs:12,children:Object(n.jsx)(this.MainSelection,{})}),Object(n.jsx)(v.a,{xs:12,children:Object(n.jsx)(this.MainStatInputRow,{})})]}),Object(n.jsx)(y.a,{children:Object(n.jsxs)(v.a,{children:[Object(n.jsx)("h5",{className:"mr-auto",children:"Substats"}),Object(n.jsxs)("span",{className:"mb-2",children:[Object(n.jsxs)("span",{className:"mr-3",children:[Object(n.jsx)("span",{children:"Current Substat Efficiency "}),Object(n.jsx)(z.a,{tooltip:s.msg,valid:s.valid,percent:s.currentEfficiency,children:(s.currentEfficiency?s.currentEfficiency:0).toFixed(2)+"%"})]}),Object(n.jsxs)("span",{children:[Object(n.jsx)("span",{children:"Maximum Substat Efficiency "}),Object(n.jsx)(z.a,{tooltip:s.msg,valid:s.valid,percent:s.maximumEfficiency,children:(s.maximumEfficiency?s.maximumEfficiency:0).toFixed(2)+"%"})]}),Object(n.jsx)(F.a,{placement:"bottom",overlay:Object(n.jsxs)(P.a,{children:[Object(n.jsx)(P.a.Title,{as:"h5",children:"Substat Efficiency"}),Object(n.jsx)(P.a.Content,{children:Object(n.jsxs)("span",{children:["Every 4 artifact upgrades, you get a substat roll. The ",Object(n.jsx)("strong",{children:"substat efficiency"})," calculates as a percentage how high the substat rolled. The ",Object(n.jsx)("strong",{children:"Maximum Substat Efficiency"})," of an artifact calculates the efficiency if the remaining upgrades rolled maximum."]})})]}),children:Object(n.jsx)(b.a,{icon:d.p,className:"ml-2",style:{cursor:"help"}})})]})]})}),Object(n.jsx)(y.a,{className:"mb-2",children:this.state.substats.map((function(a,s){return Object(n.jsx)(v.a,{className:"mt-1 mb-1",xs:12,lg:6,children:Object(n.jsx)(t.SubStatInput,{numStars:t.state.numStars,remainingSubstats:e,subStatKey:a?a.key:null,substatevalue:a?a.value:null,index:s,subStatValidation:c[s]})},"substat"+s)}))}),Object(n.jsx)(y.a,{className:"mb-2",children:Object(n.jsx)(v.a,{children:s.msg?Object(n.jsx)(V.a,{variant:"danger",children:s.msg}):null})}),Object(n.jsx)(y.a,{children:Object(n.jsx)(v.a,{xs:12,className:"mb-2",children:Object(n.jsx)(nt,{setState:function(e){return t.setState(e)},reset:function(e){return t.uploadDisplayReset=e}})})})]}),Object(n.jsxs)(O.a.Footer,{children:[Object(n.jsx)(D.a,{className:"mr-3",onClick:this.saveArtifact,disabled:M.a.isInvalid(this.state),children:this.props.artifactToEdit?"Save Artifact":"Add Artifact"}),Object(n.jsx)(D.a,{className:"mr-3",variant:"success",onClick:function(){t.props.cancelEdit&&t.props.cancelEdit(),t.setState(a.getInitialState())},children:"Clear"}),Object(n.jsx)(D.a,{variant:"warning",onClick:this.randomizeArtifact,children:"Randomize"})]})]})}}]),a}(f.a.Component);Ot.initialState={setKey:"",numStars:0,level:0,slotKey:"",mainStatKey:"",substats:[{key:"",value:0},{key:"",value:0},{key:"",value:0},{key:"",value:0}]},Ot.getInitialState=function(){return Object(W.e)(Ot.initialState)};var mt=function(t){Object(u.a)(a,t);var e=Object(j.a)(a);function a(t){var n;return Object(l.a)(this,a),(n=e.call(this,t)).forceUpdateArtifactDisplay=function(){return n.forceUpdate()},n.addArtifact=function(t){if(n.state.artToEdit&&n.state.artToEdit.id===t.id)M.a.updateArtifact(t),n.setState({artToEdit:null});else{var e=M.a.addArtifact(t);if(null===e)return;n.setState((function(t){return{artIdList:[e].concat(Object(r.a)(t.artIdList))}}))}},n.deleteArtifact=function(t){return n.setState((function(e){var a=M.a.getArtifact(t);a&&a.location&&w.a.unequipArtifactOnSlot(a.location,a.slotKey),M.a.removeArtifactById(t);var n=Object(r.a)(e.artIdList);return n.splice(n.indexOf(t),1),{artIdList:n}}))},n.editArtifact=function(t){return n.setState({artToEdit:M.a.getArtifact(t)},(function(){n.scrollRef.current.scrollIntoView({behavior:"smooth"}),n.forceUpdate()}))},n.cancelEditArtifact=function(){return n.setState({artToEdit:null},n.forceUpdate)},n.state=Object(i.a)(Object(i.a)({artIdList:[],artToEdit:null},Object(W.e)(a.initialFilter)),{},{maxNumArtifactsToDisplay:50}),X.a.pageview("/artifact"),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.scrollRef=f.a.createRef(),Object(I.a)(),this.setState({artIdList:M.a.getArtifactIdList()})}},{key:"render",value:function(){var t,e=this,a=(null===(t=this.state.artIdList)||void 0===t?void 0:t.length)||0,i=this.state.artIdList.map((function(t){return M.a.getArtifact(t)})).filter((function(t){if(e.state.filterArtSetKey&&e.state.filterArtSetKey!==t.setKey)return!1;if(!e.state.filterStars.includes(t.numStars))return!1;if(t.level<e.state.filterLevelLow||t.level>e.state.filterLevelHigh)return!1;if(e.state.filterSlotKey&&e.state.filterSlotKey!==t.slotKey)return!1;if(e.state.filterMainStatKey&&e.state.filterMainStatKey!==t.mainStatKey)return!1;var a,n=Object(c.a)(e.state.filterSubstates);try{var s=function(){var e=a.value;if(e&&!t.substats.some((function(t){return t.key===e})))return{v:!1}};for(n.s();!(a=n.n()).done;){var i=s();if("object"===typeof i)return i.v}}catch(r){n.e(r)}finally{n.f()}return!0})),r=function(t){return Object(n.jsx)(x.a.Item,{onClick:function(){return e.setState({filterMainStatKey:t.statKey})},children:C.a.getStatNameWithPercent(t.statKey)},t.statKey)},l=function(t){return E.a.getArtifactSetsByMaxStarEntries(t).map((function(t){var a=Object(s.a)(t,2),c=a[0],i=a[1];return Object(n.jsx)(x.a.Item,{onClick:function(){return e.setState({filterArtSetKey:c})},children:i.name},c)}))},o="Showing ".concat(i.length>this.state.maxNumArtifactsToDisplay?this.state.maxNumArtifactsToDisplay:i.length," out of ").concat(a," Artifacts");return Object(n.jsxs)(p.a,{className:"mt-2",ref:this.scrollRef,children:[Object(n.jsx)(y.a,{className:"mb-2 no-gutters",children:Object(n.jsx)(v.a,{children:Object(n.jsx)(Ot,{artifactToEdit:this.state.artToEdit,addArtifact:this.addArtifact,cancelEdit:this.cancelEditArtifact})})}),Object(n.jsx)(y.a,{className:"mb-2",children:Object(n.jsx)(v.a,{children:Object(n.jsxs)(O.a,{bg:"darkcontent",text:"lightfont",children:[Object(n.jsxs)(O.a.Header,{children:[Object(n.jsx)("span",{children:"Artifact Filter"})," ",Object(n.jsx)("span",{className:"float-right",children:o})]}),Object(n.jsx)(O.a.Body,{children:Object(n.jsxs)(y.a,{children:[Object(n.jsx)(v.a,{xs:12,lg:6,className:"mb-2",children:Object(n.jsxs)(x.a,{as:m.a.Prepend,className:"flex-grow-1",children:[Object(n.jsx)(x.a.Toggle,{className:"w-100",children:E.a.getArtifactSetName(this.state.filterArtSetKey,"Artifact Set")}),Object(n.jsxs)(x.a.Menu,{children:[Object(n.jsx)(x.a.Item,{onClick:function(){return e.setState({filterArtSetKey:""})},children:"Unselect"}),Object(n.jsx)(x.a.Divider,{}),Object(n.jsx)(x.a.ItemText,{children:"Max Rarity \ud83d\udfca\ud83d\udfca\ud83d\udfca\ud83d\udfca\ud83d\udfca"}),l(5),Object(n.jsx)(x.a.Divider,{}),Object(n.jsx)(x.a.ItemText,{children:"Max Rarity \ud83d\udfca\ud83d\udfca\ud83d\udfca\ud83d\udfca"}),l(4),Object(n.jsx)(x.a.Divider,{}),Object(n.jsx)(x.a.ItemText,{children:"Max Rarity \ud83d\udfca\ud83d\udfca\ud83d\udfca"}),l(3)]})]})}),Object(n.jsx)(v.a,{xs:12,lg:6,className:"mb-2",children:Object(n.jsx)(S.a,{className:"w-100 d-flex",type:"checkbox",as:m.a.Append,onChange:function(t){return e.setState({filterStars:t})},defaultValue:this.state.filterStars,children:Object.keys(k.e).map((function(t){t=parseInt(t);var a=e.state.filterStars.includes(t);return Object(n.jsxs)(g.a,{value:t,children:[Object(n.jsx)(b.a,{icon:a?d.b:d.w})," ",Object(n.jsx)(A.a,{stars:t})]},t)}))})}),Object(n.jsx)(v.a,{xs:12,lg:6,className:"mb-2",children:Object(n.jsxs)(m.a,{children:[Object(n.jsx)(m.a.Prepend,{children:Object(n.jsx)(m.a.Text,{children:"Level Low/High (Inclusive)"})}),Object(n.jsx)(K.b,{value:this.state.filterLevelLow,placeholder:"Lowest Level to Filter",onValueChange:function(t){return t>=0&&t<=e.state.filterLevelHigh&&e.setState({filterLevelLow:t})}}),Object(n.jsx)(K.b,{value:this.state.filterLevelHigh,placeholder:"Highest Level to Filter",onValueChange:function(t){return t>=0&&t>=e.state.filterLevelLow&&e.setState({filterLevelHigh:t})}})]})}),Object(n.jsx)(v.a,{xs:12,lg:6,className:"mb-2",children:Object(n.jsxs)(y.a,{children:[Object(n.jsx)(v.a,{children:Object(n.jsxs)(x.a,{className:"flex-grow-1",children:[Object(n.jsx)(x.a.Toggle,{className:"w-100",children:E.a.getArtifactSlotNameWithIcon(this.state.filterSlotKey,"Slot")}),Object(n.jsxs)(x.a.Menu,{children:[Object(n.jsx)(x.a.Item,{onClick:function(){return e.setState({filterSlotKey:""})},children:"Unselect"}),E.a.getArtifactSlotKeys().map((function(t){return Object(n.jsx)(x.a.Item,{onClick:function(){return e.setState({filterSlotKey:t})},children:E.a.getArtifactSlotNameWithIcon(t)},t)}))]})]})}),Object(n.jsx)(v.a,{children:Object(n.jsxs)(x.a,{className:"flex-grow-1",children:[Object(n.jsx)(x.a.Toggle,{className:"w-100",children:C.a.getStatNameWithPercent(this.state.filterMainStatKey,"Main Stat")}),Object(n.jsxs)(x.a.Menu,{children:[Object(n.jsx)(x.a.Item,{onClick:function(){return e.setState({filterMainStatKey:""})},children:"Unselect"}),E.a.getMainStatKeys().filter((function(t){return"ele_dmg"!==t})).map((function(t){return Object(n.jsx)(r,{statKey:t},t)})),N.a.getElementalKeys().map((function(t){return Object(n.jsx)(r,{statKey:"".concat(t,"_ele_dmg")},t)}))]})]})})]})}),this.state.filterSubstates.map((function(t,a){return Object(n.jsx)(v.a,{xs:6,lg:3,className:"mb-2",children:Object(n.jsxs)(x.a,{children:[Object(n.jsx)(x.a.Toggle,{id:"dropdown-basic",className:"w-100",children:C.a.getStatNameWithPercent(t,"Substat ".concat(a+1))}),Object(n.jsxs)(x.a.Menu,{children:[Object(n.jsx)(x.a.Item,{onClick:function(){var t=Object(W.e)(e.state.filterSubstates);t[a]="",e.setState({filterSubstates:t})},children:"No Substat"}),Object.keys(k.f).filter((function(t){return!e.state.filterSubstates.includes(t)})).map((function(t){return Object(n.jsx)(x.a.Item,{onClick:function(){var n=Object(W.e)(e.state.filterSubstates);n[a]=t,e.setState({filterSubstates:n})},children:C.a.getStatNameWithPercent(t)},t)}))]})]})},a)}))]})})]})})}),Object(n.jsx)(y.a,{className:"mb-2",children:i.map((function(t,a){return a<e.state.maxNumArtifactsToDisplay?Object(n.jsx)(v.a,{lg:4,md:6,className:"mb-2",children:Object(n.jsx)(L.a,{artifactId:t.id,onDelete:function(){return e.deleteArtifact(t.id)},onEdit:function(){return e.editArtifact(t.id)},forceUpdate:e.forceUpdateArtifactDisplay})},t.id):null}))})]})}}]),a}(f.a.Component);mt.initialFilter={filterArtSetKey:"",filterStars:[3,4,5],filterLevelLow:0,filterLevelHigh:20,filterSlotKey:"",filterMainStatKey:"",filterSubstates:["","","",""]}}}]);
//# sourceMappingURL=11.28036263.chunk.js.map