"use strict";(self.webpackChunkgenshin_optimizer=self.webpackChunkgenshin_optimizer||[]).push([[328],{10600:function(e,t,n){n.d(t,{CC:function(){return v},ZP:function(){return Z},el:function(){return x}});var r=n(29439),i=n(1413),l=n(45987),a=n(66934),o=n(4834),c=n(24518),s=n(72791),u=n(80184),d=["children","disableRipple","disableFocusRipple","disableTouchRipple"],f=["value","onChange","disabled","float"],x=(0,a.ZP)(o.ZP)((function(e){var t=e.theme;return{backgroundColor:t.palette.primary.main,transition:"all 0.5s ease","&:hover":{backgroundColor:t.palette.primary.dark},"&.Mui-focused":{backgroundColor:t.palette.primary.dark},"&.Mui-disabled":{backgroundColor:t.palette.primary.dark}}})),h=(0,a.ZP)(c.Z)((function(e){return{backgroundColor:e.theme.palette.primary.main,padding:0,overflow:"hidden",div:{width:"100%",height:"100%"}}}));function v(e){var t=e.children,n=(e.disableRipple,e.disableFocusRipple,e.disableTouchRipple,(0,l.Z)(e,d));return(0,u.jsx)(h,(0,i.Z)((0,i.Z)({disableRipple:!0,disableFocusRipple:!0,disableTouchRipple:!0},n),{},{children:t}))}function Z(e){var t=e.value,n=void 0===t?0:t,a=e.onChange,o=e.disabled,c=void 0!==o&&o,d=e.float,h=void 0!==d&&d,v=(0,l.Z)(e,f),Z=(0,s.useState)(n),p=(0,r.Z)(Z,2),y=p[0],b=p[1],j=(0,s.useState)(!1),g=(0,r.Z)(j,2),m=g[0],k=g[1],w=(0,s.useMemo)((function(){return h?parseFloat:parseInt}),[h]),C=(0,s.useCallback)((function(){a(y),k(!1)}),[a,y,k]),S=(0,s.useCallback)((function(){k(!0)}),[k]);(0,s.useEffect)((function(){return b(n)}),[n,b]);var E=(0,s.useCallback)((function(e){return b(w(e.target.value)||0)}),[b,w]),K=(0,s.useCallback)((function(e){return"Enter"===e.key&&C()}),[C]);return(0,u.jsx)(x,(0,i.Z)({value:m&&!y?"":y,"aria-label":"custom-input",type:"number",inputProps:{step:h?.1:1},onChange:E,onBlur:C,onFocus:S,disabled:c,onKeyDown:K},v))}},55221:function(e,t,n){var r=n(1413),i=n(45987),l=n(53174),a=n(54483),o=n(68870),c=n(96106),s=n(80184),u=["className"];t.Z=function(e){var t=e.className,n=(0,i.Z)(e,u);return(0,s.jsx)(c.Z,(0,r.Z)((0,r.Z)({placement:"top"},n),{},{className:t,children:(0,s.jsx)(o.Z,{component:"span",sx:{cursor:"help"},children:(0,s.jsx)(a.G,{icon:l.sqG})})}))}},14525:function(e,t,n){n.d(t,{Z:function(){return M},b:function(){return P}});var r,i,l=n(29439),a=n(30168),o=n(4942),c=n(1413),s=n(53174),u=n(54483),d=n(39504),f=n(20890),x=n(2199),h=n(23786),v=n(24518),Z=n(52791),p=n(72791),y=n(22020),b=n(17618),j=n(2693),g=n(26138),m=n(79406),k=n(74544),w=n(71310),C=n(10600),S=n(33890),E=n(55221),K=n(80184);function M(e){var t=e.disabled,n=void 0!==t&&t,s=(0,y.$)("page_character").t,u=(0,p.useContext)(b.K).character.key,x=(0,p.useContext)(j.R).data,h=(0,k.Z)(u),v=h.buildSetting.statFilters,m=h.buildSettingDispatch,C=(0,p.useCallback)((function(e){return m({statFilters:e})}),[m]),S=(0,p.useMemo)((function(){var e=["atk","hp","def","eleMas","critRate_","critDMG_","heal_","enerRech_"];"catalyst"!==x.get(g.ri.weaponType).value&&e.push("physical_dmg_");var t=x.get(g.ri.charEle).value;return e.push("".concat(t,"_dmg_")),e}),[x]),M=(0,p.useMemo)((function(){return S.filter((function(e){return!Object.keys(v).some((function(t){return t===e}))}))}),[S,v]),_=(0,p.useCallback)((function(e,t){return C((0,c.Z)((0,c.Z)({},v),{},(0,o.Z)({},e,t)))}),[v,C]);return(0,K.jsxs)(Z.Z,{children:[(0,K.jsx)(w.Z,{children:(0,K.jsxs)(d.Z,{sx:{display:"flex",gap:1,justifyContent:"space-between"},children:[(0,K.jsx)(f.Z,{children:s(r||(r=(0,a.Z)(["tabOptimize.constraintFilter.title"])))}),(0,K.jsx)(E.Z,{title:(0,K.jsx)(f.Z,{children:s(i||(i=(0,a.Z)(["tabOptimize.constraintFilter.tooltip"])))})})]})}),(0,K.jsxs)(Z.Z,{display:"flex",flexDirection:"column",gap:.5,children:[Object.entries(v).map((function(e){var t=(0,l.Z)(e,2),r=t[0],i=t[1];return(0,K.jsx)(P,{statKey:r,statKeys:M,setFilter:_,disabled:n,value:i,close:function(){var e=(0,c.Z)({},v);delete e[r],C((0,c.Z)({},e))}},r)})),(0,K.jsx)(P,{statKeys:M,setFilter:_,disabled:n})]})]})}function P(e){var t=e.statKey,n=e.statKeys,r=void 0===n?[]:n,i=e.value,l=void 0===i?0:i,a=e.close,o=e.setFilter,c=e.disabled,d=void 0!==c&&c,f="%"===m.ZP.unit(t),Z=(0,p.useCallback)((function(e){return t&&o(t,e)}),[o,t]);return(0,K.jsxs)(x.Z,{sx:{width:"100%"},children:[(0,K.jsx)(S.Z,{title:t?(0,K.jsx)(m._J,{statKey:t}):"New Stat",disabled:d,color:t?"success":"secondary",children:r.map((function(e){return(0,K.jsx)(h.Z,{onClick:function(){null===a||void 0===a||a(),o(e,l)},children:(0,K.jsx)(m._J,{statKey:e})},e)}))}),(0,K.jsx)(C.CC,{sx:{flexBasis:30,flexGrow:1},children:(0,K.jsx)(C.ZP,{disabled:!t||d,float:f,value:l,placeholder:"Stat Value",onChange:Z,sx:{px:2},inputProps:{sx:{textAlign:"right"}},endAdornment:m.ZP.unit(t)})}),!!a&&(0,K.jsx)(v.Z,{color:"error",onClick:a,disabled:d,children:(0,K.jsx)(u.G,{icon:s.I7k})})]})}},20323:function(e,t,n){function r(){return{tcMode:!1}}n.d(t,{c:function(){return r}})},72838:function(e,t,n){n.d(t,{N:function(){return X},Z:function(){return U}});var r,i,l,a,o=n(93433),c=n(30168),s=n(29439),u=n(53174),d=n(54483),f=n(40117),x=n(62002),h=n(63204),v=n(66647),Z=n(68870),p=n(47047),y=n(20890),b=n(13400),j=n(81918),g=n(39504),m=n(2199),k=n(40165),w=n(24518),C=n(72791),S=n(22020),E=n(95614),K=n(71310),M=n(31038),P=n(40020),_=n(91702),F=n(20005),R=n(55221),G=n(25617),O=n(10157),D=n(75545),N=n(98620),z=n(31148),A=n(7618),I=n(79406),V=n(63372),B=n(42320),T=n(50765),q=n(60393),L=n(46797),H=n(44217),W=n(80184),J=(0,C.lazy)((function(){return Promise.all([n.e(788),n.e(535)]).then(n.bind(n,66585))})),Q=new Set(T._);function U(e){var t,n,o,T=e.artifactId,q=e.artifactObj,U=e.onClick,X=e.onDelete,Y=e.mainStatAssumptionLevel,ee=void 0===Y?0:Y,te=e.effFilter,ne=void 0===te?Q:te,re=e.probabilityFilter,ie=e.disableEditSetSlot,le=void 0!==ie&&ie,ae=e.editor,oe=void 0!==ae&&ae,ce=e.canExclude,se=void 0!==ce&&ce,ue=e.canEquip,de=void 0!==ue&&ue,fe=e.extraButtons,xe=(0,S.$)(["artifact","ui"]).t,he=(0,C.useContext)(A.t).database,ve=(0,V.Z)(T),Ze=(0,B.Z)((function(){var e;return z.y.get(null===(e=null!==q&&void 0!==q?q:ve)||void 0===e?void 0:e.setKey)}),[q,ve]),pe=!q,ye=(0,C.useState)(!1),be=(0,s.Z)(ye,2),je=be[0],ge=be[1],me=(0,C.useCallback)((function(){return ge(!1)}),[ge]),ke=(0,C.useCallback)((function(){return pe&&ge(!0)}),[pe,ge]),we=(0,C.useCallback)((function(e){return(0,W.jsx)(v.Z,{onClick:function(){return T&&(null===U||void 0===U?void 0:U(T))},sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:e})}),[U,T]),Ce=(0,C.useCallback)((function(e){return(0,W.jsx)(Z.Z,{sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:e})}),[]),Se=null!==q&&void 0!==q?q:ve;if(!Se)return null;var Ee=Se.id,Ke=Se.lock,Me=Se.slotKey,Pe=Se.rarity,_e=Se.level,Fe=Se.mainStatKey,Re=Se.substats,Ge=Se.exclude,Oe=Se.location,De=void 0===Oe?"":Oe,Ne=Math.max(Math.min(ee,4*Pe),_e),ze=I.ZP.unit(Fe),Ae="roll"+(Math.floor(Math.max(_e,0)/4)+1),Ie=N.Z.getArtifactEfficiency(Se,ne),Ve=Ie.currentEfficiency,Be=Ie.maxEfficiency,Te=0!==Be,qe=null===Ze||void 0===Ze?void 0:Ze.getSlotName(Me),Le=null===Ze||void 0===Ze?void 0:Ze.getSlotDesc(Me),He=Le&&(0,W.jsx)(R.Z,{title:(0,W.jsxs)(Z.Z,{children:[(0,W.jsx)(C.Suspense,{fallback:(0,W.jsx)(p.Z,{variant:"text",width:100}),children:(0,W.jsx)(y.Z,{variant:"h6",children:qe})}),(0,W.jsx)(y.Z,{children:Le})]})}),We=null===Ze||void 0===Ze?void 0:Ze.setEffects,Je=Ze&&We&&(0,W.jsx)(R.Z,{title:(0,W.jsx)("span",{children:Object.keys(We).map((function(e){return(0,W.jsxs)("span",{children:[(0,W.jsx)(y.Z,{variant:"h6",children:(0,W.jsx)(G.Z,{color:"success",children:xe("artifact:setEffectNum",{setNum:e})})}),(0,W.jsx)(y.Z,{children:Ze.setEffectDesc(e)})]},e)}))})});return(0,W.jsxs)(C.Suspense,{fallback:(0,W.jsx)(p.Z,{variant:"rectangular",sx:{width:"100%",height:"100%",minHeight:350}}),children:[oe&&(0,W.jsx)(C.Suspense,{fallback:!1,children:(0,W.jsx)(J,{artifactIdToEdit:je?T:"",cancelEdit:me,disableEditSetSlot:le})}),(0,W.jsxs)(K.Z,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[(0,W.jsxs)(F.Z,{condition:!!U,wrapper:we,falseWrapper:Ce,children:[(0,W.jsxs)(Z.Z,{className:"grad-".concat(Pe,"star"),sx:{position:"relative",width:"100%"},children:[!U&&(0,W.jsx)(b.Z,{color:"primary",disabled:!pe,onClick:function(){return he.arts.set(Ee,{lock:!Ke})},sx:{position:"absolute",right:0,bottom:0,zIndex:2},children:Ke?(0,W.jsx)(f.Z,{}):(0,W.jsx)(x.Z,{})}),(0,W.jsxs)(Z.Z,{sx:{pt:2,px:2,position:"relative",zIndex:1},children:[(0,W.jsxs)(Z.Z,{component:"div",sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[(0,W.jsx)(j.Z,{size:"small",label:(0,W.jsx)("strong",{children:" +".concat(_e)}),color:Ae}),!qe&&(0,W.jsx)(p.Z,{variant:"text",width:100}),qe&&(0,W.jsx)(y.Z,{noWrap:!0,sx:{textAlign:"center",backgroundColor:"rgba(100,100,100,0.35)",borderRadius:"1em",px:1},children:(0,W.jsx)("strong",{children:qe})}),!He&&(0,W.jsx)(p.Z,{width:10}),He]}),(0,W.jsx)(y.Z,{color:"text.secondary",variant:"body2",children:(0,W.jsx)(E.ZP,{slotKey:Me})}),(0,W.jsx)(y.Z,{variant:"h6",color:"".concat(I.ZP.getVariant(Fe),".main"),children:(0,W.jsxs)("span",{children:[D.ZP[Fe]," ",I.ZP.get(Fe)]})}),(0,W.jsx)(y.Z,{variant:"h5",children:(0,W.jsx)("strong",{children:(0,W.jsxs)(_.Z,{color:Ne!==_e?"warning":void 0,children:[(0,I.qs)(null!==(t=N.Z.mainStatValue(Fe,Pe,Ne))&&void 0!==t?t:0,I.ZP.unit(Fe)),ze]})})}),(0,W.jsx)(O.t,{stars:Pe,colored:!0})]}),(0,W.jsx)(Z.Z,{sx:{height:"100%",position:"absolute",right:0,top:0},children:(0,W.jsx)(Z.Z,{component:"img",src:null!==(n=null===Ze||void 0===Ze?void 0:Ze.slotIcons[Me])&&void 0!==n?n:"",width:"auto",height:"100%",sx:{float:"right"}})})]}),(0,W.jsxs)(g.Z,{sx:{flexGrow:1,display:"flex",flexDirection:"column",pt:1,pb:0,width:"100%"},children:[Re.map((function(e){return!!e.value&&(0,W.jsx)($,{stat:e,effFilter:ne,rarity:Pe},e.key)})),(0,W.jsxs)(Z.Z,{sx:{display:"flex",my:1},children:[(0,W.jsx)(y.Z,{color:"text.secondary",component:"span",variant:"caption",sx:{flexGrow:1},children:xe(r||(r=(0,c.Z)(["artifact:editor.curSubEff"])))}),(0,W.jsx)(L.Z,{value:Ve,max:900,valid:Te})]}),Ve!==Be&&(0,W.jsxs)(Z.Z,{sx:{display:"flex",mb:1},children:[(0,W.jsx)(y.Z,{color:"text.secondary",component:"span",variant:"caption",sx:{flexGrow:1},children:xe(i||(i=(0,c.Z)(["artifact:editor.maxSubEff"])))}),(0,W.jsx)(L.Z,{value:Be,max:900,valid:Te})]}),(0,W.jsx)(Z.Z,{flexGrow:1}),re&&(0,W.jsxs)("strong",{children:["Probability: ",(100*(0,H.B)(Se,re)).toFixed(2),"%"]}),(0,W.jsxs)(y.Z,{color:"success.main",children:[null!==(o=null===Ze||void 0===Ze?void 0:Ze.name)&&void 0!==o?o:"Artifact Set"," ",Je]})]})]}),(0,W.jsxs)(Z.Z,{sx:{p:1,display:"flex",gap:1,justifyContent:"space-between",alignItems:"center"},children:[pe&&de?(0,W.jsx)(M.Z,{sx:{flexGrow:1},size:"small",showDefault:!0,defaultIcon:(0,W.jsx)(h.Z,{}),defaultText:xe("ui:inventory"),value:De,onChange:function(e){return he.arts.setLocation(T,e)}}):(0,W.jsx)(P.Z,{location:De}),pe&&(0,W.jsxs)(m.Z,{sx:{height:"100%"},children:[oe&&(0,W.jsx)(k.Z,{title:(0,W.jsx)(y.Z,{children:xe(l||(l=(0,c.Z)(["artifact:edit"])))}),placement:"top",arrow:!0,children:(0,W.jsx)(w.Z,{color:"info",size:"small",onClick:ke,children:(0,W.jsx)(d.G,{icon:u.Xcf,className:"fa-fw"})})}),se&&(0,W.jsx)(k.Z,{title:(0,W.jsxs)(Z.Z,{children:[(0,W.jsx)(y.Z,{children:xe(a||(a=(0,c.Z)(["artifact:excludeArtifactTip"])))}),(0,W.jsx)(y.Z,{children:(0,W.jsx)(_.Z,{color:Ge?"error":"success",children:xe("artifact:".concat(Ge?"excluded":"included"))})})]}),placement:"top",arrow:!0,children:(0,W.jsx)(w.Z,{onClick:function(){return he.arts.set(Ee,{exclude:!Ge})},color:Ge?"error":"success",size:"small",children:(0,W.jsx)(d.G,{icon:Ge?u.gPx:u.Stf,className:"fa-fw"})})}),!!X&&(0,W.jsx)(w.Z,{color:"error",size:"small",onClick:function(){return X(Ee)},disabled:Ke,children:(0,W.jsx)(d.G,{icon:u.I7k,className:"fa-fw"})}),fe]})]})]})]})}function $(e){var t,n,r,i=e.stat,l=e.effFilter,a=e.rarity,c=null!==(t=null===(n=i.rolls)||void 0===n?void 0:n.length)&&void 0!==t?t:0,s=i.key?N.Z.maxSubstatValues(i.key):0,u=(0,C.useMemo)((function(){return i.key?N.Z.getSubstatRollData(i.key,a):[]}),[i.key,a]),d=7-u.length,f="roll".concat((0,q.uZ)(c,1,6)),x=null!==(r=i.efficiency)&&void 0!==r?r:0,h=(0,q.V2)(.5+x/500*.5),v=I.ZP.getStr(i.key),p=I.ZP.unit(i.key),b=i.key&&l.has(i.key),j=(0,C.useMemo)((function(){return b&&(0,W.jsx)(Z.Z,{display:"flex",gap:.25,height:"1.3em",children:(0,o.Z)(i.rolls).sort().map((function(e,t){return(0,W.jsx)(X,{value:100*e/s,color:"roll".concat((0,q.uZ)(d+u.indexOf(e),1,6),".main")},"".concat(t).concat(e))}))})}),[b,i.rolls,s,u,d]);return(0,W.jsxs)(Z.Z,{display:"flex",gap:1,alignContent:"center",children:[(0,W.jsxs)(y.Z,{sx:{flexGrow:1},color:c?"".concat(f,".main"):"error.main",component:"span",children:[D.ZP[i.key]," ",v,"+".concat((0,I.qs)(i.value,I.ZP.unit(i.key))).concat(p)]}),j,(0,W.jsx)(y.Z,{sx:{opacity:h,minWidth:40,textAlign:"right"},children:b?"".concat(x.toFixed(),"%"):"-"})]})}function X(e){var t=e.color,n=void 0===t?"red":t,r=e.value,i=void 0===r?50:r;return(0,W.jsx)(Z.Z,{sx:{width:7,height:"100%",bgcolor:n,overflow:"hidden",borderRadius:1,display:"inline-block"},children:(0,W.jsx)(Z.Z,{sx:{width:10,height:"".concat(100-(0,q.uZ)(i,0,100),"%"),bgcolor:"gray"}})})}},44824:function(e,t,n){n.d(t,{Af:function(){return u},EM:function(){return x},OQ:function(){return c},bq:function(){return s},sZ:function(){return d},x3:function(){return f}});var r=n(37762),i=n(93433),l=n(24351),a=n(98620),o=n(44217),c=["rarity","level","artsetkey","efficiency","mefficiency","probability"],s=["probability"];function u(){return{artSetKeys:[],rarity:(0,i.Z)(l.En),levelLow:0,levelHigh:20,slotKeys:(0,i.Z)(l.eV),mainStatKeys:[],substats:[],location:"",exclusion:["excluded","included"],locked:["locked","unlocked"]}}var d=function(){return{filterOption:u(),ascending:!1,sortType:c[0]}};function f(e,t){return{rarity:{getValue:function(e){var t;return null!==(t=e.rarity)&&void 0!==t?t:0},tieBreaker:"level"},level:{getValue:function(e){var t;return null!==(t=e.level)&&void 0!==t?t:0},tieBreaker:"artsetkey"},artsetkey:{getValue:function(e){var t;return null!==(t=e.setKey)&&void 0!==t?t:""},tieBreaker:"level"},efficiency:{getValue:function(t){return a.Z.getArtifactEfficiency(t,e).currentEfficiency}},mefficiency:{getValue:function(t){return a.Z.getArtifactEfficiency(t,e).maxEfficiency}},probability:{getValue:function(e){if(!Object.keys(t).length)return 0;var n=e.probability;return void 0===n?(0,o.B)(e,t):n}}}}function x(){return{exclusion:function(e,t){return!(!t.includes("included")&&!e.exclude)&&!(!t.includes("excluded")&&e.exclude)},locked:function(e,t){return!(!t.includes("locked")&&e.lock)&&!(!t.includes("unlocked")&&!e.lock)},location:function(e,t){return!t||("Inventory"===t&&!e.location||(!("Equipped"!==t||!e.location)||t===e.location))},artSetKeys:function(e,t){return!t.length||t.includes(e.setKey)},slotKeys:function(e,t){return t.includes(e.slotKey)},mainStatKeys:function(e,t){return!t.length||t.includes(e.mainStatKey)},levelLow:function(e,t){return t<=e.level},levelHigh:function(e,t){return t>=e.level},rarity:function(e,t){return t.includes(e.rarity)},substats:function(e,t){var n,i=(0,r.Z)(t);try{var l=function(){var t=n.value;if(t&&!e.substats.some((function(e){return e.key===t})))return{v:!1}};for(i.s();!(n=i.n()).done;){var a=l();if("object"===typeof a)return a.v}}catch(o){i.e(o)}finally{i.f()}return!0}}}},46797:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(29439),i=n(25617),l=n(60393),a=n(80184);function o(e){var t=e.value,n=e.max,o=void 0===n?1:n,c=e.valid,s="number"===typeof t?["roll".concat((0,l.uZ)(Math.floor(t/o*10)-4,1,6)),t.toFixed()+"%"]:["secondary",t],u=(0,r.Z)(s,2),d=u[0],f=u[1];return c||(d="error"),(0,a.jsx)(i.Z,{color:d,children:f})}},44217:function(e,t,n){n.d(t,{B:function(){return g}});var r=n(29439),i=n(37762),l=n(4942),a=n(1413),o=n(93433),c=n(60393),s=n(98620),u=n(12354),d=[3,4,6],f={hp:6,atk:6,def:6,hp_:4,atk_:4,def_:4,eleMas:4,enerRech_:4,critRate_:3,critDMG_:3},x={};function h(e,t,n,r){if(5!==e.length)for(var i=0,s=d;i<s.length;i++){var u=s[i];t[u]>0&&h([].concat((0,o.Z)(e),[u]),(0,a.Z)((0,a.Z)({},t),{},(0,l.Z)({},u,t[u]-u)),n-u,r*t[u]/n)}else(0,c.SR)(x,e,r)}h([0],{3:6,4:20,6:18},44,1),h([3],{3:3,4:20,6:18},41,1),h([4],{3:6,4:16,6:18},40,1),h([6],{3:6,4:20,6:12},38,1);for(var v=Array(6).fill(0).map((function(e,t){for(var n=[1],r=0,i=1;++r<=t;)i*=t-r+1,i/=r,n.push(i);return n})),Z=[[1]],p=function(){var e=Z[Z.length-1],t=Array(e.length+3).fill(0);e.forEach((function(e,n){for(var r=0,i=[0,1,2,3];r<i.length;r++){t[n+i[r]]+=e}})),Z.push(t.map((function(e){return e/4})))};Z.length<6;)p();for(var y=function(){var e=j[b],t=e.reduce((function(e,t){return e+t}));e.forEach((function(e,n,r){r[n]=t,t-=e}))},b=0,j=Z;b<j.length;b++)y();function g(e,t){if(e.rarity<=2)return NaN;var n=e.rarity,o=e.level,h=e.substats,p=(0,a.Z)({},t),y=new Set(Object.keys(p)),b=0,j=e.mainStatKey;if(j in p){var g=4*n;if(u[n][j][g]<p[j])return 0;delete p[j],y.delete(j)}var m,k=(0,i.Z)(h);try{for(k.s();!(m=k.n()).done;){var w=m.value,C=w.key,S=w.value;C?y.has(C)&&(y.delete(C),p[C]>S?p[C]-=S:delete p[C]):b+=1}}catch(N){k.e(N)}finally{k.f()}if(b+=4-h.length,y.size>b||Object.keys(p).length>4)return 0;for(var E=s.Z.rollsRemaining(o,n)-b,K=0,M=Object.entries(p);K<M.length;K++){var P=(0,r.Z)(M[K],2),_=P[0],F=P[1];p[_]=Math.max(Math.ceil(10*F/s.Z.maxSubstatValues(_,n)),1)}var R=0,G=Object.entries(p).map((function(e){var t=(0,r.Z)(e,2),n=t[0],i=t[1],l=y.has(n)?1:0,a=Math.ceil(i/10)-l;return R+=a,{target:i,filler:l,minUpgrade:a}})).reverse();if(R>E)return 0;var O=(0,l.Z)({},E,1),D=E-R;return G.forEach((function(e,t){for(var n,i,l,a=e.target,o=e.filler,c=e.minUpgrade,s={},u=c;u<=c+D;u++)for(var d=a-7*(u+o),f=d>0?Z[u+o][d]:1,x=0,h=Object.entries(O);x<h.length;x++){var p,y=(0,r.Z)(h[x],2),b=y[0],j=y[1],g=parseInt(b);if(!(g<u)){var m=(i=u,l=4-t,v[n=g][i]*Math.pow(l-1,n-i)/Math.pow(l,n)),k=g-u;s[k]=(null!==(p=s[k])&&void 0!==p?p:0)+j*f*m}}O=s})),function(e,t,n){var r,l,a=null!==(r=f[e])&&void 0!==r?r:0,o=0,s={3:2,4:5,6:3},u=x[a],h=(0,i.Z)(t);try{for(h.s();!(l=h.n()).done;){var Z=l.value.key;if(Z){var p=f[Z];u=u[p],s[p]-=1}}}catch(N){h.e(N)}finally{h.f()}a&&(s[a]-=1);var y,b={3:0,4:0,6:0},j=(0,i.Z)(n);try{for(j.s();!(y=j.n()).done;){var g=y.value;b[f[g]]+=1}}catch(N){j.e(N)}finally{j.f()}var m=0;(0,c.Q1)(u,[],(function(e){return"number"===typeof e}),(function(e,t){m+=e;var n,r={3:0,4:0,6:0},l=(0,i.Z)(t);try{for(l.s();!(n=l.n()).done;){r[n.value]+=1}}catch(N){l.e(N)}finally{l.f()}var a,c=e,s=(0,i.Z)(d);try{for(s.s();!(a=s.n()).done;){var u=a.value,f=r[u],x=b[u];if(f<x)return;c*=v[f][x]}}catch(N){s.e(N)}finally{s.f()}o+=c}));var k,w=(0,i.Z)(d);try{for(w.s();!(k=w.n()).done;){var C=k.value;o/=v[s[C]][b[C]]}}catch(N){w.e(N)}finally{w.f()}return o/m}(e.mainStatKey,h,y)*Object.values(O).reduce((function(e,t){return e+t}))}},74544:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(29439),i=n(72791),l=n(7618);function a(e){var t=(0,i.useContext)(l.t).database,n=(0,i.useState)((function(){return t.buildSettings.get(e)})),a=(0,r.Z)(n,2),o=a[0],c=a[1];return(0,i.useEffect)((function(){return c(t.buildSettings.get(e))}),[t,e]),(0,i.useEffect)((function(){return t.buildSettings.follow(e,c)}),[e,c,t]),{buildSetting:o,buildSettingDispatch:(0,i.useCallback)((function(n){return e&&t.buildSettings.set(e,n)}),[e,t])}}},63372:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(29439),i=n(72791),l=n(7618);function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=(0,i.useContext)(l.t),n=t.database,a=(0,i.useState)(n.arts.get(e)),o=(0,r.Z)(a,2),c=o[0],s=o[1];return(0,i.useEffect)((function(){return s(n.arts.get(e))}),[n,e]),(0,i.useEffect)((function(){return e?n.arts.follow(e,s):void 0}),[e,s,n]),c}}}]);
//# sourceMappingURL=328.a3fcef01.chunk.js.map