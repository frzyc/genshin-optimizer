"use strict";(self.webpackChunkgenshin_optimizer=self.webpackChunkgenshin_optimizer||[]).push([[627],{21977:function(e,n,t){t.d(n,{Z:function(){return u}});var r=t(29439),i=t(57621),a=t(10889),s=t(72791),l=t(60393),c=t(10600),o=t(80184);function u(e){var n=e.levelLow,t=e.levelHigh,u=e.setLow,d=e.setHigh,x=e.setBoth,h=e.dark,f=void 0!==h&&h,p=e.disabled,m=void 0!==p&&p,j=e.showLevelText,Z=void 0!==j&&j,v=(0,s.useState)(n),g=(0,r.Z)(v,2),y=g[0],b=g[1],w=(0,s.useState)(t),C=(0,r.Z)(w,2),k=C[0],S=C[1],P=(0,s.useCallback)((function(e,n){if("number"==typeof n)throw new TypeError;var t=(0,r.Z)(n,2),i=t[0],a=t[1];b(i),S(a)}),[b,S]);return(0,s.useEffect)((function(){return b(n)}),[b,n]),(0,s.useEffect)((function(){return S(t)}),[S,t]),(0,o.jsxs)(i.Z,{sx:{width:"100%",display:"flex",alignItems:"center",bgcolor:f?"contentDark.main":"contentLight.main"},children:[(0,o.jsx)(c.ZP,{value:y,onChange:function(e){return u((0,l.uZ)(e,0,t))},sx:{px:1,pl:Z?2:void 0,width:Z?100:50},inputProps:{sx:{textAlign:"center"}},startAdornment:Z?"Level: ":void 0,disabled:m}),(0,o.jsx)(a.ZP,{sx:{width:100,flexGrow:1,mx:2},getAriaLabel:function(){return"Arifact Level Range"},value:[y,k],onChange:P,onChangeCommitted:function(e,n){return x(n[0],n[1])},valueLabelDisplay:"auto",min:0,max:20,step:1,marks:!0,disabled:m}),(0,o.jsx)(c.ZP,{value:k,onChange:function(e){return d((0,l.uZ)(e,n,20))},sx:{px:1,width:50},inputProps:{sx:{textAlign:"center"}},disabled:m})]})}},18726:function(e,n,t){t.d(n,{Z:function(){return s}});var r=t(20890),i=t(52791),a=t(80184);function s(e){var n=e.avatar,t=e.title,s=e.action;return(0,a.jsxs)(i.Z,{display:"flex",gap:1,p:2,alignItems:"center",children:[n,(0,a.jsx)(r.Z,{variant:"subtitle1",sx:{flexGrow:1},children:t}),s&&(0,a.jsx)(r.Z,{variant:"caption",children:s})]})}},37503:function(e,n,t){t.d(n,{X:function(){return _},Z:function(){return R}});var r=t(68870),i=t(20890),a=t(94721),s=t(72791),l=t(13746),c=t(60393),o=t(3992),u=t(18726),d=t(39504),x=t(88034),h=t(29439),f=t(72247),p=t(9912),m=t(24518),j=t(23786),Z=t(2199),v=t(97714),g=t(33890),y=t(25617),b=t(66624),w=t(80184);function C(e){var n=e.conditional,t=e.disabled,r=void 0!==t&&t;return 1===Object.keys(n.states).length&&"path"in n?(0,w.jsx)(k,{conditional:n,disabled:r}):"path"in n?(0,w.jsx)(S,{conditional:n,disabled:r}):(0,w.jsx)(P,{conditional:n,disabled:r})}function k(e){var n=e.conditional,t=e.disabled,r=(0,s.useContext)(v.K),i=r.character,a=r.characterDispatch,o=(0,s.useContext)(l.R).data,u=(0,s.useCallback)((function(e){var t=(0,c.I8)(i.conditional);e?(0,c.SR)(t,n.path,e):(0,c.uH)(t,n.path),a({conditional:t})}),[n,i,a]),d=o.get(n.value).value,x=(0,h.Z)(Object.entries(n.states)[0],2),j=x[0],Z=O(x[1].name),g=K(n.name);return(0,w.jsxs)(m.Z,{fullWidth:!0,size:"small",sx:{borderRadius:0},color:d?"success":"primary",onClick:function(){return u(d?void 0:j)},disabled:t,startIcon:d?(0,w.jsx)(f.Z,{}):(0,w.jsx)(p.Z,{}),children:[g," ",Z]})}function S(e){var n=e.conditional,t=e.disabled,r=(0,s.useContext)(v.K),i=r.character,o=r.characterDispatch,u=(0,s.useContext)(l.R).data,d=(0,s.useCallback)((function(e){var t=(0,c.I8)(i.conditional);e?(0,c.SR)(t,n.path,e):(0,c.uH)(t,n.path),o({conditional:t})}),[n,i,o]),x=u.get(n.value).value,f=x?n.states[x]:void 0,p=f?O(f.name):(0,w.jsx)(y.Z,{color:"secondary",children:"Not Active"}),m=K(n.name);return(0,w.jsxs)(g.Z,{fullWidth:!0,size:"small",sx:{borderRadius:0},color:x?"success":"primary",title:(0,w.jsxs)("span",{children:[m," ",p]}),disabled:t,children:[(0,w.jsx)(j.Z,{onClick:function(){return d()},selected:!f,disabled:!f,children:(0,w.jsx)("span",{children:"Not Active"})}),(0,w.jsx)(a.Z,{}),Object.entries(n.states).map((function(e){var n=(0,h.Z)(e,2),t=n[0],r=n[1];return(0,w.jsx)(j.Z,{onClick:function(){return d(t)},selected:x===t,disabled:x===t,children:r.name},t)}))]})}function P(e){var n=e.conditional,t=e.disabled,r=(0,s.useContext)(v.K),i=r.character,a=r.characterDispatch,o=(0,s.useContext)(l.R).data,u=(0,s.useCallback)((function(e,n){var t=(0,c.I8)(i.conditional);n?(0,c.SR)(t,e,n):(0,c.uH)(t,e),a({conditional:t})}),[i,a]);return(0,w.jsx)(Z.Z,{fullWidth:!0,orientation:"vertical",disableElevation:!0,color:"secondary",children:Object.entries(n.states).map((function(e){var n=(0,h.Z)(e,2),r=n[0],i=n[1],a=o.get(i.value).value,s=a===r;return(0,w.jsx)(m.Z,{color:s?"success":"primary",disabled:t,fullWidth:!0,onClick:function(){return u(i.path,a?void 0:r)},size:"small",startIcon:s?(0,w.jsx)(f.Z,{}):(0,w.jsx)(p.Z,{}),sx:{borderRadius:0},children:K(i.name)},r)}))})}function E(e){return"string"!==typeof e}function O(e){if(!e)return"";var n="primary",t=e;return e&&E(e)&&e.props.color&&(n=e.props.color,t=(0,w.jsx)("span",{children:e.props.children})),(0,w.jsx)(y.Z,{sx:{ml:.5},color:n,children:t})}function K(e){if(E(e)){var n=e.props.key18,t=e.props.ns,r=e.props.values;return(0,w.jsx)(b.v,{ns:t,key18:n,values:r,useBadge:!0})}return e}function D(e){var n,t=e.conditional,r=e.hideHeader,i=void 0!==r&&r,a=e.hideDesc,u=void 0!==a&&a,h=(0,s.useContext)(l.R).data;if("path"in t){var f,p=h.get(t.value).value;n=p&&(null===(f=t.states[p])||void 0===f?void 0:f.fields)}else n=Object.values(t.states).flatMap((function(e){return h.get(e.value).value?e.fields:[]}));return(0,w.jsxs)(o.Z,{children:[!(0,c.mY)(i,t)&&(0,w.jsx)(_,{header:t.header,hideDesc:u}),(0,w.jsx)(d.Z,{sx:{p:0,"&:last-child":{pb:0}},children:(0,w.jsx)(C,{conditional:t})}),n&&(0,w.jsx)(x.ZP,{fields:n})]})}var A=t(55221);function R(e){var n=e.sections,t=e.teamBuffOnly,i=e.hideDesc,a=void 0!==i&&i,c=e.hideHeader,o=void 0!==c&&c,u=(0,s.useContext)(l.R).data;if(!n.length)return null;var d=n.map((function(e,n){return e.canShow&&!u.get(e.canShow).value||t&&!e.teamBuff?null:(0,w.jsx)(I,{section:e,hideDesc:a,hideHeader:o},n)})).filter((function(e){return e}));return d.length?(0,w.jsx)(r.Z,{display:"flex",flexDirection:"column",gap:1,children:d}):null}function I(e){var n=e.section,t=e.hideDesc,r=void 0!==t&&t,i=e.hideHeader,a=void 0!==i&&i;return"fields"in n?(0,w.jsx)(M,{section:n,hideDesc:r,hideHeader:a}):"states"in n?(0,w.jsx)(D,{conditional:n,hideDesc:r,hideHeader:a}):(0,w.jsx)(z,{section:n})}function M(e){var n=e.section,t=e.hideDesc,r=e.hideHeader;return(0,w.jsxs)(o.Z,{children:[!(0,c.mY)(r,n)&&n.header&&(0,w.jsx)(_,{header:n.header,hideDesc:t,hideDivider:0===n.fields.length}),(0,w.jsx)(x.ZP,{fields:n.fields})]})}function z(e){var n=e.section,t=(0,s.useContext)(l.R).data;return(0,w.jsx)("div",{children:(0,c.mY)(n.text,t)})}function _(e){var n=e.header,t=e.hideDesc,r=e.hideDivider,o=(0,s.useContext)(l.R).data,d=n.icon,x=n.title,h=n.action;d=(0,c.mY)(d,o);var f=!t&&(0,c.mY)(n.description,o),p=t?x:(0,w.jsxs)("span",{children:[x," ",(0,w.jsx)(A.Z,{title:(0,w.jsx)(i.Z,{children:f})})]});return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(u.Z,{avatar:d,title:p,action:h}),!r&&(0,w.jsx)(a.Z,{})]})}},92443:function(e,n,t){t.d(n,{Z:function(){return u}});var r=t(1413),i=t(45987),a=t(66934),s=t(24518),l=t(80184),c=["children","disabled"],o=(0,a.ZP)(s.Z)((function(e){var n=e.theme;return{"&.Mui-disabled":{backgroundColor:n.palette.primary.dark,color:n.palette.text.secondary}}}));function u(e){var n=e.children,t=(e.disabled,(0,i.Z)(e,c));return(0,l.jsx)(o,(0,r.Z)((0,r.Z)({},t),{},{disabled:!0,children:n}))}},4627:function(e,n,t){t.r(n),t.d(n,{default:function(){return $i}});var r=t(29439),i=t(63833),a=t(45781),s=t(35893),l=t(10284),c=t(68575),o=t(66630),u=t(68870),d=t(47047),x=t(39504),h=t(25228),f=t(43896),p=t(24518),m=t(72791),j=t(22020),Z=t(43504),v=t(16871),g=t(3992),y=t(71310),b=t(68198),w=t(32490),C=t(97714),k=t(13746),S=t(60705),P=t(947),E=t(24711),O=t(13434),K=t(50920),D=t(42320),A=t(47639),R=t(72056),I=t(24351),M=t(28057),z=t(3082),_=t(2380),N=t(566),L=t(80184);function T(){var e,n=(0,j.$)("page_character").t,t=(0,m.useContext)(C.K).characterSheet,i=(0,m.useState)(!1),a=(0,r.Z)(i,2),s=a[0],l=a[1],c=(0,N.Z)();return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(z.w,{show:s,onHide:function(){return l(!1)},onSelect:c}),(0,L.jsx)(p.Z,{color:"info",onClick:function(){return l(!0)},startIcon:(0,L.jsx)(_.Z,{src:null===t||void 0===t?void 0:t.thumbImgSide}),children:null!==(e=null===t||void 0===t?void 0:t.name)&&void 0!==e?e:n("selectCharacter")})]})}var B=t(37355),q=t(9585),G=t(94721),F=t(89673),W=t(55818),V=t(20890),H=t(3721),U=t(63210),$=t(18726),J=t(91702),Y=t(55942),X=t(9321),Q=t(25617),ee=t(8430),ne=t(79406);function te(){var e=(0,m.useContext)(S.M).modalOpen,n=(0,m.useContext)(S.M).setFormulaData,t=(0,m.useCallback)((function(){return null===n||void 0===n?void 0:n(void 0,void 0)}),[n]);return(0,L.jsx)(X.Z,{open:!!e,onClose:t,children:(0,L.jsxs)(g.Z,{children:[(0,L.jsx)(q.Z,{title:"Formulas & Calculations",action:(0,L.jsx)(b.Z,{onClick:t})}),(0,L.jsx)(x.Z,{sx:{pt:0},children:(0,L.jsx)(re,{})})]})})}function re(){var e=(0,m.useContext)(k.R).data,n=(0,m.useContext)(S.M).data,t=(0,ee.U)(null!==n&&void 0!==n?n:e);return(0,L.jsx)(m.Suspense,{fallback:(0,L.jsx)(d.Z,{variant:"rectangular",width:"100%",height:1e3}),children:(0,L.jsx)(u.Z,{sx:{mr:-1,mb:-1},children:t.map((function(e){var n=(0,r.Z)(e,2),t=n[0],i=n[1];return(0,L.jsx)(ie,{displayNs:i,sectionKey:t},t)}))})})}function ie(e){var n=e.sectionKey,t=e.displayNs,i=(0,m.useContext)(k.R).data,a=(0,m.useContext)(S.M).data,s=(0,D.Z)((function(){return(0,ee.f)(null!==a&&void 0!==a?a:i,n)}),[a,i,n]);if(!s)return null;if(Object.entries(t).every((function(e){var n=(0,r.Z)(e,2);n[0];return n[1].isEmpty})))return null;var l=s.title,c=s.icon,o=s.action;return(0,L.jsxs)(y.Z,{sx:{mb:1},children:[(0,L.jsx)($.Z,{avatar:c&&(0,L.jsx)(Y.Z,{size:2,sx:{m:-1},src:c}),title:l,action:o&&(0,L.jsx)(Q.Z,{children:o})}),(0,L.jsx)(G.Z,{}),(0,L.jsx)(x.Z,{children:Object.entries(t).map((function(e){var n=(0,r.Z)(e,2),t=n[0],i=n[1];return!i.isEmpty&&(0,L.jsx)(ae,{node:i},t)}))})]})}function ae(e){var n,t=e.node,i=(0,m.useContext)(S.M).node,a=(0,m.useState)(!1),s=(0,r.Z)(a,2),l=s[0],c=s[1],o=(0,m.useCallback)((function(e,n){return c(n)}),[]),d=(0,m.useRef)();return(0,m.useEffect)((function(){t===i&&setTimeout((function(){var e,n;return null===d||void 0===d||null===(e=d.current)||void 0===e||null===(n=e.scrollIntoView)||void 0===n?void 0:n.call(e,{behavior:"smooth"})}),300)}),[d,t,i]),(0,L.jsxs)(F.Z,{sx:{bgcolor:"contentDark.main"},expanded:t===i||l,onChange:o,ref:d,children:[(0,L.jsxs)(W.Z,{expandIcon:(0,L.jsx)(B.Z,{}),children:[(0,L.jsxs)(V.Z,{children:[(0,L.jsx)(J.Z,{color:t.info.variant,children:ne.ZP.get(null!==(n=t.info.key)&&void 0!==n?n:"")})," ",(0,L.jsx)("strong",{children:(0,ne.EC)(t.value,t.unit)})]}),I.jU.includes(t.info.variant)&&(0,L.jsx)(u.Z,{sx:{display:"inline-block",ml:"auto",mr:2},children:(0,L.jsx)(U.Z,{reaction:t.info.variant,trigger:t.info.subVariant})})]}),(0,L.jsx)(H.Z,{children:t.formulas.map((function(e,n){return(0,L.jsx)(V.Z,{children:e},n)}))})]})}var se=t(2199),le=t(23786),ce=t(10600),oe=t(33890),ue=t(2139),de=t(60393);function xe(){var e=(0,j.$)("page_character").t,n=(0,m.useContext)(C.K),t=n.character,i=n.characterSheet,a=n.characterDispatch,s=(0,m.useCallback)((function(e){e=(0,de.uZ)(e,1,90);var n=ue.SJ.findIndex((function(n){return e<=n}));a({level:e,ascension:n})}),[a]),l=(0,m.useCallback)((function(){if(t){var e=t.level,n=void 0===e?1:e,r=t.ascension,i=void 0===r?0:r,s=ue.SJ.findIndex((function(e){return 90!==n&&n===e}));a(i===s?{ascension:i+1}:{ascension:s})}}),[a,t]),c=t.level,o=void 0===c?1:c,u=t.ascension,d=void 0===u?0:u;return(0,L.jsxs)(se.Z,{sx:{bgcolor:function(e){return e.palette.contentDark.main}},children:[(0,L.jsx)(ce.CC,{children:(0,L.jsx)(ce.ZP,{onChange:s,value:o,startAdornment:"Lv. ",inputProps:{min:1,max:90,sx:{textAlign:"center"}},sx:{width:"100%",height:"100%",pl:2},disabled:!i})}),(0,L.jsx)(p.Z,{sx:{pl:1},disabled:!(0,ue.ek)(o)||!i,onClick:l,children:(0,L.jsxs)("strong",{children:["/ ",ue.SJ[d]]})}),(0,L.jsx)(oe.Z,{title:e("selectLevel"),disabled:!i,children:ue.D4.map((function(e){var n=(0,r.Z)(e,2),t=n[0],i=n[1],s=t===ue.SJ[i]?"Lv. ".concat(t):"Lv. ".concat(t,"/").concat(ue.SJ[i]),l=t===o&&i===d;return(0,L.jsx)(le.Z,{selected:l,disabled:l,onClick:function(){return a({level:t,ascension:i})},children:s},"".concat(t,"/").concat(i))}))})]})}var he=t(93433),fe=t(53767),pe=t(61889),me=t(15021),je=t(52791),Ze=t(1413),ve=t(72247),ge=t(9912),ye=t(81918),be=t(56125),we=t(26138),Ce=t(45987),ke=t(66934),Se=t(13400),Pe=["expand"],Ee=(0,ke.ZP)((function(e){e.expand;var n=(0,Ce.Z)(e,Pe);return(0,L.jsx)(Se.Z,(0,Ze.Z)({},n))}))((function(e){var n=e.theme;return{transform:e.expand?"rotate(180deg)":"rotate(0deg)",marginLeft:"auto",transition:n.transitions.create("transform",{duration:n.transitions.duration.shortest})}})),Oe=t(75545),Ke=t(49670),De=t(92443),Ae=["name","children","value","placeholder","defaultValue","onValueChange","percent","disabled","onReset"],Re=(0,ke.ZP)(se.Z)({display:"flex"});function Ie(e){var n=e.name,t=e.children,r=e.value,i=e.placeholder,a=e.defaultValue,s=void 0===a?0:a,l=e.onValueChange,c=e.percent,o=void 0!==c&&c,u=e.disabled,d=void 0!==u&&u,x=e.onReset,h=(0,Ce.Z)(e,Ae);return(0,L.jsxs)(Re,(0,Ze.Z)((0,Ze.Z)({},h),{},{children:[t,(0,L.jsx)(De.Z,{sx:{px:1},children:n}),(0,L.jsx)(ce.CC,{sx:{flexBasis:"10em",flexGrow:1},children:(0,L.jsx)(ce.ZP,{sx:{px:1},inputProps:{sx:{textAlign:"right"}},float:o,placeholder:i,value:r,onChange:l,disabled:d,endAdornment:o?"%":void 0})}),(0,L.jsx)(p.Z,{sx:{flexShrink:2},size:"small",color:"error",onClick:function(){return x?x():l(s)},disabled:d||r===s,children:(0,L.jsx)(Ke.Z,{})})]}))}function Me(){var e=(0,m.useContext)(k.R).data,n=(0,m.useState)(!1),t=(0,r.Z)(n,2),i=t[0],a=t[1],s=(0,m.useCallback)((function(){return a(!i)}),[a,i]),l=e.get(we.ri.enemy.level),c=e.get(we.ri.enemy.defRed),o=e.get(we.ri.enemy.defIgn);return(0,L.jsxs)(y.Z,{children:[(0,L.jsxs)(x.Z,{sx:{display:"flex"},children:[(0,L.jsxs)(pe.ZP,{container:!0,spacing:1,flexGrow:1,alignItems:"center",children:[(0,L.jsx)(pe.ZP,{item:!0,children:(0,L.jsx)(ye.Z,{size:"small",color:"success",label:(0,L.jsxs)("span",{children:[ne.ZP.get(l.info.key)," ",(0,L.jsx)("strong",{children:l.value})]})})}),I.Kj.map((function(e){return(0,L.jsx)(pe.ZP,{item:!0,children:(0,L.jsx)(V.Z,{children:(0,L.jsx)(ze,{element:e})},e)},e)})),(0,L.jsx)(pe.ZP,{item:!0,children:(0,L.jsxs)(V.Z,{children:["DEF Reduction ",(0,ne.EC)(c.value,c.unit)]})}),(0,L.jsx)(pe.ZP,{item:!0,children:(0,L.jsxs)(V.Z,{children:["DEF Ignore ",(0,ne.EC)(o.value,o.unit)]})})]}),(0,L.jsx)(Ee,{expand:i,onClick:s,"aria-expanded":i,"aria-label":"show more",size:"small",sx:{p:0},children:(0,L.jsx)(B.Z,{})})]}),(0,L.jsx)(be.Z,{in:i,timeout:"auto",unmountOnExit:!0,children:(0,L.jsx)(x.Z,{sx:{pt:0},children:(0,L.jsx)(_e,{})})})]})}function ze(e){var n=e.element,t=(0,m.useContext)(k.R).data.get(we.ri.enemy["".concat(n,"_res_")]),r=!isFinite(t.value)?(0,L.jsxs)("span",{children:[Oe.hJ[n]," IMMUNE"]}):(0,L.jsxs)("span",{children:[Oe.hJ[n],"RES ",(0,L.jsx)("strong",{children:(0,ne.EC)(t.value,t.unit)})]});return(0,L.jsx)(J.Z,{color:n,children:r})}function _e(e){var n,t,r,i=e.bsProps,a=void 0===i?{xs:12,md:6}:i,s=(0,m.useContext)(C.K),l=s.character.enemyOverride,c=s.characterDispatch,o=(0,m.useContext)(k.R).data,u=null!==(n=l.enemyLevel)&&void 0!==n?n:o.get(we.ri.lvl).value,d=null!==(t=l.enemyDefIgn_)&&void 0!==t?t:0,x=null!==(r=l.enemyDefRed_)&&void 0!==r?r:0;return(0,L.jsxs)(pe.ZP,{container:!0,spacing:1,children:[(0,L.jsx)(pe.ZP,(0,Ze.Z)((0,Ze.Z)({item:!0},a),{},{children:(0,L.jsx)(p.Z,{fullWidth:!0,sx:{height:"100%"},size:"small",component:"a",color:"warning",href:"https://genshin-impact.fandom.com/wiki/Resistance#Base_Enemy_Resistances",target:"_blank",rel:"noreferrer",children:"To get the specific resistance values of enemies, please visit the wiki."})})),(0,L.jsx)(pe.ZP,(0,Ze.Z)((0,Ze.Z)({item:!0},a),{},{children:(0,L.jsx)(Ie,{sx:{bgcolor:function(e){return e.palette.contentLight.main},width:"100%"},name:(0,L.jsx)("b",{children:ne.ZP.get("enemyLevel")}),value:u,placeholder:ne.ZP.getStr("enemyLevel"),defaultValue:o.get(we.ri.lvl).value,onValueChange:function(e){return c({type:"enemyOverride",statKey:"enemyLevel",value:e})},onReset:function(){return c({type:"enemyOverride",statKey:"enemyLevel",value:void 0})}})})),I.Kj.map((function(e){var n="".concat(e,"_enemyRes_"),t=l[n],r=t===Number.MAX_VALUE;return(0,L.jsx)(pe.ZP,(0,Ze.Z)((0,Ze.Z)({item:!0},a),{},{children:(0,L.jsx)(Ie,{sx:{bgcolor:function(e){return e.palette.contentLight.main},width:"100%"},name:(0,L.jsx)(J.Z,{color:e,children:(0,L.jsx)("b",{children:ne.ZP.get(n)})}),value:t?r?1/0:t:10,placeholder:r?"Immune ":ne.ZP.getStr(n),defaultValue:10,onValueChange:function(e){return c({type:"enemyOverride",statKey:n,value:e})},disabled:r,percent:!0,children:(0,L.jsx)(p.Z,{color:e,onClick:function(){return c({type:"enemyOverride",statKey:n,value:r?10:Number.MAX_VALUE})},startIcon:r?(0,L.jsx)(ve.Z,{}):(0,L.jsx)(ge.Z,{}),children:"Immunity"})})}),e)})),(0,L.jsx)(pe.ZP,(0,Ze.Z)((0,Ze.Z)({item:!0},a),{},{children:(0,L.jsx)(Ie,{sx:{bgcolor:function(e){return e.palette.contentLight.main},width:"100%"},name:(0,L.jsx)("b",{children:ne.ZP.get("enemyDefIgn_")}),value:d,placeholder:ne.ZP.getStr("enemyDefIgn_"),defaultValue:0,onValueChange:function(e){return c({type:"enemyOverride",statKey:"enemyDefIgn_",value:e})},percent:!0})})),(0,L.jsx)(pe.ZP,(0,Ze.Z)((0,Ze.Z)({item:!0},a),{},{children:(0,L.jsx)(Ie,{sx:{bgcolor:function(e){return e.palette.contentLight.main},width:"100%"},name:(0,L.jsx)("b",{children:ne.ZP.get("enemyDefRed_")}),value:x,placeholder:ne.ZP.getStr("enemyDefRed_"),defaultValue:0,onValueChange:function(e){return c({type:"enemyOverride",statKey:"enemyDefRed_",value:e})},percent:!0})})),(0,L.jsx)(pe.ZP,{item:!0,xs:12,children:(0,L.jsx)("small",{children:"Note: Genshin Impact halves resistance shred values below 0%. For the sake of calculations enter the RAW value and GO will do the rest. (e.g. 10% - 20% = -10%)"})})]})}var Ne=t(88034),Le=t(43696),Te={xs:1,md:2,lg:3};function Be(e){var n=e.open,t=e.onClose;return(0,L.jsx)(X.Z,{open:n,onClose:t,children:(0,L.jsxs)(g.Z,{children:[(0,L.jsx)(q.Z,{title:"Detailed Stats",action:(0,L.jsx)(b.Z,{onClick:t})}),(0,L.jsx)(x.Z,{sx:{pt:0},children:(0,L.jsxs)(fe.Z,{spacing:1,children:[(0,L.jsx)(Fe,{}),(0,L.jsx)(Me,{}),(0,L.jsx)(Ye,{})]})})]})})}var qe=(0,he.Z)(we.lR),Ge=function(e){return(0,L.jsx)(pe.ZP,{item:!0,xs:1,children:e})};function Fe(){var e=(0,m.useContext)(C.K),n=e.character.bonusStats,t=e.characterDispatch,r=(0,m.useCallback)((function(e){return t({bonusStats:e})}),[t]);return(0,L.jsx)(y.Z,{children:(0,L.jsx)(x.Z,{sx:{display:"flex"},children:(0,L.jsx)(pe.ZP,{container:!0,columns:Te,sx:{pt:1},spacing:1,children:(0,L.jsx)(Le.Z,{statKeys:qe,statFilters:n,setStatFilters:r,wrapperFunc:Ge})})})})}var We=["eleMas","critRate_","critDMG_","enerRech_","heal_"],Ve=[].concat(["hp","atk","def"],We).map((function(e){return we.ri.total[e]})),He=["atk_","atk","hp_","hp","def_","def"].concat(We),Ue=[].concat((0,he.Z)(ne.hX),(0,he.Z)(ne.Sx),["stamina","incHeal_","shield_","cdRed_"]),$e=we.lR.filter((function(e){return!He.includes(e)&&!Ue.includes(e)}));function Je(e){var n=e.nodes,t=e.extra,r=(0,m.useContext)(k.R),i=r.data,a=r.oldData;return(0,L.jsxs)(Ne.lD,{children:[n.map((function(e){var n,t;return(0,L.jsx)(Ne.JW,{component:me.ZP,node:i.get(e),oldValue:null===a||void 0===a||null===(t=a.get(e))||void 0===t?void 0:t.value},null===(n=e.info)||void 0===n?void 0:n.key)})),t]})}function Ye(){var e=(0,m.useContext)(C.K),n=e.character.elementKey,t=e.characterSheet,r=(0,m.useContext)(k.R).data,i=r.get(we.ri.special),a=null!==n&&void 0!==n?n:t.elementKey,s=t.isMelee(),l=(0,m.useMemo)((function(){var e=Ue.map((function(e){return we.ri.total[e]})),n=(0,he.Z)(I.N).filter((function(e){return e!==a}));return s&&n.concat(["physical"]),e.filter((function(e){return!(!r.get(e).value&&n.some((function(n){var t,r,i;return null===(t=e.info)||void 0===t||null===(r=t.key)||void 0===r||null===(i=r.includes)||void 0===i?void 0:i.call(r,n)})))}))}),[r,a,s]),c=(0,m.useMemo)((function(){return $e.map((function(e){return we.ri.total[e]})).filter((function(e){return r.get(e).value}))}),[r]);return(0,L.jsx)(y.Z,{children:(0,L.jsx)(x.Z,{children:(0,L.jsxs)(pe.ZP,{container:!0,columns:Te,spacing:1,children:[(0,L.jsx)(pe.ZP,{item:!0,xs:1,children:(0,L.jsx)(Xe,{title:"Main Stats",children:(0,L.jsx)(Je,{nodes:Ve,extra:i&&(0,L.jsxs)(me.ZP,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,L.jsxs)("span",{children:[(0,L.jsx)("b",{children:"Special:"})," ",(0,L.jsxs)(J.Z,{color:i.info.variant,children:[i.info.key&&Oe.ZP[i.info.key]," ",i.info.key&&ne.ZP.get(i.info.key)]})]}),(0,L.jsx)("span",{children:(0,ne.EC)(i.value,i.unit)})]})})})}),(0,L.jsx)(pe.ZP,{item:!0,xs:1,children:(0,L.jsx)(Xe,{title:"Other Stats",children:(0,L.jsx)(Je,{nodes:l})})}),!!c.length&&(0,L.jsx)(pe.ZP,{item:!0,xs:1,children:(0,L.jsx)(Xe,{title:"Misc Stats",children:(0,L.jsx)(Je,{nodes:c})})})]})})})}function Xe(e){var n=e.title,t=e.children;return(0,L.jsxs)(g.Z,{children:[(0,L.jsx)(x.Z,{sx:{py:1},children:(0,L.jsx)(je.Z,{display:"flex",justifyContent:"space-between",children:(0,L.jsx)(V.Z,{variant:"subtitle1",children:n})})}),t]})}var Qe=t(30168),en=t(74165),nn=t(15861),tn=t(96739),rn=t(94070),an=t(23060),sn=t(90388);function ln(){return new Worker(t.p+"static/js/BackgroundWorker.a47ef3c4.worker.js")}var cn=t(21977),on=t(96106),un=t(30865),dn=t(91839),xn=(0,m.createContext)(void 0),hn=t(7618),fn=t(73036),pn=t(69292),mn=t(17278),jn=t(68544),Zn=t(12759),vn=t(9138),gn=t(37762),yn=t(64737),bn=t(78661),wn=(0,en.Z)().mark(zn),Cn=(0,en.Z)().mark(Nn);function kn(e,n,t,r,i,a){for(var s=a,l={pruneNodeRange:!0},c={pruneNodeRange:!0},o={reaffine:!0},u={pruneOrder:!0,pruneArtRange:!0,pruneNodeRange:!0},d=0;Object.values(s).some((function(e){return e}))&&d++<20;){if(s.pruneOrder){delete s.pruneOrder;var x=Pn(t,r,i);t!==x&&(t=x,s=(0,Ze.Z)((0,Ze.Z)({},s),l))}if(s.pruneArtRange){delete s.pruneArtRange;var h=En(e,t,n);t!==h&&(t=h,s=(0,Ze.Z)((0,Ze.Z)({},s),c))}if(s.pruneNodeRange){delete s.pruneNodeRange;var f=On(e,t);e!==f&&(e=f,s=(0,Ze.Z)((0,Ze.Z)({},s),o))}if(s.reaffine){delete s.reaffine;var p=Sn(e,t),m=p.nodes,j=p.arts;e===m&&t===j||(e=m,t=j,s=(0,Ze.Z)((0,Ze.Z)({},s),u))}}return{nodes:e,arts:t}}function Sn(e,n){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=new Set,a=new Set;function s(e,n){n?i.add(e):e.operands.forEach((function(e){var n=e;i.has(n)&&a.add(n)}))}var l=new Set;if((0,yn.aD)(e,(function(e){}),(function(e){var n=e.operation;switch(n){case"read":if("number"!==e.type||"dyn"!==e.path[0]||"add"!==e.accu)throw new Error("Found unsupported ".concat(n," node at path ").concat(e.path," when computing affine nodes"));l.add(e.path[1]),s(e,!0);break;case"add":s(e,e.operands.every((function(e){return i.has(e)})));break;case"mul":var t=e.operands.filter((function(e){return"const"!==e.operation}));s(e,0===t.length||1===t.length&&i.has(t[0]));break;case"const":if("string"===typeof e.value||void 0===e.value)throw new Error("Found constant ".concat(e.value," while compacting"));s(e,!0);break;case"res":case"threshold":case"sum_frac":case"max":case"min":s(e,!1);break;case"data":case"subscript":case"lookup":case"match":case"prio":case"small":throw new Error("Found unsupported ".concat(n," node when computing affine nodes"));default:(0,de.UT)(n)}})),(0,he.Z)(a).every((function(e){var n=e.operation;return"read"===n||"const"===n}))&&Object.keys(n.base).length===l.size)return{nodes:e,arts:n};var c=-1;function o(){for(;l.has("".concat(++c)););return"".concat(c)}e.forEach((function(e){return i.has(e)&&a.add(e)}));var u=(0,he.Z)(a).filter((function(e){return"const"!==e.operation})),d=new Map(u.map((function(e){return[e,t||"read"!==e.operation||"dyn"!==e.path[0]?(0,Ze.Z)((0,Ze.Z)({},(0,bn.UF)(["dyn","".concat(o())])),{},{accu:"add"}):e]})));function x(e){var n=(0,pn.CG)((0,he.Z)(d.keys()),{dyn:(0,de.xh)(e,(function(e){return(0,bn.a9)(e)}))},(function(e){return!0}));return Object.fromEntries((0,he.Z)(d.values()).map((function(e,t){return[e.path[1],n[t].value]})))}for(var h={nodes:e=(0,yn.uW)(e,(function(e){var n;return null!==(n=d.get(e))&&void 0!==n?n:e}),(function(e){return e})),arts:{base:x(n.base),values:(0,de.O)(I.eV,(function(e){return n.values[e].map((function(e){return{id:e.id,set:e.set,values:x(e.values)}}))}))}},f=Object.entries(x({})),p=0,m=Object.values(h.arts.values);p<m.length;p++){var j,Z=m[p],v=(0,gn.Z)(Z);try{for(v.s();!(j=v.n()).done;){var g,y=j.value.values,b=(0,gn.Z)(f);try{for(b.s();!(g=b.n()).done;){var w=(0,r.Z)(g.value,2),C=w[0],k=w[1];y[C]-=k}}catch(S){b.e(S)}finally{b.f()}}}catch(S){v.e(S)}finally{v.f()}}return h}function Pn(e,n,t){var i,a=!1,s=!(null!==(i=t.rainbow)&&void 0!==i&&i.length),l=new Set(Object.entries(t).filter((function(e){var n=(0,r.Z)(e,2);n[0];return n[1].length})).map((function(e){return(0,r.Z)(e,1)[0]}))),c=new Set(Object.entries(t).filter((function(e){var n=(0,r.Z)(e,2),t=(n[0],n[1]);return t.includes(2)&&!t.includes(4)})).map((function(e){return(0,r.Z)(e,1)[0]}))),o=(0,de.O)(I.eV,(function(t){var i=e.values[t],o=i.filter((function(e){var t=0;return i.every((function(i){var a=Object.entries(i.values).every((function(n){var t=(0,r.Z)(n,2),i=t[0];return t[1]>=e.values[i]})),o=Object.entries(i.values).some((function(n){var t=(0,r.Z)(n,2),i=t[0];return t[1]>e.values[i]}));return a&&(o||i.id>e.id)&&(s&&!l.has(i.set)&&!c.has(e.set)||e.set===i.set)&&t++,t<n}))}));return o.length!==i.length&&(a=!0),o}));return a?{base:e.base,values:o}:e}function En(e,n,t){for(var i=Object.fromEntries(Object.entries(n.base).map((function(e){var n=(0,r.Z)(e,2),t=n[0],i=n[1];return[t,{min:i,max:i}]}))),a={arts:n},s=function(){var n=(0,de.O)(I.eV,(function(e){return Dn(a.arts.values[e])})),r=(0,de.O)(I.eV,(function(e){return Kn(Object.entries(n).map((function(n){return n[0]===e?i:n[1]})).filter((function(e){return e})))})),s=!1,l=(0,de.O)(I.eV,(function(n){var i=a.arts.values[n].filter((function(i){var a=Kn([Dn([i]),r[n]]),s=An(e,a);return e.every((function(e,n){var r;return s.get(e).max>=(null!==(r=t[n])&&void 0!==r?r:-1/0)}))}));return i.length!==a.arts.values[n].length&&(s=!0),i}));if(!s)return"break";a.arts={base:a.arts.base,values:l}};;){if("break"===s())break}return a.arts}function On(e,n){var t=An(e,Kn([Object.fromEntries(Object.entries(n.base).map((function(e){var n=(0,r.Z)(e,2),t=n[0],i=n[1];return[t,{min:i,max:i}]})))].concat((0,he.Z)(Object.values(n.values).map((function(e){return Dn(e)}))))));return(0,yn.uW)(e,(function(e){var n=e.operation,i=e.operands.map((function(e){return t.get(e)}));switch(n){case"threshold":var a=(0,r.Z)(i,4),s=a[0],l=a[1],c=a[2],o=a[3];if(s.min>=l.max)return e.operands[2];if(s.max<l.min)return(0,bn.a9)(0);if(c.max===c.min&&o.max===o.min&&c.min===o.min&&isFinite(c.min))return(0,bn.a9)(c.max);break;case"min":var u=e.operands.filter((function(e,n){var t=i[n];return i.every((function(e,n){return t.min<=e.max}))}));if(u.length<i.length)return bn.VV.apply(void 0,(0,he.Z)(u));break;case"max":var d=e.operands.filter((function(e,n){var t=i[n];return i.every((function(e){return t.max>=e.min}))}));if(d.length<i.length)return bn.Fp.apply(void 0,(0,he.Z)(d))}return e}),(function(e){return e}))}function Kn(e){var n={};return e.forEach((function(e){Object.entries(e).forEach((function(e){var t=(0,r.Z)(e,2),i=t[0],a=t[1];n[i]?(n[i].min+=a.min,n[i].max+=a.max):n[i]=(0,Ze.Z)({},a)}))})),n}function Dn(e){var n={};return e.length&&(Object.keys(e[0].values).filter((function(n){return e.every((function(e){return e.values[n]}))})).forEach((function(t){return n[t]={min:e[0].values[t],max:e[0].values[t]}})),e.forEach((function(e){for(var t=e.values,i=0,a=Object.entries(t);i<a.length;i++){var s=(0,r.Z)(a[i],2),l=s[0],c=s[1];n[l]?(n[l].max<c&&(n[l].max=c),n[l].min>c&&(n[l].min=c)):n[l]={min:0,max:c}}}))),n}function An(e,n){var t=new Map;return(0,yn.aD)(e,(function(e){}),(function(e){var i,a,s=e,l=s.operation,c=s.operands.map((function(e){return t.get(e)}));switch(l){case"read":if("dyn"!==s.path[0])throw new Error("Found non-dyn path ".concat(s.path," while computing range"));a=null!==(i=n[s.path[1]])&&void 0!==i?i:{min:0,max:0};break;case"const":a=Rn([s.value]);break;case"subscript":a=Rn(s.list);break;case"add":case"min":case"max":a={min:pn.aj[l](c.map((function(e){return e.min}))),max:pn.aj[l](c.map((function(e){return e.max})))};break;case"res":a={min:pn.aj[l]([c[0].max]),max:pn.aj[l]([c[0].min])};break;case"mul":a=c.reduce((function(e,n){return Rn([e.min*n.min,e.min*n.max,e.max*n.min,e.max*n.max])}));break;case"threshold":a=c[0].min>=c[1].max?c[2]:c[0].max<c[1].min?Rn([0]):Rn([0],[c[2]]);break;case"sum_frac":var o=(0,r.Z)(c,2),u=o[0],d=o[1],x={min:u.min+d.min,max:u.max+d.max};a=x.min<=0&&x.max>=0?u.min<=0&&u.max>=0?{min:NaN,max:NaN}:{min:-1/0,max:1/0}:Rn([u.min/x.min,u.min/x.max,u.max/x.min,u.max/x.max]);break;case"data":case"lookup":case"match":throw new Error("Unsupported ".concat(l," node"));default:(0,de.UT)(l)}t.set(s,a)})),t}function Rn(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=Math.max.apply(Math,(0,he.Z)(e).concat((0,he.Z)(n.map((function(e){return e.max}))))),r=Math.min.apply(Math,(0,he.Z)(e).concat((0,he.Z)(n.map((function(e){return e.min})))));return{min:r,max:t}}function In(e,n){return e.flatMap((function(e){return e})).sort((function(e,n){return n.value-e.value})).slice(0,n)}function Mn(e){for(var n=.01,t=new Set(e.flatMap((function(e){return Object.values(e).map((function(e){return Math.round(e.plot/n)}))})));t.size>1500;)n*=2,t=new Set((0,he.Z)(t).map((function(e){return Math.round(e/2)})));var r,i={},a=(0,gn.Z)(e);try{for(a.s();!(r=a.n()).done;)for(var s=r.value,l=0,c=Object.values(s);l<c.length;l++){var o=c[l],u=Math.round(o.plot/n)*n;(!i[u]||i[u].value<o.value)&&(i[u]=o)}}catch(d){a.e(d)}finally{a.f()}return i}function zn(e,n){var t,i,a,s,l,c,o;return(0,en.Z)().wrap((function(u){for(;;)switch(u.prev=u.next){case 0:t=(0,de.xh)(n.values,(function(e){return new Set(e.map((function(e){return e.set})))})),i=(0,gn.Z)(e),u.prev=2,i.s();case 4:if((a=i.n()).done){u.next=19;break}s=a.value,l=function(){var e=(0,r.Z)(o[c],2),n=e[0],i=e[1],a=t[n];switch(i.kind){case"required":if((0,he.Z)(i.sets).every((function(e){return!a.has(e)})))return"continue|filter_loop";break;case"exclude":if((0,he.Z)(a).every((function(e){return i.sets.has(e)})))return"continue|filter_loop"}},c=0,o=Object.entries(s);case 8:if(!(c<o.length)){u.next=15;break}if("continue|filter_loop"!==l()){u.next=12;break}return u.abrupt("continue",17);case 12:c++,u.next=8;break;case 15:return u.next=17,s;case 17:u.next=4;break;case 19:u.next=24;break;case 21:u.prev=21,u.t0=u.catch(2),i.e(u.t0);case 24:return u.prev=24,i.f(),u.finish(24);case 27:case"end":return u.stop()}}),wn,null,[[2,21,24,27]])}function _n(e){return new Set(null!==e&&void 0!==e&&e.includes(2)?e.includes(4)?[0,1]:[0,1,4,5]:null!==e&&void 0!==e&&e.includes(4)?[0,1,2,3]:[0,1,2,3,4,5])}function Nn(e,n){var t,i,a,s,l,c,o,u,d,x,h,f,p,m,j,Z;return(0,en.Z)().wrap((function(v){for(;;)switch(v.prev=v.next){case 0:for(p=function(e){var n,r,a,s,l,c,o,u,d,p,m;return(0,en.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:m=function(e){var n,t,a,s,c,o,u,d,p,j,Z,v,g,y;return(0,en.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=l.length-e,t=[],a=[],s=[],c=0,o=(0,gn.Z)(i),r.prev=3,d=function(){var e=u.value,r=f[e],i=h[e];if(!r)return"continue";(0,de.w6)(1,n).every((function(e){return!r.has(i+e)}))?s.push(e):r.has(i)?(0,de.w6)(0,n).some((function(e){return!r.has(i+e)}))&&t.push(e):(c+=(0,he.Z)(r).find((function(e){return e>i}))-i,a.push(e))},o.s();case 6:if((u=o.n()).done){r.next=12;break}if("continue"!==d()){r.next=10;break}return r.abrupt("continue",10);case 10:r.next=6;break;case 12:r.next=17;break;case 14:r.prev=14,r.t0=r.catch(3),o.e(r.t0);case 17:return r.prev=17,o.f(),r.finish(17);case 20:if(!(c>n)){r.next=22;break}return r.abrupt("return");case 22:if(e!==l.length){r.next=26;break}return r.next=25,(0,Ze.Z)({},x);case 25:return r.abrupt("return");case 26:if(c!==n){r.next=47;break}p=(0,gn.Z)(a),r.prev=28,p.s();case 30:if((j=p.n()).done){r.next=38;break}return Z=j.value,h[Z]++,x[I.eV[l[e]]]={kind:"required",sets:new Set([Z])},r.delegateYield(m(e+1),"t1",35);case 35:h[Z]--;case 36:r.next=30;break;case 38:r.next=43;break;case 40:r.prev=40,r.t2=r.catch(28),p.e(r.t2);case 43:return r.prev=43,p.f(),r.finish(43);case 46:return r.abrupt("return");case 47:v=0,g=[].concat(t,a);case 48:if(!(v<g.length)){r.next=57;break}return y=g[v],h[y]++,x[I.eV[l[e]]]={kind:"required",sets:new Set([y])},r.delegateYield(m(e+1),"t3",53);case 53:h[y]--;case 54:v++,r.next=48;break;case 57:return x[I.eV[l[e]]]={kind:"exclude",sets:new Set([].concat(a,s,t))},r.delegateYield(m(e+1),"t4",59);case 59:case"end":return r.stop()}}),r,null,[[3,14,17,20],[28,40,43,46]])},p=function(e){var t,r,l;return(0,en.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e!==s.length){n.next=3;break}return n.delegateYield(m(0),"t0",2);case 2:return n.abrupt("return",n.t0);case 3:t=(0,gn.Z)(i),n.prev=4,l=(0,en.Z)().mark((function n(){var t,i,l,c,o;return(0,en.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=r.value,!a.has(t)){n.next=3;break}return n.abrupt("return","continue");case 3:if(i=s[e].length,l=f[t],c=0,!l||l.has(i)){n.next=9;break}if(!((c=(null!==(o=(0,de.w6)(i+1,5).find((function(e){return l.has(e)})))&&void 0!==o?o:6)-i)>d)){n.next=9;break}return n.abrupt("return","continue");case 9:return a.add(t),h[t]=s[e].length,s[e].forEach((function(e){return x[I.eV[e]]={kind:"required",sets:new Set([t])}})),d-=c,n.delegateYield(p(e+1),"t0",14);case 14:d+=c,h[t]=0,a.delete(t);case 17:case"end":return n.stop()}}),n)})),t.s();case 7:if((r=t.n()).done){n.next=14;break}return n.delegateYield(l(),"t1",9);case 9:if("continue"!==n.t1){n.next=12;break}return n.abrupt("continue",12);case 12:n.next=7;break;case 14:n.next=19;break;case 16:n.prev=16,n.t2=n.catch(4),t.e(n.t2);case 19:return n.prev=19,t.f(),n.finish(19);case 22:case"end":return n.stop()}}),n,null,[[4,16,19,22]])},n=(0,en.Z)().mark(p),r=(0,en.Z)().mark(m),a=new Set,s=[],l=[],c=(0,gn.Z)(e);try{for(c.s();!(o=c.n()).done;)u=o.value,s.push([]),5===u?l.push(s.length-1):s[u].push(s.length-1)}catch(j){c.e(j)}finally{c.f()}return s=s.filter((function(e){return e.length})).sort((function(e,n){return n.length-e.length})),d=l.length,t.delegateYield(p(0),"t0",10);case 10:case"end":return t.stop()}}),t)},c=function(e,n){if(!(0,de.w6)(n+1,4).some((function(n){return 5!==e[n]})))return(e=(0,he.Z)(e))[n]=5,e.reduce((function(e,n){return 6*e+n}),0)},l=function(e,n,t){if(5!==e.length){var r,i=(0,gn.Z)(n);try{var c=function(){var i=r.value;l([].concat((0,he.Z)(e),[i]),n,t.filter((function(e){return e!==i})))};for(i.s();!(r=i.n()).done;)c()}catch(o){i.e(o)}finally{i.f()}l([].concat((0,he.Z)(e),[e.length]),new Set([].concat((0,he.Z)(n),[e.length])),[].concat((0,he.Z)(t),[e.length]))}else a.has(t.length)&&s.push(e)},t=(0,en.Z)().mark(p),i=(0,he.Z)(new Set(n)),a=_n(e.rainbow),s=[],l([0],new Set([0]),[0]),o=function(e){var n,t=new Map,i=(0,gn.Z)(s);try{for(i.s();!(n=i.n()).done;){var a,l=n.value,o=c(l,e);void 0!==o&&t.set(o,(null!==(a=t.get(o))&&void 0!==a?a:new Set(l.slice(0,e)).size+1)-1)}}catch(h){i.e(h)}finally{i.f()}var u,d=(0,gn.Z)(t.entries());try{var x=function(){var n=(0,r.Z)(u.value,2),t=n[0];if(0===n[1]){var i=(0,he.Z)(s.find((function(n){return c(n,e)===t})));i[e]=5,s=s.filter((function(n){return c(n,e)!==t})),s.push(i)}};for(d.s();!(u=d.n()).done;)x()}catch(h){d.e(h)}finally{d.f()}},u=4;u>=0;u--)o(u);d={kind:"exclude",sets:new Set},x=(0,de.O)(I.eV,(function(e){return d})),h=(0,Ze.Z)((0,Ze.Z)({},(0,de.xh)(e,(function(e){return 0}))),(0,de.O)(i,(function(e){return 0}))),f=(0,de.xh)(e,_n),m=(0,gn.Z)(s),v.prev=14,m.s();case 16:if((j=m.n()).done){v.next=21;break}return Z=j.value,v.delegateYield(p(Z),"t0",19);case 19:v.next=16;break;case 21:v.next=26;break;case 23:v.prev=23,v.t1=v.catch(14),m.e(v.t1);case 26:return v.prev=26,m.f(),v.finish(26);case 29:case"end":return v.stop()}}),Cn,null,[[14,23,26,29]])}var Ln=t(53174),Tn=t(54483),Bn=t(16614),qn=t(76899),Gn=t(31148),Fn=t(37503);function Wn(e){var n,t=e.setKey,r=e.setNumKey,i=e.hideHeader,a=void 0!==i&&i,s=e.conditionalsOnly,l=void 0!==s&&s,c=(0,D.Z)((function(){return Gn.y.get(t)}),[t]);if(!c)return null;var o=l?null===(n=c.setEffectDocument(r))||void 0===n?void 0:n.filter((function(e){return"states"in e})):c.setEffectDocument(r);return(0,L.jsx)(u.Z,{display:"flex",flexDirection:"column",children:o?(0,L.jsx)(Fn.Z,{sections:o,hideHeader:a}):null})}var Vn,Hn,Un,$n,Jn,Yn,Xn,Qn,et,nt,tt,rt,it,at,st,lt,ct=t(95614),ot=t(55221),ut=t(10157),dt=t(66624),xt=t(18327);function ht(e){var n=(0,m.useContext)(hn.t).database,t=(0,m.useState)((function(){return n.buildSettings.get(e)})),i=(0,r.Z)(t,2),a=i[0],s=i[1];return(0,m.useEffect)((function(){return s(n.buildSettings.get(e))}),[n,e]),(0,m.useEffect)((function(){return n.buildSettings.follow(e,s)}),[e,s,n]),{buildSetting:a,buildSettingDispatch:(0,m.useCallback)((function(t){return e&&n.buildSettings.set(e,t)}),[e,n])}}function ft(e){var n,t,i=e.disabled,a=(0,j.$)(["page_character","sheet"]).t,s=(0,m.useContext)(k.R),l=(0,m.useContext)(hn.t).database,c=(0,m.useContext)(C.K),o=c.character,d=o.key,h=o.conditional,f=c.characterDispatch,Z=ht(d),v=Z.buildSetting.artSetExclusion,w=Z.buildSettingDispatch,S=(0,m.useState)(!1),P=(0,r.Z)(S,2),E=P[0],O=P[1],K=(0,m.useCallback)((function(){return O(!0)}),[O]),A=(0,m.useCallback)((function(){return O(!1)}),[O]),R=(0,D.Z)((function(){return Gn.y.getAll}),[]),M=(0,m.useMemo)((function(){return R?Object.entries(Gn.y.setKeysByRarities(R)).reverse().flatMap((function(e){return(0,r.Z)(e,2)[1]})).filter((function(e){return!e.includes("Prayers")})):[]}),[R]),z=(0,jn.Z)(),_=(0,r.Z)(z,2),N=_[0],T=_[1];(0,m.useEffect)((function(){return l.arts.followAny(T)}),[l,T]);var B=(0,m.useMemo)((function(){var e=Object.fromEntries(M.map((function(e){return[e,Object.fromEntries(I.eV.map((function(e){return[e,0]})))]})));return l.arts.values.map((function(n){return e[n.setKey]&&e[n.setKey][n.slotKey]++})),N&&e}),[N,l,M]),q=!(null!==(n=v.rainbow)&&void 0!==n&&n.includes(2)),F=!(null!==(t=v.rainbow)&&void 0!==t&&t.includes(4)),W=(0,m.useMemo)((function(){return{allow2:M.filter((function(e){var n;return!(null!==(n=v[e])&&void 0!==n&&n.includes(2))})).length,allow4:M.filter((function(e){var n;return!(null!==(n=v[e])&&void 0!==n&&n.includes(4))})).length,exclude2:M.filter((function(e){var n;return null===(n=v[e])||void 0===n?void 0:n.includes(2)})).length,exclude4:M.filter((function(e){var n;return null===(n=v[e])||void 0===n?void 0:n.includes(4)})).length}}),[M,v]),H=W.allow2,U=W.allow4,$=W.exclude2,Y=W.exclude4,ee=(0,m.useMemo)((function(){return Object.keys(h).filter((function(e){return I.q2.includes(e)&&0!==Object.keys(h[e]).length})).length}),[h]),ne=(0,m.useMemo)((function(){return e=s,(0,Ze.Z)((0,Ze.Z)({},e),{},{data:new xt.w((0,Ze.Z)((0,Ze.Z)({},e.data.data[0]),{},{artSet:(0,de.O)(I.q2,(function(e){return(0,bn.a9)(4)}))}),void 0)});var e}),[s]),te=(0,m.useCallback)((function(){var e=Object.fromEntries(Object.entries(h).filter((function(e){var n=(0,r.Z)(e,2),t=n[0];n[1];return!I.q2.includes(t)})));f({conditional:e})}),[h,f]),re=(0,m.useCallback)((function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=(0,de.I8)(v);M.forEach((function(r){var i;n?t[r]=[].concat((0,he.Z)(null!==(i=t[r])&&void 0!==i?i:[]),[e]):t[r]&&(t[r]=t[r].filter((function(n){return n!==e})))})),w({artSetExclusion:t})}),[M,v,w]);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)(y.Z,{sx:{display:"flex"},children:[(0,L.jsxs)(x.Z,{sx:{flexGrow:1},children:[(0,L.jsx)(V.Z,{children:(0,L.jsx)("strong",{children:a(Vn||(Vn=(0,Qe.Z)(["tabOptimize.artSetConfig.title"])))})}),(0,L.jsxs)(fe.Z,{spacing:1,children:[(0,L.jsxs)(V.Z,{children:[a(Hn||(Hn=(0,Qe.Z)(["tabOptimize.artSetConfig.setEffCond"])))," ",(0,L.jsxs)(Q.Z,{color:ee?"success":"secondary",children:[ee," ",a("tabOptimize.artSetConfig.enabled")]})]}),(0,L.jsxs)(V.Z,{children:[a(Un||(Un=(0,Qe.Z)(["sheet:2set"])))," ",(0,L.jsxs)(Q.Z,{color:"success",children:[H," ",(0,L.jsx)(Tn.G,{icon:Ln.Stf,className:"fa-fw"})," ",a("tabOptimize.artSetConfig.allowed")]}),!!$&&" / ",!!$&&(0,L.jsxs)(Q.Z,{color:"secondary",children:[$," ",(0,L.jsx)(Tn.G,{icon:Ln.gPx,className:"fa-fw"})," ",a("tabOptimize.artSetConfig.excluded")]})]}),(0,L.jsxs)(V.Z,{children:[a($n||($n=(0,Qe.Z)(["sheet:4set"])))," ",(0,L.jsxs)(Q.Z,{color:"success",children:[U," ",(0,L.jsx)(Tn.G,{icon:Ln.Stf,className:"fa-fw"})," ",a("tabOptimize.artSetConfig.allowed")]}),!!Y&&" / ",!!Y&&(0,L.jsxs)(Q.Z,{color:"secondary",children:[Y," ",(0,L.jsx)(Tn.G,{icon:Ln.gPx,className:"fa-fw"})," ",a("tabOptimize.artSetConfig.excluded")]})]}),(0,L.jsxs)(V.Z,{children:[a(Jn||(Jn=(0,Qe.Z)(["tabOptimize.artSetConfig.2rainbow"])))," ",(0,L.jsxs)(Q.Z,{color:q?"success":"secondary",children:[(0,L.jsx)(Tn.G,{icon:q?Ln.Stf:Ln.gPx,className:"fa-fw"})," ",q?a("tabOptimize.artSetConfig.allowed"):"Excluded"]})]}),(0,L.jsxs)(V.Z,{children:[a(Yn||(Yn=(0,Qe.Z)(["tabOptimize.artSetConfig.4rainbow"])))," ",(0,L.jsxs)(Q.Z,{color:F?"success":"secondary",children:[(0,L.jsx)(Tn.G,{icon:F?Ln.Stf:Ln.gPx,className:"fa-fw"})," ",F?a("tabOptimize.artSetConfig.allowed"):"Excluded"]})]})]})]}),(0,L.jsx)(p.Z,{onClick:K,disabled:i,color:"info",sx:{borderRadius:0},children:(0,L.jsx)(Bn.Z,{})})]}),R&&(0,L.jsx)(X.Z,{open:E,onClose:A,children:(0,L.jsxs)(g.Z,{children:[(0,L.jsxs)(x.Z,{sx:{display:"flex",gap:1,justifyContent:"space-between"},children:[(0,L.jsx)(V.Z,{variant:"h6",children:a(Xn||(Xn=(0,Qe.Z)(["tabOptimize.artSetConfig.title"])))}),(0,L.jsx)(b.Z,{onClick:A})]}),(0,L.jsx)(G.Z,{}),(0,L.jsxs)(x.Z,{children:[(0,L.jsx)(y.Z,{sx:{mb:1},children:(0,L.jsxs)(x.Z,{children:[(0,L.jsxs)(u.Z,{display:"flex",gap:1,children:[(0,L.jsx)(V.Z,{children:(0,L.jsx)("strong",{children:a(Qn||(Qn=(0,Qe.Z)(["tabOptimize.artSetConfig.modal.setCond.title"])))})}),(0,L.jsx)(V.Z,{sx:{flexGrow:1},children:(0,L.jsxs)(Q.Z,{color:ee?"success":"secondary",children:[ee," ",a("tabOptimize.artSetConfig.selected")]})}),(0,L.jsx)(p.Z,{size:"small",onClick:te,color:"error",startIcon:(0,L.jsx)(Ke.Z,{}),children:a(et||(et=(0,Qe.Z)(["tabOptimize.artSetConfig.modal.setCond.reset"])))})]}),(0,L.jsx)(V.Z,{children:a(nt||(nt=(0,Qe.Z)(["tabOptimize.artSetConfig.modal.setCond.text"])))})]})}),(0,L.jsx)(y.Z,{sx:{mb:1},children:(0,L.jsxs)(x.Z,{children:[(0,L.jsx)(V.Z,{sx:{flexGrow:1},children:(0,L.jsx)("strong",{children:(0,L.jsxs)(qn.c,{t:a,i18nKey:"tabOptimize.artSetConfig.modal.ArtSetFilter.title",children:["Artifact Sets ",(0,L.jsxs)(J.Z,{color:"success",children:["Allowed",(0,L.jsx)(Tn.G,{icon:Ln.Stf,className:"fa-fw"})]})," / ",(0,L.jsxs)(J.Z,{color:"secondary",variant:"light",children:["Excluded",(0,L.jsx)(Tn.G,{icon:Ln.gPx,className:"fa-fw"})]})]})})}),(0,L.jsx)(V.Z,{children:(0,L.jsxs)(qn.c,{t:a,i18nKey:"tabOptimize.artSetConfig.modal.ArtSetFilter.intro",children:["You can allow/exclude which sets you want the builder to consider. In the following examples, ",(0,L.jsx)("strong",{children:"A"})," is on-set, and ",(0,L.jsx)("strong",{children:"R"})," is rainbow(off-set)"]})}),(0,L.jsx)(V.Z,{children:(0,L.jsxs)(qn.c,{t:a,i18nKey:"tabOptimize.artSetConfig.modal.ArtSetFilter.2set",children:[(0,L.jsx)("strong",{children:(0,L.jsxs)(J.Z,{color:"secondary",variant:"light",children:["Excluding",(0,L.jsx)(Tn.G,{icon:Ln.gPx,className:"fa-fw"})," 2-Set"]})})," would exclude 2-Set builds: ",(0,L.jsxs)("strong",{children:[(0,L.jsx)(J.Z,{color:"secondary",variant:"light",children:"AA"}),"RRR"]})," and ",(0,L.jsxs)("strong",{children:[(0,L.jsx)(J.Z,{color:"secondary",variant:"light",children:"AAA"}),"RR"]}),"."]})}),(0,L.jsx)(V.Z,{children:(0,L.jsxs)(qn.c,{t:a,i18nKey:"tabOptimize.artSetConfig.modal.ArtSetFilter.4set",children:[(0,L.jsx)("strong",{children:(0,L.jsxs)(J.Z,{color:"secondary",variant:"light",children:["Excluding",(0,L.jsx)(Tn.G,{icon:Ln.gPx,className:"fa-fw"})," 4-Set"]})})," would exclude 4-Set builds: ",(0,L.jsxs)("strong",{children:[(0,L.jsx)(J.Z,{color:"secondary",variant:"light",children:"AAAA"}),"R"]})," and ",(0,L.jsx)("strong",{children:(0,L.jsx)(J.Z,{color:"secondary",variant:"light",children:"AAAAA"})}),"."]})}),(0,L.jsx)(V.Z,{children:(0,L.jsxs)(qn.c,{t:a,i18nKey:"tabOptimize.artSetConfig.modal.ArtSetFilter.2rain",children:[(0,L.jsx)("strong",{children:(0,L.jsxs)(J.Z,{color:"secondary",variant:"light",children:["Excluding",(0,L.jsx)(Tn.G,{icon:Ln.gPx,className:"fa-fw"})," 3-Rainbow"]})})," would exclude 2-Set + 3-Rainbow builds: ",(0,L.jsxs)("strong",{children:["AA",(0,L.jsx)(J.Z,{color:"secondary",variant:"light",children:"RRR"})]})," and ",(0,L.jsxs)("strong",{children:["AAA",(0,L.jsx)(J.Z,{color:"secondary",variant:"light",children:"RR"})]}),"."]})}),(0,L.jsx)(V.Z,{children:(0,L.jsxs)(qn.c,{t:a,i18nKey:"tabOptimize.artSetConfig.modal.ArtSetFilter.4rain",children:[(0,L.jsx)("strong",{children:(0,L.jsxs)(J.Z,{color:"secondary",variant:"light",children:["Excluding",(0,L.jsx)(Tn.G,{icon:Ln.gPx,className:"fa-fw"})," 5-Rainbow"]})})," would exclude full 5-Rainbow builds: ",(0,L.jsx)("strong",{children:(0,L.jsx)(J.Z,{color:"secondary",variant:"light",children:"RRRRR"})}),"."]})})]})}),(0,L.jsxs)(pe.ZP,{container:!0,columns:{xs:2,lg:3},sx:{mb:1},spacing:1,children:[(0,L.jsx)(pe.ZP,{item:!0,xs:1,children:(0,L.jsx)(pt,{setNum:2,numAllow:H,numExclude:$,setAllExclusion:re})}),(0,L.jsx)(pe.ZP,{item:!0,xs:1,children:(0,L.jsx)(pt,{setNum:4,numAllow:U,numExclude:Y,setAllExclusion:re})}),(0,L.jsx)(pe.ZP,{item:!0,xs:1,children:(0,L.jsx)(y.Z,{children:(0,L.jsxs)(x.Z,{children:[(0,L.jsx)(V.Z,{gutterBottom:!0,children:(0,L.jsx)("strong",{children:(0,L.jsxs)(qn.c,{t:a,i18nKey:"tabOptimize.artSetConfig.alExRainbow",children:[(0,L.jsxs)(J.Z,{color:"success",children:["Allow ",(0,L.jsx)(Tn.G,{icon:Ln.Stf,className:"fa-fw"})]})," / ",(0,L.jsxs)(J.Z,{color:"secondary",variant:"light",children:["Exclude ",(0,L.jsx)(Tn.G,{icon:Ln.gPx,className:"fa-fw"})]})," Rainbow Builds"]})})}),(0,L.jsxs)(u.Z,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,L.jsx)(p.Z,{fullWidth:!0,onClick:function(){return w({type:"artSetExclusion",setKey:"rainbow",num:2})},color:q?"success":"secondary",startIcon:q?(0,L.jsx)(ve.Z,{}):(0,L.jsx)(ge.Z,{}),endIcon:(0,L.jsx)(Tn.G,{icon:q?Ln.Stf:Ln.gPx,className:"fa-fw"}),children:a(tt||(tt=(0,Qe.Z)(["tabOptimize.artSetConfig.2rainbow"])))}),(0,L.jsx)(p.Z,{fullWidth:!0,onClick:function(){return w({type:"artSetExclusion",setKey:"rainbow",num:4})},color:F?"success":"secondary",startIcon:F?(0,L.jsx)(ve.Z,{}):(0,L.jsx)(ge.Z,{}),endIcon:(0,L.jsx)(Tn.G,{icon:F?Ln.Stf:Ln.gPx,className:"fa-fw"}),children:a(rt||(rt=(0,Qe.Z)(["tabOptimize.artSetConfig.4rainbow"])))})]})]})})})]}),(0,L.jsx)(pe.ZP,{container:!0,spacing:1,columns:{xs:2,lg:3},children:M.map((function(e){return(0,L.jsx)(mt,{setKey:e,sheet:R[e],fakeDataContextObj:ne,slotCount:B[e]},e)}))})]}),(0,L.jsx)(G.Z,{}),(0,L.jsx)(x.Z,{sx:{py:1},children:(0,L.jsx)(b.Z,{large:!0,onClick:A})})]})})]})}function pt(e){var n=e.numAllow,t=e.numExclude,r=e.setNum,i=e.setAllExclusion,a=(0,j.$)(["page_character","sheet"]).t;return(0,L.jsx)(y.Z,{children:(0,L.jsxs)(x.Z,{children:[(0,L.jsxs)(V.Z,{gutterBottom:!0,children:[(0,L.jsx)("strong",{children:a("sheet:".concat(r,"set"))})," ",(0,L.jsxs)(Q.Z,{color:"success",children:[n," ",(0,L.jsx)(Tn.G,{icon:Ln.Stf,className:"fa-fw"})," ",a("tabOptimize.artSetConfig.allowed")]}),!!t&&" / ",!!t&&(0,L.jsxs)(Q.Z,{color:"secondary",children:[t," ",(0,L.jsx)(Tn.G,{icon:Ln.gPx,className:"fa-fw"})," ",a("tabOptimize.artSetConfig.excluded")]})]}),(0,L.jsxs)(u.Z,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,L.jsx)(p.Z,{fullWidth:!0,disabled:!t,onClick:function(){return i(r,!1)},color:"success",startIcon:(0,L.jsx)(Tn.G,{icon:Ln.Stf,className:"fa-fw"}),children:a("tabOptimize.artSetConfig.allowAll".concat(r,"set"))}),(0,L.jsx)(p.Z,{fullWidth:!0,disabled:!n,onClick:function(){return i(r,!0)},color:"secondary",startIcon:(0,L.jsx)(Tn.G,{icon:Ln.gPx,className:"fa-fw"}),children:a("tabOptimize.artSetConfig.excludeAll".concat(r,"set"))})]})]})})}function mt(e){var n,t,i,a=e.sheet,s=e.setKey,l=e.fakeDataContextObj,c=e.slotCount,o=(0,j.$)("sheet").t,d=ht((0,m.useContext)(C.K).character.key),h=d.buildSetting,f=d.buildSettingDispatch,Z=null!==(n=null===h||void 0===h||null===(t=h.artSetExclusion)||void 0===t?void 0:t[s])&&void 0!==n?n:[],v=!Z.includes(4),g=(0,m.useMemo)((function(){return Object.values(c).reduce((function(e,n){return e+(n?1:0)}),0)}),[c]),b=(0,m.useMemo)((function(){return!v||g<4?[]:Object.keys(a.setEffects).filter((function(e){var n;return null===(n=a.setEffects[e])||void 0===n?void 0:n.document.some((function(e){return"states"in e}))}))}),[a.setEffects,v,g]),w=Z.includes(2),S=Z.includes(4);return g<2?null:(0,L.jsx)(pe.ZP,{item:!0,xs:1,children:(0,L.jsxs)(y.Z,{sx:{height:"100%"},children:[(0,L.jsxs)(u.Z,{className:"grad-".concat(a.rarity[0],"star"),width:"100%",sx:{display:"flex"},children:[(0,L.jsx)(u.Z,{component:"img",src:a.defIconSrc,sx:{height:100,width:"auto",mx:-1}}),(0,L.jsxs)(u.Z,{sx:{flexGrow:1,px:1,display:"flex",flexDirection:"column",justifyContent:"center"},children:[(0,L.jsx)(V.Z,{variant:"h6",children:null!==(i=a.name)&&void 0!==i?i:""}),(0,L.jsxs)(u.Z,{display:"flex",gap:1,children:[(0,L.jsx)(V.Z,{variant:"subtitle1",children:a.rarity.map((function(e,n){return(0,L.jsxs)("span",{children:[e," ",(0,L.jsx)(ut.q,{stars:1})," ",n<a.rarity.length-1?"/ ":null]},e)}))}),(0,L.jsx)(ot.Z,{title:(0,L.jsxs)(u.Z,{children:[(0,L.jsx)(V.Z,{children:(0,L.jsx)(Q.Z,{color:"success",children:o(it||(it=(0,Qe.Z)(["2set"])))})}),(0,L.jsx)(V.Z,{children:(0,L.jsx)(dt.v,{ns:"artifact_".concat(s,"_gen"),key18:"setEffects.2"})}),(0,L.jsxs)(u.Z,{paddingTop:2,sx:{opacity:Z.includes(4)?.6:1},children:[(0,L.jsx)(V.Z,{children:(0,L.jsx)(Q.Z,{color:"success",children:o(at||(at=(0,Qe.Z)(["4set"])))})}),(0,L.jsx)(V.Z,{children:(0,L.jsx)(dt.v,{ns:"artifact_".concat(s,"_gen"),key18:"setEffects.4"})})]})]})})]}),(0,L.jsx)(u.Z,{sx:{display:"flex",gap:1},children:Object.entries(c).map((function(e){var n=(0,r.Z)(e,2),t=n[0],i=n[1];return(0,L.jsx)(V.Z,{sx:{flexGrow:1},variant:"subtitle2",children:(0,L.jsxs)(Q.Z,{sx:{width:"100%"},color:i?"primary":"secondary",children:[(0,ct.Ir)(t),i]})},t)}))})]})]}),(0,L.jsxs)(se.Z,{sx:{".MuiButton-root":{borderRadius:0}},fullWidth:!0,children:[g>=2&&(0,L.jsx)(p.Z,{startIcon:w?(0,L.jsx)(ge.Z,{}):(0,L.jsx)(ve.Z,{}),onClick:function(){return f({type:"artSetExclusion",setKey:s,num:2})},color:w?"secondary":"success",endIcon:(0,L.jsx)(Tn.G,{icon:w?Ln.gPx:Ln.Stf,className:"fa-fw"}),children:o(st||(st=(0,Qe.Z)(["2set"])))}),g>=4&&(0,L.jsx)(p.Z,{startIcon:S?(0,L.jsx)(ge.Z,{}):(0,L.jsx)(ve.Z,{}),onClick:function(){return f({type:"artSetExclusion",setKey:s,num:4})},color:S?"secondary":"success",endIcon:(0,L.jsx)(Tn.G,{icon:S?Ln.gPx:Ln.Stf,className:"fa-fw"}),children:o(lt||(lt=(0,Qe.Z)(["4set"])))})]}),!!b.length&&(0,L.jsx)(k.R.Provider,{value:l,children:(0,L.jsx)(x.Z,{sx:{display:"flex",flexDirection:"column",gap:2},children:b.map((function(e){return(0,L.jsx)(Wn,{setKey:s,setNumKey:parseInt(e),hideHeader:!0,conditionalsOnly:!0},e)}))})})]})},s)}var jt=[0,4,8,12,16,20];function Zt(e){var n=e.mainStatAssumptionLevel,t=void 0===n?0:n,r=e.setmainStatAssumptionLevel,i=e.disabled,a=(0,j.$)("page_character").t;return(0,L.jsx)(oe.Z,{fullWidth:!0,color:t?"success":"primary",disabled:i,title:t?a("tabOptimize.assumptionLvl.lvl",{lvl:t}):a("tabOptimize.assumptionLvl.no"),children:jt.map((function(e){return(0,L.jsx)(le.Z,{onClick:function(){return r(e)},children:e?a("tabOptimize.assumptionLvl.lvl",{lvl:e}):a("tabOptimize.assumptionLvl.no")},e)}))})}function vt(){var e=(0,m.useContext)(C.K).character.bonusStats,n=(0,m.useContext)(k.R).data,t=Object.keys(e);if(!t.length)return null;var r=t.map((function(e){return n.get(we.ri.customBonus[e])}));return(0,L.jsxs)(y.Z,{children:[(0,L.jsx)(x.Z,{children:(0,L.jsx)(V.Z,{children:"Bonus Stats"})}),(0,L.jsx)(G.Z,{}),(0,L.jsx)(x.Z,{children:r.map((function(e){return(0,L.jsx)(Ne.JW,{node:e},e.info.key)}))})]})}var gt=t(57482),yt=t(52771),bt=(0,ke.ZP)("strong")({fontFamily:"monospace"}),wt=(0,ke.ZP)(gt.Z)((function(e){e.theme;return{height:10,borderRadius:5}}));function Ct(e){var n=e.status,t=n.type,r=n.tested,i=(n.failed,n.skipped),a=n.total,s=n.startTime,l=n.finishTime,c=e.characterName,o=isFinite(a),u="inactive"!==t,d=a-i,x=(0,L.jsx)(bt,{children:r.toLocaleString()}),h=(0,L.jsx)(bt,{children:d.toLocaleString()}),f=!!i&&(0,L.jsxs)("span",{children:["(",(0,L.jsx)("b",{children:(0,L.jsx)(bt,{children:i.toLocaleString()})})," skipped)"]}),p=(0,L.jsx)(bt,{children:(0,yt.e6)(Math.round((null!==l&&void 0!==l?l:performance.now())-(null!==s&&void 0!==s?s:NaN)))}),m="",j="",Z=void 0;if(u)Z=100*r/d,m=(0,L.jsxs)(V.Z,{children:["Generating and testing ",x,o?(0,L.jsxs)(L.Fragment,{children:["/",h]}):void 0," build configurations against the criteria for ",(0,L.jsx)("b",{children:c}),". ",f]}),j=(0,L.jsxs)(V.Z,{children:["Time elapsed: ",p]});else{if(!(r+i))return null;Z=100,m=(0,L.jsxs)(V.Z,{children:["Generated and tested ",x," Build configurations against the criteria for ",(0,L.jsx)("b",{children:c}),". ",f]}),j=(0,L.jsxs)(V.Z,{children:["Total duration: ",p]})}return(0,L.jsxs)(rn.Z,{severity:"success",variant:"filled",sx:{"& .MuiAlert-message":{flexGrow:1}},children:[m,j,void 0!==Z&&(0,L.jsxs)(pe.ZP,{container:!0,spacing:1,alignItems:"center",children:[o&&(0,L.jsx)(pe.ZP,{item:!0,children:(0,L.jsx)(V.Z,{children:"".concat(Z.toFixed(1),"%")})}),(0,L.jsx)(pe.ZP,{item:!0,flexGrow:1,children:(0,L.jsx)(wt,{variant:o?"determinate":"indeterminate",value:Z,color:"primary"})})]})]})}var kt=t(98268),St=t(63204),Pt=t(66647),Et=t(13967),Ot=t(12065),Kt=t(10658),Dt=t(98620),At=t(63372),Rt=t(20005),It=t(64929);function Mt(e){var n,t,r=e.artifactId,i=e.slotKey,a=e.mainStatAssumptionLevel,s=void 0===a?0:a,l=e.showLocation,c=void 0!==l&&l,o=e.onClick,d=e.BGComponent,x=void 0===d?g.Z:d,h=(0,At.Z)(r),f=(0,D.Z)((function(){return Gn.y.get(null===h||void 0===h?void 0:h.setKey)}),[null===h||void 0===h?void 0:h.setKey]),p=(0,m.useCallback)((function(e){return(0,L.jsx)(Pt.Z,{onClick:o,sx:{height:"100%"},children:e})}),[o]),j=(0,Et.Z)();if(!h)return(0,L.jsx)(x,{sx:{display:"flex",height:"100%",alignItems:"center",justifyContent:"center"},children:(0,L.jsx)(u.Z,{component:"img",src:Kt.Z.slot[i],sx:{width:"25%",height:"auto",opacity:.7}})});var Z=h.slotKey,v=h.rarity,y=h.level,b=h.mainStatKey,w=h.substats,C=h.location,k=Math.max(Math.min(s,4*v),y),S=ne.ZP.unit(b),P="roll"+(Math.floor(Math.max(y,0)/4)+1),E=I.Kj.find((function(e){return h.mainStatKey.includes(e)})),O=E?(0,Ot.Fq)(j.palette[E].main,.6):(0,Ot.Fq)(j.palette.secondary.main,.6);return(0,L.jsx)(x,{sx:{height:"100%"},children:(0,L.jsx)(Rt.Z,{condition:!!o,wrapper:p,children:(0,L.jsxs)(u.Z,{display:"flex",height:"100%",children:[(0,L.jsxs)(u.Z,{className:"grad-".concat(v,"star"),sx:{position:"relative",flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[(0,L.jsx)(It.Z,{art:h,children:(0,L.jsx)(u.Z,{component:"img",src:null!==(n=null===f||void 0===f?void 0:f.slotIcons[Z])&&void 0!==n?n:"",sx:{m:-1,maxHeight:"110%",maxWidth:"110%"}})}),(0,L.jsxs)(u.Z,{sx:{position:"absolute",width:"100%",height:"100%",p:.5,opacity:.85,display:"flex",justifyContent:"space-between",pointerEvents:"none"},children:[(0,L.jsx)(ye.Z,{size:"small",label:(0,L.jsx)("strong",{children:" +".concat(y)}),color:P}),c&&(0,L.jsx)(ye.Z,{size:"small",label:(0,L.jsx)(_t,{location:C}),color:"secondary",sx:{overflow:"visible",".MuiChip-label":{overflow:"visible"}}})]}),(0,L.jsx)(ye.Z,{size:"small",sx:{position:"absolute",bottom:0,mb:1,backgroundColor:O},label:(0,L.jsxs)(V.Z,{sx:{display:"flex",gap:.5,px:1,zIndex:1},children:[(0,L.jsx)(on.Z,{placement:"top",title:(0,L.jsx)(V.Z,{children:ne.ZP.getArtStr(b)}),disableInteractive:!0,children:(0,L.jsx)("span",{children:E?Oe.hJ[E]:Oe.ZP[b]})}),(0,L.jsxs)(J.Z,{color:k!==y?"warning":void 0,children:[(0,ne.qs)(null!==(t=Dt.Z.mainStatValue(b,v,k))&&void 0!==t?t:0,ne.ZP.unit(b)),S]})]})})]}),(0,L.jsx)(u.Z,{display:"flex",flexDirection:"column",justifyContent:"space-between",sx:{p:1},children:w.map((function(e,n){return(0,L.jsx)(zt,{stat:e},n+e.key)}))})]})})})}function zt(e){var n,t,r=e.stat;if(!r.value)return null;var i=null!==(n=null===(t=r.rolls)||void 0===t?void 0:t.length)&&void 0!==n?n:0,a="roll".concat((0,de.uZ)(i,1,6)),s=ne.ZP.unit(r.key);return(0,L.jsx)(u.Z,{display:"flex",gap:1,alignContent:"center",children:(0,L.jsxs)(V.Z,{sx:{flexGrow:1,display:"flex",gap:.5},color:i?"".concat(a,".main"):"error.main",component:"span",children:[(0,L.jsx)(on.Z,{placement:"top",title:(0,L.jsx)(V.Z,{children:r.key&&ne.ZP.getArtStr(r.key)}),disableInteractive:!0,children:(0,L.jsx)("span",{children:Oe.ZP[r.key]})}),(0,L.jsx)("span",{children:"".concat((0,ne.qs)(r.value,ne.ZP.unit(r.key))).concat(s)})]})})}function _t(e){var n=e.location,t=(0,D.Z)((function(){return P.Z.get(null!==n&&void 0!==n?n:"")}),[n]);return t?(0,L.jsx)(on.Z,{placement:"right-end",title:(0,L.jsx)(V.Z,{children:t.name}),children:(0,L.jsx)(Y.Z,{src:t.thumbImgSide,sx:{height:"3em",marginTop:"-1.5em",marginLeft:"-0.5em"}})}):(0,L.jsx)(St.Z,{})}var Nt=t(16002);function Lt(){var e=(0,m.useContext)(k.R).data,n=(0,m.useMemo)((function(){return(0,ee.U)(e).filter((function(e){var n=(0,r.Z)(e,2)[1];return Object.values(n).some((function(e){return!e.isEmpty}))}))}),[e]);return(0,L.jsx)(je.Z,{sx:{mr:-1,mb:-1},children:(0,L.jsx)(Nt.ZP,{columns:{xs:1,sm:2,md:3,xl:4},spacing:1,children:n.map((function(e){var n=(0,r.Z)(e,2),t=n[0],i=n[1];return(0,L.jsx)(Tt,{displayNs:i,sectionKey:t},t)}))})})}function Tt(e){var n=e.displayNs,t=e.sectionKey,i=(0,m.useContext)(xn),a=(0,m.useContext)(k.R),s=a.data,l=a.oldData,c=(0,D.Z)((function(){return(0,ee.f)(s,t)}),[s,t]),o=(0,m.useMemo)((function(){return(0,de.xh)(n,(function(e,n){return(0,bn.UF)(["display",t,n])}))}),[n,t]);if(!c)return(0,L.jsx)(g.Z,{});var u=c.title,d=c.icon,x=c.action;return(0,L.jsxs)(g.Z,{children:[(0,L.jsx)($.Z,{avatar:d&&(0,L.jsx)(Y.Z,{size:2,sx:{m:-1},src:d}),title:u,action:x&&(0,L.jsx)(Q.Z,{children:x})}),(0,L.jsx)(G.Z,{}),(0,L.jsx)(Ne.lD,{sx:{m:0},children:Object.entries(n).map((function(e){var n=(0,r.Z)(e,2),a=n[0],s=n[1];return(0,L.jsx)(Ne.JW,{node:s,oldValue:l?l.get(o[a]).value:void 0,component:me.ZP,emphasize:JSON.stringify(i)===JSON.stringify([t,a])},a)}))})]})}var Bt=t(66218),qt=t(74480),Gt=t(41717);function Ft(e){var n=e.weaponId,t=e.showLocation,r=void 0!==t&&t,i=e.onClick,a=e.BGComponent,s=void 0===a?g.Z:a,l=(0,qt.Z)(n),c=(0,D.Z)((function(){return(null===l||void 0===l?void 0:l.key)&&Bt.Z.get(l.key)}),[null===l||void 0===l?void 0:l.key]),o=(0,m.useCallback)((function(e){return(0,L.jsx)(Pt.Z,{sx:{height:"100%"},onClick:i,children:e})}),[i]),x=(0,m.useMemo)((function(){return c&&l&&(0,fn.mP)([c.data,(0,fn.v0)(l)])}),[c,l]);if(!l||!c||!x)return(0,L.jsx)(s,{sx:{height:"100%"},children:(0,L.jsx)(d.Z,{variant:"rectangular",sx:{width:"100%",height:"100%"}})});var h=l.refinement,f=l.location;return(0,L.jsx)(s,{sx:{height:"100%"},children:(0,L.jsx)(Rt.Z,{condition:!!i,wrapper:o,children:(0,L.jsxs)(u.Z,{display:"flex",height:"100%",alignItems:"stretch",children:[(0,L.jsxs)(u.Z,{className:"grad-".concat(c.rarity,"star"),sx:{height:"100%",position:"relative",flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-end"},children:[(0,L.jsx)(Gt.Z,{sheet:c,children:(0,L.jsx)(u.Z,{component:"img",src:c.getImg(l.ascension),sx:{mx:-1,maxHeight:"100%",maxWidth:"100%"}})}),(0,L.jsxs)(u.Z,{sx:{position:"absolute",width:"100%",height:"100%",p:.5,opacity:.85,display:"flex",justifyContent:"space-between",pointerEvents:"none"},children:[(0,L.jsx)(ye.Z,{size:"small",label:(0,L.jsx)("strong",{children:Bt.Z.getLevelString(l)}),color:"primary"}),r&&(0,L.jsx)(ye.Z,{size:"small",label:(0,L.jsx)(Vt,{location:f}),color:"secondary",sx:{overflow:"visible",".MuiChip-label":{overflow:"visible"}}})]}),(0,L.jsx)(u.Z,{sx:{position:"absolute",width:"100%",height:"100%",p:.5,opacity:.85,display:"flex",justifyContent:"flex-end",alignItems:"flex-end"},children:c.hasRefinement&&(0,L.jsx)(ye.Z,{size:"small",color:"info",label:(0,L.jsxs)("strong",{children:["R",h]})})})]}),(0,L.jsxs)(u.Z,{display:"flex",flexDirection:"column",sx:{p:1},children:[(0,L.jsx)(Wt,{node:x.get(we.qH.weapon.main)}),(0,L.jsx)(Wt,{node:x.get(we.qH.weapon.sub)})]})]})})})}function Wt(e){var n=e.node;if(!n.info.key)return null;var t=(0,ne.EC)(n.value,n.unit,n.unit?void 0:0);return(0,L.jsx)(u.Z,{display:"flex",gap:1,alignContent:"center",children:(0,L.jsxs)(V.Z,{sx:{flexGrow:1,display:"flex",gap:1},component:"span",children:[(0,L.jsx)(on.Z,{placement:"top",title:(0,L.jsx)(V.Z,{children:n.info.key&&ne.ZP.getArtStr(n.info.key)}),disableInteractive:!0,children:(0,L.jsx)("span",{children:Oe.ZP[n.info.key]})}),(0,L.jsx)("span",{children:t})]})})}function Vt(e){var n=e.location,t=(0,D.Z)((function(){return P.Z.get(null!==n&&void 0!==n?n:"")}),[n]);return t?(0,L.jsx)(on.Z,{placement:"right-end",title:(0,L.jsx)(V.Z,{children:t.name}),children:(0,L.jsx)(Y.Z,{src:t.thumbImgSide,sx:{height:"3em",marginTop:"-1.5em",marginLeft:"-0.5em"}})}):(0,L.jsx)(St.Z,{})}var Ht=t(72838);function Ut(e){var n=e.index,t=e.compareBuild,i=e.extraButtons,a=e.disabled,s=(0,m.useContext)(C.K).character,l=s.key,c=s.equippedArtifacts,o=ht(l).buildSetting.mainStatAssumptionLevel,u=(0,m.useContext)(hn.t).database,h=(0,m.useContext)(k.R),f=h.data,j=h.oldData,Z=(0,m.useState)(void 0),v=(0,r.Z)(Z,2),g=v[0],b=v[1],w=(0,m.useCallback)((function(){return b(void 0)}),[b]),S=(0,m.useCallback)((function(){if(window.confirm("Do you want to equip this build to this character?")){var e=Object.fromEntries(I.eV.map((function(e){return[e,f.get(we.ri.art[e].id).value]})));u.chars.equipArtifacts(l,e),u.weapons.set(f.get(we.ri.weapon.id).value,{location:l})}}),[l,f,u]),P=(0,m.useMemo)((function(){var e=(0,Ze.Z)({},h);return t||(e.oldData=void 0),e}),[h,t]),E=(0,m.useMemo)((function(){return I.eV.map((function(e){return(0,L.jsx)(pe.ZP,{item:!0,xs:1,children:(0,L.jsx)(Mt,{showLocation:!0,slotKey:e,artifactId:f.get(we.ri.art[e].id).value,mainStatAssumptionLevel:o,onClick:function(){var n=c[e],t=f.get(we.ri.art[e].id).value;b({oldId:n!==t?n:void 0,newId:t})}})},e)}))}),[f,b,c,o]);if(!j)return null;var O=I.eV.every((function(e){return f.get(we.ri.art[e].id).value===j.get(we.ri.art[e].id).value}))&&f.get(we.ri.weapon.id).value===j.get(we.ri.weapon.id).value;return(0,L.jsx)(y.Z,{children:(0,L.jsxs)(m.Suspense,{fallback:(0,L.jsx)(d.Z,{variant:"rectangular",width:"100%",height:600}),children:[g&&(0,L.jsx)(Xt,{newOld:g,mainStatAssumptionLevel:o,onClose:w}),(0,L.jsxs)(x.Z,{children:[(0,L.jsxs)(je.Z,{display:"flex",gap:1,sx:{pb:1},flexWrap:"wrap",children:[void 0!==n&&(0,L.jsx)(Q.Z,{color:"info",children:(0,L.jsx)(V.Z,{children:(0,L.jsxs)("strong",{children:["#",n+1,O?" (Equipped)":""]})})}),(0,L.jsx)($t,{currentlyEquipped:O}),(0,L.jsx)(je.Z,{sx:{flexGrow:1,display:"flex",justifyContent:"flex-end"}}),(0,L.jsx)(p.Z,{size:"small",color:"success",onClick:S,disabled:a||O,children:"Equip Build"}),i]}),(0,L.jsxs)(pe.ZP,{container:!0,spacing:1,sx:{pb:1},columns:{xs:2,sm:3,md:4,lg:6},children:[(0,L.jsx)(pe.ZP,{item:!0,xs:1,children:(0,L.jsx)(Ft,{showLocation:!0,weaponId:f.get(we.ri.weapon.id).value})}),E]}),(0,L.jsx)(k.R.Provider,{value:P,children:(0,L.jsx)(Lt,{})})]})]})})}function $t(e){var n=e.currentlyEquipped,t=void 0!==n&&n,i=(0,m.useContext)(k.R).data,a={};return I.eV.forEach((function(e){var n=i.get(we.ri.art[e].set).value;n&&(a[n]?a[n].push(e):a[n]=[e])})),(0,L.jsx)(L.Fragment,{children:Object.entries(a).sort((function(e,n){var t=(0,r.Z)(e,2),i=(t[0],t[1]),a=(0,r.Z)(n,2);a[0];return a[1].length-i.length})).map((function(e){var n=(0,r.Z)(e,2),i=n[0],a=n[1];return(0,L.jsx)(Jt,{setKey:i,currentlyEquipped:t,slotarr:a},i)}))})}function Jt(e){var n,t=e.setKey,r=e.currentlyEquipped,i=void 0!==r&&r,a=e.slotarr,s=(0,D.Z)((function(){return Gn.y.get(t)}),[]);if(!s)return null;var l=a.length,c=Object.keys(s.setEffects).map((function(e){return parseInt(e)})).filter((function(e){return e<=l}));return(0,L.jsx)(je.Z,{children:(0,L.jsx)(on.Z,{placement:"top",title:(0,L.jsx)(m.Suspense,{fallback:(0,L.jsx)(d.Z,{variant:"rectangular",width:100,height:100}),children:(0,L.jsx)(Yt,{artifactSheet:s,numInSet:l})}),disableInteractive:!0,children:(0,L.jsx)(Q.Z,{color:i?"success":"primary",children:(0,L.jsxs)(V.Z,{children:[a.map((function(e){return(0,ct.Ir)(e)}))," ",null!==(n=s.name)&&void 0!==n?n:"",c.map((function(e){return(0,L.jsx)(Q.Z,{sx:{ml:.5},color:"success",children:e},e)}))]})})})})}function Yt(e){var n=e.artifactSheet,t=e.numInSet,r=(0,j.$)("sheet").t;return(0,L.jsx)(fe.Z,{spacing:2,sx:{p:1},children:Object.keys(n.setEffects).map((function(e){return(0,L.jsxs)(je.Z,{sx:{opacity:parseInt(e)<=t?1:.5},children:[(0,L.jsx)(V.Z,{children:(0,L.jsx)(Q.Z,{color:"success",children:r("".concat(e,"set"))})}),(0,L.jsx)(V.Z,{children:(0,L.jsx)(dt.v,{ns:"artifact_".concat(n.key,"_gen"),key18:"setEffects.".concat(e)})})]},e)}))})}function Xt(e){var n=e.newOld,t=n.newId,r=n.oldId,i=e.mainStatAssumptionLevel,a=e.onClose,s=(0,m.useContext)(hn.t).database,l=(0,m.useContext)(C.K).character.key,c=(0,m.useCallback)((function(){window.confirm("Do you want to equip this artifact to this character?")&&(s.arts.set(t,{location:l}),a())}),[t,s,l,a]);return(0,L.jsx)(X.Z,{open:!!t,onClose:a,containerProps:{maxWidth:r?"md":"xs"},children:(0,L.jsx)(g.Z,{children:(0,L.jsxs)(x.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"stretch",gap:2,height:"100%"},children:[r&&(0,L.jsx)(je.Z,{minWidth:320,children:(0,L.jsx)(Ht.Z,{artifactId:r,mainStatAssumptionLevel:i,canExclude:!0,canEquip:!0})}),r&&(0,L.jsx)(je.Z,{display:"flex",flexGrow:1}),r&&(0,L.jsx)(je.Z,{display:"flex",alignItems:"center",justifyContent:"center",children:(0,L.jsx)(p.Z,{onClick:c,sx:{display:"flex"},children:(0,L.jsx)(kt.Z,{sx:{fontSize:40}})})}),r&&(0,L.jsx)(je.Z,{display:"flex",flexGrow:1}),(0,L.jsx)(je.Z,{minWidth:320,children:(0,L.jsx)(Ht.Z,{artifactId:t,mainStatAssumptionLevel:i,canExclude:!0,canEquip:!0})})]})})})}var Qt=t(94294),er=t(72456),nr=t(40165),tr=t(19913),rr=t(37389),ir=t(82839),ar=t(90466),sr=t(12891),lr=t(42633),cr=t(27281),or=t(64694),ur=t(62066);function dr(e){var n=e.chartData,t=e.plotBase,i=e.setPlotBase,a=e.disabled,s=void 0!==a&&a,l=(0,m.useState)(!1),c=(0,r.Z)(l,2),o=c[0],u=c[1],d=(0,m.useState)(!0),h=(0,r.Z)(d,2),f=h[0],j=h[1],Z=(0,m.useContext)(k.R).data,v=["atk","hp","def","eleMas","critRate_","critDMG_","heal_","enerRech_"];"catalyst"!==Z.get(we.ri.weaponType).value&&v.push("physical_dmg_"),v.push("".concat(Z.get(we.ri.charEle).value,"_dmg_"));var b=(0,m.useMemo)((function(){var e,t;if(!n)return{displayData:null,downloadData:null};var r,i=n.data.map((function(e){var n=e.value;return{x:e.plot,y:n}})).sort((function(e,n){return e.x-n.x})),a=[],s=(0,gn.Z)(i);try{for(s.s();!(r=s.n()).done;){for(var l=r.value,c=void 0;c=a.pop();)if(c.y>l.y){a.push(c);break}a.push(l)}}catch(u){s.e(u)}finally{s.f()}(null===(e=a[0])||void 0===e?void 0:e.x)!==(null===(t=i[0])||void 0===t?void 0:t.x)&&(i[0].min=a[0].y),a.forEach((function(e){e.min=e.y}));var o={minimum:a.map((function(e){return[e.x,e.y]})),allData:i.map((function(e){return[e.x,e.y]}))};return{displayData:i,downloadData:o}}),[n]),w=b.displayData,C=b.downloadData;return(0,L.jsxs)(y.Z,{children:[(0,L.jsx)(x.Z,{children:(0,L.jsxs)(pe.ZP,{container:!0,spacing:1,alignItems:"center",children:[(0,L.jsx)(pe.ZP,{item:!0,children:(0,L.jsx)(V.Z,{variant:"h6",children:"Optimization Target vs"})}),(0,L.jsx)(pe.ZP,{item:!0,children:(0,L.jsxs)(oe.Z,{title:t?ne.ZP.get(t):"Not Selected",color:t?"success":"primary",disabled:s,children:[(0,L.jsx)(le.Z,{onClick:function(){i("")},children:"Unselect"}),(0,L.jsx)(G.Z,{}),v.map((function(e){return(0,L.jsx)(le.Z,{onClick:function(){i(e)},children:ne.ZP.get(e)},e)}))]})}),(0,L.jsx)(pe.ZP,{item:!0,flexGrow:1,children:(0,L.jsx)(nr.Z,{placement:"top",title:"Using data from the builder, this will generate a graph to visualize Optimization Target vs. a selected stat. The graph will show the maximum Optimization Target value per 0.01 of the selected stat.",children:(0,L.jsx)(Qt.Z,{})})}),!!C&&(0,L.jsx)(pe.ZP,{item:!0,children:(0,L.jsx)(p.Z,{startIcon:f?(0,L.jsx)(ve.Z,{}):(0,L.jsx)(ge.Z,{}),color:f?"success":"secondary",onClick:function(){return j(!f)},children:"Show Min Stat Threshold"})}),!!C&&(0,L.jsx)(pe.ZP,{item:!0,children:(0,L.jsx)(p.Z,{color:"info",startIcon:(0,L.jsx)(er.Z,{}),onClick:function(){return u(!o)},children:"Download Data"})})]})}),!!w&&(0,L.jsx)(G.Z,{}),n&&!!w&&(0,L.jsxs)(x.Z,{children:[(0,L.jsx)(be.Z,{in:!!C&&o,children:(0,L.jsx)(g.Z,{sx:{mb:2},children:(0,L.jsxs)(x.Z,{children:[(0,L.jsx)(V.Z,{children:"Min Data"}),(0,L.jsx)(hr,{data:null===C||void 0===C?void 0:C.minimum}),(0,L.jsx)(V.Z,{children:"All Data"}),(0,L.jsx)(hr,{data:null===C||void 0===C?void 0:C.allData})]})})}),(0,L.jsx)(fr,{displayData:w,plotNode:n.plotNode,valueNode:n.valueNode,showMin:f})]})]})}var xr=(0,ke.ZP)("textarea")({width:"100%",fontFamily:"monospace",resize:"vertical",minHeight:"5em"});function hr(e){var n=e.data;return(0,L.jsx)(xr,{readOnly:!0,value:JSON.stringify(n),onClick:function(e){var n=e.target;n.selectionStart=0,n.selectionEnd=n.value.length}})}function fr(e){var n,t,r=e.displayData,i=e.plotNode,a=e.valueNode,s=e.showMin,l=ne.ZP.unit(null===(n=i.info)||void 0===n?void 0:n.key),c=ne.ZP.unit(null===(t=a.info)||void 0===t?void 0:t.key);return(0,L.jsx)(tr.h,{width:"100%",height:600,children:(0,L.jsxs)(rr.c,{data:r,children:[(0,L.jsx)(ir.q,{strokeDasharray:"3 3"}),(0,L.jsx)(ar.K,{dataKey:"x",scale:"linear",unit:l,domain:["auto","auto"],tick:{fill:"white"},type:"number",tickFormatter:function(e){return e>1e4?e.toFixed():e.toFixed(1)}}),(0,L.jsx)(sr.B,{name:"DMG",domain:["auto","auto"],unit:c,allowDecimals:!1,tick:{fill:"white"},type:"number"}),(0,L.jsx)(lr.d,{dataKey:"y",range:[3,25]}),(0,L.jsx)(cr.D,{}),(0,L.jsx)(or.b,{name:"Optimization Target",dataKey:"y",fill:"#8884d8",line:!0,lineType:"fitting",isAnimationActive:!1}),s&&(0,L.jsx)(ur.x,{name:"Minimum Stat Requirement Threshold",dataKey:"min",stroke:"#ff7300",type:"stepBefore",connectNulls:!0,strokeWidth:2,isAnimationActive:!1})]})})}var pr=["sands","goblet","circlet"];function mr(e){var n=e.disabled,t=void 0!==n&&n,r=(0,j.$)("artifact").t,i=ht((0,m.useContext)(C.K).character.key),a=i.buildSetting.mainStatKeys,s=i.buildSettingDispatch;return(0,L.jsx)(je.Z,{display:"flex",flexDirection:"column",gap:1,children:pr.map((function(e){var n=a[e].length;return(0,L.jsxs)(je.Z,{children:[(0,L.jsx)(G.Z,{}),(0,L.jsxs)(x.Z,{sx:{pt:1},children:[(0,L.jsxs)(je.Z,{sx:{display:"flex",gap:1,alignItems:"center",pb:1},children:[(0,L.jsx)(on.Z,{placement:"top",title:(0,L.jsx)(V.Z,{children:r("slotName.".concat(e))}),children:(0,L.jsx)("span",{children:(0,ct.Ir)(e)})}),(0,L.jsx)(je.Z,{flexGrow:1,children:(0,L.jsx)(Q.Z,{color:"info",children:n?"".concat(n," Selected"):"Any"})}),(0,L.jsx)(p.Z,{color:"error",size:"small",disabled:!a[e].length||t,sx:{mt:-1,mb:-1},onClick:function(){return s({type:"mainStatKey",slotKey:e})},children:(0,L.jsx)(Ke.Z,{})})]}),(0,L.jsx)(pe.ZP,{container:!0,spacing:1,children:Dt.Z.slotMainStats(e).map((function(n,r){var i=I.Kj.find((function(e){return n.includes(e)})),l=a[e].includes(n)?null!==i&&void 0!==i?i:"success":"secondary";return(0,L.jsx)(pe.ZP,{item:!0,flexGrow:1,xs:r<3?4:void 0,children:(0,L.jsx)(on.Z,{placement:"top",title:(0,L.jsx)(V.Z,{children:(0,L.jsx)("strong",{children:ne.ZP.getArtStr(n)})}),disableInteractive:!0,children:(0,L.jsx)(p.Z,{fullWidth:!0,size:"small",color:l,sx:{fontSize:"1.2em",height:"100%",pointerEvents:t?"none":void 0,cursor:t?"none":void 0},onClick:function(){return s({type:"mainStatKey",slotKey:e,mainStatKey:n})},children:i?Oe.hJ[i]:Oe.ZP[n]})})},n)}))})]})]},e)}))})}var jr,Zr,vr=t(72814);function gr(e){var n=e.disabled,t=void 0!==n&&n,r=(0,j.$)("page_character").t,i=(0,m.useContext)(C.K).character.key,a=(0,m.useContext)(k.R).data,s=ht(i),l=s.buildSetting.statFilters,c=s.buildSettingDispatch,o=(0,m.useCallback)((function(e){return c({statFilters:e})}),[c]),d=(0,m.useMemo)((function(){var e=["atk","hp","def","eleMas","critRate_","critDMG_","heal_","enerRech_"];"catalyst"!==a.get(we.qH.weaponType).value&&e.push("physical_dmg_");var n=a.get(we.qH.charEle).value;return e.push("".concat(n,"_dmg_")),e}),[a]);return(0,L.jsxs)(u.Z,{children:[(0,L.jsx)(y.Z,{children:(0,L.jsxs)(x.Z,{sx:{display:"flex",gap:1,justifyContent:"space-between"},children:[(0,L.jsx)(V.Z,{children:r(jr||(jr=(0,Qe.Z)(["tabOptimize.constraintFilter.title"])))}),(0,L.jsx)(ot.Z,{title:(0,L.jsx)(V.Z,{children:r(Zr||(Zr=(0,Qe.Z)(["tabOptimize.constraintFilter.tooltip"])))})})]})}),(0,L.jsx)(u.Z,{display:"flex",flexDirection:"column",gap:.5,children:(0,L.jsx)(Le.Z,{statKeys:d,statFilters:l,setStatFilters:o,disabled:t})})]})}var yr=t(89841),br=t(70558),wr=t(1235),Cr=t(68125),kr=t(68087),Sr=t(52991),Pr=t(84684),Er=t(77208),Or=navigator.hardwareConcurrency||4;function Kr(){return{equipmentPriority:[],threads:Or}}function Dr(){return(0,mn.Z)("TabOptimize",Kr)}function Ar(e){var n=e.disabled,t=void 0!==n&&n,i=(0,j.$)("page_character").t,a=(0,m.useContext)(C.K).character.key,s=ht(a),l=s.buildSetting.useEquippedArts,c=s.buildSettingDispatch,o=(0,m.useContext)(hn.t).database,d=(0,E.Z)(!1),h=(0,r.Z)(d,3),f=h[0],Z=h[1],v=h[2],w=Dr(),k=(0,r.Z)(w,2),S=k[0].equipmentPriority,P=k[1],O=(0,m.useMemo)((function(){return(0,he.Z)(new Set(S)).filter((function(e){return o.chars.get(e)}))}),[o,S]),K=(0,m.useCallback)((function(e){return P({equipmentPriority:e})}),[P]),D=(0,m.useCallback)((function(e,n){var t=(0,he.Z)(O),r=t[e];t.splice(e,1),t.splice(n,0,r),K(t)}),[O,K]),A=(0,m.useCallback)((function(e){var n=(0,he.Z)(O);n.splice(e,1),K(n)}),[O,K]),R=(0,m.useCallback)((function(e){return K([].concat((0,he.Z)(O),[e]))}),[O,K]),I=(0,m.useCallback)((function(){return K([])}),[K]),M=(0,m.useMemo)((function(){var e=O.length,n=O.indexOf(a);return n>=0&&(e=n),e}),[a,O]),z=(0,m.useMemo)((function(){return o.chars.keys.length-1-M}),[M,o]),_=(0,m.useMemo)((function(){return o.chars.keys.length-O.length}),[O,o]);return(0,L.jsxs)(u.Z,{display:"flex",gap:1,children:[(0,L.jsx)(X.Z,{open:f,onClose:v,containerProps:{maxWidth:"sm"},children:(0,L.jsxs)(g.Z,{children:[(0,L.jsx)(x.Z,{children:(0,L.jsxs)(pe.ZP,{container:!0,spacing:1,children:[(0,L.jsx)(pe.ZP,{item:!0,flexGrow:1,children:(0,L.jsx)(V.Z,{variant:"h6",children:(0,L.jsx)(qn.c,{t:i,i18nKey:"tabOptimize.useEquipped.modal.title",children:"Character Priority for Equipped Artifacts"})})}),(0,L.jsx)(pe.ZP,{item:!0,sx:{mb:-1},children:(0,L.jsx)(b.Z,{onClick:v})})]})}),(0,L.jsx)(G.Z,{}),(0,L.jsxs)(x.Z,{children:[(0,L.jsx)(y.Z,{sx:{mb:1},children:(0,L.jsxs)(x.Z,{children:[(0,L.jsx)(V.Z,{gutterBottom:!0,children:(0,L.jsx)(qn.c,{t:i,i18nKey:"tabOptimize.useEquipped.modal.desc1",children:"When generating a build, the Optimizer will only consider equipped artifacts from characters below the current character or those not on the list."})}),(0,L.jsx)(V.Z,{gutterBottom:!0,children:(0,L.jsx)(qn.c,{t:i,i18nKey:"tabOptimize.useEquipped.modal.desc2",children:"If the current character is not on the list, the Optimizer will only consider equipped artifacts from others characters that are not on the list."})})]})}),(0,L.jsxs)(u.Z,{display:"flex",flexDirection:"column",gap:2,children:[O.map((function(e,n){return(0,L.jsx)(Rr,{characterKey:e,rank:n+1,maxRank:O.length,setRank:function(e){return e&&D(n,e-1)},onRemove:function(){return A(n)},numAbove:M},e)})),(0,L.jsxs)(u.Z,{sx:{display:"flex",gap:1},children:[(0,L.jsx)(Ir,{onAdd:R,list:O}),(0,L.jsx)(p.Z,{color:"error",onClick:I,startIcon:(0,L.jsx)(Ke.Z,{}),children:(0,L.jsx)(qn.c,{t:i,i18nKey:"tabOptimize.useEquipped.modal.clearList",children:"Clear List"})})]}),!!z&&(0,L.jsx)(Q.Z,{color:"success",children:(0,L.jsx)(V.Z,{children:(0,L.jsxs)(qn.c,{t:i,i18nKey:"tabOptimize.useEquipped.modal.usingNum",count:_,children:["Using artifacts from ",(0,L.jsx)("strong",{children:{count:_}})," unlisted characters"]})})})]})]})]})}),(0,L.jsxs)(se.Z,{sx:{display:"flex",width:"100%"},children:[(0,L.jsx)(p.Z,{sx:{flexGrow:1},onClick:function(){return c({useEquippedArts:!l})},disabled:t,startIcon:l?(0,L.jsx)(ve.Z,{}):(0,L.jsx)(ge.Z,{}),color:l?"success":"secondary",children:(0,L.jsxs)(u.Z,{children:[(0,L.jsx)("span",{children:(0,L.jsx)(qn.c,{t:i,i18nKey:"tabOptimize.useEquipped.title",children:"Use Equipped Artifacts"})}),l&&(0,L.jsx)(Q.Z,{children:(0,L.jsxs)(qn.c,{t:i,i18nKey:"tabOptimize.useEquipped.usingNum",count:z,children:["Using from ",(0,L.jsx)("strong",{children:{count:z}})," characters"]})})]})}),l&&(0,L.jsx)(p.Z,{sx:{flexShrink:1},color:"info",onClick:Z,disabled:t,children:(0,L.jsx)(Bn.Z,{})})]})]})}function Rr(e){var n=e.characterKey,t=e.rank,i=e.maxRank,a=e.setRank,s=e.onRemove,l=e.numAbove,c=(0,j.$)("page_character").t,o=(0,m.useContext)(hn.t).database,d=(0,O.Z)(n),x=(0,N.Z)();if(!d)return null;var h=d.equippedWeapon,f=d.equippedArtifacts;return(0,L.jsxs)(y.Z,{sx:{p:1},children:[(0,L.jsxs)(u.Z,{sx:{pb:1,display:"flex",justifyContent:"space-between",gap:1},children:[(0,L.jsx)(Q.Z,{color:"info",children:(0,L.jsxs)(V.Z,{children:["#",t]})}),(0,L.jsx)(Q.Z,{sx:{flexGrow:1},color:l===t-1?"warning":t-1<l?"error":"success",children:(0,L.jsx)(V.Z,{children:l===t-1?(0,L.jsx)(qn.c,{t:c,i18nKey:"tabOptimize.useEquipped.modal.status.curr",children:"Current character"}):t-1<l?(0,L.jsx)(qn.c,{t:c,i18nKey:"tabOptimize.useEquipped.modal.status.dont",children:"Don't Use artifacts"}):(0,L.jsx)(qn.c,{t:c,i18nKey:"tabOptimize.useEquipped.modal.status.use",children:"Use artifacts"})})}),(0,L.jsx)(u.Z,{children:(0,L.jsxs)(se.Z,{sx:{flexGrow:1},size:"small",children:[(0,L.jsx)(ce.CC,{children:(0,L.jsx)(ce.ZP,{onChange:a,value:t,inputProps:{min:1,max:i,sx:{textAlign:"center"}},sx:{width:"100%",height:"100%",pl:2}})}),(0,L.jsx)(p.Z,{disabled:1===t,onClick:function(){return a(1)},children:(0,L.jsx)(yr.Z,{})}),(0,L.jsx)(p.Z,{disabled:1===t,onClick:function(){return a(t-1)},children:(0,L.jsx)(br.Z,{})}),(0,L.jsx)(p.Z,{disabled:t===i,onClick:function(){return a(t+1)},children:(0,L.jsx)(wr.Z,{})}),(0,L.jsx)(p.Z,{disabled:t===i,onClick:function(){return a(i)},children:(0,L.jsx)(Cr.Z,{})}),(0,L.jsx)(p.Z,{color:"error",onClick:s,children:(0,L.jsx)(tn.Z,{})})]})})]}),(0,L.jsxs)(pe.ZP,{container:!0,columns:7,spacing:1,children:[(0,L.jsx)(pe.ZP,{item:!0,xs:1,children:(0,L.jsx)(Pr.Z,{characterKey:n,onClick:x})}),(0,L.jsx)(pe.ZP,{item:!0,xs:1,children:(0,L.jsx)(Er.Z,{weaponId:h})}),Object.entries(f).map((function(e){var n=(0,r.Z)(e,2),t=n[0],i=n[1];return(0,L.jsx)(pe.ZP,{item:!0,xs:1,children:(0,L.jsx)(Sr.Z,{slotKey:t,artifactObj:o.arts.get(i)})},t)}))]})]})}function Ir(e){var n=e.onAdd,t=e.list,i=(0,j.$)("page_character").t,a=(0,E.Z)(!1),s=(0,r.Z)(a,3),l=s[0],c=s[1],o=s[2],u=(0,m.useCallback)((function(e){return!!e&&!t.includes(e.key)}),[t]);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(z.w,{show:l,onHide:o,onSelect:n,filter:u}),(0,L.jsx)(p.Z,{fullWidth:!0,sx:{height:60},color:"info",onClick:c,startIcon:(0,L.jsx)(kr.Z,{}),children:(0,L.jsx)(qn.c,{t:i,i18nKey:"tabOptimize.useEquipped.modal.add",children:"Add character to list"})})]})}function Mr(e){var n=e.disabled,t=void 0!==n&&n,r=e.artsDirty,i=(0,j.$)("page_character").t,a=(0,m.useContext)(C.K).character.key,s=ht(a),l=s.buildSetting.useExcludedArts,c=s.buildSettingDispatch,o=(0,m.useContext)(hn.t).database,d=(0,m.useMemo)((function(){return r&&o.arts.values.reduce((function(e,n){return e+(n.exclude&&n.location!==a?1:0)}),0)}),[o,r,a]);return(0,L.jsx)(p.Z,{fullWidth:!0,onClick:function(){return c({useExcludedArts:!l})},disabled:!d||t,startIcon:l?(0,L.jsx)(ve.Z,{}):(0,L.jsx)(ge.Z,{}),color:l?"success":"secondary",children:(0,L.jsxs)(u.Z,{children:[(0,L.jsx)("span",{children:(0,L.jsx)(qn.c,{t:i,i18nKey:"tabOptimize.useExcluded.title",count:d,children:"Use Excluded Artifacts"})}),l&&(0,L.jsx)(Q.Z,{children:(0,L.jsxs)(qn.c,{t:i,i18nKey:"tabOptimize.useExcluded.usingNum",count:d,children:["Using ",(0,L.jsx)("strong",{children:{count:d}})," excluded artifacts"]})})]})})}var zr,_r=t(4942),Nr=t(50765),Lr=(0,bn.yY)((0,de.I8)({dyn:(0,Ze.Z)((0,Ze.Z)({},we.qH.art),we.qH.artSet)})),Tr={art:(0,de.O)([].concat((0,he.Z)(Nr.r),(0,he.Z)(Nr._)),(function(e){return Lr.dyn[e]})),artSet:(0,de.xh)(we.qH.artSet,(function(e,n){return Lr.dyn[n]}))};function Br(e,n,t){var r,i={base:{},values:{flower:[],plume:[],goblet:[],circlet:[],sands:[]}},a=new Set,s=(0,gn.Z)(e);try{for(s.s();!(r=s.n()).done;){var l,c=r.value,o=Dt.Z.mainStatValue(c.mainStatKey,c.rarity,Math.max(Math.min(n,4*c.rarity),c.level)),u={id:c.id,set:c.setKey,values:(0,Ze.Z)((l={},(0,_r.Z)(l,c.setKey,1),(0,_r.Z)(l,c.mainStatKey,c.mainStatKey.endsWith("_")?o/100:o),l),Object.fromEntries(c.substats.map((function(e){return[e.key,e.key.endsWith("_")?e.accurateValue/100:e.accurateValue]}))))};delete u.values[""],i.values[c.slotKey].push(u),Object.keys(u.values).forEach((function(e){return a.add(e)}))}}catch(h){s.e(h)}finally{s.f()}if(i.base=(0,de.O)((0,he.Z)(a),(function(e){return 0})),t)for(var d=0,x=Object.values(i.values);d<x.length;d++){x[d].push({id:"",values:{}})}return i}function qr(){var e,n,t=(0,j.$)("page_character").t,i=(0,m.useContext)(C.K).character,a=i.key,s=i.compareData,c=(0,mn.Z)("GlobalSettings",Zn.c),o=(0,r.Z)(c,1)[0].tcMode,d=(0,m.useContext)(hn.t).database,h=(0,m.useState)({type:"inactive",tested:0,failed:0,skipped:0,total:0}),f=(0,r.Z)(h,2),v=f[0],g=f[1],b="inactive"!==v.type,S=(0,m.useState)(void 0),P=(0,r.Z)(S,2),E=P[0],O=P[1],D=(0,jn.Z)(),R=(0,r.Z)(D,2),I=R[0],M=R[1],z=Dr(),_=(0,r.Z)(z,2),T=_[0],B=T.equipmentPriority,q=T.threads,F=void 0===q?Or:q,W=_[1],H=F>Or?Or:F,U=(0,m.useCallback)((function(e){return W({threads:e})}),[W]),$=(0,K.Z)(a),J=(0,N.Z)(),Y=(0,m.useMemo)((function(){return!d.arts.values.length}),[d]),X=ht(a),Q=X.buildSetting,ee=X.buildSettingDispatch,te=Q.plotBase,re=Q.optimizationTarget,ie=Q.mainStatAssumptionLevel,ae=Q.allowPartial,ce=Q.builds,ue=Q.buildDate,xe=Q.maxBuildsToShow,fe=Q.levelLow,me=Q.levelHigh,je=(0,A.Z)(a,ie),ye=null!==(e=null===je||void 0===je?void 0:je[a])&&void 0!==e?e:{},be=ye.characterSheet,Ce=ye.target,ke=(0,m.useMemo)((function(){return ce.map((function(e){return e.map((function(e){return d.arts.get(e)}))}))}),[ce,d]);(0,m.useEffect)((function(){return d.arts.followAny(M)}),[M,d]);var Se=(0,m.useRef)((function(){}));(0,m.useEffect)((function(){return function(){return Se.current()}}),[]);var Pe=(0,m.useCallback)((0,nn.Z)((0,en.Z)().mark((function e(){var n,t,i,s,l,c,o,u,x,h,f,p,m,j,Z,v,y,b,w,C,k,S,P,E,K,D,R,I,M,z,_,N,L,T,q,G,F,W,V,U,$,J,Y,X,te,re,ie,ae,se,le,ce,oe,ue,xe,fe,pe;return(0,en.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Y=function(){var e=F.pop();return e?{command:"iterate",threshold:L.buildValues[p-1],filter:e}:void 0},J=function(){var e=G.next(),n=e.done,t=e.value;return n?void 0:{command:"split",minCount:T,threshold:L.buildValues[p-1],filter:t}},$=function(){return{command:"split",filter:void 0,minCount:T,threshold:L.buildValues[p-1]}},i=Q.artSetExclusion,s=Q.plotBase,l=Q.statFilters,c=Q.mainStatKeys,o=Q.optimizationTarget,u=Q.mainStatAssumptionLevel,x=Q.useExcludedArts,h=Q.useEquippedArts,f=Q.allowPartial,p=Q.maxBuildsToShow,m=Q.levelLow,j=Q.levelHigh,a&&o){e.next=6;break}return e.abrupt("return");case 6:return Z=[],h&&(v=B.indexOf(a),Z=v<0?(0,he.Z)(B):B.slice(0,v)),y=d.arts.values.filter((function(e){if(e.level<m)return!1;if(e.level>j)return!1;var n=c[e.slotKey];return!(null!==n&&void 0!==n&&n.length&&!n.includes(e.mainStatKey))&&(e.location===a||!(e.exclude&&!x)&&(!(e.location&&!h)&&!(e.location&&h&&Z.includes(e.location))))})),b=Br(y,u,f),e.next=12,(0,A.V)(d,a,u,[]);case 12:if(w=e.sent){e.next=15;break}return e.abrupt("return");case 15:if(C=null===(n=(0,fn.Qo)(w.teamData,a)[a])||void 0===n?void 0:n.target.data[0]){e.next=18;break}return e.abrupt("return");case 18:if(Object.assign(C,(0,fn.b3)([C,Tr])),k=(0,de.Hm)(null!==(t=C.display)&&void 0!==t?t:{},o)){e.next=22;break}return e.abrupt("return");case 22:for(S=k,P=Object.entries(l).map((function(e){var n=(0,r.Z)(e,2),t=n[0],i=n[1];return t.endsWith("_")&&(i/=100),{value:we.ri.total[t],minimum:i}})).filter((function(e){return e.value&&e.minimum>-1/0})),O(void 0),E=new Promise((function(e){return Se.current=e})),K=[].concat((0,he.Z)(P.map((function(e){return e.value}))),[k]),D=b,R=zn(Nn(i,Object.values(b.values).flatMap((function(e){return e.map((function(e){return e.set}))}))),b),I=[].concat((0,he.Z)(P.map((function(e){return e.minimum}))),[-1/0]),M={tested:0,failed:0,skipped:0,total:NaN,startTime:performance.now()},s&&(K.push(we.ri.total[s]),I.push(-1/0)),z=D,K=(0,pn.tL)(K,C,(function(e){return"dyn"!==(0,r.Z)(e.path,1)[0]})),_=kn(K,I,D,p,i,{reaffine:!0,pruneArtRange:!0,pruneNodeRange:!0,pruneOrder:!0}),K=_.nodes,D=_.arts,K=(0,pn.tL)(K,{},(function(e){return!1})),N=s?K.pop():void 0,k=K.pop(),L={buildValues:Array(p).fill(0).map((function(e){return-1/0}))},T=8e6,q=4*H,G=R[Symbol.iterator](),F=[],W=[],V=new Set,U=[],X=K.map((function(e,n){return{value:e,min:I[n]}})).filter((function(e){return e.min>-1/0})),te=[],re=function(e){var n=new ln,t={command:"setup",id:e,arts:D,optimizationTarget:k,plotBase:N,maxBuilds:p,filters:X};if(n.postMessage(t,void 0),0===e){var a={command:"count",exclusion:i,arts:[D,z]};n.postMessage(a,void 0)}var s=void 0,l=new Promise((function(e){return s=e}));n.onmessage=function(){var e=(0,nn.Z)((0,en.Z)().mark((function e(t){var i,a,l,c,o,u,d,x;return(0,en.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=t.data,e.t0=i.command,e.next="interim"===e.t0?4:"split"===e.t0?9:"iterate"===e.t0?12:"finalize"===e.t0?14:"count"===e.t0?17:21;break;case 4:return M.tested+=i.tested,M.failed+=i.failed,M.skipped+=i.skipped,i.buildValues&&((a=L.buildValues).push.apply(a,(0,he.Z)(i.buildValues)),L.buildValues.sort((function(e,n){return n-e})).splice(p)),e.abrupt("break",22);case 9:return i.filter?(F.push(i.filter),V.add(i.id)):V.delete(i.id),W.push(i.id),e.abrupt("break",22);case 12:return W.push(i.id),e.abrupt("break",22);case 14:return n.terminate(),s(i),e.abrupt("return");case 17:return l=(0,r.Z)(i.counts,2),c=l[0],o=l[1],M.total=o,M.skipped+=o-c,e.abrupt("return");case 21:console.log("DEBUG",i);case 22:if(!W.length){e.next=36;break}if(u=W.pop(),d=U[u],x=void 0,F.length<q&&!(x=J())&&V.has(u)&&(x=$()),x||(x=Y()),!x){e.next=31;break}d.postMessage(x),e.next=34;break;case 31:return W.push(u),W.length===8*H&&function(){var e={command:"finalize"};U.forEach((function(n){return n.postMessage(e)}))}(),e.abrupt("break",36);case 34:e.next=22;break;case 36:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),U.push(n),E.then((function(){return n.terminate()})),te.push(l)},ie=0;ie<H;ie++)re(ie);for(ae=0;ae<7;ae++)W.push.apply(W,(0,he.Z)((0,de.w6)(0,H-1)));return se=setInterval((function(){return g((0,Ze.Z)({type:"active"},M))}),100),e.next=52,Promise.any([Promise.all(te),E]);case 52:le=e.sent,clearInterval(se),Se.current=function(){},le?(s&&(ue=Mn(le.map((function(e){return e.plotData}))),xe=we.ri.total[s],fe=Object.values(ue),"%"===ne.ZP.unit(null===(ce=S.info)||void 0===ce?void 0:ce.key)&&(fe=fe.map((function(e){return{value:100*e.value,plot:e.plot}}))),"%"===ne.ZP.unit(null===(oe=xe.info)||void 0===oe?void 0:oe.key)&&(fe=fe.map((function(e){var n=e.value,t=e.plot;return{value:n,plot:100*(null!==t&&void 0!==t?t:0)}}))),O({valueNode:S,plotNode:xe,data:fe})),pe=In(le.map((function(e){return e.builds})),p),ee({builds:pe.map((function(e){return e.artifactIds})),buildDate:Date.now()})):(M.tested=0,M.failed=0,M.skipped=0,M.total=0),g((0,Ze.Z)((0,Ze.Z)({},M),{},{type:"inactive",finishTime:performance.now()}));case 57:case"end":return e.stop()}}),e)}))),[a,d,ee,H,Q,B]),Ee=null!==(n=null===be||void 0===be?void 0:be.name)&&void 0!==n?n:"Character Name",Oe=(0,m.useCallback)((function(e){ee({plotBase:e}),O(void 0)}),[ee]),Ke=(0,m.useMemo)((function(){return Ce&&je&&{data:Ce,teamData:je}}),[Ce,je]);return(0,L.jsxs)(u.Z,{display:"flex",flexDirection:"column",gap:1,children:[Y&&(0,L.jsxs)(rn.Z,{severity:"warning",variant:"filled",children:[" Opps! It looks like you haven't added any artifacts to GO yet! You should go to the ",(0,L.jsx)(an.Z,{component:Z.rU,to:"/artifact",children:"Artifacts"})," page and add some!"]}),Ke&&(0,L.jsxs)(k.R.Provider,{value:Ke,children:[(0,L.jsxs)(pe.ZP,{container:!0,spacing:1,children:[(0,L.jsx)(pe.ZP,{item:!0,xs:12,sm:6,lg:3,display:"flex",flexDirection:"column",gap:1,children:(0,L.jsx)(u.Z,{children:(0,L.jsx)(un.Z,{characterKey:a,onClickTeammate:J})})}),(0,L.jsxs)(pe.ZP,{item:!0,xs:12,sm:6,lg:3,display:"flex",flexDirection:"column",gap:1,children:[(0,L.jsxs)(y.Z,{children:[(0,L.jsxs)(x.Z,{children:[(0,L.jsx)(V.Z,{gutterBottom:!0,children:"Main Stat"}),(0,L.jsx)(on.Z,{placement:"top",title:(0,L.jsxs)(V.Z,{children:[(0,L.jsx)("strong",{children:"Level Assumption"})," changes mainstat value to be at least a specific level. Does not change substats."]}),children:(0,L.jsx)(u.Z,{children:(0,L.jsx)(Zt,{mainStatAssumptionLevel:ie,setmainStatAssumptionLevel:function(e){return ee({mainStatAssumptionLevel:e})},disabled:b})})})]}),(0,L.jsx)(mr,{disabled:b})]}),(0,L.jsx)(vt,{})]}),(0,L.jsxs)(pe.ZP,{item:!0,xs:12,sm:6,lg:6,display:"flex",flexDirection:"column",gap:1,children:[(0,L.jsx)(ft,{disabled:b}),(0,L.jsx)(Mr,{disabled:b,artsDirty:I}),(0,L.jsx)(Ar,{disabled:b}),(0,L.jsx)(p.Z,{fullWidth:!0,startIcon:ae?(0,L.jsx)(ve.Z,{}):(0,L.jsx)(ge.Z,{}),color:ae?"success":"secondary",onClick:function(){return ee({allowPartial:!ae})},children:t(zr||(zr=(0,Qe.Z)(["tabOptimize.allowPartial"])))}),(0,L.jsxs)(y.Z,{children:[(0,L.jsx)(x.Z,{children:"Artifact Level Filter"}),(0,L.jsx)(cn.Z,{levelLow:fe,levelHigh:me,setLow:function(e){return ee({levelLow:e})},setHigh:function(e){return ee({levelHigh:e})},setBoth:function(e,n){return ee({levelLow:e,levelHigh:n})},disabled:b})]}),(0,L.jsx)(gr,{disabled:b})]})]}),(0,L.jsxs)(pe.ZP,{container:!0,spacing:1,children:[(0,L.jsx)(pe.ZP,{item:!0,flexGrow:1,children:(0,L.jsxs)(se.Z,{children:[(0,L.jsx)(p.Z,{disabled:!a||b||!re||!(0,de.Hm)(null===Ce||void 0===Ce?void 0:Ce.getDisplay(),re),color:a?"success":"warning",onClick:Pe,startIcon:(0,L.jsx)(l.Z,{}),children:"Generate Builds"}),(0,L.jsxs)(oe.Z,{disabled:b||!a,title:(0,L.jsxs)("span",{children:[(0,L.jsx)("b",{children:xe})," ",1===xe?"Build":"Builds"]}),children:[(0,L.jsx)(le.Z,{children:(0,L.jsx)(V.Z,{variant:"caption",color:"info.main",children:"Decreasing the number of generated build will decrease build calculation time for large number of builds."})}),(0,L.jsx)(G.Z,{}),vn.s.map((function(e){return(0,L.jsxs)(le.Z,{onClick:function(){return ee({maxBuildsToShow:e})},children:[e," ",1===e?"Build":"Builds"]},e)}))]}),(0,L.jsxs)(oe.Z,{disabled:b||!a,title:(0,L.jsxs)("span",{children:[(0,L.jsx)("b",{children:H})," ",1===H?"Thread":"Threads"]}),children:[(0,L.jsx)(le.Z,{children:(0,L.jsx)(V.Z,{variant:"caption",color:"info.main",children:"Increasing the number of threads will speed up build time, but will use more CPU power."})}),(0,L.jsx)(G.Z,{}),(0,de.w6)(1,Or).reverse().map((function(e){return(0,L.jsxs)(le.Z,{onClick:function(){return U(e)},children:[e," ",1===e?"Thread":"Threads"]},e)}))]}),(0,L.jsx)(p.Z,{disabled:!b,color:"error",onClick:function(){return Se.current()},startIcon:(0,L.jsx)(tn.Z,{}),children:"Cancel"})]})}),(0,L.jsxs)(pe.ZP,{item:!0,children:[(0,L.jsx)("span",{children:"Optimization Target: "}),(0,L.jsx)(vr.Z,{optimizationTarget:re,setTarget:function(e){return ee({optimizationTarget:e})},disabled:!!b})]})]}),!!a&&(0,L.jsx)(Ct,{status:v,characterName:Ee,maxBuildsToShow:xe}),o&&(0,L.jsx)(u.Z,{children:(0,L.jsx)(dr,{disabled:b,chartData:E,plotBase:te,setPlotBase:Oe})}),(0,L.jsx)(y.Z,{children:(0,L.jsxs)(x.Z,{children:[(0,L.jsxs)(u.Z,{display:"flex",alignItems:"center",gap:1,mb:1,children:[(0,L.jsx)(V.Z,{sx:{flexGrow:1},children:ce?(0,L.jsxs)("span",{children:["Showing ",(0,L.jsx)("strong",{children:ce.length})," Builds generated for ",Ee,". ",!!ue&&(0,L.jsxs)("span",{children:["Build generated on: ",(0,L.jsx)("strong",{children:new Date(ue).toLocaleString()})]})]}):(0,L.jsx)("span",{children:"Select a character to generate builds."})}),(0,L.jsx)(p.Z,{disabled:!ce.length,color:"error",onClick:function(){return ee({builds:[],buildDate:0})},children:"Clear Builds"})]}),(0,L.jsxs)(pe.ZP,{container:!0,display:"flex",spacing:1,children:[(0,L.jsx)(pe.ZP,{item:!0,children:(0,L.jsx)(w.Hn,{size:"small"})}),(0,L.jsx)(pe.ZP,{item:!0,children:(0,L.jsx)(w.oX,{size:"small"})}),(0,L.jsx)(pe.ZP,{item:!0,flexGrow:1}),(0,L.jsx)(pe.ZP,{item:!0,children:(0,L.jsxs)(dn.Z,{exclusive:!0,value:s,onChange:function(e,n){return $({compareData:n})},size:"small",children:[(0,L.jsx)(sn.Z,{value:!1,disabled:!s,children:(0,L.jsx)("small",{children:"Show New artifact Stats"})}),(0,L.jsx)(sn.Z,{value:!0,disabled:s,children:(0,L.jsx)("small",{children:"Compare against equipped artifacts"})})]})})]})]})}),(0,L.jsx)(xn.Provider,{value:re,children:(0,L.jsx)(Gr,{buildsArts:ke,characterKey:a,data:Ce,compareData:s,disabled:!!b})})]})]})}function Gr(e){var n=e.buildsArts,t=e.characterKey,r=e.data,i=e.compareData,a=e.disabled;return(0,m.useMemo)((function(){return(0,L.jsx)(m.Suspense,{fallback:(0,L.jsx)(d.Z,{variant:"rectangular",width:"100%",height:600}),children:null===n||void 0===n?void 0:n.map((function(e,n){return t&&r&&(0,L.jsx)(Fr,{characterKey:t,build:e,oldData:r,children:(0,L.jsx)(Ut,{index:n,compareBuild:i,disabled:a})},n+e.join())}))})}),[n,t,r,i,a])}function Fr(e){var n=e.children,t=e.characterKey,r=e.build,i=e.oldData,a=ht(t).buildSetting.mainStatAssumptionLevel,s=(0,A.Z)(t,a,r),l=(0,m.useMemo)((function(){return s&&{data:s[t].target,teamData:s,oldData:i}}),[s,i,t]);return l?(0,L.jsx)(k.R.Provider,{value:l,children:n}):null}var Wr,Vr,Hr=t(14361),Ur=t(90690),$r=t(96874),Jr=t(97719),Yr=t(95193),Xr=t(30418),Qr=t(15678),ei=t(901),ni=t(90543),ti=t(44824),ri=t(70645),ii=t(46956),ai=t(99405);function si(e){var n=e.artId,t=e.weaponId,i=(0,j.$)("page_character").t,a=(0,E.Z)(!1),s=(0,r.Z)(a,3),l=s[0],c=s[1],o=s[2],u=(0,m.useContext)(hn.t).database,x=(0,m.useContext)(C.K).character,h=x.key,f=x.equippedArtifacts,Z=ht(h).buildSetting.mainStatAssumptionLevel,v=(0,m.useContext)(k.R).data,g=(0,m.useMemo)((function(){var e=u.arts.get(null!==n&&void 0!==n?n:""),t=(0,de.xh)(f,(function(n,t){return t===(null===e||void 0===e?void 0:e.slotKey)?e:u.arts.get(n)}));return Object.values(t)}),[u,f,n]),y=(0,A.Z)(h,Z,g,t?u.weapons.get(t):void 0),b=(0,m.useMemo)((function(){return y&&{data:y[h].target,teamData:y,oldData:v}}),[h,y,v]);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(X.Z,{open:l,onClose:o,containerProps:{maxWidth:"xl"},children:(0,L.jsx)(m.Suspense,{fallback:(0,L.jsx)(d.Z,{variant:"rectangular",width:"100%",height:600}),children:b&&(0,L.jsx)(k.R.Provider,{value:b,children:(0,L.jsx)(Ut,{compareBuild:!0,extraButtons:(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(w.Hn,{size:"small"}),(0,L.jsx)(w.oX,{size:"small"}),(0,L.jsx)(p.Z,{size:"small",color:"error",onClick:o,children:(0,L.jsx)(tn.Z,{})})]})})})})}),(0,L.jsx)(nr.Z,{title:(0,L.jsx)(V.Z,{children:i(Wr||(Wr=(0,Qe.Z)(["tabEquip.compare"])))}),placement:"top",arrow:!0,children:(0,L.jsx)(p.Z,{color:"info",size:"small",onClick:c,children:(0,L.jsx)(ai.Z,{})})})]})}var li={xs:6,sm:6,md:9,lg:12,xl:12},ci=(0,m.lazy)((function(){return t.e(23).then(t.bind(t,80367))}));function oi(e){var n=e.onChangeId,t=e.slotKey,i=e.show,a=e.onClose,s=(0,j.$)("page_character").t,l=(0,m.useContext)(hn.t).database,c=(0,m.useCallback)((function(e){n(e),a()}),[n,a]),o=(0,m.useCallback)((function(e,n){return(0,Ze.Z)((0,Ze.Z)((0,Ze.Z)({},e),n),{},{slotKeys:[t]})}),[t]),h=(0,m.useReducer)(o,(0,Ze.Z)((0,Ze.Z)({},(0,ti.Af)()),{},{slotKeys:[t]})),f=(0,r.Z)(h,2),p=f[0],Z=f[1],v=(0,jn.Z)(),y=(0,r.Z)(v,2),w=y[0],C=y[1];(0,m.useEffect)((function(){return l.arts.followAny(C)}),[l,C]);var k=(0,ri.Z)(),S=(0,m.useMemo)((function(){return(0,ti.EM)()}),[]),P=(0,m.useMemo)((function(){var e=(0,ii.C)(p,S);return w&&l.arts.values.filter(e).map((function(e){return e.id})).slice(0,li[k])}),[w,l,S,p,k]);return(0,L.jsx)(X.Z,{open:i,onClose:a,containerProps:{maxWidth:"xl"},children:(0,L.jsxs)(g.Z,{children:[(0,L.jsxs)(x.Z,{sx:{py:1,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,L.jsxs)(V.Z,{variant:"h6",children:[t?(0,L.jsx)(Y.Z,{src:Kt.Z.slot[t]}):null," ",s(Vr||(Vr=(0,Qe.Z)(["tabEquip.swapArt"])))]}),(0,L.jsx)(b.Z,{onClick:a})]}),(0,L.jsx)(G.Z,{}),(0,L.jsxs)(x.Z,{children:[(0,L.jsx)(m.Suspense,{fallback:(0,L.jsx)(d.Z,{variant:"rectangular",width:"100%",height:200}),children:(0,L.jsx)(ci,{filterOption:p,filterOptionDispatch:Z,disableSlotFilter:!0})}),(0,L.jsx)(u.Z,{mt:1,children:(0,L.jsx)(m.Suspense,{fallback:(0,L.jsx)(d.Z,{variant:"rectangular",width:"100%",height:300}),children:(0,L.jsx)(pe.ZP,{container:!0,spacing:1,columns:{xs:2,md:3,lg:4},children:P.map((function(e){return(0,L.jsx)(pe.ZP,{item:!0,xs:1,children:(0,L.jsx)(Ht.Z,{artifactId:e,extraButtons:(0,L.jsx)(si,{artId:e}),onClick:c})},e)}))})})})]})]})})}var ui,di,xi,hi,fi,pi,mi,ji=t(58165),Zi=t(75308),vi=t(66045),gi=(0,Zi.X)((0,he.Z)(I.wC));function yi(e){var n=e.onChangeId,t=e.weaponTypeKey,i=e.show,a=e.onClose,s=(0,j.$)(["page_character","page_weapon","weaponNames_gen"]).t,l=(0,m.useContext)(hn.t).database,c=(0,m.useCallback)((function(e){n(e),a()}),[n,a]),o=(0,jn.Z)(),d=(0,r.Z)(o,2),h=d[0],f=d[1];(0,m.useEffect)((function(){return l.weapons.followAny(f)}),[f,l]);var p=(0,D.Z)((function(){return Bt.Z.getAll}),[]),Z=(0,m.useMemo)((function(){return p&&(0,vi.Xg)(p)}),[p]),v=(0,m.useMemo)((function(){return p&&(0,vi.Sn)(p)}),[p]),y=(0,m.useState)([5,4,3]),w=(0,r.Z)(y,2),C=w[0],k=w[1],S=(0,m.useState)(""),P=(0,r.Z)(S,2),E=P[0],O=P[1],K=(0,m.useDeferredValue)(E),A=(0,m.useMemo)((function(){var e;return null!==(e=Z&&v&&h&&l.weapons.values.filter((0,ii.C)({weaponType:t,rarity:C,name:K},Z)).sort((0,ii.e)("level",!1,v)).map((function(e){return e.id})))&&void 0!==e?e:[]}),[h,l,Z,v,C,t,K]);return(0,L.jsx)(X.Z,{open:i,onClose:a,children:(0,L.jsxs)(g.Z,{children:[(0,L.jsx)(x.Z,{sx:{py:1},children:(0,L.jsxs)(pe.ZP,{container:!0,children:[(0,L.jsx)(pe.ZP,{item:!0,flexGrow:1,children:(0,L.jsxs)(V.Z,{variant:"h6",children:[t?(0,L.jsx)(Y.Z,{src:Kt.Z.weaponTypes[t]}):null," ",s(ui||(ui=(0,Qe.Z)(["page_character:tabEquip.swapWeapon"])))]})}),(0,L.jsx)(pe.ZP,{item:!0,children:(0,L.jsx)(b.Z,{onClick:a})})]})}),(0,L.jsx)(G.Z,{}),(0,L.jsxs)(x.Z,{children:[(0,L.jsxs)(pe.ZP,{container:!0,spacing:1,mb:1,children:[(0,L.jsx)(pe.ZP,{item:!0,children:(0,L.jsx)(dn.Z,{sx:{height:"100%"},value:C,size:"small",children:I.wC.map((function(e){return(0,L.jsx)(sn.Z,{value:e,onClick:function(){return k(gi(C,e))},children:(0,L.jsxs)(u.Z,{display:"flex",gap:1,children:[(0,L.jsx)("strong",{children:e}),(0,L.jsx)(ut.q,{stars:1})]})},e)}))})}),(0,L.jsx)(pe.ZP,{item:!0,flexGrow:1,children:(0,L.jsx)(ji.Z,{autoFocus:!0,size:"small",value:E,onChange:function(e){return O(e.target.value)},label:s("page_weapon:weaponName"),sx:{height:"100%"},InputProps:{sx:{height:"100%"}}})})]}),(0,L.jsx)(pe.ZP,{container:!0,spacing:1,children:A.map((function(e){return(0,L.jsx)(pe.ZP,{item:!0,xs:6,sm:6,md:4,lg:3,children:(0,L.jsx)(ni.Z,{weaponId:e,onClick:c,extraButtons:(0,L.jsx)(si,{weaponId:e})})},e)}))})]})]})})}var bi=(0,m.lazy)((function(){return t.e(923).then(t.bind(t,74476))}));function wi(){var e,n=(0,m.useContext)(C.K),t=n.character,i=t.equippedWeapon,a=t.key,s=n.characterSheet,l=ht(a).buildSetting.mainStatAssumptionLevel,c=(0,m.useContext)(k.R),o=c.teamData,d=c.data,h=null===(e=o[a])||void 0===e?void 0:e.weaponSheet,f=(0,m.useState)(""),p=(0,r.Z)(f,2),j=p[0],Z=p[1],v=(0,m.useCallback)((function(){return Z(i)}),[i]),g=(0,m.useCallback)((function(){return Z("")}),[]);(0,m.useEffect)((function(){j&&j!==i&&Z(i)}),[j,i]);var b=(0,Xr.Z)(),w=(0,Yr.Z)(b.breakpoints.up("lg")),S=(0,m.useMemo)((function(){return h&&h.document.length>0&&(0,L.jsx)(y.Z,{children:(0,L.jsx)(x.Z,{children:(0,L.jsx)(Fn.Z,{sections:h.document})})})}),[h]),P=(0,mn.Z)("charMeta_".concat(a),Zn.B),E=(0,r.Z)(P,1)[0].rvFilter,O=(0,m.useDeferredValue)(E),K=(0,m.useMemo)((function(){return new Set(O)}),[O]);return(0,L.jsxs)(u.Z,{children:[(0,L.jsx)(m.Suspense,{fallback:!1,children:(0,L.jsx)(bi,{weaponId:j,footer:!0,onClose:g,extraButtons:(0,L.jsx)(Si,{weaponTypeKey:s.weaponTypeKey})})}),(0,L.jsxs)(pe.ZP,{container:!0,spacing:1,children:[w&&(0,L.jsxs)(pe.ZP,{item:!0,xs:12,md:12,lg:3,xl:3,sx:{display:"flex",flexDirection:"column",gap:1},children:[S&&S,(0,L.jsx)(Ei,{})]}),(0,L.jsxs)(pe.ZP,{item:!0,xs:12,md:12,lg:9,xl:9,container:!0,spacing:1,children:[(0,L.jsx)(pe.ZP,{item:!0,xs:12,sm:6,md:4,display:"flex",flexDirection:"column",gap:1,children:(0,L.jsx)(ni.Z,{weaponId:i,onEdit:v,canEquip:!0,extraButtons:(0,L.jsx)(ki,{weaponTypeKey:s.weaponTypeKey})})}),I.eV.map((function(e){return(0,L.jsx)(pe.ZP,{item:!0,xs:12,sm:6,md:4,children:d.get(we.ri.art[e].id).value?(0,L.jsx)(Ht.Z,{artifactId:d.get(we.ri.art[e].id).value,mainStatAssumptionLevel:l,effFilter:K,extraButtons:(0,L.jsx)(Pi,{slotKey:e}),editor:!0,canExclude:!0,canEquip:!0}):(0,L.jsx)(Ci,{slotKey:e})},e)}))]}),!w&&(0,L.jsxs)(pe.ZP,{item:!0,xs:12,md:12,xl:3,container:!0,spacing:1,children:[S&&(0,L.jsx)(pe.ZP,{item:!0,xs:12,md:6,lg:4,children:S}),(0,L.jsx)(pe.ZP,{item:!0,xs:12,md:6,lg:4,sx:{display:"flex",flexDirection:"column",gap:1},children:(0,L.jsx)(Ei,{})})]})]})]})}function Ci(e){var n=e.slotKey,t=(0,m.useContext)(C.K).character.key,i=(0,m.useContext)(hn.t).database,a=(0,E.Z)(),s=(0,r.Z)(a,3),l=s[0],c=s[1],o=s[2];return(0,L.jsxs)(y.Z,{sx:{height:"100%",width:"100%",minHeight:300,display:"flex",flexDirection:"column"},children:[(0,L.jsx)(x.Z,{children:(0,L.jsx)(V.Z,{children:(0,L.jsx)(ct.ZP,{slotKey:n})})}),(0,L.jsx)(G.Z,{}),(0,L.jsxs)(u.Z,{sx:{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center"},children:[(0,L.jsx)(oi,{slotKey:n,show:l,onClose:o,onChangeId:function(e){return i.arts.set(e,{location:t})}}),(0,L.jsx)(p.Z,{onClick:c,color:"info",sx:{borderRadius:"1em"},children:(0,L.jsx)(Jr.Z,{sx:{height:100,width:100}})})]})]})}function ki(e){var n=e.weaponTypeKey,t=(0,j.$)("page_character").t,i=(0,m.useContext)(C.K).character.key,a=(0,m.useContext)(hn.t).database,s=(0,E.Z)(),l=(0,r.Z)(s,3),c=l[0],o=l[1],u=l[2];return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(nr.Z,{title:(0,L.jsx)(V.Z,{children:t(di||(di=(0,Qe.Z)(["tabEquip.swapWeapon"])))}),placement:"top",arrow:!0,children:(0,L.jsx)(p.Z,{color:"info",size:"small",onClick:o,children:(0,L.jsx)(Jr.Z,{})})}),(0,L.jsx)(yi,{weaponTypeKey:n,onChangeId:function(e){return a.weapons.set(e,{location:i})},show:c,onClose:u})]})}function Si(e){var n=e.weaponTypeKey,t=(0,j.$)("page_character").t,i=(0,m.useContext)(C.K).character.key,a=(0,m.useContext)(hn.t).database,s=(0,E.Z)(),l=(0,r.Z)(s,3),c=l[0],o=l[1],u=l[2];return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(p.Z,{color:"info",onClick:o,startIcon:(0,L.jsx)(Jr.Z,{}),children:t(xi||(xi=(0,Qe.Z)(["tabEquip.swapWeapon"])))}),(0,L.jsx)(yi,{weaponTypeKey:n,onChangeId:function(e){return a.weapons.set(e,{location:i})},show:c,onClose:u})]})}function Pi(e){var n=e.slotKey,t=(0,j.$)("page_character").t,i=(0,m.useContext)(C.K).character.key,a=(0,m.useContext)(hn.t).database,s=(0,E.Z)(),l=(0,r.Z)(s,3),c=l[0],o=l[1],u=l[2];return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(nr.Z,{title:(0,L.jsx)(V.Z,{children:t(hi||(hi=(0,Qe.Z)(["tabEquip.swapArt"])))}),placement:"top",arrow:!0,children:(0,L.jsx)(p.Z,{color:"info",size:"small",onClick:o,children:(0,L.jsx)(Jr.Z,{})})}),(0,L.jsx)(oi,{slotKey:n,show:c,onClose:u,onChangeId:function(e){return a.arts.set(e,{location:i})}})]})}function Ei(){var e,n=(0,j.$)(["page_character","artifact"]).t,t=(0,m.useContext)(hn.t).database,i=(0,m.useContext)(C.K),a=i.character,s=i.character,l=s.key,c=s.equippedArtifacts,o=(0,m.useContext)(k.R).data,u=(0,D.Z)((function(){return Gn.y.getAll}),[]),d=(0,m.useMemo)((function(){return!!Object.values(c).filter((function(e){return e})).length}),[c]),h=(0,m.useCallback)((function(){a&&window.confirm("Do you want to move all currently equipped artifacts to inventory?")&&Object.values(c).forEach((function(e){return t.arts.set(e,{location:""})}))}),[a,t,c]),f=(0,m.useMemo)((function(){return u&&Gn.y.setEffects(u,o)}),[u,o]),Z=(0,mn.Z)("charMeta_".concat(l),Zn.B),v=(0,r.Z)(Z,2),b=v[0].rvFilter,w=v[1],S=(0,m.useCallback)((function(e){return w({rvFilter:e})}),[w]),P=(0,E.Z)(),O=(0,r.Z)(P,3),K=O[0],A=O[1],R=O[2],I=(0,m.useDeferredValue)(b),M=(0,m.useMemo)((function(){var e=Object.values(c).reduce((function(e,n){var r=t.arts.get(n);if(r){var i=Dt.Z.getArtifactEfficiency(r,new Set(I)),a=i.currentEfficiency,s=i.maxEfficiency,l=Dt.Z.getArtifactEfficiency(r,new Set(Nr._)),c=l.currentEfficiency,o=l.maxEfficiency;e.currentEfficiency=e.currentEfficiency+a,e.maxEfficiency=e.maxEfficiency+s,e.currentEfficiency_=e.currentEfficiency_+c,e.maxEfficiency_=e.maxEfficiency_+o}return e}),{currentEfficiency:0,currentEfficiency_:0,maxEfficiency:0,maxEfficiency_:0}),r=e.currentEfficiency,i=e.currentEfficiency_,a=e.maxEfficiency,s=e.maxEfficiency_;return{rvField:{text:n(fi||(fi=(0,Qe.Z)(["artifact:editor.curSubEff"]))),value:r-i?(0,L.jsxs)("span",{children:[(0,L.jsx)(ei.Z,{value:r,max:4500,valid:!0})," / ",(0,L.jsx)(ei.Z,{value:i,max:4500,valid:!0})]}):(0,L.jsx)(ei.Z,{value:r,max:4500,valid:!0})},rvmField:{text:n(pi||(pi=(0,Qe.Z)(["artifact:editor.maxSubEff"]))),canShow:function(){return!!(i-s)},value:a-s?(0,L.jsxs)("span",{children:[(0,L.jsx)(ei.Z,{value:a,max:4500,valid:!0})," / ",(0,L.jsx)(ei.Z,{value:s,max:4500,valid:!0})]}):(0,L.jsx)(ei.Z,{value:a,max:4500,valid:!0})}}}),[n,I,c,t]),z=M.rvField,_=M.rvmField;return(0,L.jsxs)(y.Z,{children:[d&&(0,L.jsx)(p.Z,{color:"error",onClick:h,fullWidth:!0,sx:{borderBottomRightRadius:0,borderBottomLeftRadius:0},children:n(mi||(mi=(0,Qe.Z)(["tabEquip.unequipArts"])))}),(0,L.jsx)(x.Z,{children:(0,L.jsxs)(fe.Z,{spacing:1,children:[(0,L.jsxs)(g.Z,{children:[(0,L.jsx)(p.Z,{fullWidth:!0,color:"info",startIcon:(0,L.jsx)(Bn.Z,{}),sx:{borderBottomLeftRadius:0,borderBottomRightRadius:0},onClick:A,children:"RV Filter"}),(0,L.jsx)(X.Z,{open:K,onClose:R,children:(0,L.jsx)(g.Z,{children:(0,L.jsx)(x.Z,{children:(0,L.jsx)(Qr.Z,{selectedKeys:b,onChange:S})})})}),(0,L.jsxs)(Ne.lD,{children:[(0,L.jsx)(Ne.ms,{field:z,component:me.ZP}),(null===_||void 0===_||null===(e=_.canShow)||void 0===e?void 0:e.call(_,o))&&(0,L.jsx)(Ne.ms,{field:_,component:me.ZP})]})]}),u&&f&&Object.entries(f).flatMap((function(e){var n=(0,r.Z)(e,2),t=n[0];return n[1].map((function(e){return(0,L.jsx)(g.Z,{sx:{display:"flex",flexDirection:"column",gap:2},children:(0,L.jsx)(Wn,{setKey:t,setNumKey:e},t+e)},t+e)}))}))]})})]})}function Oi(){var e=(0,m.useRef)(),n=(0,m.useCallback)((function(){var n,t;return null===e||void 0===e||null===(n=e.current)||void 0===n||null===(t=n.scrollIntoView)||void 0===t?void 0:t.call(n,{behavior:"smooth"})}),[e]);return(0,L.jsxs)(fe.Z,{spacing:1,children:[(0,L.jsxs)(pe.ZP,{container:!0,spacing:1,sx:{justifyContent:"center"},children:[(0,L.jsx)(pe.ZP,{item:!0,xs:8,sm:5,md:4,lg:2.3,children:(0,L.jsx)(Di,{})}),(0,L.jsxs)(pe.ZP,{item:!0,xs:12,sm:7,md:8,lg:9.7,sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,L.jsx)(Ki,{onClick:n}),(0,L.jsx)(y.Z,{sx:{flexGrow:1,p:1},children:(0,L.jsx)(Lt,{})})]})]}),(0,L.jsx)(u.Z,{ref:e,children:(0,L.jsx)(wi,{})})]})}function Ki(e){var n=e.onClick,t=(0,m.useContext)(C.K).character.equippedWeapon,r=(0,m.useContext)(k.R).data;return(0,L.jsxs)(pe.ZP,{container:!0,spacing:1,columns:{xs:2,sm:2,md:3,lg:6,xl:6},children:[(0,L.jsx)(pe.ZP,{item:!0,xs:1,children:(0,L.jsx)(Ft,{weaponId:t,BGComponent:y.Z,onClick:n})}),I.eV.map((function(e){return(0,L.jsx)(pe.ZP,{item:!0,xs:1,children:(0,L.jsx)(Mt,{artifactId:r.get(we.ri.art[e].id).value,slotKey:e,BGComponent:y.Z,onClick:n})},e)}))]})}function Di(){var e,n=(0,m.useContext)(C.K),t=n.characterSheet,i=n.character,a=i.key,s=i.team,l=(0,m.useContext)(k.R).data,c=(0,K.Z)(a),o=(0,v.s0)(),d=l.get(we.ri.charEle).value,h=t.weaponTypeKey,f=l.get(we.ri.lvl).value,p=l.get(we.ri.asc).value,j=l.get(we.ri.constellation).value,Z={auto:l.get(we.ri.total.auto).value,skill:l.get(we.ri.total.skill).value,burst:l.get(we.ri.total.burst).value},g={auto:l.get(we.ri.bonus.auto).value,skill:l.get(we.ri.bonus.skill).value,burst:l.get(we.ri.bonus.burst).value},b=(0,mn.Z)("charMeta_".concat(a),Zn.B),w=(0,r.Z)(b,2),S=w[0].favorite,E=w[1];return(0,L.jsxs)(y.Z,{sx:{height:"100%"},children:[(0,L.jsxs)(u.Z,{sx:{position:"relative"},children:[(0,L.jsxs)(u.Z,{sx:{position:"absolute",width:"100%",height:"100%"},children:[(0,L.jsx)(V.Z,{variant:"h6",sx:{position:"absolute",left:"50%",bottom:0,transform:"translate(-50%, -50%)",opacity:.75},children:(0,L.jsx)(ut.q,{stars:t.rarity,colored:!0})}),(0,L.jsx)(u.Z,{sx:{position:"absolute",left:"50%",bottom:"5%",transform:"translate(-50%, -50%)",opacity:.85,width:"100%",display:"flex",justifyContent:"center",px:1},children:(0,L.jsx)(ye.Z,{color:d,sx:{height:"auto"},label:(0,L.jsxs)(V.Z,{variant:"h6",sx:{display:"flex",gap:1,alignItems:"center"},children:[Oe.hJ[d],(0,L.jsx)(u.Z,{sx:{whiteSpace:"normal",textAlign:"center"},children:t.name}),(0,L.jsx)(Y.Z,{src:null===(e=Kt.Z.weaponTypes)||void 0===e?void 0:e[h]})]})})}),(0,L.jsx)(u.Z,{sx:{position:"absolute",left:0,top:0},children:(0,L.jsx)(Se.Z,{sx:{p:1},color:"error",onClick:function(){return E({favorite:!S})},children:S?(0,L.jsx)(Hr.Z,{}):(0,L.jsx)(Ur.Z,{})})}),(0,L.jsx)(V.Z,{sx:{p:1,position:"absolute",right:0,top:0,opacity:.8},children:(0,L.jsx)(Q.Z,{children:P.Z.getLevelString(f,p)})})]}),(0,L.jsx)(u.Z,{src:t.cardImg,component:"img",width:"100%",height:"auto"})]}),(0,L.jsxs)(x.Z,{children:[(0,L.jsx)(Pt.Z,{sx:{p:1},onClick:function(){return o("talent")},children:(0,L.jsx)(pe.ZP,{container:!0,spacing:1,mt:-1,children:["auto","skill","burst"].map((function(e){var n;return(0,L.jsx)(pe.ZP,{item:!0,xs:4,children:(0,L.jsx)($r.Z,{badgeContent:Z[e],color:g[e]?"info":"secondary",overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},sx:{width:"100%",height:"100%","& > .MuiBadge-badge":{fontSize:"1.25em",padding:".25em .4em",borderRadius:".5em",lineHeight:1,height:"1.25em"}},children:(0,L.jsx)(u.Z,{component:"img",src:null===(n=t.getTalentOfKey(e,d))||void 0===n?void 0:n.img,width:"100%",height:"auto"})})},e)}))})}),(0,L.jsx)(V.Z,{sx:{textAlign:"center",mt:1},variant:"h6",children:t.constellationName}),(0,L.jsx)(pe.ZP,{container:!0,spacing:1,children:(0,de.w6)(1,6).map((function(e){var n;return(0,L.jsx)(pe.ZP,{item:!0,xs:4,children:(0,L.jsx)(Pt.Z,{onClick:function(){return c({constellation:e===j?e-1:e})},children:(0,L.jsx)(u.Z,{component:"img",src:null===(n=t.getTalentOfKey("constellation".concat(e),d))||void 0===n?void 0:n.img,sx:(0,Ze.Z)({},j>=e?{}:{filter:"brightness(50%)"}),width:"100%",height:"auto"})})},e)}))}),(0,L.jsx)(Pt.Z,{sx:{p:1},onClick:function(){return o("teambuffs")},children:(0,L.jsx)(pe.ZP,{container:!0,columns:3,spacing:1,children:(0,de.w6)(0,2).map((function(e){return(0,L.jsx)(pe.ZP,{item:!0,xs:1,height:"100%",children:(0,L.jsx)(Pr.Z,{characterKey:s[e],index:e})},e)}))})})]})]})}var Ai={xs:12,sm:6,md:4};function Ri(){var e=(0,m.useContext)(C.K),n=e.character,t=e.characterSheet,i=(0,m.useContext)(k.R).data,a=(0,K.Z)(n.key),s=i.get(we.ri.charEle).value,l=i.get(we.ri.asc).value,c=i.get(we.ri.constellation).value,o=(0,Xr.Z)(),d=(0,Yr.Z)(o.breakpoints.up("lg")),h=(0,m.useMemo)((function(){return(0,de.w6)(1,6).map((function(e){return(0,L.jsx)(zi,{talentKey:"constellation".concat(e),subtitle:"Constellation Lv. ".concat(e),onClickTitle:function(){return a({constellation:e===c?e-1:e})}})}))}),[c,a]);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(Ii,{}),(0,L.jsxs)(pe.ZP,{container:!0,spacing:1,children:[d&&(0,L.jsxs)(pe.ZP,{item:!0,xs:12,md:12,lg:3,sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,L.jsx)(y.Z,{children:(0,L.jsx)(x.Z,{children:(0,L.jsxs)(V.Z,{variant:"h6",sx:{textAlign:"center"},children:["Constellation Lv. ",c]})})}),h.map((function(e,n){return(0,L.jsx)(u.Z,{sx:{opacity:c>=n+1?1:.5},children:e},n)}))]}),(0,L.jsxs)(pe.ZP,{item:!0,xs:12,md:12,lg:9,container:!0,spacing:1,children:[[["auto","Normal/Charged Attack"],["skill","Elemental Skill"],["burst","Elemental Burst"]].map((function(e){var n=(0,r.Z)(e,2),t=n[0],i=n[1];return(0,L.jsx)(pe.ZP,(0,Ze.Z)((0,Ze.Z)({item:!0},Ai),{},{children:(0,L.jsx)(zi,{talentKey:t,subtitle:i})}),t)})),!!t.getTalentOfKey("sprint",s)&&(0,L.jsx)(pe.ZP,(0,Ze.Z)((0,Ze.Z)({item:!0},Ai),{},{children:(0,L.jsx)(zi,{talentKey:"sprint",subtitle:"Alternative Sprint"})})),!!t.getTalentOfKey("passive",s)&&(0,L.jsx)(pe.ZP,(0,Ze.Z)((0,Ze.Z)({item:!0},Ai),{},{children:(0,L.jsx)(zi,{talentKey:"passive",subtitle:"Passive"})})),[["passive1","Unlocked at Ascension 1",1],["passive2","Unlocked at Ascension 4",4],["passive3","Unlocked by Default",0]].map((function(e){var n=(0,r.Z)(e,3),i=n[0],a=n[1],c=n[2],o=l>=c;return t.getTalentOfKey(i,s)?(0,L.jsx)(pe.ZP,(0,Ze.Z)((0,Ze.Z)({item:!0,style:{opacity:o?1:.5}},Ai),{},{children:(0,L.jsx)(zi,{talentKey:i,subtitle:a})}),i):null}))]}),!d&&(0,L.jsxs)(pe.ZP,{item:!0,xs:12,md:12,lg:3,container:!0,spacing:1,children:[(0,L.jsx)(pe.ZP,{item:!0,xs:12,children:(0,L.jsx)(y.Z,{children:(0,L.jsx)(x.Z,{children:(0,L.jsxs)(V.Z,{variant:"h6",sx:{textAlign:"center"},children:["Constellation Lv. ",c]})})})}),h.map((function(e,n){return(0,L.jsx)(pe.ZP,(0,Ze.Z)((0,Ze.Z)({item:!0,sx:{opacity:c>=n+1?1:.5}},Ai),{},{children:e}),n)}))]})]})]})}function Ii(){var e=(0,m.useContext)(k.R).data.getDisplay().reaction;return(0,L.jsx)(y.Z,{children:(0,L.jsx)(x.Z,{children:(0,L.jsx)(pe.ZP,{container:!0,spacing:1,children:Object.entries(e).map((function(e){var n=(0,r.Z)(e,2),t=n[0],i=n[1];return(0,L.jsx)(pe.ZP,{item:!0,children:(0,L.jsx)(g.Z,{children:(0,L.jsx)(x.Z,{sx:{p:1,"&:last-child":{pb:1}},children:(0,L.jsx)(Ne.JW,{node:i})})})},t)}))})})})}var Mi=[1,1,2,4,6,8,10];function zi(e){var n=e.talentKey,t=e.subtitle,r=e.onClickTitle,i=(0,m.useContext)(C.K),a=i.character.talent,s=i.characterSheet,l=i.characterDispatch,c=(0,m.useContext)(k.R).data,o=(0,m.useCallback)((function(e){return(0,L.jsx)(Pt.Z,{onClick:r,children:e})}),[r]),d=(0,m.useCallback)((function(e,n){return l({talent:(0,Ze.Z)((0,Ze.Z)({},a),{},(0,_r.Z)({},e,n))})}),[a,l]),h=null;if(n in a){var f=c.get(we.ri.bonus[n]).value,p=c.get(we.ri.total[n]).value,j=c.get(we.ri.asc).value;h=(0,L.jsx)(oe.Z,{fullWidth:!0,title:"Talent Lv. ".concat(p),color:f?"info":"primary",sx:{borderRadius:0},children:(0,de.w6)(1,Mi[j]).map((function(e){return(0,L.jsxs)(le.Z,{selected:a[n]===e,disabled:a[n]===e,onClick:function(){return d(n,e)},children:["Talent Lv. ",e+f]},e)}))})}var Z=s.getTalentOfKey(n,c.get(we.ri.charEle).value);return(0,L.jsxs)(y.Z,{sx:{height:"100%"},children:[h,(0,L.jsxs)(x.Z,{children:[(0,L.jsx)(Rt.Z,{condition:!!r,wrapper:o,children:(0,L.jsxs)(pe.ZP,{container:!0,sx:{flexWrap:"nowrap"},children:[(0,L.jsx)(pe.ZP,{item:!0,children:(0,L.jsx)(u.Z,{component:"img",src:null===Z||void 0===Z?void 0:Z.img,sx:{width:60,height:"auto"}})}),(0,L.jsxs)(pe.ZP,{item:!0,flexGrow:1,sx:{pl:1},children:[(0,L.jsx)(V.Z,{variant:"h6",children:null===Z||void 0===Z?void 0:Z.name}),(0,L.jsx)(V.Z,{variant:"subtitle1",children:t})]})]})}),null!==Z&&void 0!==Z&&Z.sections?(0,L.jsx)(Fn.Z,{sections:Z.sections,hideDesc:!0,hideHeader:function(e){var t,r=null===(t=e.header)||void 0===t?void 0:t.action;return!(!r||"string"===typeof r)&&r.props.children.props.key18.includes(n)}}):null]})]})}var _i=t(43992),Ni=t(31038),Li=t(11741);function Ti(){return(0,L.jsx)(je.Z,{display:"flex",flexDirection:"column",gap:1,alignItems:"stretch",children:(0,L.jsxs)(pe.ZP,{container:!0,spacing:1,children:[(0,L.jsxs)(pe.ZP,{item:!0,xs:12,md:6,lg:3,sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,L.jsx)(Bi,{}),(0,L.jsx)(qi,{})]}),(0,de.w6)(0,2).map((function(e){return(0,L.jsx)(pe.ZP,{item:!0,xs:12,md:6,lg:3,children:(0,L.jsx)(Gi,{index:e})},e)}))]})})}function Bi(){var e,n,t,i=(0,m.useContext)(k.R),a=i.data,s=i.oldData,l=a.getTeamBuff(),c=[];return Object.entries(null!==(e=l.total)&&void 0!==e?e:{}).forEach((function(e){var n=(0,r.Z)(e,2),t=n[0],i=n[1];return!i.isEmpty&&0!==i.value&&c.push([["total",t],i])})),Object.entries(null!==(n=l.premod)&&void 0!==n?n:{}).forEach((function(e){var n=(0,r.Z)(e,2),t=n[0],i=n[1];return!i.isEmpty&&0!==i.value&&c.push([["premod",t],i])})),Object.entries(null!==(t=l.enemy)&&void 0!==t?t:{}).forEach((function(e){var n=(0,r.Z)(e,2),t=n[0],i=n[1];return!i.isEmpty&&"number"===typeof i.value&&0!==i.value&&c.push([["enemy",t],i])})),c.length?(0,L.jsxs)(y.Z,{children:[(0,L.jsx)(x.Z,{children:(0,L.jsx)(V.Z,{children:"Team Buffs"})}),(0,L.jsx)(G.Z,{}),(0,L.jsx)(x.Z,{children:(0,L.jsx)(pe.ZP,{container:!0,children:c.map((function(e,n){var t,i=(0,r.Z)(e,2),a=i[0],l=i[1];return l&&(0,L.jsx)(pe.ZP,{item:!0,xs:12,children:(0,L.jsx)(Ne.JW,{node:l,oldValue:null===(t=(0,de.Hm)(null===s||void 0===s?void 0:s.getTeamBuff(),a))||void 0===t?void 0:t.value})},l.info.key)}))})})]}):null}function qi(){var e=(0,m.useContext)(k.R).data;return(0,L.jsx)(L.Fragment,{children:Li.J.map((function(n,t){var r=(0,L.jsx)(ot.Z,{title:(0,L.jsx)(V.Z,{children:n.desc})}),i=(0,L.jsxs)("span",{children:[n.name," ",r]});return(0,L.jsxs)(y.Z,{sx:{opacity:n.canShow(e)?1:.5},children:[(0,L.jsx)(q.Z,{title:i,action:n.icon,titleTypographyProps:{variant:"subtitle2"}}),n.canShow(e)&&(0,L.jsx)(G.Z,{}),n.canShow(e)&&(0,L.jsx)(x.Z,{children:(0,L.jsx)(Fn.Z,{sections:n.sections,teamBuffOnly:!0,hideDesc:!0})})]},t)}))})}function Gi(e){var n=e.index,t=(0,m.useContext)(k.R).teamData,r=(0,j.$)("page_character").t,i=(0,m.useContext)(C.K),a=i.character,s=i.character.key,l=i.characterDispatch,c=a.team[n],o=(0,N.Z)(),u=t[c],d=(0,m.useMemo)((function(){var e;return u&&{character:(0,Ze.Z)((0,Ze.Z)({},u.character),{},{conditional:null!==(e=a.teamConditional[c])&&void 0!==e?e:{}}),characterSheet:u.characterSheet,characterDispatch:function(e){if(c&&"conditional"in e){var n=e.conditional;l({type:"teamConditional",teamMateKey:c,conditional:n})}}}}),[a,c,u,l]),x=(0,m.useMemo)((function(){return u&&{data:u.target,teamData:t}}),[u,t]);return(0,L.jsxs)(y.Z,{children:[(0,L.jsx)(Ni.Z,{fullWidth:!0,value:c,onChange:function(e){return l({type:"team",index:n,charKey:e})},disable:function(e){return e===s||""!==e&&a.team.includes(e)},labelText:r("teammate",{count:n+1}),defaultText:r("none"),defaultIcon:(0,L.jsx)(_i.Z,{}),showDefault:!0}),d&&(0,L.jsx)(C.K.Provider,{value:d,children:x&&(0,L.jsx)(k.R.Provider,{value:x,children:(0,L.jsx)(un.Z,{characterKey:c,onClickHeader:o,artifactChildren:(0,L.jsx)(C.K.Provider,{value:d,children:(0,L.jsx)(k.R.Provider,{value:x,children:(0,L.jsx)(Fi,{})})}),weaponChildren:(0,L.jsx)(C.K.Provider,{value:d,children:(0,L.jsx)(k.R.Provider,{value:x,children:(0,L.jsx)(Wi,{})})}),characterChildren:(0,L.jsx)(C.K.Provider,{value:d,children:(0,L.jsx)(k.R.Provider,{value:x,children:(0,L.jsx)(Vi,{})})}),isTeammateCard:!0})})})]})}function Fi(){var e=(0,m.useContext)(k.R).data,n=(0,D.Z)((function(){return Gn.y.getAll}),[]),t=(0,m.useMemo)((function(){return n&&Object.entries(Gn.y.setEffects(n,e)).flatMap((function(e){var t=(0,r.Z)(e,2),i=t[0];return t[1].flatMap((function(e){return n[i].setEffectDocument(e)}))}))}),[n,e]);return t?(0,L.jsx)(Fn.Z,{sections:t,teamBuffOnly:!0}):null}function Wi(){var e=(0,m.useContext)(C.K).character.key,n=(0,m.useContext)(k.R).teamData[e].weaponSheet;return n.document?(0,L.jsx)(Fn.Z,{sections:n.document,teamBuffOnly:!0}):null}function Vi(){var e=(0,m.useContext)(C.K).character.key,n=(0,m.useContext)(k.R),t=n.data,r=n.teamData[e].characterSheet.getTalent(t.get(we.ri.charEle).value),i=Object.values(r.sheets).flatMap((function(e){return e.sections}));return i?(0,L.jsx)(Fn.Z,{sections:i,teamBuffOnly:!0}):null}var Hi=t(53343);function Ui(){var e=(0,m.useContext)(C.K),n=e.character,t=e.characterSheet,r=e.characterDispatch,i=n.elementKey,a=void 0===i?"anemo":i;return"talents"in t.sheet?(0,L.jsx)(oe.Z,{color:a,title:(0,L.jsx)("strong",{children:(0,Hi.Oy)("element.".concat(a))}),children:Object.keys(t.sheet.talents).map((function(e){return(0,L.jsx)(le.Z,{selected:a===e,disabled:a===e,onClick:function(){return r({elementKey:e})},children:(0,L.jsx)("strong",{children:(0,L.jsx)(J.Z,{color:e,children:(0,Hi.Oy)("element.".concat(e))})})},e)}))}):null}function $i(){var e,n=(0,v.s0)(),t=(0,m.useCallback)((function(){return n("/characters")}),[n]),r=(0,v.UO)().characterKey;return!I.IV.includes(null!==(e=r)&&void 0!==e?e:"")?(0,L.jsx)(v.Fg,{to:"/characters"}):(0,L.jsx)(u.Z,{my:1,display:"flex",flexDirection:"column",gap:1,children:(0,L.jsx)(m.Suspense,{fallback:(0,L.jsx)(d.Z,{variant:"rectangular",width:"100%",height:1e3}),children:r&&(0,L.jsx)(Ji,{characterKey:r,onClose:t})})})}function Ji(e){var n,t,r,i=e.characterKey,a=e.onClose,s=(0,O.Z)(i),l=(0,D.Z)((function(){return P.Z.get(i)}),[i]),c=(0,A.Z)(i),o=(null!==(n=null===c||void 0===c?void 0:c[i])&&void 0!==n?n:{}).target,h=(null!==(t=(0,v.bS)({path:"/characters/:charKey/:tab",end:!1}))&&void 0!==t?t:{params:{tab:"overview"}}).params.tab,f=void 0===h?"overview":h,p=(0,j.$)().t;(0,R.Z)("".concat(p("char_".concat(i,"_gen:name"))," - ").concat(p("page_character:tabs.".concat(f))));var Z=(0,K.Z)(null!==(r=null===s||void 0===s?void 0:s.key)&&void 0!==r?r:""),E=(0,m.useMemo)((function(){if(c&&o)return{data:o,teamData:c,oldData:void 0}}),[o,c]),I=(0,m.useMemo)((function(){if(s&&l)return{character:s,characterSheet:l,characterDispatch:Z}}),[s,l,Z]);return(0,L.jsx)(g.Z,{children:E&&I?(0,L.jsx)(C.K.Provider,{value:I,children:(0,L.jsx)(k.R.Provider,{value:E,children:(0,L.jsx)(S.B,{children:(0,L.jsxs)(x.Z,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,L.jsxs)(u.Z,{display:"flex",children:[(0,L.jsxs)(u.Z,{display:"flex",gap:1,flexWrap:"wrap",flexGrow:1,children:[(0,L.jsx)(T,{}),(0,L.jsx)(Ui,{}),(0,L.jsx)(Qi,{}),(0,L.jsx)(M.J,{}),(0,L.jsx)(ea,{})]}),!!a&&(0,L.jsx)(b.Z,{onClick:a})]}),(0,L.jsxs)(u.Z,{display:"flex",gap:1,flexWrap:"wrap",children:[(0,L.jsx)(xe,{}),(0,L.jsx)(w.Hn,{size:"small"}),(0,L.jsx)(w.pg,{}),(0,L.jsx)(w.oX,{size:"small"})]}),(0,L.jsx)(y.Z,{children:(0,L.jsx)(Xi,{tab:f})}),(0,L.jsx)(Yi,{}),(0,L.jsx)(y.Z,{children:(0,L.jsx)(Xi,{tab:f})})]})})})}):(0,L.jsx)(d.Z,{variant:"rectangular",width:"100%",height:1e3})})}function Yi(){return(0,L.jsx)(m.Suspense,{fallback:(0,L.jsx)(d.Z,{variant:"rectangular",width:"100%",height:500}),children:(0,L.jsxs)(v.Z5,{children:[(0,L.jsx)(v.AW,{index:!0,element:(0,L.jsx)(Oi,{})}),(0,L.jsx)(v.AW,{path:"/talent",element:(0,L.jsx)(Ri,{})}),(0,L.jsx)(v.AW,{path:"/teambuffs",element:(0,L.jsx)(Ti,{})}),(0,L.jsx)(v.AW,{path:"/optimize",element:(0,L.jsx)(qr,{})})]})})}function Xi(e){var n=e.tab,t=(0,j.$)("page_character").t;return(0,L.jsxs)(h.Z,{value:n,variant:"scrollable",allowScrollButtonsMobile:!0,sx:{"& .MuiTab-root:hover":{transition:"background-color 0.25s ease",backgroundColor:"rgba(255,255,255,0.1)"}},children:[(0,L.jsx)(f.Z,{sx:{minWidth:"25%"},value:"overview",label:t("tabs.overview"),icon:(0,L.jsx)(i.Z,{}),component:Z.rU,to:""}),(0,L.jsx)(f.Z,{sx:{minWidth:"25%"},value:"talent",label:t("tabs.talent"),icon:(0,L.jsx)(a.Z,{}),component:Z.rU,to:"talent"}),(0,L.jsx)(f.Z,{sx:{minWidth:"25%"},value:"teambuffs",label:t("tabs.teambuffs"),icon:(0,L.jsx)(s.Z,{}),component:Z.rU,to:"teambuffs"}),(0,L.jsx)(f.Z,{sx:{minWidth:"25%"},value:"optimize",label:t("tabs.optimize"),icon:(0,L.jsx)(l.Z,{}),component:Z.rU,to:"optimize"})]})}function Qi(){var e=(0,E.Z)(),n=(0,r.Z)(e,3),t=n[0],i=n[1],a=n[2];return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(p.Z,{color:"info",startIcon:(0,L.jsx)(c.Z,{}),onClick:i,children:"Detailed Stats"}),(0,L.jsx)(Be,{open:t,onClose:a})]})}function ea(){var e=(0,m.useContext)(S.M).onModalOpen;return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)(p.Z,{color:"info",startIcon:(0,L.jsx)(o.Z,{}),onClick:e,children:["Formulas ","&"," Calcs"]}),(0,L.jsx)(te,{})]})}},90543:function(e,n,t){t.d(n,{Z:function(){return N}});var r,i=t(30168),a=t(53174),s=t(54483),l=t(40117),c=t(62002),o=t(63204),u=t(66647),d=t(68870),x=t(47047),h=t(13400),f=t(20890),p=t(39504),m=t(2199),j=t(40165),Z=t(24518),v=t(72791),g=t(22020),y=t(10658),b=t(71310),w=t(31038),C=t(40020),k=t(20005),S=t(55942),P=t(10157),E=t(75545),O=t(2139),K=t(66218),D=t(7618),A=t(26138),R=t(73036),I=t(79406),M=t(42320),z=t(74480),_=t(80184);function N(e){var n,t=e.weaponId,N=e.onClick,L=e.onEdit,T=e.onDelete,B=e.canEquip,q=void 0!==B&&B,G=e.extraButtons,F=(0,g.$)(["page_weapon","ui"]).t,W=(0,v.useContext)(D.t).database,V=(0,z.Z)(t),H=(0,M.Z)((function(){return null!==V&&void 0!==V&&V.key?K.Z.get(V.key):void 0}),[null===V||void 0===V?void 0:V.key]),U=(0,v.useCallback)((function(e){return e.weaponTypeKey===(null===H||void 0===H?void 0:H.weaponType)}),[H]),$=(0,v.useCallback)((function(e){return(0,_.jsx)(u.Z,{onClick:function(){return null===N||void 0===N?void 0:N(t)},children:e})}),[N,t]),J=(0,v.useCallback)((function(e){return(0,_.jsx)(d.Z,{children:e})}),[]),Y=(0,v.useCallback)((function(e){return W.weapons.set(t,{location:e})}),[W,t]),X=(0,v.useMemo)((function(){return H&&V&&(0,R.mP)([H.data,(0,R.v0)(V)])}),[H,V]);if(!V||!H||!X)return null;var Q=V.level,ee=V.ascension,ne=V.refinement,te=V.id,re=V.location,ie=void 0===re?"":re,ae=V.lock,se=X.get(A.ri.weapon.type).value,le=[A.ri.weapon.main,A.ri.weapon.sub,A.ri.weapon.sub2].map((function(e){return X.get(e)})),ce=H.getImg(ee);return(0,_.jsx)(v.Suspense,{fallback:(0,_.jsx)(x.Z,{variant:"rectangular",sx:{width:"100%",height:"100%",minHeight:300}}),children:(0,_.jsxs)(b.Z,{sx:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[(0,_.jsxs)(k.Z,{condition:!!N,wrapper:$,falseWrapper:J,children:[(0,_.jsxs)(d.Z,{className:"grad-".concat(H.rarity,"star"),sx:{position:"relative",pt:2,px:2},children:[!N&&(0,_.jsx)(h.Z,{color:"primary",onClick:function(){return W.weapons.set(te,{lock:!ae})},sx:{position:"absolute",right:0,bottom:0,zIndex:2},children:ae?(0,_.jsx)(l.Z,{}):(0,_.jsx)(c.Z,{})}),(0,_.jsxs)(d.Z,{sx:{position:"relative",zIndex:1},children:[(0,_.jsxs)(d.Z,{component:"div",sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[(0,_.jsx)(S.Z,{sx:{fontSize:"1.5em"},src:null===(n=y.Z.weaponTypes)||void 0===n?void 0:n[se]}),(0,_.jsx)(f.Z,{noWrap:!0,sx:{textAlign:"center",backgroundColor:"rgba(100,100,100,0.35)",borderRadius:"1em",px:1},children:(0,_.jsx)("strong",{children:H.name})})]}),(0,_.jsxs)(f.Z,{component:"span",variant:"h5",children:["Lv. ",Q]}),(0,_.jsxs)(f.Z,{component:"span",variant:"h5",color:"text.secondary",children:["/",O.SJ[ee]]}),(0,_.jsxs)(f.Z,{variant:"h6",children:["Refinement ",(0,_.jsx)("strong",{children:ne})]}),(0,_.jsx)(f.Z,{children:(0,_.jsx)(P.q,{stars:H.rarity,colored:!0})})]}),(0,_.jsx)(d.Z,{sx:{height:"100%",position:"absolute",right:0,top:0},children:(0,_.jsx)(d.Z,{component:"img",src:null!==ce&&void 0!==ce?ce:"",width:"auto",height:"100%",sx:{float:"right"}})})]}),(0,_.jsx)(p.Z,{children:le.map((function(e){if(!e.info.key)return null;var n=(0,I.EC)(e.value,e.unit,e.unit?void 0:0);return(0,_.jsxs)(d.Z,{sx:{display:"flex"},children:[(0,_.jsxs)(f.Z,{flexGrow:1,children:[E.ZP[e.info.key]," ",I.ZP.get(e.info.key)]}),(0,_.jsx)(f.Z,{children:n})]},e.info.key)}))})]}),(0,_.jsxs)(d.Z,{sx:{p:1,display:"flex",gap:1,justifyContent:"space-between",alignItems:"center"},children:[q?(0,_.jsx)(w.Z,{size:"small",sx:{flexGrow:1},disable:function(e){return""===e},showDefault:!0,defaultIcon:(0,_.jsx)(o.Z,{}),defaultText:F("ui:inventory"),value:ie,onChange:Y,filter:U,disableClearable:!0}):(0,_.jsx)(C.Z,{location:ie}),(0,_.jsxs)(m.Z,{children:[!!L&&(0,_.jsx)(j.Z,{title:(0,_.jsx)(f.Z,{children:F(r||(r=(0,i.Z)(["page_weapon:edit"])))}),placement:"top",arrow:!0,children:(0,_.jsx)(Z.Z,{color:"info",onClick:function(){return L(te)},children:(0,_.jsx)(s.G,{icon:a.Xcf,className:"fa-fw"})})}),!!T&&(0,_.jsx)(Z.Z,{color:"error",onClick:function(){return T(te)},disabled:!!ie||ae,children:(0,_.jsx)(s.G,{icon:a.I7k,className:"fa-fw"})}),G]})]})]})})}},52771:function(e,n,t){t.d(n,{JR:function(){return o},e6:function(){return u},g4:function(){return a},mf:function(){return l},vL:function(){return i},yJ:function(){return s}});var r=t(60393),i=1e3,a=60*i,s=60*a,l=24*s;function c(e){var n=e%1e3,t=Math.floor(e/1e3%60),r=Math.floor(e/6e4%60);return{hours:Math.floor(e/36e5),minutes:r,seconds:t,milliseconds:n}}function o(e){var n=c(e),t=n.hours,i=n.minutes,a=n.seconds,s="Minutes";return t&&(s="Hours"),"".concat(t?"".concat(t,":"):"").concat((0,r.H_)(i,"0",2),":").concat((0,r.H_)(a,"0",2)," ").concat(s)}function u(e){var n=c(e),t=n.hours,i=n.minutes,a=n.seconds,s=n.milliseconds,l="Minutes";return t&&(l="Hours"),"".concat(t?"".concat(t,":"):"").concat((0,r.H_)(i,"0",2),":").concat((0,r.H_)(a,"0",2),".").concat((0,r.H_)(s,"0",3)," ").concat(l)}},66045:function(e,n,t){t.d(n,{Ol:function(){return i},Sn:function(){return a},Xg:function(){return s}});var r=t(72828),i=["level","rarity"];function a(e){return{level:{getValue:function(e){var n;return null!==(n=e.level*e.ascension)&&void 0!==n?n:0},tieBreaker:"rarity"},rarity:{getValue:function(n){var t;return null===e||void 0===e||null===(t=e[n.key])||void 0===t?void 0:t.rarity},tieBreaker:"level"}}}function s(e){return{rarity:function(n,t){var r;return t.includes(null===e||void 0===e||null===(r=e[n.key])||void 0===r?void 0:r.rarity)},weaponType:function(n,t){var r;return t.includes(null===e||void 0===e||null===(r=e[n.key])||void 0===r?void 0:r.weaponType)},name:function(e,n){return r.Z.t("weaponNames_gen:".concat(e.key)).toLowerCase().includes(n.toLowerCase())}}}}}]);
//# sourceMappingURL=627.5365f171.chunk.js.map