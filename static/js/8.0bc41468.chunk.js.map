{"version":3,"sources":["Character/CharacterCard.js","StatDependency.js","Build/BuildWorker.js","Build/Build.js","Build/BuildDisplay.js"],"names":["CharacterCard","props","characterId","onEdit","onDelete","character","CharacterDatabase","getCharacter","build","Character","calculateBuild","setToSlots","characterKey","name","weapon","constellation","elementKey","getElementalKey","weaponTypeKey","getWeaponTypeKey","weaponName","Weapon","getWeaponName","key","weaponMainVal","getWeaponMainStatValWithOverride","weaponSubKey","getWeaponSubStatKey","weaponSubVal","getWeaponSubStatValWithOverride","weaponLevelName","getLevelName","levelKey","weaponPassiveName","getWeaponPassiveName","className","cardClassName","bg","text","Header","header","xs","variant","size","onClick","icon","faEdit","faTrashAlt","Body","style","cursor","src","getThumb","rounded","getName","Assets","elements","weaponTypes","stars","getStar","colored","getLevelWithOverride","refineIndex","Stat","getStatName","getStatUnit","Object","entries","Artifact","getArtifactSetEffects","map","arr","artifactSetName","getArtifactSetName","highestNum","Math","max","statKey","unit","statVal","finalStats","StatIconEle","toFixed","fixedUnit","footer","Footer","as","Link","to","pathname","selectedCharacterId","formulaKeyDependency","DependencyStatKeys","formulaOverrides","dependencies","forEach","k","push","formulaOverride","OverrideFormulas","dependency","includes","Set","formulaKeys","keys","Formulas","filter","statkeys","StatData","testObj","defineProperty","get","configurable","AttachLazyFormulas","getDependency","Worker_fn","Worker","Build","databaseObj","ret","slot","values","art","slotKey","ArtifactSlotsData","setFilters","sets","reduce","accu","num","perm","slotKeys","getArtifactSlotKeys","slotPerm","index","length","numArtsPerSet","setKey","valid","setFilter","ArtifactSetsData","pieces","splitArtifacts","setPerms","setsInFilter","splitNumArtsPerSet","artArr","setPerm","permaccu","BuildDisplay","forceUpdateBuildDisplay","forceUpdate","statsDisplayKeys","eleKey","isAutoElemental","isAutoInfusable","state","artifactDatabase","ArtifactDatabase","getArtifactDatabase","val","lock","location","every","filterKeys","split","splitArtifactsBySlot","artifactsSlotsToSelectMainStats","mainStat","mainStatKey","changeMainStat","setState","autoGenerateBuilds","changeSetFilterKey","newkey","setsNumArr","oldKey","artifactConditionals","artifactCond","srcKey","parseInt","dropdownitemsForStar","star","getArtifactSetsByMaxStarEntries","setobj","some","getArtifactSets","artsAccountedOther","cur","ind","Dropdown","Item","totBuildNumber","maxBuildsToShow","generateBuilds","artifactSetPerms","builds","generatingBuilds","asending","buildFilterKey","initialStats","calculateCharacterWithWeaponStats","artifactSetEffects","getAllArtifactSetEffectsObj","deepClone","mainStatVal","getMainStatValue","numStars","level","depdendencyStatKeys","data","worker","terminate","onmessage","e","ReactGA","timing","category","variable","value","label","calculateTotalBuildNumber","obj","calculateBuildWithObjs","artifacts","postMessage","BuildGeneratorEditorCard","charlist","getCharacterDatabase","selectedCharacter","characterName","artsAccounted","generateAllPossibleArtifactSetPerm","buildAlert","Alert","maxBuildsToGenerate","characterDropDown","DropdownButton","title","char","i","id","Card","Row","Col","lg","editCharacter","getArtifactSlotNameWithIcon","getStatNameWithPercent","stats","ButtonGroup","ItemText","Divider","disabled","getArtifactSetEffectsObj","setNkey","setNumKey","setStats","getArtifactSetNumStats","conditionalNum","conditional","getArtifactSetEffectConditional","ConditionalsUtil","getConditionalNum","srcKey2","conditionalStats","getArtifactConditionalStats","conditionalElement","ConditionalSelector","setConditional","defEle","Badge","getArtifactSetEffectText","Button","faSortAmountDownAlt","faSortAmountUp","ArtifactDisplayItem","ListGroup","action","modalBuild","sort","slotarr1","slotarr","getArtifactSlotIcon","sm","md","closeModal","BuildModal","characterid","Modal","show","Boolean","onHide","dialogAs","Container","CharacterDisplayCard","newBuild","onClose","editable","DatabaseInitAndVerify","getInitialState","savedState","loadFromLocalStorage","pageview","this","saveToLocalStorage","artifactIds","join","React","Component","initialState","maxBuildsToShowList","maxBuildsToGenerateList"],"mappings":"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","file":"static/js/8.0bc41468.chunk.js","sourcesContent":["import { faEdit, faTrashAlt } from '@fortawesome/free-solid-svg-icons';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport React from 'react';\r\nimport { Badge, Image } from 'react-bootstrap';\r\nimport Button from 'react-bootstrap/Button';\r\nimport Card from 'react-bootstrap/Card';\r\nimport Col from 'react-bootstrap/Col';\r\nimport Row from 'react-bootstrap/Row';\r\nimport { Link } from 'react-router-dom';\r\nimport Artifact from '../Artifact/Artifact';\r\nimport Assets from '../Assets/Assets';\r\nimport { Stars } from '../Components/StarDisplay';\r\nimport { StatIconEle } from '../Components/StatIcon';\r\nimport Stat from '../Stat';\r\nimport Weapon from '../Weapon/Weapon';\r\nimport Character from './Character';\r\nimport CharacterDatabase from './CharacterDatabase';\r\nexport default function CharacterCard(props) {\r\n  let { characterId, onEdit, onDelete } = props\r\n  let character = CharacterDatabase.getCharacter(characterId)\r\n  if (!character) return null;\r\n  let build = Character.calculateBuild(character)\r\n  let { setToSlots } = build\r\n\r\n  let { characterKey, name, weapon, constellation } = character\r\n  let elementKey = Character.getElementalKey(characterKey)\r\n  let weaponTypeKey = Character.getWeaponTypeKey(characterKey)\r\n  let weaponName = Weapon.getWeaponName(weapon.key)\r\n  let weaponMainVal = Weapon.getWeaponMainStatValWithOverride(weapon)\r\n  let weaponSubKey = Weapon.getWeaponSubStatKey(weapon.key)\r\n  let weaponSubVal = Weapon.getWeaponSubStatValWithOverride(weapon)\r\n  let weaponLevelName = Weapon.getLevelName(weapon.levelKey)\r\n  let weaponPassiveName = Weapon.getWeaponPassiveName(weapon.key)\r\n  const statkeys = [\"hp\", \"atk\", \"def\", \"ele_mas\", \"crit_rate\", \"crit_dmg\", \"ener_rech\",]\r\n  return (<Card className={props.cardClassName} bg={props.bg ? props.bg : \"darkcontent\"} text=\"lightfont\">\r\n    <Card.Header className=\"pr-2\">\r\n      <Row className=\"no-gutters\">\r\n        <Col >\r\n          {props.header ? props.header : <h6><b>{name}</b></h6>}\r\n        </Col>\r\n        <Col xs={\"auto\"}>\r\n          <span className=\"float-right align-top ml-1\">\r\n            {props.onEdit && <Button variant=\"primary\" size=\"sm\" className=\"mr-1\"\r\n              onClick={onEdit}>\r\n              <FontAwesomeIcon icon={faEdit} />\r\n            </Button>}\r\n            {props.onDelete && <Button variant=\"danger\" size=\"sm\"\r\n              onClick={onDelete}>\r\n              <FontAwesomeIcon icon={faTrashAlt} />\r\n            </Button>}\r\n          </span>\r\n        </Col>\r\n      </Row>\r\n    </Card.Header>\r\n    <Card.Body onClick={onEdit} style={{ cursor: onEdit ? \"pointer\" : \"default\" }}>\r\n      <Row>\r\n        <Col xs=\"auto\" className=\"pr-0\">\r\n          <Image src={Character.getThumb(characterKey)} className=\"h-100 w-auto my-n1\" rounded />\r\n        </Col>\r\n        <Col>\r\n          <h4>{Character.getName(characterKey)} <Image src={Assets.elements[elementKey]} className=\"inline-icon\" /> <Image src={Assets.weaponTypes?.[weaponTypeKey]} className=\"inline-icon\" /></h4>\r\n          <h6><Stars stars={Character.getStar(characterKey)} colored /></h6>\r\n          <span>{`Lvl. ${Character.getLevelWithOverride(character)} C${constellation}`}</span>\r\n        </Col>\r\n      </Row>\r\n      <Row className=\"mb-2\">\r\n        <Col>\r\n          <h6 className=\"mb-0\">{weaponName}{weaponPassiveName && `(${weapon.refineIndex + 1})`} {weaponLevelName}</h6>\r\n          <span>ATK: {weaponMainVal}  {weaponPassiveName && <span>{Stat.getStatName(weaponSubKey)}: {weaponSubVal}{Stat.getStatUnit(weaponSubKey)}</span>}</span>\r\n        </Col>\r\n      </Row>\r\n      <Row>\r\n        <Col>\r\n          {Object.entries(Artifact.getArtifactSetEffects(setToSlots)).map(([key, arr]) => {\r\n            let artifactSetName = Artifact.getArtifactSetName(key)\r\n            let highestNum = Math.max(...arr)\r\n            return <h5 key={key}><Badge variant=\"secondary\">{artifactSetName} <Badge variant=\"success\">{highestNum}</Badge></Badge></h5>\r\n          })}\r\n        </Col>\r\n      </Row>\r\n      <Row>\r\n        {statkeys.map(statKey => {\r\n          let unit = Stat.getStatUnit(statKey)\r\n          let statVal = build.finalStats[statKey]\r\n          return <Col xs={12} key={statKey}>\r\n            <h6 className=\"d-inline\">{StatIconEle(statKey)} {Stat.getStatName(statKey)}</h6>\r\n            <span className={`float-right`}>\r\n              {statVal?.toFixed(Stat.fixedUnit(statKey)) + unit}\r\n            </span>\r\n          </Col>\r\n        })}\r\n      </Row>\r\n    </Card.Body>\r\n    {props.footer && <Card.Footer>\r\n      <Button as={Link} to={{\r\n        pathname: \"/build\",\r\n        selectedCharacterId: characterId\r\n      }}>\r\n        Generate Builds\r\n        </Button>\r\n    </Card.Footer>}\r\n  </Card>)\r\n}","import { AttachLazyFormulas, Formulas, OverrideFormulas, StatData } from \"./Stat\"\r\n\r\n//generate a statKey dependency, to reduce build generation calculation on a single stat.\r\nconst formulaKeyDependency = {}\r\nconst getDependency = (key) => {\r\n  let testObj = {}\r\n  let dependency = []\r\n  Object.keys(StatData).filter(k => k !== key).forEach(k => {\r\n    Object.defineProperty(testObj, k, {\r\n      get: () => {\r\n        dependency.push(k)\r\n        Object.defineProperty(testObj, k, { get: () => 0 })\r\n        return 0\r\n      },\r\n      configurable: true\r\n    })\r\n  })\r\n  AttachLazyFormulas(testObj)\r\n  //use the getter to generate the dependency\r\n  if (typeof testObj[key] === \"number\")\r\n    formulaKeyDependency[key] = dependency\r\n}\r\nObject.keys(Formulas).forEach(key => getDependency(key))\r\n\r\nfunction DependencyStatKeys(key, formulaOverrides = []) {\r\n  let dependencies = formulaKeyDependency[key] || []\r\n  formulaKeyDependency[key]?.forEach(k => dependencies.push(...(formulaKeyDependency[k] || [])))\r\n  //add any formula override dependencies\r\n  formulaOverrides.forEach(formulaOverride => {\r\n    let { key, dependency = [] } = OverrideFormulas[formulaOverride.key] || {}\r\n    if (!dependencies.includes(key)) return\r\n    dependencies.push(...dependency)\r\n  })\r\n  dependencies = [...new Set(dependencies)]\r\n  let formulaKeys = Object.keys(Formulas).filter(k => k === key || dependencies.includes(k))\r\n  let statkeys = Object.keys(StatData).filter(k => k === key || dependencies.includes(k))\r\n  return { formulaKeys, statkeys }\r\n}\r\nexport {\r\n  DependencyStatKeys,\r\n}\r\n","export default function Worker_fn() {\n  return new Worker(__webpack_public_path__ + \"static/js/BuildWorker.5b0d3195.worker.js\");\n}\n","import Artifact from \"../Artifact/Artifact\";\r\nimport { ArtifactSetsData, ArtifactSlotsData } from \"../Data/ArtifactData\";\r\n\r\nexport default class Build {\r\n\r\n  //works with id indexed object for database.\r\n  static splitArtifactsBySlot(databaseObj) {\r\n    let ret = {}\r\n    for (let slot in ArtifactSlotsData)\r\n      ret[slot] = Object.values(databaseObj).filter(art => art.slotKey === slot)\r\n    return ret;\r\n\r\n  }\r\n  /**\r\n   * Calculate all the possible set configuration based on the filters.\r\n   * [{Key:X,num:2},{key:Y,num:2},{key:\"\",num:0}]\r\n   * generates XXYYO,XYXYO,XXOYY..... combinations, where O means other. \r\n   * @param {Object} setFilters From BuildDisplay\r\n   */\r\n  static generateAllPossibleArtifactSetPerm(setFilters) {\r\n    let sets = setFilters.filter(filter => filter.key).map(filter => filter.key);\r\n    let useOther = setFilters.reduce((accu, filter) => filter.key ? accu + filter.num : accu, 0) < 5;\r\n    if (useOther) sets.push(\"Other\");\r\n\r\n    let perm = [];\r\n    let slotKeys = Artifact.getArtifactSlotKeys();\r\n    //recursion function to loop through everything.\r\n    let slotPerm = (index, accu) => {\r\n      if (index >= slotKeys.length) {\r\n        let numArtsPerSet = {}\r\n        Object.values(accu).forEach(setKey => {\r\n          if (numArtsPerSet[setKey]) numArtsPerSet[setKey] += 1\r\n          else numArtsPerSet[setKey] = 1\r\n        })\r\n        let valid = true\r\n        for (const setFilter of setFilters) {\r\n          if (setFilter.key && (!numArtsPerSet[setFilter.key] || numArtsPerSet[setFilter.key] < setFilter.num)) {\r\n            valid = false;\r\n            break;\r\n          }\r\n        }\r\n        if (valid) perm.push(accu)\r\n        return;\r\n      }\r\n      let slotKey = slotKeys[index];\r\n      sets.forEach(setKey => {\r\n        //see if this set is valid at this piece slot. some artifacts dont have artifacts at specific slots.\r\n        if (setKey === \"Other\" || (ArtifactSetsData[setKey] && (ArtifactSetsData[setKey].pieces) && Object.keys(ArtifactSetsData[setKey].pieces).includes(slotKey))) {\r\n          accu[slotKey] = setKey;\r\n          slotPerm(index + 1, { ...accu })\r\n        }\r\n      });\r\n    }\r\n    slotPerm(0, {});\r\n    return perm\r\n  }\r\n  static calculateTotalBuildNumber(splitArtifacts, setPerms, setFilters) {\r\n    let setsInFilter = setFilters.filter(filter => filter.key).map(filter => filter.key)\r\n    let splitNumArtsPerSet = {}\r\n    //count the number of arts in setfilter for each slot\r\n    Object.entries(splitArtifacts).forEach(([key, artArr]) => {\r\n      let numArtsPerSet = {}\r\n      artArr.forEach(art => {\r\n        if (setsInFilter.includes(art.setKey))\r\n          numArtsPerSet[art.setKey] = (numArtsPerSet[art.setKey] || 0) + 1\r\n        else\r\n          numArtsPerSet[\"Other\"] = (numArtsPerSet[\"Other\"] || 0) + 1\r\n      })\r\n      splitNumArtsPerSet[key] = numArtsPerSet\r\n    })\r\n    //calculate!\r\n    return setPerms.reduce((accu, setPerm) =>\r\n      accu + Object.entries(setPerm).reduce((permaccu, [key, setKey]) =>\r\n        (splitNumArtsPerSet[key] && splitNumArtsPerSet[key][setKey]) ? permaccu * splitNumArtsPerSet[key][setKey] : 0\r\n        , 1)\r\n      , 0)\r\n  }\r\n}","import { faSortAmountDownAlt, faSortAmountUp } from '@fortawesome/free-solid-svg-icons';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport React from 'react';\r\nimport { Alert, Badge, Button, ButtonGroup, Card, Col, Container, Dropdown, DropdownButton, ListGroup, Modal, Row } from 'react-bootstrap';\r\nimport ReactGA from 'react-ga';\r\n// eslint-disable-next-line\r\nimport Worker from \"worker-loader!./BuildWorker.js\";\r\nimport Artifact from '../Artifact/Artifact';\r\nimport ArtifactDatabase from '../Artifact/ArtifactDatabase';\r\nimport Character from '../Character/Character';\r\nimport CharacterCard from '../Character/CharacterCard';\r\nimport CharacterDatabase from '../Character/CharacterDatabase';\r\nimport CharacterDisplayCard from '../Character/CharacterDisplayCard';\r\nimport ConditionalSelector from '../Components/ConditionalSelector';\r\nimport { ArtifactSlotsData } from '../Data/ArtifactData';\r\nimport { DatabaseInitAndVerify } from '../DatabaseUtil';\r\nimport Stat from '../Stat';\r\nimport { DependencyStatKeys } from '../StatDependency';\r\nimport ConditionalsUtil from '../Util/ConditionalsUtil';\r\nimport { deepClone, loadFromLocalStorage, saveToLocalStorage } from '../Util/Util';\r\nimport Build from './Build';\r\n\r\nexport default class BuildDisplay extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    DatabaseInitAndVerify();\r\n    this.state = BuildDisplay.getInitialState();\r\n    if (props.location.selectedCharacterId) {\r\n      this.state = BuildDisplay.getInitialState();\r\n      props.location.selectedCharacterId && (this.state.selectedCharacterId = props.location.selectedCharacterId)\r\n    } else {\r\n      let savedState = loadFromLocalStorage(\"BuildsDisplay.state\")\r\n      if (savedState) {\r\n        let character = CharacterDatabase.getCharacter(savedState.selectedCharacterId)\r\n        if (savedState && character) this.state = savedState\r\n      }\r\n    }\r\n    ReactGA.pageview('/build')\r\n  }\r\n  static initialState = {\r\n    builds: [],\r\n    generatingBuilds: false,\r\n    selectedCharacterId: \"\",\r\n    setFilters: [{ key: \"\", num: 0 }, { key: \"\", num: 0 }, { key: \"\", num: 0 }],\r\n    artifactConditionals: [],//{ setKey: \"\", setNumKey: \"\", conditionalNum: 0 }\r\n    mainStat: [\"\", \"\", \"\"],\r\n    buildFilterKey: \"atk\",\r\n    asending: false,\r\n    modalBuild: null,\r\n    editCharacter: false,\r\n    maxBuildsToShow: 100,\r\n    maxBuildsToGenerate: 500000\r\n  }\r\n  static maxBuildsToShowList = [100, 50, 25, 5]\r\n  static maxBuildsToGenerateList = [500000, 100000, 50000, 10000, 5000, 1000]\r\n  static getInitialState = () => deepClone(BuildDisplay.initialState)\r\n  static artifactsSlotsToSelectMainStats = [\"sands\", \"goblet\", \"circlet\"]\r\n  forceUpdateBuildDisplay = () => this.forceUpdate()\r\n\r\n  statsDisplayKeys = (characterKey) => {\r\n    let keys = [\"hp\", \"atk\", \"def\", \"ele_mas\", \"crit_rate\", \"crit_dmg\", \"heal_bonu\", \"ener_rech\", \"ele_dmg\"]\r\n    let eleKey = Character.getElementalKey(characterKey)\r\n    //we need to figure out if the character has: normal phy auto, elemental auto, infusable auto(both normal and phy)\r\n    let isAutoElemental = Character.isAutoElemental(characterKey)\r\n    let isAutoInfusable = Character.isAutoInfusable(characterKey)\r\n\r\n    if (!isAutoElemental)\r\n      keys.push(\"phy_dmg\")\r\n\r\n\r\n    if (!isAutoElemental) //add phy auto + charged + physical \r\n      keys.push(\"norm_atk_avg_dmg\", \"char_atk_avg_dmg\")\r\n\r\n    if (isAutoElemental || isAutoInfusable) //add elemental auto + charged\r\n      keys.push(`${eleKey}_norm_atk_avg_dmg`, `${eleKey}_char_atk_avg_dmg`)\r\n    else if (Character.getWeaponTypeKey(characterKey) === \"bow\")//bow charged atk does elemental dmg on charge\r\n      keys.push(`${eleKey}_char_atk_avg_dmg`)\r\n\r\n    //show skill/burst at the end\r\n    keys.push(\"skill_avg_dmg\", \"burst_avg_dmg\")\r\n\r\n    return keys.map(key => ([\"ele_dmg\", \"skill_avg_dmg\", \"burst_avg_dmg\"].includes(key)) ? `${eleKey}_${key}` : key)\r\n  }\r\n\r\n  splitArtifacts = () => {\r\n    if (!this.state.selectedCharacterId) return {};\r\n    let artifactDatabase = ArtifactDatabase.getArtifactDatabase();\r\n    //do not use artifacts that are locked.\r\n    Object.entries(artifactDatabase).forEach(([key, val]) => {\r\n      if (val.lock) delete artifactDatabase[key]\r\n      if (this.state.selectedCharacterId && val.location && val.location !== this.state.selectedCharacterId)\r\n        delete artifactDatabase[key]\r\n    })\r\n    if (this.state.setFilters.every(filter => filter.key)) {\r\n      let filterKeys = this.state.setFilters.map(filter => filter.key)\r\n      //filter database to only filtered artifacts, if all 3 sets are specified\r\n      Object.entries(artifactDatabase).forEach(([key, val]) => {\r\n        if (filterKeys.includes(val.setKey))\r\n          delete artifactDatabase[key]\r\n      })\r\n    }\r\n    let split = Build.splitArtifactsBySlot(artifactDatabase);\r\n    //filter the split slots on the mainstats selected.\r\n    BuildDisplay.artifactsSlotsToSelectMainStats.forEach((slotKey, index) =>\r\n      this.state.mainStat[index] && (split[slotKey] = split[slotKey].filter((art) => art.mainStatKey === this.state.mainStat[index])))\r\n    return split\r\n  }\r\n  changeMainStat = (index, mainStatKey) => {\r\n    this.setState(state => {\r\n      let mainStat = state.mainStat;\r\n      mainStat[index] = mainStatKey;\r\n      return { mainStat }\r\n    }, this.autoGenerateBuilds)\r\n  }\r\n  changeSetFilterKey = (index, newkey, setsNumArr) => this.setState(state => {\r\n    let oldKey = state.setFilters[index].key\r\n    if (oldKey === newkey) return\r\n    //remove conditionals with that key\r\n    let artifactConditionals = state.artifactConditionals?.filter?.(artifactCond => artifactCond.srcKey !== oldKey) || []\r\n    let setFilters = state.setFilters;\r\n    let num = 0\r\n    //automatically select the 1st element from setsNumArr\r\n    if (setsNumArr && setsNumArr[0])\r\n      num = parseInt(setsNumArr[0])\r\n    setFilters[index] = { key: newkey, num }\r\n    return { setFilters, artifactConditionals }\r\n  }, this.autoGenerateBuilds)\r\n\r\n  dropdownitemsForStar = (star, index) =>\r\n    Artifact.getArtifactSetsByMaxStarEntries(star).map(([setKey, setobj]) => {\r\n      if (this.state.setFilters.some(filter => filter.key === setKey)) return false;\r\n      let setsNumArr = Object.keys(Artifact.getArtifactSets(setKey))\r\n      let artsAccountedOther = this.state.setFilters.reduce((accu, cur, ind) => (cur.key && ind !== index) ? accu + cur.num : accu, 0)\r\n      if (setsNumArr.every(num => parseInt(num) + artsAccountedOther > 5)) return false;\r\n      return (<Dropdown.Item key={setKey}\r\n        onClick={() => this.changeSetFilterKey(index, setKey, setsNumArr)}\r\n      >\r\n        {setobj.name}\r\n      </Dropdown.Item>)\r\n    })\r\n  autoGenerateBuilds = () => typeof this.totBuildNumber === \"number\" && this.totBuildNumber <= this.state.maxBuildsToShow && this.generateBuilds()\r\n\r\n  generateBuilds = () => {\r\n    let { split, artifactSetPerms, totBuildNumber } = this\r\n    if (!totBuildNumber) return this.setState({ builds: [] })\r\n    this.setState({ generatingBuilds: true })\r\n    let { setFilters, asending, buildFilterKey, maxBuildsToShow, artifactConditionals } = this.state\r\n    let character = CharacterDatabase.getCharacter(this.state.selectedCharacterId)\r\n    let initialStats = Character.calculateCharacterWithWeaponStats(character)\r\n\r\n    let artifactSetEffects = Artifact.getAllArtifactSetEffectsObj(artifactConditionals)\r\n    let splitArtifacts = deepClone(split)\r\n    //add mainStatVal to each artifact, TODO add main stat assuming fully leveled up\r\n    Object.values(splitArtifacts).forEach(artArr => {\r\n      artArr.forEach(art => {\r\n        art.mainStatVal = Artifact.getMainStatValue(art.mainStatKey, art.numStars, art.level);\r\n      })\r\n    })\r\n    //generate the key dependencies for the formula\r\n    let depdendencyStatKeys = DependencyStatKeys(buildFilterKey, initialStats.formulaOverrides)\r\n\r\n    //create an obj with app the artifact set effects to pass to buildworker.\r\n    let data = {\r\n      splitArtifacts, artifactSetPerms, initialStats, artifactSetEffects, depdendencyStatKeys,\r\n      setFilters, maxBuildsToShow, buildFilterKey, asending,\r\n    }\r\n    if (this.worker) this.worker.terminate()\r\n    this.worker = new Worker();\r\n    this.worker.onmessage = (e) => {\r\n      ReactGA.timing({\r\n        category: \"Build Generation\",\r\n        variable: \"timing\",\r\n        value: e.data.timing,\r\n        label: Build.calculateTotalBuildNumber(split, artifactSetPerms, this.state.setFilters)\r\n      })\r\n      let builds = e.data.builds.map(obj =>\r\n        Character.calculateBuildWithObjs(artifactConditionals, initialStats, obj.artifacts))\r\n      this.setState({ builds, generatingBuilds: false })\r\n      // worker.terminate()\r\n      this.worker.terminate()\r\n      delete this.worker\r\n    }\r\n\r\n    this.worker.postMessage(data)\r\n  }\r\n\r\n  BuildGeneratorEditorCard = (props) => {\r\n    let { setFilters, selectedCharacterId } = this.state\r\n    let { statsDisplayKeys } = props\r\n    let charlist = CharacterDatabase.getCharacterDatabase();\r\n    let selectedCharacter = CharacterDatabase.getCharacter(selectedCharacterId)\r\n    let characterName = selectedCharacter ? selectedCharacter.name : \"Character Name\"\r\n    let artsAccounted = setFilters.reduce((accu, cur) => cur.key ? accu + cur.num : accu, 0)\r\n    //these variables are used for build generator.\r\n    this.split = this.splitArtifacts();\r\n    this.artifactSetPerms = Build.generateAllPossibleArtifactSetPerm(setFilters)\r\n    this.totBuildNumber = Build.calculateTotalBuildNumber(this.split, this.artifactSetPerms, setFilters)\r\n    let { totBuildNumber } = this\r\n\r\n    let buildAlert = totBuildNumber === 0 ?\r\n      <Alert variant=\"warning\" className=\"mb-0\"><span>Current configuration will not generate any builds for <b>{characterName}</b>. Please change your Artifact configurations, or add/unlock more Artifacts.</span></Alert>\r\n      : (totBuildNumber > this.state.maxBuildsToGenerate ?\r\n        <Alert variant=\"danger\" className=\"mb-0\"><span>Current configuration will generate <b>{totBuildNumber}</b> builds for <b>{characterName}</b>. Please restrict artifact configuration to reduce builds to less than {this.state.maxBuildsToGenerate}, or your browser might crash.</span></Alert> :\r\n        <Alert variant=\"success\" className=\"mb-0\"><span>Current configuration {totBuildNumber <= this.state.maxBuildsToShow ? \"generated\" : \"will generate\"} <b>{totBuildNumber}</b> builds for <b>{characterName}</b>.</span></Alert>)\r\n    let characterDropDown = <DropdownButton title={selectedCharacterId ? characterName : \"Select Character\"}>\r\n      <Dropdown.Item onClick={() => this.setState({ selectedCharacterId: \"\", builds: [], buildFilterKey: \"atk\" })}>No Character</Dropdown.Item>\r\n      {Object.values(charlist).map((char, i) =>\r\n        <Dropdown.Item key={char.name + i}\r\n          onClick={() => this.setState({ selectedCharacterId: char.id, builds: [], buildFilterKey: \"atk\" })}\r\n        >\r\n          {char.name}\r\n        </Dropdown.Item>)}\r\n    </DropdownButton>\r\n    return <Card bg=\"darkcontent\" text=\"lightfont\">\r\n      <Card.Header>Build Generator</Card.Header>\r\n      <Card.Body>\r\n        <Row >\r\n          <Col xs={12} lg={6} className=\"mb-2\">\r\n            {/* character selection */}\r\n            {selectedCharacterId ?\r\n              <CharacterCard header={characterDropDown} characterId={selectedCharacterId} bg={\"lightcontent\"} footer={false} cardClassName=\"mb-2\" onEdit={() => this.setState({ editCharacter: true })} /> :\r\n              <Card bg=\"lightcontent\" text=\"lightfont\" className=\"mb-2\">\r\n                <Card.Header>\r\n                  {characterDropDown}\r\n                </Card.Header>\r\n              </Card>}\r\n            {/* main stat selector */}\r\n            <Card bg=\"lightcontent\" text=\"lightfont\">\r\n              <Card.Header>Artifact Main Stat (Optional)</Card.Header>\r\n              <Card.Body>\r\n                {BuildDisplay.artifactsSlotsToSelectMainStats.map((slotKey, index) =>\r\n                (<div className=\"text-inline mb-1 d-flex justify-content-between\" key={slotKey}>\r\n                  <h6 className=\"d-inline mr-2\">\r\n                    {Artifact.getArtifactSlotNameWithIcon(slotKey)}\r\n                  </h6>\r\n                  <DropdownButton\r\n                    title={this.state.mainStat[index] ? Stat.getStatNameWithPercent(this.state.mainStat[index]) : \"Select a mainstat\"}\r\n                    className=\"d-inline\">\r\n                    <Dropdown.Item onClick={() => this.changeMainStat(index, \"\")} >No MainStat</Dropdown.Item>\r\n                    {ArtifactSlotsData[slotKey].stats.map(mainStatKey =>\r\n                      <Dropdown.Item onClick={() => this.changeMainStat(index, mainStatKey)} key={mainStatKey}>\r\n                        {Stat.getStatNameWithPercent(mainStatKey)}\r\n                      </Dropdown.Item>\r\n                    )}\r\n                  </DropdownButton>\r\n                </div>))}\r\n              </Card.Body>\r\n            </Card>\r\n          </Col>\r\n          <Col xs={12} lg={6} className=\"mb-2\"><Row>\r\n            {/* Artifact set picker */}\r\n            {setFilters.map((setFilter, index) => {\r\n              let { key: setKey, num } = setFilter\r\n              let { artifactConditionals } = this.state\r\n              return (<Col className=\"mb-2\" key={index} xs={12}>\r\n                <Card className=\"h-100\" bg=\"lightcontent\" text=\"lightfont\">\r\n                  <Card.Header>\r\n                    <ButtonGroup>\r\n                      {/* Artifact set */}\r\n                      <DropdownButton as={ButtonGroup} title={Artifact.getArtifactSetName(setFilter.key, \"Set (Optional)\")} >\r\n                        <Dropdown.Item onClick={() => this.changeSetFilterKey(index, \"\")}>Unselect Artifact</Dropdown.Item>\r\n                        <Dropdown.ItemText>Max Rarity 🟊🟊🟊🟊🟊</Dropdown.ItemText>\r\n                        {this.dropdownitemsForStar(5, index)}\r\n                        <Dropdown.Divider />\r\n                        <Dropdown.ItemText>Max Rarity 🟊🟊🟊🟊</Dropdown.ItemText>\r\n                        {this.dropdownitemsForStar(4, index)}\r\n                        <Dropdown.Divider />\r\n                        <Dropdown.ItemText>Max Rarity 🟊🟊🟊</Dropdown.ItemText>\r\n                        {this.dropdownitemsForStar(3, index)}\r\n                      </DropdownButton>\r\n                      {/* set number */}\r\n                      <DropdownButton as={ButtonGroup} title={`${setFilter.num}-set`}\r\n                        disabled={!setFilter.key || artsAccounted >= 5}\r\n                      >\r\n                        {setFilter.key && Artifact.getArtifactSetEffectsObj(setFilter.key) && Object.keys(Artifact.getArtifactSetEffectsObj(setFilter.key)).map(num => {\r\n                          let artsAccountedOther = setFilters.reduce((accu, cur) => (cur.key && cur.key !== setFilter.key) ? accu + cur.num : accu, 0)\r\n                          return (parseInt(num) + artsAccountedOther <= 5) &&\r\n                            (<Dropdown.Item key={num}\r\n                              onClick={() => this.setState((state) => {\r\n                                let setFilters = state.setFilters;\r\n                                setFilters[index].num = parseInt(num)\r\n                                return { setFilters }\r\n                              }, this.autoGenerateBuilds)}\r\n                            >\r\n                              {`${num}-set`}\r\n                            </Dropdown.Item>)\r\n                        })}\r\n                      </DropdownButton>\r\n                    </ButtonGroup>\r\n                  </Card.Header>\r\n                  {setKey ? <Card.Body><Row>\r\n                    {Object.keys(Artifact.getArtifactSets(setKey, {})).filter(setNkey => parseInt(setNkey) <= num).map(setNumKey => {\r\n                      let setStats = Artifact.getArtifactSetNumStats(setKey, setNumKey)\r\n                      let conditionalNum = 0;\r\n                      let conditional = Artifact.getArtifactSetEffectConditional(setKey, setNumKey)\r\n                      if (conditional) {\r\n                        conditionalNum = ConditionalsUtil.getConditionalNum(artifactConditionals, { srcKey: setKey, srcKey2: setNumKey })\r\n                        let conditionalStats = Artifact.getArtifactConditionalStats(setKey, setNumKey, conditionalNum)\r\n                        if (conditionalStats) {\r\n                          if (!setStats) setStats = {}\r\n                          Object.entries(conditionalStats).forEach(([statKey, val]) =>\r\n                            setStats[statKey] = (setStats[statKey] || 0) + val)\r\n                        }\r\n                      }\r\n                      let setStateArtifactConditional = (conditionalNum) => this.setState(state =>\r\n                        ({ artifactConditionals: ConditionalsUtil.setConditional(state.artifactConditionals, { srcKey: setKey, srcKey2: setNumKey }, conditionalNum) }), this.autoGenerateBuilds)\r\n                      let conditionalElement = <ConditionalSelector\r\n                        conditional={conditional}\r\n                        conditionalNum={conditionalNum}\r\n                        setConditional={setStateArtifactConditional}\r\n                        defEle={<Badge variant=\"success\">{setNumKey}-Set</Badge>}\r\n                      />\r\n                      return <Col key={setNumKey} xs={12} className=\"mb-2\">\r\n                        <h6>{conditionalElement} {Artifact.getArtifactSetEffectText(setKey, setNumKey)}</h6>\r\n                        {setStats ? <Row>\r\n                          {Object.entries(setStats).map(([statKey, val]) =>\r\n                            <Col xs={12} key={statKey}>{Stat.getStatName(statKey)}: {val}{Stat.getStatUnit(statKey)}</Col>)}\r\n                        </Row> : null}\r\n                      </Col>\r\n                    })}\r\n                  </Row></Card.Body> : null}\r\n                </Card>\r\n              </Col>)\r\n            })}\r\n          </Row></Col>\r\n        </Row>\r\n        <Row className=\"mb-2\">\r\n          <Col>{selectedCharacterId && buildAlert}</Col>\r\n        </Row>\r\n        <Row className=\"d-flex justify-content-between\">\r\n          <Col xs=\"auto\" >\r\n            <Button\r\n              className=\"h-100\"\r\n              disabled={!selectedCharacterId || totBuildNumber > this.state.maxBuildsToGenerate || this.state.generatingBuilds}\r\n              variant={(selectedCharacterId && totBuildNumber <= this.state.maxBuildsToGenerate) ? \"success\" : \"danger\"}\r\n              onClick={this.generateBuilds}\r\n            ><span>Generate Builds</span></Button>\r\n          </Col>\r\n          <Col xs=\"auto\">\r\n            {/* Dropdown to select sorting value */}\r\n            <ButtonGroup>\r\n              <DropdownButton disabled={!selectedCharacterId} title={`Sort by ${Stat.getStatNameWithPercent(this.state.buildFilterKey)}`} as={ButtonGroup}>\r\n                {selectedCharacterId && statsDisplayKeys.map(key =>\r\n                  <Dropdown.Item key={key} onClick={() => this.setState({ buildFilterKey: key }, this.autoGenerateBuilds)}>\r\n                    {Stat.getStatNameWithPercent(key)}\r\n                  </Dropdown.Item>\r\n                )}\r\n              </DropdownButton>\r\n              <Button onClick={() => this.setState(state => ({ asending: !state.asending }), this.autoGenerateBuilds)}>\r\n                <FontAwesomeIcon icon={this.state.asending ? faSortAmountDownAlt : faSortAmountUp} className=\"fa-fw\" />\r\n              </Button>\r\n            </ButtonGroup>\r\n          </Col>\r\n        </Row>\r\n      </Card.Body>\r\n    </Card>\r\n  }\r\n  ArtifactDisplayItem = (props) => {\r\n    let { build, statsDisplayKeys } = props\r\n    return (<div>\r\n      <ListGroup.Item\r\n        variant={props.index % 2 ? \"customdark\" : \"customdarker\"} className=\"text-white\" action\r\n        onClick={() => this.setState({ modalBuild: build })}\r\n      >\r\n        <Row>\r\n          <Col>{Object.entries(build.setToSlots).sort(([key1, slotarr1], [key2, slotarr2]) => slotarr2.length - slotarr1.length).map(([key, slotarr]) =>\r\n            <Badge key={key} variant=\"primary\" className=\"mr-2\">\r\n              {slotarr.map(slotKey => Artifact.getArtifactSlotIcon(slotKey))} {Artifact.getArtifactSetName(key)}\r\n            </Badge>\r\n          )}</Col>\r\n        </Row>\r\n        <Row>\r\n          {statsDisplayKeys.map(key =>\r\n            <Col className=\"text-nowrap\" key={key} xs={12} sm={6} md={4} lg={3}>\r\n              <span>{Stat.getStatName(key)}: <span className=\"text-warning\">{build.finalStats[key]?.toFixed(Stat.fixedUnit(key))}{Stat.getStatUnit(key)}</span></span>\r\n            </Col>\r\n          )}\r\n        </Row>\r\n      </ListGroup.Item>\r\n    </div>)\r\n  }\r\n  closeModal = () => this.setState({ modalBuild: null, editCharacter: false })\r\n  BuildModal = (props) => {\r\n    let { build, characterid } = props\r\n    let { editCharacter } = this.state\r\n    return <Modal show={Boolean(editCharacter || build)} onHide={this.closeModal} size=\"xl\" dialogAs={Container} className=\"pt-3 pb-3\">\r\n      <CharacterDisplayCard characterId={characterid} newBuild={build}\r\n        onClose={this.closeModal}\r\n        forceUpdate={this.forceUpdateBuildDisplay}\r\n        editable={editCharacter}\r\n        footer={<Button variant=\"danger\" onClick={this.closeModal}>Close</Button>} />\r\n    </Modal>\r\n  }\r\n\r\n  componentDidMount() {\r\n    //try to generate a build at the beginning after mount.\r\n    this.autoGenerateBuilds()\r\n  }\r\n  componentDidUpdate() {\r\n    let state = deepClone(this.state)\r\n    state.builds = [];\r\n    delete state.generatingBuilds\r\n    delete state.modalBuild\r\n    delete state.editCharacter\r\n    saveToLocalStorage(\"BuildsDisplay.state\", state)\r\n  }\r\n  componentWillUnmount() {\r\n    this.worker?.terminate()\r\n    delete this.worker\r\n  }\r\n  render() {\r\n    let { selectedCharacterId, modalBuild, maxBuildsToShow, builds = [] } = this.state\r\n    let selectedCharacter = CharacterDatabase.getCharacter(selectedCharacterId)\r\n    let characterKey = selectedCharacter?.characterKey\r\n    let characterName = Character.getName(characterKey, \"Character Name\")\r\n    let statsDisplayKeys = []\r\n    if (characterKey)\r\n      statsDisplayKeys = this.statsDisplayKeys(characterKey)\r\n    return (<Container>\r\n      <this.BuildModal build={modalBuild} characterid={selectedCharacterId} />\r\n      <Row className=\"mt-2 mb-2\">\r\n        <Col>\r\n          {/* Build Generator Editor */}\r\n          <this.BuildGeneratorEditorCard statsDisplayKeys={statsDisplayKeys} />\r\n        </Col>\r\n      </Row>\r\n      <Row className=\"mb-2\">\r\n        <Col>\r\n          <Card bg=\"darkcontent\" text=\"lightfont\">\r\n            <Card.Header>{selectedCharacterId ? `Showing ${builds.length} Builds generated for ${characterName}` : \"Select a character to generate builds.\"}</Card.Header>\r\n            {/* Build List */}\r\n            <ListGroup>\r\n              {builds.map((build, index) =>\r\n                (index < maxBuildsToShow) && <this.ArtifactDisplayItem build={build} character={selectedCharacter} index={index} key={Object.values(build.artifactIds).join(\"_\")} statsDisplayKeys={statsDisplayKeys} />\r\n              )}\r\n            </ListGroup>\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n    </Container>)\r\n  }\r\n}"],"sourceRoot":""}