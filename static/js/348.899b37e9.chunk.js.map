{"version":3,"file":"static/js/348.899b37e9.chunk.js","mappings":"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","sources":["Components/Character/CharacterAutocomplete.tsx","Components/Character/LocationName.tsx","Components/Character/ThumbSide.tsx","Components/ConditionalWrapper.tsx","Components/MenuItemWithImage.tsx","Components/SolidColoredTextfield.tsx","Components/SortByButton.tsx","Components/StarDisplay.tsx","Components/ToggleButton/WeaponToggle.tsx","Components/Weapon/WeaponSelectionModal.tsx","PageWeapon/WeaponCard.tsx","PageWeapon/index.tsx","ReactHooks/useForceUpdate.tsx","ReactHooks/useMediaQueryUp.tsx","ReactHooks/useWeapon.tsx","Util/CharacterSort.ts","Util/MultiSelect.ts","Util/SortByFilters.ts","Util/WeaponSort.ts","stateInit.tsx"],"sourcesContent":["import { faUserShield } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { BusinessCenter, Favorite } from \"@mui/icons-material\";\r\nimport { Autocomplete, AutocompleteProps, Box, Skeleton, Typography, useTheme } from \"@mui/material\";\r\nimport { Suspense, useCallback, useContext, useMemo } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport CharacterSheet from \"../../Data/Characters/CharacterSheet\";\r\nimport { DatabaseContext } from \"../../Database/Database\";\r\nimport usePromise from \"../../ReactHooks/usePromise\";\r\nimport { initCharMeta } from \"../../stateInit\";\r\nimport { allElements, allWeaponTypeKeys, CharacterKey } from \"../../Types/consts\";\r\nimport { CharacterFilterConfigs, characterFilterConfigs } from \"../../Util/CharacterSort\";\r\nimport { filterFunction } from \"../../Util/SortByFilters\";\r\nimport MenuItemWithImage from \"../MenuItemWithImage\";\r\nimport SolidColoredTextField from \"../SolidColoredTextfield\";\r\nimport ThumbSide from \"./ThumbSide\";\r\n\r\ntype CharacterAutocompleteValue = CharacterKey | \"\" | \"Inventory\" | \"Equipped\"\r\ntype CharacterAutocompleteOption = {\r\n  value: CharacterAutocompleteValue\r\n  label: string\r\n}\r\ntype CharacterAutocompleteProps = Omit<AutocompleteProps<CharacterAutocompleteOption, false, true, false>, \"onChange\" | \"options\" | \"renderInput\" | \"value\"> & {\r\n  value: CharacterAutocompleteValue\r\n  onChange: (v: any) => void\r\n  filter?: (cs: CharacterSheet, ck: CharacterKey) => boolean\r\n  disable?: (v: any) => boolean\r\n  showDefault?: boolean\r\n  showInventory?: boolean\r\n  showEquipped?: boolean\r\n  defaultText?: string\r\n  defaultIcon?: Displayable\r\n  placeholderText?: string\r\n  labelText?: string\r\n}\r\n\r\nexport default function CharacterAutocomplete({ value, onChange, defaultText = \"\", defaultIcon = \"\", placeholderText = \"\", labelText = \"\", showDefault = false, showInventory = false, showEquipped = false, filter = () => true, disable = () => false, ...props }: CharacterAutocompleteProps) {\r\n  const { t } = useTranslation([\"ui\", \"artifact\", \"charNames_gen\"])\r\n  const theme = useTheme()\r\n  const { database } = useContext(DatabaseContext)\r\n  const characterSheets = usePromise(() => CharacterSheet.getAll, [])\r\n  const filterConfigs = useMemo(() => characterSheets && characterFilterConfigs(database, characterSheets), [database, characterSheets])\r\n  const characterKeys = database.chars.keys.filter(ck => characterSheets?.[ck] && filter(characterSheets[ck], ck)).sort()\r\n\r\n  const textForValue = useCallback((value: CharacterAutocompleteValue): string => {\r\n    switch (value) {\r\n      case \"Equipped\":\r\n        return t(\"artifact:filterLocation.currentlyEquipped\")\r\n      case \"Inventory\":\r\n        return t(\"artifact:filterLocation.inventory\")\r\n      case \"\":\r\n        return defaultText\r\n      default:\r\n        return t(`charNames_gen:${value}`)\r\n    }\r\n  }, [defaultText, t])\r\n\r\n  const imageForValue = useCallback((value: CharacterAutocompleteValue): Displayable => {\r\n    switch (value) {\r\n      case \"Equipped\":\r\n        return <FontAwesomeIcon icon={faUserShield} />\r\n      case \"Inventory\":\r\n        return <BusinessCenter />\r\n      case \"\":\r\n        return defaultIcon\r\n      default:\r\n        return <ThumbSide src={characterSheets![value]?.thumbImgSide} sx={{ pr: 1 }} />\r\n    }\r\n  }, [defaultIcon, characterSheets])\r\n\r\n  const characterOptions = useMemo(() => filterConfigs && charOptions(characterKeys, filterConfigs, textForValue, showDefault, showInventory, showEquipped),\r\n    [filterConfigs, characterKeys, showDefault, showInventory, showEquipped, textForValue])\r\n\r\n\r\n\r\n  if (!characterSheets || !characterOptions) return <Skeleton height={50} />\r\n\r\n  return <Autocomplete\r\n    autoHighlight\r\n    options={characterOptions}\r\n    clearIcon={value ? undefined : \"\"} // Hide the clear icon if the value is already default\r\n    getOptionLabel={(option) => option.label}\r\n    onChange={(event, newValue, reason) => (event.type !== \"change\" || reason !== \"clear\") && onChange(newValue ? newValue.value : \"\")}\r\n    isOptionEqualToValue={(option, value) => option.value === value.value}\r\n    getOptionDisabled={option => disable(option.value)}\r\n    value={{ value, label: textForValue(value) }}\r\n    renderInput={(props) => <SolidColoredTextField\r\n      {...props}\r\n      label={labelText}\r\n      placeholder={placeholderText}\r\n      startAdornment={imageForValue(value)}\r\n      hasValue={value ? true : false}\r\n    />}\r\n    renderOption={(props, option) => {\r\n      const favorite = option.value !== \"Equipped\" && option.value !== \"Inventory\"\r\n        && option.value !== \"\" && database.states.getWithInit(`charMeta_${option.value}`, initCharMeta).favorite\r\n      return <MenuItemWithImage\r\n        key={option.value ? option.value : \"default\"}\r\n        value={option.value ? option.value : \"default\"}\r\n        image={imageForValue(option.value)}\r\n        text={\r\n          <Suspense fallback={<Skeleton variant=\"text\" width={100} />}>\r\n            <Typography variant=\"inherit\" noWrap>\r\n              {textForValue(option.value)}\r\n            </Typography>\r\n          </Suspense>\r\n        }\r\n        theme={theme}\r\n        isSelected={value === option.value}\r\n        addlElement={<>\r\n          {favorite && <Box display=\"flex\" flexGrow={1} />}\r\n          {favorite && <Favorite sx={{ ml: 1, mr: -0.5 }} />}\r\n        </>}\r\n        props={props}\r\n      />\r\n    }}\r\n    {...props}\r\n  />\r\n}\r\n\r\n\r\nfunction charOptions(characterKeys: CharacterKey[], filterConfigs: CharacterFilterConfigs | undefined, textForValue: (v: CharacterAutocompleteValue) => string, showDefault: boolean, showInventory, showEquipped): CharacterAutocompleteOption[] {\r\n  if (!filterConfigs) return []\r\n  const base: CharacterAutocompleteOption[] = []\r\n  if (showDefault) {\r\n    base.push({ value: \"\", label: textForValue(\"\") })\r\n  }\r\n  if (showInventory) {\r\n    base.push({ value: \"Inventory\", label: textForValue(\"Inventory\") })\r\n  }\r\n  if (showEquipped) {\r\n    base.push({ value: \"Equipped\", label: textForValue(\"Equipped\") })\r\n  }\r\n  const faves = characterKeys\r\n    .filter(filterFunction({ element: [...allElements], weaponType: [...allWeaponTypeKeys], favorite: \"yes\", name: \"\" }, filterConfigs))\r\n    .map(characterKey => ({ value: characterKey, label: textForValue(characterKey) }))\r\n  const nonFaves = characterKeys\r\n    .filter(filterFunction({ element: [...allElements], weaponType: [...allWeaponTypeKeys], favorite: \"no\", name: \"\" }, filterConfigs))\r\n    .map(characterKey => ({ value: characterKey, label: textForValue(characterKey) }))\r\n\r\n  return base.concat(faves).concat(nonFaves)\r\n}\r\n","import { BusinessCenter } from \"@mui/icons-material\";\r\nimport { Typography } from \"@mui/material\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport CharacterSheet from \"../../Data/Characters/CharacterSheet\";\r\nimport usePromise from \"../../ReactHooks/usePromise\";\r\n\r\nexport default function LocationName({ location }) {\r\n  const { t } = useTranslation(\"ui\");\r\n  const characterSheet = usePromise(() => CharacterSheet.get(location ?? \"\"), [location])\r\n  return <Typography component=\"span\">\r\n    {characterSheet?.name ? characterSheet.nameWIthIcon : <span><BusinessCenter sx={{ verticalAlign: \"text-bottom\" }} /> {t<string>(\"inventory\")}</span>}\r\n  </Typography>\r\n\r\n}\r\n","import { styled } from \"@mui/system\";\r\n\r\nconst ThumbSide = styled(\"img\")(({ theme }) => ({\r\n  display: \"inline-block\",\r\n  width: \"auto\",\r\n  height: `2.3em`,\r\n  lineHeight: 1,\r\n  verticalAlign: \"text-bottom\",\r\n  marginTop: theme.spacing(-3),\r\n  marginLeft: theme.spacing(-1.25),\r\n  marginRight: theme.spacing(-1),\r\n  marginBottom: theme.spacing(-1),\r\n}))\r\n\r\nexport default ThumbSide","import { ReactNode } from \"react\";\r\n\r\ntype Prop = {\r\n  condition: boolean,\r\n  wrapper: (children: ReactNode) => ReactNode\r\n  falseWrapper?: (children: ReactNode) => ReactNode\r\n  children: ReactNode\r\n}\r\n// Wrap children with element provided by wrapper func when condition is true.\r\nexport default function ConditionalWrapper({ condition, wrapper, falseWrapper, children }: Prop) {\r\n  return (condition ? wrapper(children) : (falseWrapper ? falseWrapper(children) : children)) as JSX.Element;\r\n}","import { ListItemIcon, ListItemText, MenuItem, Theme } from \"@mui/material\";\r\n\r\ntype MenuItemWithImageProps = {\r\n  value: string\r\n  image?: Displayable\r\n  text: Displayable\r\n  theme: Theme\r\n  isSelected?: boolean\r\n  addlElement?: Displayable\r\n  props?: object\r\n}\r\n\r\nexport default function MenuItemWithImage({ value, image = \"\", text, theme, isSelected, addlElement, props }: MenuItemWithImageProps) {\r\n  return <MenuItem key={value} value={value} {...props}>\r\n    <ListItemIcon>{image}</ListItemIcon>\r\n    <ListItemText primaryTypographyProps={{ style: { fontWeight: isSelected ? theme.typography.fontWeightMedium : theme.typography.fontWeightRegular } }}>\r\n      {text}\r\n    </ListItemText>\r\n    {addlElement && addlElement}\r\n  </MenuItem>\r\n}\r\n","import { TextField, TextFieldProps, useTheme } from \"@mui/material\";\r\n\r\ntype SolidColoredTextFieldProps = Omit<TextFieldProps, \"multiline\" | \"variant\" | \"color\" | \"hiddenLabel\" | \"type\" | \"InputLabelProps\"> & {\r\n  hasValue: boolean\r\n  startAdornment?: Displayable\r\n}\r\nexport default function SolidColoredTextField({ hasValue, startAdornment, InputProps, sx, ...props }: SolidColoredTextFieldProps) {\r\n  const theme = useTheme()\r\n  return <TextField\r\n    {...props}\r\n    variant=\"filled\"\r\n    color={hasValue ? \"success\" : \"primary\"}\r\n    hiddenLabel={props.label ? false : true}\r\n    type=\"search\"\r\n    InputProps={{\r\n      ...InputProps,\r\n      startAdornment,\r\n    }}\r\n    InputLabelProps={{ style: { color: theme.palette.text.primary } }}\r\n    sx={{\r\n      ...sx,\r\n      // Fill in the background without using the `focused` prop\r\n      \"& .MuiFilledInput-root\": { backgroundColor: hasValue ? theme.palette.success.main : theme.palette.primary.main, paddingTop: props.label ? undefined : 0, paddingBottom: 0 },\r\n      \"& .MuiFilledInput-root.Mui-focused\": { backgroundColor: hasValue ? theme.palette.success.light : theme.palette.primary.light },\r\n      \"& .MuiFilledInput-root:hover\": { backgroundColor: hasValue ? theme.palette.success.dark : theme.palette.primary.dark },\r\n      // Remove the colored bar at the bottom of the input\r\n      \"& .MuiFilledInput-root:before\": { border: \"none\" },\r\n      \"& .MuiFilledInput-root.Mui-disabled:before\": { border: \"none\" },\r\n      \"& .MuiFilledInput-root:after\": { border: \"none\" },\r\n      \"& .MuiFilledInput-root:hover:not(.Mui-disabled):before\": { border: \"none\" },\r\n      // Remove the x at the end of search input for IE\r\n      \"& input[type=search]::-ms-clear\": { display: \"none\", width: 0, height: 0 },\r\n      \"& input[type=search]::-ms-reveal\": { display: \"none\", width: 0, height: 0 },\r\n      // Remove the x at the end of search input for Chrome\r\n      \"& input[type=search]::-webkit-search-decoration\": { display: \"none\" },\r\n      \"& input[type=search]::-webkit-search-cancel-button\": { display: \"none\" },\r\n      \"& input[type=search]::-webkit-search-results-button\": { display: \"none\" },\r\n      \"& input[type=search]::-webkit-search-results-decoration\": { display: \"none\" },\r\n    }}\r\n  />\r\n}\r\n","import { faSortAmountDownAlt, faSortAmountUp } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { Button, ButtonGroup, ButtonGroupProps, MenuItem } from \"@mui/material\";\r\nimport { Box } from \"@mui/system\";\r\nimport { Trans, useTranslation } from \"react-i18next\";\r\nimport DropdownButton from \"./DropdownMenu/DropdownButton\";\r\n\r\ntype SortByButtonProps = ButtonGroupProps & {\r\n  sortKeys: string[]\r\n  value: string\r\n  onChange: (value: string) => void\r\n  ascending: boolean\r\n  onChangeAsc: (value: boolean) => void\r\n}\r\n// Assumes that all the sortKeys has corresponding translations in ui.json sortMap\r\nexport default function SortByButton({ sortKeys, value, onChange, ascending, onChangeAsc, ...props }: SortByButtonProps) {\r\n  const { t } = useTranslation(\"ui\")\r\n  return <Box display=\"flex\" alignItems=\"center\" gap={1}>\r\n    <Trans t={t} i18nKey={t(\"sortBy\") as any}>Sort by: </Trans>\r\n    <ButtonGroup {...props} >\r\n      <DropdownButton title={<Trans t={t} i18nKey={t(`sortMap.${value}`) as any}>{{ value: t(`sortMap.${value}`) }}</Trans>}>\r\n        {sortKeys.map(key =>\r\n          <MenuItem key={key} selected={value === key} disabled={value === key} onClick={() => onChange(key)}>{t(`sortMap.${key}`) as any}</MenuItem>)}\r\n      </DropdownButton>\r\n      <Button onClick={() => onChangeAsc(!ascending)} startIcon={<FontAwesomeIcon icon={ascending ? faSortAmountDownAlt : faSortAmountUp} className=\"fa-fw\" />}>\r\n        {ascending ? <Trans t={t} i18nKey=\"ascending\" >Ascending</Trans> : <Trans t={t} i18nKey=\"descending\" >Descending</Trans>}\r\n      </Button>\r\n    </ButtonGroup>\r\n  </Box>\r\n}\r\n","import { faStar } from '@fortawesome/free-solid-svg-icons'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { Typography } from '@mui/material'\r\nimport { Rarity } from '../Types/consts'\r\n\r\nexport const StarIcon = () => <FontAwesomeIcon icon={faStar} />\r\nexport const StarsDisplay = ({ stars, colored = false }: { stars: Rarity, colored?: boolean }) =>\r\n  <Typography color={colored ? \"warning.main\" : undefined} component=\"span\">\r\n    {stars ? [...Array(stars).keys()].map((_, i) => <StarIcon key={i} />) : null}\r\n  </Typography>\r\n","import { ToggleButton } from \"@mui/material\";\r\nimport Assets from \"../../Assets/Assets\";\r\nimport { allWeaponTypeKeys, WeaponTypeKey } from \"../../Types/consts\";\r\nimport { handleMultiSelect } from \"../../Util/MultiSelect\";\r\nimport ImgIcon from \"../Image/ImgIcon\";\r\nimport SolidToggleButtonGroup, { SolidToggleButtonGroupProps } from \"../SolidToggleButtonGroup\";\r\ntype WeaponToggleProps = Omit<SolidToggleButtonGroupProps, \"onChange\" | \"value\"> & {\r\n  onChange: (value: WeaponTypeKey[]) => void\r\n  value: WeaponTypeKey[]\r\n}\r\nconst weaponTypeHandler = handleMultiSelect([...allWeaponTypeKeys])\r\nexport default function WeaponToggle({ value, onChange, ...props }: WeaponToggleProps) {\r\n  return <SolidToggleButtonGroup exclusive value={value} {...props}>\r\n    {allWeaponTypeKeys.map(wt => <ToggleButton key={wt} value={wt} onClick={() => onChange(weaponTypeHandler(value, wt))}>\r\n      <ImgIcon src={Assets.weaponTypes?.[wt]} size={2} />\r\n    </ToggleButton>)}\r\n  </SolidToggleButtonGroup>\r\n}\r\n","import { Box, CardActionArea, CardContent, Divider, Grid, TextField, Typography } from \"@mui/material\"\r\nimport { ChangeEvent, useDeferredValue, useEffect, useState } from \"react\"\r\nimport { useTranslation } from \"react-i18next\"\r\nimport Assets from \"../../Assets/Assets\"\r\nimport WeaponSheet from \"../../Data/Weapons/WeaponSheet\"\r\nimport usePromise from \"../../ReactHooks/usePromise\"\r\nimport { allWeaponKeys, allWeaponTypeKeys, WeaponKey, WeaponTypeKey } from \"../../Types/consts\"\r\nimport CardDark from \"../Card/CardDark\"\r\nimport CardLight from \"../Card/CardLight\"\r\nimport CloseButton from \"../CloseButton\"\r\nimport ImgIcon from \"../Image/ImgIcon\"\r\nimport ModalWrapper from \"../ModalWrapper\"\r\nimport { StarsDisplay } from \"../StarDisplay\"\r\nimport WeaponToggle from \"../ToggleButton/WeaponToggle\"\r\n\r\ntype WeaponSelectionModalProps = {\r\n  show: boolean,\r\n  ascension?: number,\r\n  onHide: () => void,\r\n  onSelect: (wKey: WeaponKey) => void,\r\n  filter?: (sheet: WeaponSheet) => boolean,\r\n  weaponTypeFilter?: WeaponTypeKey,\r\n}\r\n\r\nexport default function WeaponSelectionModal({ show, ascension = 0, onHide, onSelect, filter = () => true, weaponTypeFilter }: WeaponSelectionModalProps) {\r\n  const { t } = useTranslation([\"page_weapon\", \"weaponNames_gen\"])\r\n  const weaponSheets = usePromise(() => WeaponSheet.getAll, [])\r\n  const [weaponFilter, setWeaponfilter] = useState<WeaponTypeKey[]>(weaponTypeFilter ? [weaponTypeFilter] : [...allWeaponTypeKeys])\r\n\r\n  useEffect(() => weaponTypeFilter && setWeaponfilter([weaponTypeFilter]), [weaponTypeFilter])\r\n\r\n  const [searchTerm, setSearchTerm] = useState(\"\")\r\n  const deferredSearchTerm = useDeferredValue(searchTerm)\r\n\r\n  const weaponIdList = !weaponSheets ? [] : allWeaponKeys.filter(wKey => filter(weaponSheets[wKey]))\r\n    .filter(wKey => weaponFilter.includes(weaponSheets?.[wKey]?.weaponType))\r\n    .filter(wKey => !deferredSearchTerm || t(`weaponNames_gen:${wKey}`).toLowerCase().includes(deferredSearchTerm.toLowerCase()))\r\n    .sort((a, b) => (weaponSheets?.[b]?.rarity ?? 0) - (weaponSheets?.[a]?.rarity ?? 0))\r\n\r\n  if (!weaponSheets) return null\r\n\r\n  return <ModalWrapper open={show} onClose={onHide}>\r\n    <CardDark>\r\n      <CardContent sx={{ py: 1 }}>\r\n        <Grid container spacing={1}>\r\n          <Grid item>\r\n            <WeaponToggle value={weaponFilter} onChange={setWeaponfilter} disabled={!!weaponTypeFilter} size=\"small\" />\r\n          </Grid >\r\n          <Grid item flexGrow={1}>\r\n            <TextField\r\n              autoFocus\r\n              size=\"small\"\r\n              value={searchTerm}\r\n              onChange={(e: ChangeEvent<HTMLTextAreaElement>) => setSearchTerm(e.target.value)}\r\n              label={t(\"weaponName\")}\r\n              sx={{ height: \"100%\" }}\r\n              InputProps={{\r\n                sx: { height: \"100%\" }\r\n              }}\r\n            />\r\n          </Grid>\r\n          <Grid item>\r\n            <CloseButton onClick={onHide} />\r\n          </Grid >\r\n        </Grid>\r\n      </CardContent>\r\n      <Divider />\r\n      <CardContent><Grid container spacing={1}>\r\n        {weaponIdList.map(weaponKey => {\r\n          const weaponSheet = weaponSheets[weaponKey]\r\n          return <Grid item key={weaponKey} lg={3} md={4}>\r\n            <CardLight sx={{ height: \"100%\" }} >\r\n              <CardActionArea onClick={() => { onHide(); onSelect(weaponKey) }} sx={{ display: \"flex\" }}>\r\n                <Box component=\"img\" src={weaponSheet.getImg(ascension)} sx={{ width: 100, height: \"auto\" }} className={` grad-${weaponSheet.rarity}star`} />\r\n                <Box sx={{ flexGrow: 1, px: 1 }}>\r\n                  <Typography variant=\"subtitle1\">{weaponSheet.name}</Typography>\r\n                  <Typography><ImgIcon src={Assets.weaponTypes?.[weaponSheet.weaponType]} /> <StarsDisplay stars={weaponSheet.rarity} colored /></Typography>\r\n                </Box>\r\n              </CardActionArea>\r\n            </CardLight>\r\n          </Grid>\r\n        })}\r\n      </Grid></CardContent>\r\n      <Divider />\r\n      <CardContent sx={{ py: 1 }}>\r\n        <CloseButton large onClick={onHide} />\r\n      </CardContent>\r\n    </CardDark>\r\n  </ModalWrapper>\r\n}\r\n","import { faEdit, faTrashAlt } from \"@fortawesome/free-solid-svg-icons\"\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\r\nimport { BusinessCenter, Lock, LockOpen } from \"@mui/icons-material\"\r\nimport { Box, Button, ButtonGroup, CardActionArea, CardContent, IconButton, Skeleton, Tooltip, Typography } from \"@mui/material\"\r\nimport { Suspense, useCallback, useContext, useMemo } from \"react\"\r\nimport { useTranslation } from \"react-i18next\"\r\nimport Assets from \"../Assets/Assets\"\r\nimport CardLight from \"../Components/Card/CardLight\"\r\nimport CharacterAutocomplete from '../Components/Character/CharacterAutocomplete'\r\nimport LocationName from \"../Components/Character/LocationName\"\r\nimport ConditionalWrapper from \"../Components/ConditionalWrapper\"\r\nimport ImgIcon from \"../Components/Image/ImgIcon\"\r\nimport { StarsDisplay } from \"../Components/StarDisplay\"\r\nimport StatIcon from \"../Components/StatIcon\"\r\nimport CharacterSheet from \"../Data/Characters/CharacterSheet\"\r\nimport { ascensionMaxLevel } from \"../Data/LevelData\"\r\nimport WeaponSheet from \"../Data/Weapons/WeaponSheet\"\r\nimport { DatabaseContext } from \"../Database/Database\"\r\nimport { uiInput as input } from \"../Formula\"\r\nimport { computeUIData, dataObjForWeapon } from \"../Formula/api\"\r\nimport KeyMap, { valueString } from \"../KeyMap\"\r\nimport usePromise from \"../ReactHooks/usePromise\"\r\nimport useWeapon from \"../ReactHooks/useWeapon\"\r\nimport { CharacterKey } from \"../Types/consts\"\r\n\r\ntype WeaponCardProps = { weaponId: string, onClick?: (weaponId: string) => void, onEdit?: (weaponId: string) => void, onDelete?: (weaponId: string) => void, canEquip?: boolean, extraButtons?: JSX.Element }\r\nexport default function WeaponCard({ weaponId, onClick, onEdit, onDelete, canEquip = false, extraButtons }: WeaponCardProps) {\r\n  const { t } = useTranslation([\"page_weapon\", \"ui\"]);\r\n  const { database } = useContext(DatabaseContext)\r\n  const databaseWeapon = useWeapon(weaponId)\r\n  const weapon = databaseWeapon\r\n  const weaponSheet = usePromise(() => weapon?.key ? WeaponSheet.get(weapon.key) : undefined, [weapon?.key])\r\n\r\n  const filter = useCallback(\r\n    (cs: CharacterSheet) => cs.weaponTypeKey === weaponSheet?.weaponType,\r\n    [weaponSheet],\r\n  )\r\n\r\n  const wrapperFunc = useCallback(children => <CardActionArea onClick={() => onClick?.(weaponId)} >{children}</CardActionArea>, [onClick, weaponId],)\r\n  const falseWrapperFunc = useCallback(children => <Box >{children}</Box>, [])\r\n\r\n  const equipOnChar = useCallback((charKey: CharacterKey | \"\") => database.weapons.set(weaponId, { location: charKey }), [database, weaponId],)\r\n\r\n  const UIData = useMemo(() => weaponSheet && weapon && computeUIData([weaponSheet.data, dataObjForWeapon(weapon)]), [weaponSheet, weapon])\r\n\r\n  if (!weapon || !weaponSheet || !UIData) return null;\r\n  const { level, ascension, refinement, id, location = \"\", lock } = weapon\r\n  const weaponTypeKey = UIData.get(input.weapon.type).value!\r\n  const stats = [input.weapon.main, input.weapon.sub, input.weapon.sub2].map(x => UIData.get(x))\r\n  const img = weaponSheet.getImg(ascension)\r\n\r\n  return <Suspense fallback={<Skeleton variant=\"rectangular\" sx={{ width: \"100%\", height: \"100%\", minHeight: 300 }} />}>\r\n    <CardLight sx={{ height: \"100%\", display: \"flex\", flexDirection: \"column\", justifyContent: \"space-between\" }}>\r\n      <ConditionalWrapper condition={!!onClick} wrapper={wrapperFunc} falseWrapper={falseWrapperFunc}>\r\n        <Box className={`grad-${weaponSheet.rarity}star`} sx={{ position: \"relative\", pt: 2, px: 2, }}>\r\n          {!onClick && <IconButton color=\"primary\" onClick={() => database.weapons.set(id, { lock: !lock })} sx={{ position: \"absolute\", right: 0, bottom: 0, zIndex: 2 }}>\r\n            {lock ? <Lock /> : <LockOpen />}\r\n          </IconButton>}\r\n          <Box sx={{ position: \"relative\", zIndex: 1 }}>\r\n            <Box component=\"div\" sx={{ display: \"flex\", alignItems: \"center\", gap: 1, mb: 1 }}>\r\n              <ImgIcon sx={{ fontSize: \"1.5em\" }} src={Assets.weaponTypes?.[weaponTypeKey]} />\r\n              <Typography noWrap sx={{ textAlign: \"center\", backgroundColor: \"rgba(100,100,100,0.35)\", borderRadius: \"1em\", px: 1 }}><strong>{weaponSheet.name}</strong></Typography>\r\n            </Box>\r\n            <Typography component=\"span\" variant=\"h5\">Lv. {level}</Typography>\r\n            <Typography component=\"span\" variant=\"h5\" color=\"text.secondary\">/{ascensionMaxLevel[ascension]}</Typography>\r\n            <Typography variant=\"h6\">Refinement <strong>{refinement}</strong></Typography>\r\n            <Typography><StarsDisplay stars={weaponSheet.rarity} colored /></Typography>\r\n          </Box>\r\n          <Box sx={{ height: \"100%\", position: \"absolute\", right: 0, top: 0 }}>\r\n            <Box\r\n              component=\"img\"\r\n              src={img ?? \"\"}\r\n              width=\"auto\"\r\n              height=\"100%\"\r\n              sx={{ float: \"right\" }}\r\n            />\r\n          </Box>\r\n        </Box>\r\n        <CardContent>\r\n          {stats.map(node => {\r\n            if (!node.info.key) return null\r\n            const displayVal = valueString(node.value, node.unit, !node.unit ? 0 : undefined)\r\n            return <Box key={node.info.key} sx={{ display: \"flex\" }}>\r\n              <Typography flexGrow={1}>{StatIcon[node.info.key!]} {KeyMap.get(node.info.key)}</Typography>\r\n              <Typography>{displayVal}</Typography>\r\n            </Box>\r\n          })}\r\n        </CardContent>\r\n      </ConditionalWrapper>\r\n      <Box sx={{ p: 1, display: \"flex\", gap: 1, justifyContent: \"space-between\", alignItems: \"center\" }}>\r\n        {canEquip\r\n          ? <CharacterAutocomplete size=\"small\" sx={{ flexGrow: 1 }} disable={(v: any) => v === \"\"}\r\n            showDefault defaultIcon={<BusinessCenter />} defaultText={t(\"ui:inventory\")}\r\n            value={location} onChange={equipOnChar} filter={filter} disableClearable />\r\n          : <LocationName location={location} />}\r\n        <ButtonGroup>\r\n          {!!onEdit && <Tooltip title={<Typography>{t`page_weapon:edit`}</Typography>} placement=\"top\" arrow>\r\n            <Button color=\"info\" onClick={() => onEdit(id)} >\r\n              <FontAwesomeIcon icon={faEdit} className=\"fa-fw\" />\r\n            </Button>\r\n          </Tooltip>}\r\n          {!!onDelete && <Button color=\"error\" onClick={() => onDelete(id)} disabled={!!location || lock} >\r\n            <FontAwesomeIcon icon={faTrashAlt} className=\"fa-fw\" />\r\n          </Button>}\r\n          {extraButtons}\r\n        </ButtonGroup>\r\n      </Box>\r\n    </CardLight>\r\n  </Suspense>\r\n}\r\n","import { faPlus } from '@fortawesome/free-solid-svg-icons';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { Box, Button, CardContent, Grid, Pagination, Skeleton, TextField, ToggleButton, Typography } from '@mui/material';\r\nimport React, { ChangeEvent, lazy, Suspense, useCallback, useContext, useDeferredValue, useEffect, useMemo, useRef, useState } from 'react';\r\nimport ReactGA from 'react-ga4';\r\nimport { Trans, useTranslation } from 'react-i18next';\r\nimport CardDark from '../Components/Card/CardDark';\r\nimport SolidToggleButtonGroup from '../Components/SolidToggleButtonGroup';\r\nimport SortByButton from '../Components/SortByButton';\r\nimport { StarsDisplay } from '../Components/StarDisplay';\r\nimport WeaponToggle from '../Components/ToggleButton/WeaponToggle';\r\nimport WeaponSelectionModal from '../Components/Weapon/WeaponSelectionModal';\r\nimport WeaponSheet from '../Data/Weapons/WeaponSheet';\r\nimport { DatabaseContext } from '../Database/Database';\r\nimport useDBState from '../ReactHooks/useDBState';\r\nimport useForceUpdate from '../ReactHooks/useForceUpdate';\r\nimport useMediaQueryUp from '../ReactHooks/useMediaQueryUp';\r\nimport usePromise from '../ReactHooks/usePromise';\r\nimport { allRarities, allWeaponTypeKeys, WeaponKey } from '../Types/consts';\r\nimport { filterFunction, sortFunction } from '../Util/SortByFilters';\r\nimport { clamp } from '../Util/Util';\r\nimport { weaponFilterConfigs, weaponSortConfigs, weaponSortKeys } from '../Util/WeaponSort';\r\nimport { initialWeapon } from '../Util/WeaponUtil';\r\nimport WeaponCard from './WeaponCard';\r\n\r\n// Lazy load the weapon display\r\nconst WeaponEditor = lazy(() => import('./WeaponEditor'))\r\n\r\nconst columns = { xs: 1, sm: 2, md: 3, lg: 3, xl: 4 }\r\nconst numToShowMap = { xs: 10 - 1, sm: 12 - 1, md: 24 - 1, lg: 24 - 1, xl: 24 - 1 }\r\n\r\nconst initialState = () => ({\r\n  editWeaponId: \"\",\r\n  sortType: weaponSortKeys[0],\r\n  ascending: false,\r\n  rarity: [...allRarities],\r\n  weaponType: [...allWeaponTypeKeys],\r\n})\r\n\r\nexport default function PageWeapon() {\r\n  const { t } = useTranslation([\"page_weapon\", \"ui\", \"weaponNames_gen\"])\r\n  const { database } = useContext(DatabaseContext)\r\n  const [state, stateDispatch] = useDBState(\"WeaponDisplay\", initialState)\r\n  const [newWeaponModalShow, setnewWeaponModalShow] = useState(false)\r\n  const [dbDirty, forceUpdate] = useForceUpdate()\r\n  const invScrollRef = useRef<HTMLDivElement>(null)\r\n  const [pageIndex, setPageIndex] = useState(0)\r\n  //set follow, should run only once\r\n  useEffect(() => {\r\n    ReactGA.send({ hitType: \"pageview\", page: '/weapon' })\r\n    return database.weapons.followAny((k, r) => (r === \"new\" || r === \"remove\") && forceUpdate())\r\n  }, [forceUpdate, database])\r\n\r\n  const brPt = useMediaQueryUp()\r\n  const maxNumToDisplay = numToShowMap[brPt]\r\n\r\n  const weaponSheets = usePromise(() => WeaponSheet.getAll, [])\r\n\r\n  const deleteWeapon = useCallback(async (key: string) => {\r\n    const weapon = database.weapons.get(key)\r\n    if (!weapon) return\r\n    const name = t(`weaponNames_gen:${weapon.key}`)\r\n\r\n    if (!window.confirm(t(\"removeWeapon\", { value: name }))) return\r\n    database.weapons.remove(key)\r\n    if (state.editWeaponId === key)\r\n      stateDispatch({ editWeaponId: \"\" })\r\n  }, [state.editWeaponId, stateDispatch, database, t])\r\n\r\n  const editWeapon = useCallback((key: string | undefined) => {\r\n    stateDispatch({ editWeaponId: key })\r\n  }, [stateDispatch])\r\n\r\n  const newWeapon = useCallback(\r\n    (weaponKey: WeaponKey) => {\r\n      editWeapon(database.weapons.new(initialWeapon(weaponKey)))\r\n    },\r\n    [database, editWeapon])\r\n\r\n  const [searchTerm, setSearchTerm] = useState(\"\")\r\n  const deferredSearchTerm = useDeferredValue(searchTerm)\r\n\r\n  const { sortType, ascending, weaponType, rarity } = state\r\n  const sortConfigs = useMemo(() => weaponSheets && weaponSortConfigs(weaponSheets), [weaponSheets])\r\n  const filterConfigs = useMemo(() => weaponSheets && weaponFilterConfigs(weaponSheets), [weaponSheets])\r\n  const { weaponIdList, totalWeaponNum } = useMemo(() => {\r\n    const weapons = database.weapons.values\r\n    const totalWeaponNum = weapons.length\r\n    if (!sortConfigs || !filterConfigs) return { weaponIdList: [], totalWeaponNum }\r\n    const weaponIdList = weapons.filter(filterFunction({ weaponType, rarity, name: deferredSearchTerm }, filterConfigs))\r\n      .sort(sortFunction(sortType, ascending, sortConfigs))\r\n      .map(weapon => weapon.id)\r\n    return dbDirty && { weaponIdList, totalWeaponNum }\r\n  }, [dbDirty, database, sortConfigs, filterConfigs, sortType, ascending, rarity, weaponType, deferredSearchTerm])\r\n\r\n  const { weaponIdsToShow, numPages, currentPageIndex } = useMemo(() => {\r\n    const numPages = Math.ceil(weaponIdList.length / maxNumToDisplay)\r\n    const currentPageIndex = clamp(pageIndex, 0, numPages - 1)\r\n    return { weaponIdsToShow: weaponIdList.slice(currentPageIndex * maxNumToDisplay, (currentPageIndex + 1) * maxNumToDisplay), numPages, currentPageIndex }\r\n  }, [weaponIdList, pageIndex, maxNumToDisplay])\r\n\r\n  // Pagination\r\n  const totalShowing = weaponIdList.length !== totalWeaponNum ? `${weaponIdList.length}/${totalWeaponNum}` : `${totalWeaponNum}`\r\n  const setPage = useCallback(\r\n    (_: ChangeEvent<unknown>, value: number) => {\r\n      invScrollRef.current?.scrollIntoView({ behavior: \"smooth\" })\r\n      setPageIndex(value - 1);\r\n    },\r\n    [setPageIndex, invScrollRef]\r\n  )\r\n\r\n  const resetEditWeapon = useCallback(() => stateDispatch({ editWeaponId: \"\" }), [stateDispatch])\r\n\r\n  const { editWeaponId } = state\r\n\r\n  // Validate weaponId to be an actual weapon\r\n  useEffect(() => {\r\n    if (!editWeaponId) return\r\n    if (!database.weapons.get(editWeaponId))\r\n      resetEditWeapon()\r\n  }, [database, editWeaponId, resetEditWeapon])\r\n\r\n  return <Box my={1} display=\"flex\" flexDirection=\"column\" gap={1}>\r\n    {/* Editor/character detail display */}\r\n    <Suspense fallback={false}>\r\n      <WeaponEditor\r\n        weaponId={editWeaponId}\r\n        footer\r\n        onClose={resetEditWeapon}\r\n      />\r\n    </Suspense>\r\n\r\n    <CardDark ref={invScrollRef} sx={{ p: 2, pb: 1 }}>\r\n      <Grid container spacing={1} sx={{ mb: 1 }}>\r\n        <Grid item>\r\n          <WeaponToggle sx={{ height: \"100%\" }} onChange={weaponType => stateDispatch({ weaponType })} value={weaponType} size=\"small\" />\r\n        </Grid>\r\n        <Grid item>\r\n          <SolidToggleButtonGroup sx={{ height: \"100%\" }} onChange={(e, newVal) => stateDispatch({ rarity: newVal })} value={rarity} size=\"small\">\r\n            {allRarities.map(star => <ToggleButton key={star} value={star}><Box display=\"flex\" gap={1}><strong>{star}</strong><StarsDisplay stars={1} /></Box></ToggleButton>)}\r\n          </SolidToggleButtonGroup>\r\n        </Grid>\r\n        <Grid item flexGrow={1}>\r\n          <TextField\r\n            autoFocus\r\n            size=\"small\"\r\n            value={searchTerm}\r\n            onChange={(e: ChangeEvent<HTMLTextAreaElement>) => setSearchTerm(e.target.value)}\r\n            label={t(\"weaponName\")}\r\n            sx={{ height: \"100%\" }}\r\n            InputProps={{\r\n              sx: { height: \"100%\" }\r\n            }}\r\n          />\r\n        </Grid>\r\n        <Grid item>\r\n          <SortByButton sx={{ height: \"100%\" }} sortKeys={weaponSortKeys}\r\n            value={sortType} onChange={sortType => stateDispatch({ sortType })}\r\n            ascending={ascending} onChangeAsc={ascending => stateDispatch({ ascending })}\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n      <Grid container alignItems=\"flex-end\">\r\n        <Grid item flexGrow={1}>\r\n          <Pagination count={numPages} page={currentPageIndex + 1} onChange={setPage} />\r\n        </Grid>\r\n        <Grid item>\r\n          <ShowingWeapon numShowing={weaponIdsToShow.length} total={totalShowing} t={t} />\r\n        </Grid>\r\n      </Grid>\r\n    </CardDark>\r\n    <Suspense fallback={<Skeleton variant=\"rectangular\" sx={{ width: \"100%\", height: \"100%\", minHeight: 500 }} />}>\r\n      <Grid container spacing={1} columns={columns}>\r\n        <Grid item xs={1}>\r\n          <CardDark sx={{ height: \"100%\", width: \"100%\", minHeight: 300, display: \"flex\", flexDirection: \"column\" }}>\r\n            <CardContent>\r\n              <Typography sx={{ textAlign: \"center\" }}>{t(\"page_weapon:addWeapon\")}</Typography>\r\n            </CardContent>\r\n            <WeaponSelectionModal show={newWeaponModalShow} onHide={() => setnewWeaponModalShow(false)} onSelect={newWeapon} />\r\n            <Box sx={{\r\n              flexGrow: 1,\r\n              display: \"flex\",\r\n              justifyContent: \"center\",\r\n              alignItems: \"center\"\r\n            }}\r\n            >\r\n              <Button onClick={() => setnewWeaponModalShow(true)} color=\"info\" sx={{ borderRadius: \"1em\" }}>\r\n                <Typography variant=\"h1\"><FontAwesomeIcon icon={faPlus} className=\"fa-fw\" /></Typography>\r\n              </Button>\r\n            </Box>\r\n          </CardDark>\r\n        </Grid>\r\n        {weaponIdsToShow.map(weaponId =>\r\n          <Grid item key={weaponId} xs={1} >\r\n            <WeaponCard\r\n              weaponId={weaponId}\r\n              onDelete={deleteWeapon}\r\n              onEdit={editWeapon}\r\n              canEquip\r\n            />\r\n          </Grid>)}\r\n      </Grid>\r\n    </Suspense>\r\n    {numPages > 1 && <CardDark><CardContent>\r\n      <Grid container alignItems=\"flex-end\">\r\n        <Grid item flexGrow={1}>\r\n          <Pagination count={numPages} page={currentPageIndex + 1} onChange={setPage} />\r\n        </Grid>\r\n        <Grid item>\r\n          <ShowingWeapon numShowing={weaponIdsToShow.length} total={totalShowing} t={t} />\r\n        </Grid>\r\n      </Grid>\r\n    </CardContent></CardDark>}\r\n  </Box>\r\n}\r\nfunction ShowingWeapon({ numShowing, total, t }) {\r\n  return <Typography color=\"text.secondary\">\r\n    <Trans t={t} i18nKey=\"showingNum\" count={numShowing} value={total} >\r\n      Showing <b>{{ count: numShowing }}</b> out of {{ value: total }} Weapons\r\n    </Trans>\r\n  </Typography>\r\n}\r\n","import { useCallback, useState } from \"react\"\r\n\r\nexport default function useForceUpdate(): [object, () => void] {\r\n  const [stateDirty, update] = useState({})\r\n  const forceUpdateHook = useCallback(() => update({}), [])\r\n  return [stateDirty, forceUpdateHook]\r\n}","import { useMediaQuery, useTheme } from \"@mui/material\";\r\n\r\nexport default function useMediaQueryUp() {\r\n  const theme = useTheme();\r\n  const sm = useMediaQuery(theme.breakpoints.up('sm'));\r\n  const md = useMediaQuery(theme.breakpoints.up('md'));\r\n  const lg = useMediaQuery(theme.breakpoints.up('lg'));\r\n  const xl = useMediaQuery(theme.breakpoints.up('xl'));\r\n  if (xl) return \"xl\"\r\n  if (lg) return \"lg\"\r\n  if (md) return \"md\"\r\n  if (sm) return \"sm\"\r\n  return \"xs\"\r\n}\r\n","import { useContext, useEffect, useState } from \"react\";\r\nimport { DatabaseContext } from \"../Database/Database\";\r\n\r\nexport default function useWeapon(weaponID: string | undefined = \"\") {\r\n  const { database } = useContext(DatabaseContext)\r\n  const [weapon, setWeapon] = useState(database.weapons.get(weaponID))\r\n  useEffect(() => setWeapon(database.weapons.get(weaponID)), [database, weaponID])\r\n  useEffect(() =>\r\n    weaponID ? database.weapons.follow(weaponID, (k, r, v) => r === \"update\" && setWeapon(v)) : undefined,\r\n    [weaponID, setWeapon, database])\r\n  return weapon\r\n}\r\n","import CharacterSheet from \"../Data/Characters/CharacterSheet\";\r\nimport { ArtCharDatabase } from \"../Database/Database\";\r\nimport i18n from \"../i18n\";\r\nimport { initCharMeta } from \"../stateInit\";\r\nimport { CharacterKey } from \"../Types/consts\";\r\nimport { FilterConfigs, SortConfigs } from \"./SortByFilters\";\r\nexport const characterSortKeys = [\"new\", \"level\", \"rarity\", \"name\",] as const\r\nexport type CharacterSortKey = typeof characterSortKeys[number]\r\n\r\nexport function characterSortConfigs(database: ArtCharDatabase, characterSheets: Record<CharacterKey, CharacterSheet>): SortConfigs<CharacterSortKey, CharacterKey> {\r\n  return {\r\n    new: {\r\n      getValue: (ck) => database.chars.get(ck as CharacterKey) ? 0 : 1,\r\n      tieBreaker: \"name\"\r\n    },\r\n    name: {\r\n      getValue: (ck) => i18n.t(`charNames_gen\"${ck}`).toString(),\r\n    },\r\n    level: {\r\n      getValue: (ck) => {\r\n        const char = database.chars.get(ck as CharacterKey)\r\n        if (!char) return 0\r\n        return char.level * char.ascension\r\n      },\r\n      tieBreaker: \"rarity\"\r\n    },\r\n    rarity: {\r\n      getValue: (ck) => characterSheets?.[ck]?.rarity,\r\n      tieBreaker: \"level\"\r\n    }\r\n  }\r\n}\r\n\r\nexport type CharacterFilterConfigs = FilterConfigs<\"element\" | \"weaponType\" | \"favorite\" | \"name\", CharacterKey>\r\nexport function characterFilterConfigs(database: ArtCharDatabase, characterSheets: Record<CharacterKey, CharacterSheet>): CharacterFilterConfigs {\r\n  return {\r\n    element: (ck, filter) => filter.includes(characterSheets?.[ck]?.elementKey) ||\r\n      (ck === \"Traveler\" && !database.chars.get(ck as CharacterKey) && filter.some(fe => characterSheets.Traveler.elementKeys.includes(fe))) ||\r\n      (ck === \"Traveler\" && filter.includes(database.chars.get(ck as CharacterKey)?.elementKey)),\r\n    weaponType: (ck, filter) => filter.includes(characterSheets?.[ck]?.weaponTypeKey),\r\n    favorite: (ck, filter) =>\r\n      !filter || (filter === (database.states.getWithInit(`charMeta_${ck}`, initCharMeta).favorite ? \"yes\" : \"no\")),\r\n    name: (ck, filter) => !filter || (i18n.t(`charNames_gen:${ck}`).toLowerCase().includes(filter.toLowerCase()))\r\n  }\r\n}\r\n","import { toggleArr } from \"./Util\"\r\n\r\nexport function handleMultiSelect<T>(allKeys: T[]) {\r\n  return (arr: T[], v: T): T[] => {\r\n    const len = arr.length\r\n    if (len === allKeys.length) return [v]\r\n    if (len === 1 && arr[0] === v) return [...allKeys]\r\n    return [...new Set(toggleArr(arr, v))]\r\n  }\r\n}\r\n","type SortConfig<T> = {\r\n  getValue: (id: T) => number | string\r\n  tieBreaker?: string\r\n}\r\nexport type SortConfigs<Keys extends string, T> = Record<Keys, SortConfig<T>>\r\n\r\nexport function sortFunction<Keys extends string, T>(sortby: string, ascending: boolean, configs: SortConfigs<Keys, T>) {\r\n  function Sort(a: T, b: T, ascending: boolean, config: SortConfig<T>) {\r\n    const aV = config.getValue(a)\r\n    const bV = config.getValue(b)\r\n    let diff = 0\r\n    if (typeof aV === \"string\" && typeof bV === \"string\")\r\n      diff = aV.localeCompare(bV)\r\n    else\r\n      diff = ((bV as number) - (aV as number))\r\n    return (ascending ? -1 : 1) * diff\r\n  }\r\n  return (a: T, b: T) => {\r\n    if (!configs[sortby]) return 0\r\n    const filterOption = configs[sortby]\r\n    let diff = Sort(a, b, ascending, filterOption)\r\n    if (!diff && filterOption.tieBreaker && configs[filterOption.tieBreaker])\r\n      diff = Sort(a, b, ascending, configs[filterOption.tieBreaker])\r\n    return diff\r\n  }\r\n}\r\n\r\ntype FilterConfig<T> = (obj: T, filter: any) => boolean\r\nexport type FilterConfigs<Keys extends string, T> = Record<Keys, FilterConfig<T>>\r\nexport function filterFunction<Keys extends string, T>(filterOptions: Record<Keys, any>, filterConfigs: FilterConfigs<Keys, T>) {\r\n  return (obj: T) => Object.entries(filterOptions).every(([optionKey, optionVal]) => filterConfigs[optionKey as any] && filterConfigs[optionKey as any](obj, optionVal))\r\n}\r\n","import { WeaponKey } from \"../Types/consts\";\r\nimport { ICachedWeapon } from \"../Types/weapon\";\r\nimport WeaponSheet from \"../Data/Weapons/WeaponSheet\";\r\nimport { FilterConfigs, SortConfigs } from \"./SortByFilters\";\r\nimport i18n from \"../i18n\";\r\nexport const weaponSortKeys = [\"level\", \"rarity\"]\r\nexport type WeaponSortKey = typeof weaponSortKeys[number]\r\n\r\nexport function weaponSortConfigs(weaponSheets: Record<WeaponKey, WeaponSheet>): SortConfigs<WeaponSortKey, ICachedWeapon> {\r\n  return {\r\n    level: {\r\n      getValue: wp => wp.level * wp.ascension ?? 0,\r\n      tieBreaker: \"rarity\"\r\n    },\r\n    rarity: {\r\n      getValue: wp => weaponSheets?.[wp.key]?.rarity,\r\n      tieBreaker: \"level\"\r\n    }\r\n  }\r\n}\r\nexport function weaponFilterConfigs(weaponSheets: Record<WeaponKey, WeaponSheet>): FilterConfigs<\"rarity\" | \"weaponType\" | \"name\", ICachedWeapon> {\r\n  return {\r\n    rarity: (wp, filter) => filter.includes(weaponSheets?.[wp.key]?.rarity),\r\n    weaponType: (wp, filter) => filter.includes(weaponSheets?.[wp.key]?.weaponType),\r\n    // TODO: Add types to this. filter may or may not be an array?\r\n    name: (wp, filter) => i18n.t(`weaponNames_gen:${wp.key}`).toLowerCase().includes(filter.toLowerCase()),\r\n  }\r\n}\r\n","import { allSubstatKeys } from \"./Types/artifact\"\r\n\r\nexport function initGlobalSettings() {\r\n  return { tcMode: false }\r\n}\r\n\r\nexport function initCharMeta() {\r\n  return {\r\n    rvFilter: [...allSubstatKeys],\r\n    favorite: false\r\n  }\r\n}\r\n"],"names":["CharacterAutocomplete","value","onChange","defaultText","defaultIcon","placeholderText","labelText","showDefault","showInventory","showEquipped","filter","disable","props","t","useTranslation","theme","useTheme","database","useContext","DatabaseContext","characterSheets","usePromise","CharacterSheet","filterConfigs","useMemo","characterFilterConfigs","characterKeys","chars","keys","ck","sort","textForValue","useCallback","imageForValue","icon","faUserShield","src","thumbImgSide","sx","pr","characterOptions","base","push","label","faves","filterFunction","element","allElements","weaponType","allWeaponTypeKeys","favorite","name","map","characterKey","nonFaves","concat","charOptions","autoHighlight","options","clearIcon","undefined","getOptionLabel","option","event","newValue","reason","type","isOptionEqualToValue","getOptionDisabled","renderInput","placeholder","startAdornment","hasValue","renderOption","states","getWithInit","initCharMeta","image","text","Suspense","fallback","variant","width","noWrap","isSelected","addlElement","display","flexGrow","ml","mr","height","LocationName","location","characterSheet","component","nameWIthIcon","verticalAlign","ThumbSide","styled","lineHeight","marginTop","spacing","marginLeft","marginRight","marginBottom","ConditionalWrapper","condition","wrapper","falseWrapper","children","MenuItemWithImage","primaryTypographyProps","style","fontWeight","typography","fontWeightMedium","fontWeightRegular","SolidColoredTextField","InputProps","color","hiddenLabel","InputLabelProps","palette","primary","backgroundColor","success","main","paddingTop","paddingBottom","light","dark","border","SortByButton","sortKeys","ascending","onChangeAsc","alignItems","gap","i18nKey","title","key","selected","disabled","onClick","startIcon","faSortAmountDownAlt","faSortAmountUp","className","StarIcon","faStar","StarsDisplay","stars","colored","Array","_","i","weaponTypeHandler","handleMultiSelect","WeaponToggle","exclusive","wt","Assets","size","WeaponSelectionModal","show","ascension","onHide","onSelect","weaponTypeFilter","weaponSheets","WeaponSheet","useState","weaponFilter","setWeaponfilter","useEffect","searchTerm","setSearchTerm","deferredSearchTerm","useDeferredValue","weaponIdList","allWeaponKeys","wKey","includes","toLowerCase","a","b","rarity","open","onClose","py","container","item","autoFocus","e","target","weaponKey","weaponSheet","lg","md","getImg","px","large","WeaponCard","weaponId","onEdit","onDelete","canEquip","extraButtons","weapon","useWeapon","cs","weaponTypeKey","wrapperFunc","falseWrapperFunc","equipOnChar","charKey","weapons","set","UIData","computeUIData","data","dataObjForWeapon","level","refinement","id","lock","get","input","stats","x","img","minHeight","flexDirection","justifyContent","position","pt","right","bottom","zIndex","mb","fontSize","textAlign","borderRadius","ascensionMaxLevel","top","float","node","info","displayVal","valueString","unit","StatIcon","KeyMap","p","v","disableClearable","placement","arrow","faEdit","faTrashAlt","WeaponEditor","lazy","columns","xs","sm","xl","numToShowMap","initialState","editWeaponId","sortType","weaponSortKeys","allRarities","PageWeapon","useDBState","state","stateDispatch","newWeaponModalShow","setnewWeaponModalShow","useForceUpdate","dbDirty","forceUpdate","invScrollRef","useRef","pageIndex","setPageIndex","ReactGA","hitType","page","followAny","k","r","brPt","useMediaQueryUp","maxNumToDisplay","deleteWeapon","window","confirm","remove","editWeapon","newWeapon","new","initialWeapon","sortConfigs","weaponSortConfigs","weaponFilterConfigs","values","totalWeaponNum","length","sortFunction","numPages","Math","ceil","currentPageIndex","clamp","weaponIdsToShow","slice","totalShowing","setPage","current","scrollIntoView","behavior","resetEditWeapon","my","footer","ref","pb","newVal","star","count","ShowingWeapon","numShowing","total","faPlus","stateDirty","update","useMediaQuery","breakpoints","up","weaponID","setWeapon","follow","characterSortKeys","characterSortConfigs","getValue","tieBreaker","i18n","toString","char","elementKey","some","fe","Traveler","elementKeys","allKeys","arr","len","Set","toggleArr","sortby","configs","Sort","config","aV","bV","localeCompare","filterOption","diff","filterOptions","obj","Object","entries","every","optionKey","optionVal","wp","initGlobalSettings","tcMode","rvFilter","allSubstatKeys"],"sourceRoot":""}