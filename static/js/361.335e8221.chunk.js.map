{"version":3,"file":"static/js/361.335e8221.chunk.js","mappings":"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","sources":["Components/Weapon/WeaponSelectionModal.tsx"],"sourcesContent":["import { Box, CardActionArea, CardContent, Divider, Grid, TextField, Typography } from \"@mui/material\"\r\nimport { ChangeEvent, useDeferredValue, useEffect, useState } from \"react\"\r\nimport { useTranslation } from \"react-i18next\"\r\nimport Assets from \"../../Assets/Assets\"\r\nimport WeaponSheet from \"../../Data/Weapons/WeaponSheet\"\r\nimport usePromise from \"../../ReactHooks/usePromise\"\r\nimport { allWeaponKeys, allWeaponTypeKeys, WeaponKey, WeaponTypeKey } from \"../../Types/consts\"\r\nimport CardDark from \"../Card/CardDark\"\r\nimport CardLight from \"../Card/CardLight\"\r\nimport CloseButton from \"../CloseButton\"\r\nimport ImgIcon from \"../Image/ImgIcon\"\r\nimport ModalWrapper from \"../ModalWrapper\"\r\nimport { StarsDisplay } from \"../StarDisplay\"\r\nimport WeaponToggle from \"../ToggleButton/WeaponToggle\"\r\n\r\ntype WeaponSelectionModalProps = {\r\n  show: boolean,\r\n  ascension?: number,\r\n  onHide: () => void,\r\n  onSelect: (wKey: WeaponKey) => void,\r\n  filter?: (sheet: WeaponSheet) => boolean,\r\n  weaponTypeFilter?: WeaponTypeKey,\r\n}\r\n\r\nexport default function WeaponSelectionModal({ show, ascension = 0, onHide, onSelect, filter = () => true, weaponTypeFilter }: WeaponSelectionModalProps) {\r\n  const { t } = useTranslation([\"page_weapon\", \"weaponNames_gen\"])\r\n  const weaponSheets = usePromise(() => WeaponSheet.getAll, [])\r\n  const [weaponFilter, setWeaponfilter] = useState<WeaponTypeKey[]>(weaponTypeFilter ? [weaponTypeFilter] : [...allWeaponTypeKeys])\r\n\r\n  useEffect(() => weaponTypeFilter && setWeaponfilter([weaponTypeFilter]), [weaponTypeFilter])\r\n\r\n  const [searchTerm, setSearchTerm] = useState(\"\")\r\n  const deferredSearchTerm = useDeferredValue(searchTerm)\r\n\r\n  const weaponIdList = !weaponSheets ? [] : allWeaponKeys.filter(wKey => filter(weaponSheets(wKey)))\r\n    .filter(wKey => weaponFilter.includes(weaponSheets(wKey).weaponType))\r\n    .filter(wKey => !deferredSearchTerm || t(`weaponNames_gen:${wKey}`).toLowerCase().includes(deferredSearchTerm.toLowerCase()))\r\n    .sort((a, b) => weaponSheets(b).rarity - weaponSheets(a).rarity)\r\n\r\n  if (!weaponSheets) return null\r\n\r\n  return <ModalWrapper open={show} onClose={onHide}>\r\n    <CardDark>\r\n      <CardContent sx={{ py: 1 }}>\r\n        <Grid container spacing={1}>\r\n          <Grid item>\r\n            <WeaponToggle value={weaponFilter} onChange={setWeaponfilter} disabled={!!weaponTypeFilter} size=\"small\" />\r\n          </Grid >\r\n          <Grid item flexGrow={1}>\r\n            <TextField\r\n              autoFocus\r\n              size=\"small\"\r\n              value={searchTerm}\r\n              onChange={(e: ChangeEvent<HTMLTextAreaElement>) => setSearchTerm(e.target.value)}\r\n              label={t(\"weaponName\")}\r\n              sx={{ height: \"100%\" }}\r\n              InputProps={{\r\n                sx: { height: \"100%\" }\r\n              }}\r\n            />\r\n          </Grid>\r\n          <Grid item>\r\n            <CloseButton onClick={onHide} />\r\n          </Grid >\r\n        </Grid>\r\n      </CardContent>\r\n      <Divider />\r\n      <CardContent><Grid container spacing={1}>\r\n        {weaponIdList.map(weaponKey => {\r\n          const weaponSheet = weaponSheets(weaponKey)\r\n          return <Grid item key={weaponKey} lg={3} md={4}>\r\n            <CardLight sx={{ height: \"100%\" }} >\r\n              <CardActionArea onClick={() => { onHide(); onSelect(weaponKey) }} sx={{ display: \"flex\" }}>\r\n                <Box component=\"img\" src={weaponSheet.getImg(ascension)} sx={{ width: 100, height: \"auto\" }} className={` grad-${weaponSheet.rarity}star`} />\r\n                <Box sx={{ flexGrow: 1, px: 1 }}>\r\n                  <Typography variant=\"subtitle1\">{weaponSheet.name}</Typography>\r\n                  <Typography><ImgIcon src={Assets.weaponTypes?.[weaponSheet.weaponType]} /> <StarsDisplay stars={weaponSheet.rarity} colored /></Typography>\r\n                </Box>\r\n              </CardActionArea>\r\n            </CardLight>\r\n          </Grid>\r\n        })}\r\n      </Grid></CardContent>\r\n      <Divider />\r\n      <CardContent sx={{ py: 1 }}>\r\n        <CloseButton large onClick={onHide} />\r\n      </CardContent>\r\n    </CardDark>\r\n  </ModalWrapper>\r\n}\r\n"],"names":["WeaponSelectionModal","show","ascension","onHide","onSelect","filter","weaponTypeFilter","t","useTranslation","weaponSheets","usePromise","WeaponSheet","useState","allWeaponTypeKeys","weaponFilter","setWeaponfilter","useEffect","searchTerm","setSearchTerm","deferredSearchTerm","useDeferredValue","weaponIdList","allWeaponKeys","wKey","includes","weaponType","toLowerCase","sort","a","b","rarity","open","onClose","sx","py","container","spacing","item","value","onChange","disabled","size","flexGrow","autoFocus","e","target","label","height","InputProps","onClick","map","weaponKey","weaponSheet","lg","md","display","component","src","getImg","width","className","px","variant","name","Assets","stars","colored","large"],"sourceRoot":""}